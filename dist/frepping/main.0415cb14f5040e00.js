"use strict";(self.webpackChunkfrepping=self.webpackChunkfrepping||[]).push([[792],{756:()=>{function Wt(n){return"function"==typeof n}function Rl(n){const t=n(i=>{Error.call(i),i.stack=(new Error).stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}const Xd=Rl(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((i,r)=>`${r+1}) ${i.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t});function Nl(n,e){if(n){const t=n.indexOf(e);0<=t&&n.splice(t,1)}}class Ni{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;const{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(const o of t)o.remove(this);else t.remove(this);const{initialTeardown:i}=this;if(Wt(i))try{i()}catch(o){e=o instanceof Xd?o.errors:[o]}const{_finalizers:r}=this;if(r){this._finalizers=null;for(const o of r)try{pM(o)}catch(s){e=e??[],s instanceof Xd?e=[...e,...s.errors]:e.push(s)}}if(e)throw new Xd(e)}}add(e){var t;if(e&&e!==this)if(this.closed)pM(e);else{if(e instanceof Ni){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(t=this._finalizers)&&void 0!==t?t:[]).push(e)}}_hasParent(e){const{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){const{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){const{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&Nl(t,e)}remove(e){const{_finalizers:t}=this;t&&Nl(t,e),e instanceof Ni&&e._removeParent(this)}}Ni.EMPTY=(()=>{const n=new Ni;return n.closed=!0,n})();const fM=Ni.EMPTY;function hM(n){return n instanceof Ni||n&&"closed"in n&&Wt(n.remove)&&Wt(n.add)&&Wt(n.unsubscribe)}function pM(n){Wt(n)?n():n.unsubscribe()}const Ts={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},Yd={setTimeout(n,e,...t){const{delegate:i}=Yd;return i?.setTimeout?i.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){const{delegate:e}=Yd;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function gM(n){Yd.setTimeout(()=>{const{onUnhandledError:e}=Ts;if(!e)throw n;e(n)})}function Gg(){}const cR=Wg("C",void 0,void 0);function Wg(n,e,t){return{kind:n,value:e,error:t}}let As=null;function Zd(n){if(Ts.useDeprecatedSynchronousErrorHandling){const e=!As;if(e&&(As={errorThrown:!1,error:null}),n(),e){const{errorThrown:t,error:i}=As;if(As=null,t)throw i}}else n()}class jg extends Ni{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,hM(e)&&e.add(this)):this.destination=gR}static create(e,t,i){return new Ll(e,t,i)}next(e){this.isStopped?qg(function uR(n){return Wg("N",n,void 0)}(e),this):this._next(e)}error(e){this.isStopped?qg(function lR(n){return Wg("E",void 0,n)}(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?qg(cR,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const fR=Function.prototype.bind;function $g(n,e){return fR.call(n,e)}class hR{constructor(e){this.partialObserver=e}next(e){const{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(i){Kd(i)}}error(e){const{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(i){Kd(i)}else Kd(e)}complete(){const{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){Kd(t)}}}class Ll extends jg{constructor(e,t,i){let r;if(super(),Wt(e)||!e)r={next:e??void 0,error:t??void 0,complete:i??void 0};else{let o;this&&Ts.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),r={next:e.next&&$g(e.next,o),error:e.error&&$g(e.error,o),complete:e.complete&&$g(e.complete,o)}):r=e}this.destination=new hR(r)}}function Kd(n){Ts.useDeprecatedSynchronousErrorHandling?function dR(n){Ts.useDeprecatedSynchronousErrorHandling&&As&&(As.errorThrown=!0,As.error=n)}(n):gM(n)}function qg(n,e){const{onStoppedNotification:t}=Ts;t&&Yd.setTimeout(()=>t(n,e))}const gR={closed:!0,next:Gg,error:function pR(n){throw n},complete:Gg},Xg="function"==typeof Symbol&&Symbol.observable||"@@observable";function Wo(n){return n}function mM(n){return 0===n.length?Wo:1===n.length?n[0]:function(t){return n.reduce((i,r)=>r(i),t)}}let Pn=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){const i=new n;return i.source=this,i.operator=t,i}subscribe(t,i,r){const o=function vR(n){return n&&n instanceof jg||function _R(n){return n&&Wt(n.next)&&Wt(n.error)&&Wt(n.complete)}(n)&&hM(n)}(t)?t:new Ll(t,i,r);return Zd(()=>{const{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(i){t.error(i)}}forEach(t,i){return new(i=_M(i))((r,o)=>{const s=new Ll({next:a=>{try{t(a)}catch(c){o(c),s.unsubscribe()}},error:o,complete:r});this.subscribe(s)})}_subscribe(t){var i;return null===(i=this.source)||void 0===i?void 0:i.subscribe(t)}[Xg](){return this}pipe(...t){return mM(t)(this)}toPromise(t){return new(t=_M(t))((i,r)=>{let o;this.subscribe(s=>o=s,s=>r(s),()=>i(o))})}}return n.create=e=>new n(e),n})();function _M(n){var e;return null!==(e=n??Ts.Promise)&&void 0!==e?e:Promise}const yR=Rl(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let yr=(()=>{class n extends Pn{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){const i=new vM(this,this);return i.operator=t,i}_throwIfClosed(){if(this.closed)throw new yR}next(t){Zd(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const i of this.currentObservers)i.next(t)}})}error(t){Zd(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;const{observers:i}=this;for(;i.length;)i.shift().error(t)}})}complete(){Zd(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return(null===(t=this.observers)||void 0===t?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){const{hasError:i,isStopped:r,observers:o}=this;return i||r?fM:(this.currentObservers=null,o.push(t),new Ni(()=>{this.currentObservers=null,Nl(o,t)}))}_checkFinalizedStatuses(t){const{hasError:i,thrownError:r,isStopped:o}=this;i?t.error(r):o&&t.complete()}asObservable(){const t=new Pn;return t.source=this,t}}return n.create=(e,t)=>new vM(e,t),n})();class vM extends yr{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,i;null===(i=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===i||i.call(t,e)}error(e){var t,i;null===(i=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===i||i.call(t,e)}complete(){var e,t;null===(t=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===t||t.call(e)}_subscribe(e){var t,i;return null!==(i=null===(t=this.source)||void 0===t?void 0:t.subscribe(e))&&void 0!==i?i:fM}}function yM(n){return Wt(n?.lift)}function Nn(n){return e=>{if(yM(e))return e.lift(function(t){try{return n(t,this)}catch(i){this.error(i)}});throw new TypeError("Unable to lift unknown Observable type")}}function Tn(n,e,t,i,r){return new xR(n,e,t,i,r)}class xR extends jg{constructor(e,t,i,r,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=t?function(a){try{t(a)}catch(c){e.error(c)}}:super._next,this._error=r?function(a){try{r(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=i?function(){try{i()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:t}=this;super.unsubscribe(),!t&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}}}function Xt(n,e){return Nn((t,i)=>{let r=0;t.subscribe(Tn(i,o=>{i.next(n.call(e,o,r++))}))})}function jo(n){return this instanceof jo?(this.v=n,this):new jo(n)}function CM(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,e=n[Symbol.asyncIterator];return e?e.call(n):(n=function Jg(n){var e="function"==typeof Symbol&&Symbol.iterator,t=e&&n[e],i=0;if(t)return t.call(n);if(n&&"number"==typeof n.length)return{next:function(){return n&&i>=n.length&&(n=void 0),{value:n&&n[i++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(n),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(o){t[o]=n[o]&&function(s){return new Promise(function(a,c){!function r(o,s,a,c){Promise.resolve(c).then(function(l){o({value:l,done:a})},s)}(a,c,(s=n[o](s)).done,s.value)})}}}"function"==typeof SuppressedError&&SuppressedError;const wM=n=>n&&"number"==typeof n.length&&"function"!=typeof n;function SM(n){return Wt(n?.then)}function EM(n){return Wt(n[Xg])}function PM(n){return Symbol.asyncIterator&&Wt(n?.[Symbol.asyncIterator])}function TM(n){return new TypeError(`You provided ${null!==n&&"object"==typeof n?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const AM=function qR(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function OM(n){return Wt(n?.[AM])}function DM(n){return function bM(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=t.apply(n,e||[]),o=[];return r=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",function s(h){return function(p){return Promise.resolve(p).then(h,d)}}),r[Symbol.asyncIterator]=function(){return this},r;function a(h,p){i[h]&&(r[h]=function(_){return new Promise(function(m,g){o.push([h,_,m,g])>1||c(h,_)})},p&&(r[h]=p(r[h])))}function c(h,p){try{!function l(h){h.value instanceof jo?Promise.resolve(h.value.v).then(u,d):f(o[0][2],h)}(i[h](p))}catch(_){f(o[0][3],_)}}function u(h){c("next",h)}function d(h){c("throw",h)}function f(h,p){h(p),o.shift(),o.length&&c(o[0][0],o[0][1])}}(this,arguments,function*(){const t=n.getReader();try{for(;;){const{value:i,done:r}=yield jo(t.read());if(r)return yield jo(void 0);yield yield jo(i)}}finally{t.releaseLock()}})}function IM(n){return Wt(n?.getReader)}function Li(n){if(n instanceof Pn)return n;if(null!=n){if(EM(n))return function XR(n){return new Pn(e=>{const t=n[Xg]();if(Wt(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(n);if(wM(n))return function YR(n){return new Pn(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}(n);if(SM(n))return function ZR(n){return new Pn(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,gM)})}(n);if(PM(n))return RM(n);if(OM(n))return function KR(n){return new Pn(e=>{for(const t of n)if(e.next(t),e.closed)return;e.complete()})}(n);if(IM(n))return function JR(n){return RM(DM(n))}(n)}throw TM(n)}function RM(n){return new Pn(e=>{(function QR(n,e){var t,i,r,o;return function xM(n,e,t,i){return new(t||(t=Promise))(function(o,s){function a(u){try{l(i.next(u))}catch(d){s(d)}}function c(u){try{l(i.throw(u))}catch(d){s(d)}}function l(u){u.done?o(u.value):function r(o){return o instanceof t?o:new t(function(s){s(o)})}(u.value).then(a,c)}l((i=i.apply(n,e||[])).next())})}(this,void 0,void 0,function*(){try{for(t=CM(n);!(i=yield t.next()).done;)if(e.next(i.value),e.closed)return}catch(s){r={error:s}}finally{try{i&&!i.done&&(o=t.return)&&(yield o.call(t))}finally{if(r)throw r.error}}e.complete()})})(n,e).catch(t=>e.error(t))})}function lo(n,e,t,i=0,r=!1){const o=e.schedule(function(){t(),r?n.add(this.schedule(null,i)):this.unsubscribe()},i);if(n.add(o),!r)return o}function $n(n,e,t=1/0){return Wt(e)?$n((i,r)=>Xt((o,s)=>e(i,o,r,s))(Li(n(i,r))),t):("number"==typeof e&&(t=e),Nn((i,r)=>function e3(n,e,t,i,r,o,s,a){const c=[];let l=0,u=0,d=!1;const f=()=>{d&&!c.length&&!l&&e.complete()},h=_=>l<i?p(_):c.push(_),p=_=>{o&&e.next(_),l++;let m=!1;Li(t(_,u++)).subscribe(Tn(e,g=>{r?.(g),o?h(g):e.next(g)},()=>{m=!0},void 0,()=>{if(m)try{for(l--;c.length&&l<i;){const g=c.shift();s?lo(e,s,()=>p(g)):p(g)}f()}catch(g){e.error(g)}}))};return n.subscribe(Tn(e,h,()=>{d=!0,f()})),()=>{a?.()}}(i,r,n,t)))}function Da(n=1/0){return $n(Wo,n)}const Lr=new Pn(n=>n.complete());function em(n){return n[n.length-1]}function NM(n){return Wt(em(n))?n.pop():void 0}function kl(n){return function n3(n){return n&&Wt(n.schedule)}(em(n))?n.pop():void 0}function LM(n,e=0){return Nn((t,i)=>{t.subscribe(Tn(i,r=>lo(i,n,()=>i.next(r),e),()=>lo(i,n,()=>i.complete(),e),r=>lo(i,n,()=>i.error(r),e)))})}function kM(n,e=0){return Nn((t,i)=>{i.add(n.schedule(()=>t.subscribe(i),e))})}function FM(n,e){if(!n)throw new Error("Iterable cannot be null");return new Pn(t=>{lo(t,e,()=>{const i=n[Symbol.asyncIterator]();lo(t,e,()=>{i.next().then(r=>{r.done?t.complete():t.next(r.value)})},0,!0)})})}function zn(n,e){return e?function l3(n,e){if(null!=n){if(EM(n))return function r3(n,e){return Li(n).pipe(kM(e),LM(e))}(n,e);if(wM(n))return function s3(n,e){return new Pn(t=>{let i=0;return e.schedule(function(){i===n.length?t.complete():(t.next(n[i++]),t.closed||this.schedule())})})}(n,e);if(SM(n))return function o3(n,e){return Li(n).pipe(kM(e),LM(e))}(n,e);if(PM(n))return FM(n,e);if(OM(n))return function a3(n,e){return new Pn(t=>{let i;return lo(t,e,()=>{i=n[AM](),lo(t,e,()=>{let r,o;try{({value:r,done:o}=i.next())}catch(s){return void t.error(s)}o?t.complete():t.next(r)},0,!0)}),()=>Wt(i?.return)&&i.return()})}(n,e);if(IM(n))return function c3(n,e){return FM(DM(n),e)}(n,e)}throw TM(n)}(n,e):Li(n)}class ki extends yr{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:i}=this;if(e)throw t;return this._throwIfClosed(),i}next(e){super.next(this._value=e)}}function tt(...n){return zn(n,kl(n))}function UM(n={}){const{connector:e=(()=>new yr),resetOnError:t=!0,resetOnComplete:i=!0,resetOnRefCountZero:r=!0}=n;return o=>{let s,a,c,l=0,u=!1,d=!1;const f=()=>{a?.unsubscribe(),a=void 0},h=()=>{f(),s=c=void 0,u=d=!1},p=()=>{const _=s;h(),_?.unsubscribe()};return Nn((_,m)=>{l++,!d&&!u&&f();const g=c=c??e();m.add(()=>{l--,0===l&&!d&&!u&&(a=tm(p,r))}),g.subscribe(m),!s&&l>0&&(s=new Ll({next:v=>g.next(v),error:v=>{d=!0,f(),a=tm(h,t,v),g.error(v)},complete:()=>{u=!0,f(),a=tm(h,i),g.complete()}}),Li(_).subscribe(s))})(o)}}function tm(n,e,...t){if(!0===e)return void n();if(!1===e)return;const i=new Ll({next:()=>{i.unsubscribe(),n()}});return Li(e(...t)).subscribe(i)}function kr(n,e){return Nn((t,i)=>{let r=null,o=0,s=!1;const a=()=>s&&!r&&i.complete();t.subscribe(Tn(i,c=>{r?.unsubscribe();let l=0;const u=o++;Li(n(c,u)).subscribe(r=Tn(i,d=>i.next(e?e(c,d,u,l++):d),()=>{r=null,a()}))},()=>{s=!0,a()}))})}function f3(n,e){return n===e}function Vt(n){for(let e in n)if(n[e]===Vt)return e;throw Error("Could not find renamed property on target object.")}function Jd(n,e){for(const t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function Ln(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(Ln).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const e=n.toString();if(null==e)return""+e;const t=e.indexOf("\n");return-1===t?e:e.substring(0,t)}function nm(n,e){return null==n||""===n?null===e?"":e:null==e||""===e?n:n+" "+e}const h3=Vt({__forward_ref__:Vt});function Zt(n){return n.__forward_ref__=Zt,n.toString=function(){return Ln(this())},n}function Qe(n){return im(n)?n():n}function im(n){return"function"==typeof n&&n.hasOwnProperty(h3)&&n.__forward_ref__===Zt}function rm(n){return n&&!!n.\u0275providers}const BM="https://g.co/ng/security#xss";class ce extends Error{constructor(e,t){super(function Qd(n,e){return`NG0${Math.abs(n)}${e?": "+e:""}`}(e,t)),this.code=e}}function it(n){return"string"==typeof n?n:null==n?"":String(n)}function om(n,e){throw new ce(-201,!1)}function Qi(n,e){null==n&&function Ye(n,e,t,i){throw new Error(`ASSERTION ERROR: ${n}`+(null==i?"":` [Expected=> ${t} ${i} ${e} <=Actual]`))}(e,n,null,"!=")}function We(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function er(n){return{providers:n.providers||[],imports:n.imports||[]}}function ef(n){return VM(n,nf)||VM(n,zM)}function VM(n,e){return n.hasOwnProperty(e)?n[e]:null}function tf(n){return n&&(n.hasOwnProperty(sm)||n.hasOwnProperty(M3))?n[sm]:null}const nf=Vt({\u0275prov:Vt}),sm=Vt({\u0275inj:Vt}),zM=Vt({ngInjectableDef:Vt}),M3=Vt({ngInjectorDef:Vt});var wt=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(wt||{});let am;function wi(n){const e=am;return am=n,e}function GM(n,e,t){const i=ef(n);return i&&"root"==i.providedIn?void 0===i.value?i.value=i.factory():i.value:t&wt.Optional?null:void 0!==e?e:void om(Ln(n))}const Kt=globalThis;class Ne{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.\u0275prov=We({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const Fl={},fm="__NG_DI_FLAG__",rf="ngTempTokenPath",w3=/\n/gm,jM="__source";let Ia;function $o(n){const e=Ia;return Ia=n,e}function P3(n,e=wt.Default){if(void 0===Ia)throw new ce(-203,!1);return null===Ia?GM(n,void 0,e):Ia.get(n,e&wt.Optional?null:void 0,e)}function $e(n,e=wt.Default){return(function HM(){return am}()||P3)(Qe(n),e)}function Ie(n,e=wt.Default){return $e(n,sf(e))}function sf(n){return typeof n>"u"||"number"==typeof n?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function hm(n){const e=[];for(let t=0;t<n.length;t++){const i=Qe(n[t]);if(Array.isArray(i)){if(0===i.length)throw new ce(900,!1);let r,o=wt.Default;for(let s=0;s<i.length;s++){const a=i[s],c=T3(a);"number"==typeof c?-1===c?r=a.token:o|=c:r=a}e.push($e(r,o))}else e.push($e(i))}return e}function Ul(n,e){return n[fm]=e,n.prototype[fm]=e,n}function T3(n){return n[fm]}function uo(n){return{toString:n}.toString()}var af=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(af||{}),xr=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(xr||{});const Fr={},Rt=[],cf=Vt({\u0275cmp:Vt}),pm=Vt({\u0275dir:Vt}),gm=Vt({\u0275pipe:Vt}),qM=Vt({\u0275mod:Vt}),fo=Vt({\u0275fac:Vt}),Bl=Vt({__NG_ELEMENT_ID__:Vt}),XM=Vt({__NG_ENV_ID__:Vt});function YM(n,e,t){let i=n.length;for(;;){const r=n.indexOf(e,t);if(-1===r)return r;if(0===r||n.charCodeAt(r-1)<=32){const o=e.length;if(r+o===i||n.charCodeAt(r+o)<=32)return r}t=r+1}}function mm(n,e,t){let i=0;for(;i<t.length;){const r=t[i];if("number"==typeof r){if(0!==r)break;i++;const o=t[i++],s=t[i++],a=t[i++];n.setAttribute(e,s,a,o)}else{const o=r,s=t[++i];KM(o)?n.setProperty(e,o,s):n.setAttribute(e,o,s),i++}}return i}function ZM(n){return 3===n||4===n||6===n}function KM(n){return 64===n.charCodeAt(0)}function Vl(n,e){if(null!==e&&0!==e.length)if(null===n||0===n.length)n=e.slice();else{let t=-1;for(let i=0;i<e.length;i++){const r=e[i];"number"==typeof r?t=r:0===t||JM(n,t,r,null,-1===t||2===t?e[++i]:null)}}return n}function JM(n,e,t,i,r){let o=0,s=n.length;if(-1===e)s=-1;else for(;o<n.length;){const a=n[o++];if("number"==typeof a){if(a===e){s=-1;break}if(a>e){s=o-1;break}}}for(;o<n.length;){const a=n[o];if("number"==typeof a)break;if(a===t){if(null===i)return void(null!==r&&(n[o+1]=r));if(i===n[o+1])return void(n[o+2]=r)}o++,null!==i&&o++,null!==r&&o++}-1!==s&&(n.splice(s,0,e),o=s+1),n.splice(o++,0,t),null!==i&&n.splice(o++,0,i),null!==r&&n.splice(o++,0,r)}const QM="ng-template";function D3(n,e,t){let i=0,r=!0;for(;i<n.length;){let o=n[i++];if("string"==typeof o&&r){const s=n[i++];if(t&&"class"===o&&-1!==YM(s.toLowerCase(),e,0))return!0}else{if(1===o){for(;i<n.length&&"string"==typeof(o=n[i++]);)if(o.toLowerCase()===e)return!0;return!1}"number"==typeof o&&(r=!1)}}return!1}function eb(n){return 4===n.type&&n.value!==QM}function I3(n,e,t){return e===(4!==n.type||t?n.value:QM)}function R3(n,e,t){let i=4;const r=n.attrs||[],o=function k3(n){for(let e=0;e<n.length;e++)if(ZM(n[e]))return e;return n.length}(r);let s=!1;for(let a=0;a<e.length;a++){const c=e[a];if("number"!=typeof c){if(!s)if(4&i){if(i=2|1&i,""!==c&&!I3(n,c,t)||""===c&&1===e.length){if(Mr(i))return!1;s=!0}}else{const l=8&i?c:e[++a];if(8&i&&null!==n.attrs){if(!D3(n.attrs,l,t)){if(Mr(i))return!1;s=!0}continue}const d=N3(8&i?"class":c,r,eb(n),t);if(-1===d){if(Mr(i))return!1;s=!0;continue}if(""!==l){let f;f=d>o?"":r[d+1].toLowerCase();const h=8&i?f:null;if(h&&-1!==YM(h,l,0)||2&i&&l!==f){if(Mr(i))return!1;s=!0}}}}else{if(!s&&!Mr(i)&&!Mr(c))return!1;if(s&&Mr(c))continue;s=!1,i=c|1&i}}return Mr(i)||s}function Mr(n){return 0==(1&n)}function N3(n,e,t,i){if(null===e)return-1;let r=0;if(i||!t){let o=!1;for(;r<e.length;){const s=e[r];if(s===n)return r;if(3===s||6===s)o=!0;else{if(1===s||2===s){let a=e[++r];for(;"string"==typeof a;)a=e[++r];continue}if(4===s)break;if(0===s){r+=4;continue}}r+=o?1:2}return-1}return function F3(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){const i=n[t];if("number"==typeof i)return-1;if(i===e)return t;t++}return-1}(e,n)}function tb(n,e,t=!1){for(let i=0;i<e.length;i++)if(R3(n,e[i],t))return!0;return!1}function nb(n,e){return n?":not("+e.trim()+")":e}function B3(n){let e=n[0],t=1,i=2,r="",o=!1;for(;t<n.length;){let s=n[t];if("string"==typeof s)if(2&i){const a=n[++t];r+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else 8&i?r+="."+s:4&i&&(r+=" "+s);else""!==r&&!Mr(s)&&(e+=nb(o,r),r=""),i=s,o=o||!Mr(i);t++}return""!==r&&(e+=nb(o,r)),e}function Ui(n){return uo(()=>{const e=rb(n),t={...e,decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===af.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||xr.Emulated,styles:n.styles||Rt,_:null,schemas:n.schemas||null,tView:null,id:""};ob(t);const i=n.dependencies;return t.directiveDefs=lf(i,!1),t.pipeDefs=lf(i,!0),t.id=function q3(n){let e=0;const t=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,n.consts,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery].join("|");for(const r of t)e=Math.imul(31,e)+r.charCodeAt(0)<<0;return e+=2147483648,"c"+e}(t),t})}function G3(n){return At(n)||qn(n)}function W3(n){return null!==n}function br(n){return uo(()=>({type:n.type,bootstrap:n.bootstrap||Rt,declarations:n.declarations||Rt,imports:n.imports||Rt,exports:n.exports||Rt,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function ib(n,e){if(null==n)return Fr;const t={};for(const i in n)if(n.hasOwnProperty(i)){let r=n[i],o=r;Array.isArray(r)&&(o=r[1],r=r[0]),t[r]=i,e&&(e[r]=o)}return t}function et(n){return uo(()=>{const e=rb(n);return ob(e),e})}function Si(n){return{type:n.type,name:n.name,factory:null,pure:!1!==n.pure,standalone:!0===n.standalone,onDestroy:n.type.prototype.ngOnDestroy||null}}function At(n){return n[cf]||null}function qn(n){return n[pm]||null}function ci(n){return n[gm]||null}function Bi(n,e){const t=n[qM]||null;if(!t&&!0===e)throw new Error(`Type ${Ln(n)} does not have '\u0275mod' property.`);return t}function rb(n){const e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:n.inputs||Fr,exportAs:n.exportAs||null,standalone:!0===n.standalone,signals:!0===n.signals,selectors:n.selectors||Rt,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:ib(n.inputs,e),outputs:ib(n.outputs)}}function ob(n){n.features?.forEach(e=>e(n))}function lf(n,e){if(!n)return null;const t=e?ci:G3;return()=>("function"==typeof n?n():n).map(i=>t(i)).filter(W3)}const hn=0,Se=1,dt=2,cn=3,Cr=4,zl=5,Qn=6,Na=7,xn=8,qo=9,La=10,rt=11,Hl=12,sb=13,ka=14,Mn=15,Gl=16,Fa=17,Ur=18,Wl=19,ab=20,Xo=21,ho=22,jl=23,$l=24,St=25,_m=1,cb=2,Br=7,Ua=9,Xn=11;function Ei(n){return Array.isArray(n)&&"object"==typeof n[_m]}function li(n){return Array.isArray(n)&&!0===n[_m]}function vm(n){return 0!=(4&n.flags)}function Ds(n){return n.componentOffset>-1}function df(n){return 1==(1&n.flags)}function wr(n){return!!n.template}function ym(n){return 0!=(512&n[dt])}function Is(n,e){return n.hasOwnProperty(fo)?n[fo]:null}let Yn=null,ff=!1;function tr(n){const e=Yn;return Yn=n,e}const db={version:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{}};function hb(n){if(!Xl(n)||n.dirty){if(!n.producerMustRecompute(n)&&!mb(n))return void(n.dirty=!1);n.producerRecomputeValue(n),n.dirty=!1}}function gb(n){n.dirty=!0,function pb(n){if(void 0===n.liveConsumerNode)return;const e=ff;ff=!0;try{for(const t of n.liveConsumerNode)t.dirty||gb(t)}finally{ff=e}}(n),n.consumerMarkedDirty?.(n)}function Mm(n){return n&&(n.nextProducerIndex=0),tr(n)}function bm(n,e){if(tr(e),n&&void 0!==n.producerNode&&void 0!==n.producerIndexOfThis&&void 0!==n.producerLastReadVersion){if(Xl(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)hf(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function mb(n){Ba(n);for(let e=0;e<n.producerNode.length;e++){const t=n.producerNode[e],i=n.producerLastReadVersion[e];if(i!==t.version||(hb(t),i!==t.version))return!0}return!1}function _b(n){if(Ba(n),Xl(n))for(let e=0;e<n.producerNode.length;e++)hf(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function hf(n,e){if(function yb(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}(n),Ba(n),1===n.liveConsumerNode.length)for(let i=0;i<n.producerNode.length;i++)hf(n.producerNode[i],n.producerIndexOfThis[i]);const t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){const i=n.liveConsumerIndexOfThis[e],r=n.liveConsumerNode[e];Ba(r),r.producerIndexOfThis[i]=e}}function Xl(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function Ba(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}let xb=null;const wb=()=>{},sN=(()=>({...db,consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:n=>{n.schedule(n.ref)},hasRun:!1,cleanupFn:wb}))();class aN{constructor(e,t,i){this.previousValue=e,this.currentValue=t,this.firstChange=i}isFirstChange(){return this.firstChange}}function nr(){return Sb}function Sb(n){return n.type.prototype.ngOnChanges&&(n.setInput=lN),cN}function cN(){const n=Pb(this),e=n?.current;if(e){const t=n.previous;if(t===Fr)n.previous=e;else for(let i in e)t[i]=e[i];n.current=null,this.ngOnChanges(e)}}function lN(n,e,t,i){const r=this.declaredInputs[t],o=Pb(n)||function uN(n,e){return n[Eb]=e}(n,{previous:Fr,current:null}),s=o.current||(o.current={}),a=o.previous,c=a[r];s[r]=new aN(c&&c.currentValue,e,a===Fr),n[i]=e}nr.ngInherit=!0;const Eb="__ngSimpleChanges__";function Pb(n){return n[Eb]||null}const Vr=function(n,e,t){};function Jt(n){for(;Array.isArray(n);)n=n[hn];return n}function pf(n,e){return Jt(e[n])}function Pi(n,e){return Jt(e[n.index])}function Ob(n,e){return n.data[e]}function Va(n,e){return n[e]}function Vi(n,e){const t=e[n];return Ei(t)?t:t[hn]}function Zo(n,e){return null==e?null:n[e]}function Db(n){n[Fa]=0}function mN(n){1024&n[dt]||(n[dt]|=1024,Rb(n,1))}function Ib(n){1024&n[dt]&&(n[dt]&=-1025,Rb(n,-1))}function Rb(n,e){let t=n[cn];if(null===t)return;t[zl]+=e;let i=t;for(t=t[cn];null!==t&&(1===e&&1===i[zl]||-1===e&&0===i[zl]);)t[zl]+=e,i=t,t=t[cn]}const Ze={lFrame:Wb(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function kb(){return Ze.bindingsEnabled}function re(){return Ze.lFrame.lView}function Ot(){return Ze.lFrame.tView}function Ue(n){return Ze.lFrame.contextLView=n,n[xn]}function Be(n){return Ze.lFrame.contextLView=null,n}function Zn(){let n=Fb();for(;null!==n&&64===n.type;)n=n.parent;return n}function Fb(){return Ze.lFrame.currentTNode}function zr(n,e){const t=Ze.lFrame;t.currentTNode=n,t.isParent=e}function Pm(){return Ze.lFrame.isParent}function Tm(){Ze.lFrame.isParent=!1}function ui(){const n=Ze.lFrame;let e=n.bindingRootIndex;return-1===e&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function Ha(){return Ze.lFrame.bindingIndex++}function go(n){const e=Ze.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function TN(n,e){const t=Ze.lFrame;t.bindingIndex=t.bindingRootIndex=n,Am(e)}function Am(n){Ze.lFrame.currentDirectiveIndex=n}function zb(){return Ze.lFrame.currentQueryIndex}function Dm(n){Ze.lFrame.currentQueryIndex=n}function ON(n){const e=n[Se];return 2===e.type?e.declTNode:1===e.type?n[Qn]:null}function Hb(n,e,t){if(t&wt.SkipSelf){let r=e,o=n;for(;!(r=r.parent,null!==r||t&wt.Host||(r=ON(o),null===r||(o=o[ka],10&r.type))););if(null===r)return!1;e=r,n=o}const i=Ze.lFrame=Gb();return i.currentTNode=e,i.lView=n,!0}function Im(n){const e=Gb(),t=n[Se];Ze.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function Gb(){const n=Ze.lFrame,e=null===n?null:n.child;return null===e?Wb(n):e}function Wb(n){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=e),e}function jb(){const n=Ze.lFrame;return Ze.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const $b=jb;function Rm(){const n=jb();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function di(){return Ze.lFrame.selectedIndex}function Rs(n){Ze.lFrame.selectedIndex=n}function un(){const n=Ze.lFrame;return Ob(n.tView,n.selectedIndex)}let Xb=!0;function gf(){return Xb}function Ko(n){Xb=n}function mf(n,e){for(let t=e.directiveStart,i=e.directiveEnd;t<i;t++){const o=n.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:u}=o;s&&(n.contentHooks??=[]).push(-t,s),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),c&&(n.viewHooks??=[]).push(-t,c),l&&((n.viewHooks??=[]).push(t,l),(n.viewCheckHooks??=[]).push(t,l)),null!=u&&(n.destroyHooks??=[]).push(t,u)}}function _f(n,e,t){Yb(n,e,3,t)}function vf(n,e,t,i){(3&n[dt])===t&&Yb(n,e,t,i)}function Nm(n,e){let t=n[dt];(3&t)===e&&(t&=8191,t+=1,n[dt]=t)}function Yb(n,e,t,i){const o=i??-1,s=e.length-1;let a=0;for(let c=void 0!==i?65535&n[Fa]:0;c<s;c++)if("number"==typeof e[c+1]){if(a=e[c],null!=i&&a>=i)break}else e[c]<0&&(n[Fa]+=65536),(a<o||-1==o)&&(UN(n,t,e,c),n[Fa]=(4294901760&n[Fa])+c+2),c++}function Zb(n,e){Vr(4,n,e);const t=tr(null);try{e.call(n)}finally{tr(t),Vr(5,n,e)}}function UN(n,e,t,i){const r=t[i]<0,o=t[i+1],a=n[r?-t[i]:t[i]];r?n[dt]>>13<n[Fa]>>16&&(3&n[dt])===e&&(n[dt]+=8192,Zb(a,o)):Zb(a,o)}const Ga=-1;class Zl{constructor(e,t,i){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=i}}function km(n){return n!==Ga}function Kl(n){return 32767&n}function Jl(n,e){let t=function HN(n){return n>>16}(n),i=e;for(;t>0;)i=i[ka],t--;return i}let Fm=!0;function yf(n){const e=Fm;return Fm=n,e}const Kb=255,Jb=5;let GN=0;const Hr={};function xf(n,e){const t=Qb(n,e);if(-1!==t)return t;const i=e[Se];i.firstCreatePass&&(n.injectorIndex=e.length,Um(i.data,n),Um(e,null),Um(i.blueprint,null));const r=Mf(n,e),o=n.injectorIndex;if(km(r)){const s=Kl(r),a=Jl(r,e),c=a[Se].data;for(let l=0;l<8;l++)e[o+l]=a[s+l]|c[s+l]}return e[o+8]=r,o}function Um(n,e){n.push(0,0,0,0,0,0,0,0,e)}function Qb(n,e){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===e[n.injectorIndex+8]?-1:n.injectorIndex}function Mf(n,e){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let t=0,i=null,r=e;for(;null!==r;){if(i=sC(r),null===i)return Ga;if(t++,r=r[ka],-1!==i.injectorIndex)return i.injectorIndex|t<<16}return Ga}function Bm(n,e,t){!function WN(n,e,t){let i;"string"==typeof t?i=t.charCodeAt(0)||0:t.hasOwnProperty(Bl)&&(i=t[Bl]),null==i&&(i=t[Bl]=GN++);const r=i&Kb;e.data[n+(r>>Jb)]|=1<<r}(n,e,t)}function eC(n,e,t){if(t&wt.Optional||void 0!==n)return n;om()}function tC(n,e,t,i){if(t&wt.Optional&&void 0===i&&(i=null),!(t&(wt.Self|wt.Host))){const r=n[qo],o=wi(void 0);try{return r?r.get(e,i,t&wt.Optional):GM(e,i,t&wt.Optional)}finally{wi(o)}}return eC(i,0,t)}function nC(n,e,t,i=wt.Default,r){if(null!==n){if(2048&e[dt]&&!(i&wt.Self)){const s=function ZN(n,e,t,i,r){let o=n,s=e;for(;null!==o&&null!==s&&2048&s[dt]&&!(512&s[dt]);){const a=iC(o,s,t,i|wt.Self,Hr);if(a!==Hr)return a;let c=o.parent;if(!c){const l=s[ab];if(l){const u=l.get(t,Hr,i);if(u!==Hr)return u}c=sC(s),s=s[ka]}o=c}return r}(n,e,t,i,Hr);if(s!==Hr)return s}const o=iC(n,e,t,i,Hr);if(o!==Hr)return o}return tC(e,t,i,r)}function iC(n,e,t,i,r){const o=function qN(n){if("string"==typeof n)return n.charCodeAt(0)||0;const e=n.hasOwnProperty(Bl)?n[Bl]:void 0;return"number"==typeof e?e>=0?e&Kb:YN:e}(t);if("function"==typeof o){if(!Hb(e,n,i))return i&wt.Host?eC(r,0,i):tC(e,t,i,r);try{let s;if(s=o(i),null!=s||i&wt.Optional)return s;om()}finally{$b()}}else if("number"==typeof o){let s=null,a=Qb(n,e),c=Ga,l=i&wt.Host?e[Mn][Qn]:null;for((-1===a||i&wt.SkipSelf)&&(c=-1===a?Mf(n,e):e[a+8],c!==Ga&&oC(i,!1)?(s=e[Se],a=Kl(c),e=Jl(c,e)):a=-1);-1!==a;){const u=e[Se];if(rC(o,a,u.data)){const d=$N(a,e,t,s,i,l);if(d!==Hr)return d}c=e[a+8],c!==Ga&&oC(i,e[Se].data[a+8]===l)&&rC(o,a,e)?(s=u,a=Kl(c),e=Jl(c,e)):a=-1}}return r}function $N(n,e,t,i,r,o){const s=e[Se],a=s.data[n+8],u=bf(a,s,t,null==i?Ds(a)&&Fm:i!=s&&0!=(3&a.type),r&wt.Host&&o===a);return null!==u?Ns(e,s,u,a):Hr}function bf(n,e,t,i,r){const o=n.providerIndexes,s=e.data,a=1048575&o,c=n.directiveStart,u=o>>20,f=r?a+u:n.directiveEnd;for(let h=i?a:a+u;h<f;h++){const p=s[h];if(h<c&&t===p||h>=c&&p.type===t)return h}if(r){const h=s[c];if(h&&wr(h)&&h.type===t)return c}return null}function Ns(n,e,t,i){let r=n[t];const o=e.data;if(function BN(n){return n instanceof Zl}(r)){const s=r;s.resolving&&function p3(n,e){const t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new ce(-200,`Circular dependency in DI detected for ${n}${t}`)}(function Ut(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():it(n)}(o[t]));const a=yf(s.canSeeViewProviders);s.resolving=!0;const l=s.injectImpl?wi(s.injectImpl):null;Hb(n,i,wt.Default);try{r=n[t]=s.factory(void 0,o,n,i),e.firstCreatePass&&t>=i.directiveStart&&function FN(n,e,t){const{ngOnChanges:i,ngOnInit:r,ngDoCheck:o}=e.type.prototype;if(i){const s=Sb(e);(t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s)}r&&(t.preOrderHooks??=[]).push(0-n,r),o&&((t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o))}(t,o[t],e)}finally{null!==l&&wi(l),yf(a),s.resolving=!1,$b()}}return r}function rC(n,e,t){return!!(t[e+(n>>Jb)]&1<<n)}function oC(n,e){return!(n&wt.Self||n&wt.Host&&e)}class fi{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,i){return nC(this._tNode,this._lView,e,sf(i),t)}}function YN(){return new fi(Zn(),re())}function Kn(n){return uo(()=>{const e=n.prototype.constructor,t=e[fo]||Vm(e),i=Object.prototype;let r=Object.getPrototypeOf(n.prototype).constructor;for(;r&&r!==i;){const o=r[fo]||Vm(r);if(o&&o!==t)return o;r=Object.getPrototypeOf(r)}return o=>new o})}function Vm(n){return im(n)?()=>{const e=Vm(Qe(n));return e&&e()}:Is(n)}function sC(n){const e=n[Se],t=e.type;return 2===t?e.declTNode:1===t?n[Qn]:null}const ja="__parameters__";function qa(n,e,t){return uo(()=>{const i=function zm(n){return function(...t){if(n){const i=n(...t);for(const r in i)this[r]=i[r]}}}(e);function r(...o){if(this instanceof r)return i.apply(this,o),this;const s=new r(...o);return a.annotation=s,a;function a(c,l,u){const d=c.hasOwnProperty(ja)?c[ja]:Object.defineProperty(c,ja,{value:[]})[ja];for(;d.length<=u;)d.push(null);return(d[u]=d[u]||[]).push(s),c}}return t&&(r.prototype=Object.create(t.prototype)),r.prototype.ngMetadataName=n,r.annotationCls=r,r})}function Ya(n,e){n.forEach(t=>Array.isArray(t)?Ya(t,e):e(t))}function cC(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function wf(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function zi(n,e,t){let i=Za(n,e);return i>=0?n[1|i]=t:(i=~i,function iL(n,e,t,i){let r=n.length;if(r==e)n.push(t,i);else if(1===r)n.push(i,n[0]),n[0]=t;else{for(r--,n.push(n[r-1],n[r]);r>e;)n[r]=n[r-2],r--;n[e]=t,n[e+1]=i}}(n,i,e,t)),i}function Hm(n,e){const t=Za(n,e);if(t>=0)return n[1|t]}function Za(n,e){return function lC(n,e,t){let i=0,r=n.length>>t;for(;r!==i;){const o=i+(r-i>>1),s=n[o<<t];if(e===s)return o<<t;s>e?r=o:i=o+1}return~(r<<t)}(n,e,1)}const Ef=Ul(qa("Optional"),8),Pf=Ul(qa("SkipSelf"),4);function If(n){return 128==(128&n.flags)}var Jo=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(Jo||{});const wL=/^>|^->|<!--|-->|--!>|<!-$/g,SL=/(<|>)/g,EL="\u200b$1\u200b";const qm=new Map;let PL=0;const Ym="__ngContext__";function ei(n,e){Ei(e)?(n[Ym]=e[Wl],function AL(n){qm.set(n[Wl],n)}(e)):n[Ym]=e}let Zm;function Km(n,e){return Zm(n,e)}function ru(n){const e=n[cn];return li(e)?e[cn]:e}function AC(n){return DC(n[Hl])}function OC(n){return DC(n[Cr])}function DC(n){for(;null!==n&&!li(n);)n=n[Cr];return n}function Qa(n,e,t,i,r){if(null!=i){let o,s=!1;li(i)?o=i:Ei(i)&&(s=!0,i=i[hn]);const a=Jt(i);0===n&&null!==t?null==r?LC(e,t,a):Ls(e,t,a,r||null,!0):1===n&&null!==t?Ls(e,t,a,r||null,!0):2===n?function Bf(n,e,t){const i=Ff(n,e);i&&function XL(n,e,t,i){n.removeChild(e,t,i)}(n,i,e,t)}(e,a,s):3===n&&e.destroyNode(a),null!=o&&function KL(n,e,t,i,r){const o=t[Br];o!==Jt(t)&&Qa(e,n,i,o,r);for(let a=Xn;a<t.length;a++){const c=t[a];su(c[Se],c,n,e,i,o)}}(e,n,o,t,r)}}function Jm(n,e){return n.createComment(function MC(n){return n.replace(wL,e=>e.replace(SL,EL))}(e))}function Lf(n,e,t){return n.createElement(e,t)}function RC(n,e){const t=n[Ua],i=t.indexOf(e);Ib(e),t.splice(i,1)}function kf(n,e){if(n.length<=Xn)return;const t=Xn+e,i=n[t];if(i){const r=i[Gl];null!==r&&r!==n&&RC(r,i),e>0&&(n[t-1][Cr]=i[Cr]);const o=wf(n,Xn+e);!function VL(n,e){su(n,e,e[rt],2,null,null),e[hn]=null,e[Qn]=null}(i[Se],i);const s=o[Ur];null!==s&&s.detachView(o[Se]),i[cn]=null,i[Cr]=null,i[dt]&=-129}return i}function Qm(n,e){if(!(256&e[dt])){const t=e[rt];e[jl]&&_b(e[jl]),e[$l]&&_b(e[$l]),t.destroyNode&&su(n,e,t,3,null,null),function GL(n){let e=n[Hl];if(!e)return e_(n[Se],n);for(;e;){let t=null;if(Ei(e))t=e[Hl];else{const i=e[Xn];i&&(t=i)}if(!t){for(;e&&!e[Cr]&&e!==n;)Ei(e)&&e_(e[Se],e),e=e[cn];null===e&&(e=n),Ei(e)&&e_(e[Se],e),t=e&&e[Cr]}e=t}}(e)}}function e_(n,e){if(!(256&e[dt])){e[dt]&=-129,e[dt]|=256,function qL(n,e){let t;if(null!=n&&null!=(t=n.destroyHooks))for(let i=0;i<t.length;i+=2){const r=e[t[i]];if(!(r instanceof Zl)){const o=t[i+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){const a=r[o[s]],c=o[s+1];Vr(4,a,c);try{c.call(a)}finally{Vr(5,a,c)}}else{Vr(4,r,o);try{o.call(r)}finally{Vr(5,r,o)}}}}}(n,e),function $L(n,e){const t=n.cleanup,i=e[Na];if(null!==t)for(let o=0;o<t.length-1;o+=2)if("string"==typeof t[o]){const s=t[o+3];s>=0?i[s]():i[-s].unsubscribe(),o+=2}else t[o].call(i[t[o+1]]);null!==i&&(e[Na]=null);const r=e[Xo];if(null!==r){e[Xo]=null;for(let o=0;o<r.length;o++)(0,r[o])()}}(n,e),1===e[Se].type&&e[rt].destroy();const t=e[Gl];if(null!==t&&li(e[cn])){t!==e[cn]&&RC(t,e);const i=e[Ur];null!==i&&i.detachView(n)}!function OL(n){qm.delete(n[Wl])}(e)}}function t_(n,e,t){return function NC(n,e,t){let i=e;for(;null!==i&&40&i.type;)i=(e=i).parent;if(null===i)return t[hn];{const{componentOffset:r}=i;if(r>-1){const{encapsulation:o}=n.data[i.directiveStart+r];if(o===xr.None||o===xr.Emulated)return null}return Pi(i,t)}}(n,e.parent,t)}function Ls(n,e,t,i,r){n.insertBefore(e,t,i,r)}function LC(n,e,t){n.appendChild(e,t)}function kC(n,e,t,i,r){null!==i?Ls(n,e,t,i,r):LC(n,e,t)}function Ff(n,e){return n.parentNode(e)}let n_,s_,BC=function UC(n,e,t){return 40&n.type?Pi(n,t):null};function Uf(n,e,t,i){const r=t_(n,i,e),o=e[rt],a=function FC(n,e,t){return BC(n,e,t)}(i.parent||e[Qn],i,e);if(null!=r)if(Array.isArray(t))for(let c=0;c<t.length;c++)kC(o,r,t[c],a,!1);else kC(o,r,t,a,!1);void 0!==n_&&n_(o,i,e,t,r)}function ou(n,e){if(null!==e){const t=e.type;if(3&t)return Pi(e,n);if(4&t)return i_(-1,n[e.index]);if(8&t){const i=e.child;if(null!==i)return ou(n,i);{const r=n[e.index];return li(r)?i_(-1,r):Jt(r)}}if(32&t)return Km(e,n)()||Jt(n[e.index]);{const i=zC(n,e);return null!==i?Array.isArray(i)?i[0]:ou(ru(n[Mn]),i):ou(n,e.next)}}return null}function zC(n,e){return null!==e?n[Mn][Qn].projection[e.projection]:null}function i_(n,e){const t=Xn+n+1;if(t<e.length){const i=e[t],r=i[Se].firstChild;if(null!==r)return ou(i,r)}return e[Br]}function r_(n,e,t,i,r,o,s){for(;null!=t;){const a=i[t.index],c=t.type;if(s&&0===e&&(a&&ei(Jt(a),i),t.flags|=2),32!=(32&t.flags))if(8&c)r_(n,e,t.child,i,r,o,!1),Qa(e,n,r,a,o);else if(32&c){const l=Km(t,i);let u;for(;u=l();)Qa(e,n,r,u,o);Qa(e,n,r,a,o)}else 16&c?GC(n,e,i,t,r,o):Qa(e,n,r,a,o);t=s?t.projectionNext:t.next}}function su(n,e,t,i,r,o){r_(t,i,n.firstChild,e,r,o,!1)}function GC(n,e,t,i,r,o){const s=t[Mn],c=s[Qn].projection[i.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++)Qa(e,n,r,c[l],o);else{let l=c;const u=s[cn];If(i)&&(l.flags|=128),r_(n,e,l,u,r,o,!0)}}function WC(n,e,t){""===t?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function jC(n,e,t){const{mergedAttrs:i,classes:r,styles:o}=t;null!==i&&mm(n,e,i),null!==r&&WC(n,e,r),null!==o&&function QL(n,e,t){n.setAttribute(e,"style",t)}(n,e,o)}class YC{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${BM})`}}function Qo(n){return n instanceof YC?n.changingThisBreaksApplicationSecurity:n}const hk=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;var nc=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(nc||{});function Gr(n){const e=function lu(){const n=re();return n&&n[La].sanitizer}();return e?e.sanitize(nc.URL,n)||"":function au(n,e){const t=function lk(n){return n instanceof YC&&n.getTypeName()||null}(n);if(null!=t&&t!==e){if("ResourceURL"===t&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${BM})`)}return t===e}(n,"URL")?Qo(n):function c_(n){return(n=String(n)).match(hk)?n:"unsafe:"+n}(it(n))}const uu=new Ne("ENVIRONMENT_INITIALIZER"),r1=new Ne("INJECTOR",-1),o1=new Ne("INJECTOR_DEF_TYPES");class f_{get(e,t=Fl){if(t===Fl){const i=new Error(`NullInjectorError: No provider for ${Ln(e)}!`);throw i.name="NullInjectorError",i}return t}}function Ek(...n){return{\u0275providers:a1(0,n),\u0275fromNgModule:!0}}function a1(n,...e){const t=[],i=new Set;let r;const o=s=>{t.push(s)};return Ya(e,s=>{const a=s;Gf(a,o,[],i)&&(r||=[],r.push(a))}),void 0!==r&&c1(r,o),t}function c1(n,e){for(let t=0;t<n.length;t++){const{ngModule:i,providers:r}=n[t];h_(r,o=>{e(o,i)})}}function Gf(n,e,t,i){if(!(n=Qe(n)))return!1;let r=null,o=tf(n);const s=!o&&At(n);if(o||s){if(s&&!s.standalone)return!1;r=n}else{const c=n.ngModule;if(o=tf(c),!o)return!1;r=c}const a=i.has(r);if(s){if(a)return!1;if(i.add(r),s.dependencies){const c="function"==typeof s.dependencies?s.dependencies():s.dependencies;for(const l of c)Gf(l,e,t,i)}}else{if(!o)return!1;{if(null!=o.imports&&!a){let l;i.add(r);try{Ya(o.imports,u=>{Gf(u,e,t,i)&&(l||=[],l.push(u))})}finally{}void 0!==l&&c1(l,e)}if(!a){const l=Is(r)||(()=>new r);e({provide:r,useFactory:l,deps:Rt},r),e({provide:o1,useValue:r,multi:!0},r),e({provide:uu,useValue:()=>$e(r),multi:!0},r)}const c=o.providers;if(null!=c&&!a){const l=n;h_(c,u=>{e(u,l)})}}}return r!==n&&void 0!==n.providers}function h_(n,e){for(let t of n)rm(t)&&(t=t.\u0275providers),Array.isArray(t)?h_(t,e):e(t)}const Pk=Vt({provide:String,useValue:Vt});function p_(n){return null!==n&&"object"==typeof n&&Pk in n}function ks(n){return"function"==typeof n}const g_=new Ne("Set Injector scope."),Wf={},Ak={};let m_;function jf(){return void 0===m_&&(m_=new f_),m_}class rr{}class ic extends rr{get destroyed(){return this._destroyed}constructor(e,t,i,r){super(),this.parent=t,this.source=i,this.scopes=r,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,v_(e,s=>this.processProvider(s)),this.records.set(r1,rc(void 0,this)),r.has("environment")&&this.records.set(rr,rc(void 0,this));const o=this.records.get(g_);null!=o&&"string"==typeof o.value&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(o1.multi,Rt,wt.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const t of this._ngOnDestroyHooks)t.ngOnDestroy();const e=this._onDestroyHooks;this._onDestroyHooks=[];for(const t of e)t()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();const t=$o(this),i=wi(void 0);try{return e()}finally{$o(t),wi(i)}}get(e,t=Fl,i=wt.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(XM))return e[XM](this);i=sf(i);const o=$o(this),s=wi(void 0);try{if(!(i&wt.SkipSelf)){let c=this.records.get(e);if(void 0===c){const l=function Nk(n){return"function"==typeof n||"object"==typeof n&&n instanceof Ne}(e)&&ef(e);c=l&&this.injectableDefInScope(l)?rc(__(e),Wf):null,this.records.set(e,c)}if(null!=c)return this.hydrate(e,c)}return(i&wt.Self?jf():this.parent).get(e,t=i&wt.Optional&&t===Fl?null:t)}catch(a){if("NullInjectorError"===a.name){if((a[rf]=a[rf]||[]).unshift(Ln(e)),o)throw a;return function A3(n,e,t,i){const r=n[rf];throw e[jM]&&r.unshift(e[jM]),n.message=function O3(n,e,t,i=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.slice(2):n;let r=Ln(e);if(Array.isArray(e))r=e.map(Ln).join(" -> ");else if("object"==typeof e){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+("string"==typeof a?JSON.stringify(a):Ln(a)))}r=`{${o.join(", ")}}`}return`${t}${i?"("+i+")":""}[${r}]: ${n.replace(w3,"\n  ")}`}("\n"+n.message,r,t,i),n.ngTokenPath=r,n[rf]=null,n}(a,e,"R3InjectorError",this.source)}throw a}finally{wi(s),$o(o)}}resolveInjectorInitializers(){const e=$o(this),t=wi(void 0);try{const r=this.get(uu.multi,Rt,wt.Self);for(const o of r)o()}finally{$o(e),wi(t)}}toString(){const e=[],t=this.records;for(const i of t.keys())e.push(Ln(i));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new ce(205,!1)}processProvider(e){let t=ks(e=Qe(e))?e:Qe(e&&e.provide);const i=function Dk(n){return p_(n)?rc(void 0,n.useValue):rc(d1(n),Wf)}(e);if(ks(e)||!0!==e.multi)this.records.get(t);else{let r=this.records.get(t);r||(r=rc(void 0,Wf,!0),r.factory=()=>hm(r.multi),this.records.set(t,r)),t=e,r.multi.push(e)}this.records.set(t,i)}hydrate(e,t){return t.value===Wf&&(t.value=Ak,t.value=t.factory()),"object"==typeof t.value&&t.value&&function Rk(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}injectableDefInScope(e){if(!e.providedIn)return!1;const t=Qe(e.providedIn);return"string"==typeof t?"any"===t||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){const t=this._onDestroyHooks.indexOf(e);-1!==t&&this._onDestroyHooks.splice(t,1)}}function __(n){const e=ef(n),t=null!==e?e.factory:Is(n);if(null!==t)return t;if(n instanceof Ne)throw new ce(204,!1);if(n instanceof Function)return function Ok(n){const e=n.length;if(e>0)throw function tu(n,e){const t=[];for(let i=0;i<n;i++)t.push(e);return t}(e,"?"),new ce(204,!1);const t=function x3(n){return n&&(n[nf]||n[zM])||null}(n);return null!==t?()=>t.factory(n):()=>new n}(n);throw new ce(204,!1)}function d1(n,e,t){let i;if(ks(n)){const r=Qe(n);return Is(r)||__(r)}if(p_(n))i=()=>Qe(n.useValue);else if(function u1(n){return!(!n||!n.useFactory)}(n))i=()=>n.useFactory(...hm(n.deps||[]));else if(function l1(n){return!(!n||!n.useExisting)}(n))i=()=>$e(Qe(n.useExisting));else{const r=Qe(n&&(n.useClass||n.provide));if(!function Ik(n){return!!n.deps}(n))return Is(r)||__(r);i=()=>new r(...hm(n.deps))}return i}function rc(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function v_(n,e){for(const t of n)Array.isArray(t)?v_(t,e):t&&rm(t)?v_(t.\u0275providers,e):e(t)}const $f=new Ne("AppId",{providedIn:"root",factory:()=>Lk}),Lk="ng",f1=new Ne("Platform Initializer"),oc=new Ne("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),h1=new Ne("CSP nonce",{providedIn:"root",factory:()=>function tc(){if(void 0!==s_)return s_;if(typeof document<"u")return document;throw new ce(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let p1=(n,e,t)=>null;function E_(n,e,t=!1){return p1(n,e,t)}class jk{}class _1{}class qk{resolveComponentFactory(e){throw function $k(n){const e=Error(`No component factory found for ${Ln(n)}.`);return e.ngComponent=n,e}(e)}}let Jf=(()=>{class n{static{this.NULL=new qk}}return n})();function Xk(){return cc(Zn(),re())}function cc(n,e){return new Hi(Pi(n,e))}let Hi=(()=>{class n{constructor(t){this.nativeElement=t}static{this.__NG_ELEMENT_ID__=Xk}}return n})();function Yk(n){return n instanceof Hi?n.nativeElement:n}class y1{}let Wr=(()=>{class n{constructor(){this.destroyNode=null}static{this.__NG_ELEMENT_ID__=()=>function Zk(){const n=re(),t=Vi(Zn().index,n);return(Ei(t)?t:n)[rt]}()}}return n})(),Kk=(()=>{class n{static{this.\u0275prov=We({token:n,providedIn:"root",factory:()=>null})}}return n})();class hu{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const Jk=new hu("16.2.12"),A_={};function C1(n,e=null,t=null,i){const r=w1(n,e,t,i);return r.resolveInjectorInitializers(),r}function w1(n,e=null,t=null,i,r=new Set){const o=[t||Rt,Ek(n)];return i=i||("object"==typeof n?void 0:Ln(n)),new ic(o,e||jf(),i||null,r)}let Gi=(()=>{class n{static{this.THROW_IF_NOT_FOUND=Fl}static{this.NULL=new f_}static create(t,i){if(Array.isArray(t))return C1({name:""},i,t,"");{const r=t.name??"";return C1({name:r},t.parent,t.providers,r)}}static{this.\u0275prov=We({token:n,providedIn:"any",factory:()=>$e(r1)})}static{this.__NG_ELEMENT_ID__=-1}}return n})();function D_(n){return n.ngOriginalError}class _o{constructor(){this._console=console}handleError(e){const t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&D_(e);for(;t&&D_(t);)t=D_(t);return t||null}}function I_(n){return e=>{setTimeout(n,void 0,e)}}const dn=class sF extends yr{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,t,i){let r=e,o=t||(()=>null),s=i;if(e&&"object"==typeof e){const c=e;r=c.next?.bind(c),o=c.error?.bind(c),s=c.complete?.bind(c)}this.__isAsync&&(o=I_(o),r&&(r=I_(r)),s&&(s=I_(s)));const a=super.subscribe({next:r,error:o,complete:s});return e instanceof Ni&&e.add(a),a}};function E1(...n){}class Qt{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:i=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new dn(!1),this.onMicrotaskEmpty=new dn(!1),this.onStable=new dn(!1),this.onError=new dn(!1),typeof Zone>"u")throw new ce(908,!1);Zone.assertZonePatched();const r=this;r._nesting=0,r._outer=r._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!i&&t,r.shouldCoalesceRunChangeDetection=i,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=function aF(){const n="function"==typeof Kt.requestAnimationFrame;let e=Kt[n?"requestAnimationFrame":"setTimeout"],t=Kt[n?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&t){const i=e[Zone.__symbol__("OriginalDelegate")];i&&(e=i);const r=t[Zone.__symbol__("OriginalDelegate")];r&&(t=r)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:t}}().nativeRequestAnimationFrame,function uF(n){const e=()=>{!function lF(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(Kt,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,N_(n),n.isCheckStableRunning=!0,R_(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),N_(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(t,i,r,o,s,a)=>{if(function fF(n){return!(!Array.isArray(n)||1!==n.length)&&!0===n[0].data?.__ignore_ng_zone__}(a))return t.invokeTask(r,o,s,a);try{return P1(n),t.invokeTask(r,o,s,a)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===o.type||n.shouldCoalesceRunChangeDetection)&&e(),T1(n)}},onInvoke:(t,i,r,o,s,a,c)=>{try{return P1(n),t.invoke(r,o,s,a,c)}finally{n.shouldCoalesceRunChangeDetection&&e(),T1(n)}},onHasTask:(t,i,r,o)=>{t.hasTask(r,o),i===r&&("microTask"==o.change?(n._hasPendingMicrotasks=o.microTask,N_(n),R_(n)):"macroTask"==o.change&&(n.hasPendingMacrotasks=o.macroTask))},onHandleError:(t,i,r,o)=>(t.handleError(r,o),n.runOutsideAngular(()=>n.onError.emit(o)),!1)})}(r)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Qt.isInAngularZone())throw new ce(909,!1)}static assertNotInAngularZone(){if(Qt.isInAngularZone())throw new ce(909,!1)}run(e,t,i){return this._inner.run(e,t,i)}runTask(e,t,i,r){const o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+r,e,cF,E1,E1);try{return o.runTask(s,t,i)}finally{o.cancelTask(s)}}runGuarded(e,t,i){return this._inner.runGuarded(e,t,i)}runOutsideAngular(e){return this._outer.run(e)}}const cF={};function R_(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function N_(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function P1(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function T1(n){n._nesting--,R_(n)}class dF{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new dn,this.onMicrotaskEmpty=new dn,this.onStable=new dn,this.onError=new dn}run(e,t,i){return e.apply(t,i)}runGuarded(e,t,i){return e.apply(t,i)}runOutsideAngular(e){return e()}runTask(e,t,i,r){return e.apply(t,i)}}const A1=new Ne("",{providedIn:"root",factory:O1});function O1(){const n=Ie(Qt);let e=!0;return function u3(...n){const e=kl(n),t=function i3(n,e){return"number"==typeof em(n)?n.pop():e}(n,1/0),i=n;return i.length?1===i.length?Li(i[0]):Da(t)(zn(i,e)):Lr}(new Pn(r=>{e=n.isStable&&!n.hasPendingMacrotasks&&!n.hasPendingMicrotasks,n.runOutsideAngular(()=>{r.next(e),r.complete()})}),new Pn(r=>{let o;n.runOutsideAngular(()=>{o=n.onStable.subscribe(()=>{Qt.assertNotInAngularZone(),queueMicrotask(()=>{!e&&!n.hasPendingMacrotasks&&!n.hasPendingMicrotasks&&(e=!0,r.next(!0))})})});const s=n.onUnstable.subscribe(()=>{Qt.assertInAngularZone(),e&&(e=!1,n.runOutsideAngular(()=>{r.next(!1)}))});return()=>{o.unsubscribe(),s.unsubscribe()}}).pipe(UM()))}function Fs(n){return n.ownerDocument.defaultView}function L_(n){return n.ownerDocument}function vo(n){return n instanceof Function?n():n}let k_=(()=>{class n{constructor(){this.renderDepth=0,this.handler=null}begin(){this.handler?.validateBegin(),this.renderDepth++}end(){this.renderDepth--,0===this.renderDepth&&this.handler?.execute()}ngOnDestroy(){this.handler?.destroy(),this.handler=null}static{this.\u0275prov=We({token:n,providedIn:"root",factory:()=>new n})}}return n})();function pu(n){for(;n;){n[dt]|=64;const e=ru(n);if(ym(n)&&!e)return n;n=e}return null}const L1=new Ne("",{providedIn:"root",factory:()=>!1});let th=null;function B1(n,e){return n[e]??H1()}function V1(n,e){const t=H1();t.producerNode?.length&&(n[e]=th,t.lView=n,th=z1())}const xF={...db,consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{pu(n.lView)},lView:null};function z1(){return Object.create(xF)}function H1(){return th??=z1(),th}const lt={};function I(n){G1(Ot(),re(),di()+n,!1)}function G1(n,e,t,i){if(!i)if(3==(3&e[dt])){const o=n.preOrderCheckHooks;null!==o&&_f(e,o,t)}else{const o=n.preOrderHooks;null!==o&&vf(e,o,0,t)}Rs(t)}function ee(n,e=wt.Default){const t=re();return null===t?$e(n,e):nC(Zn(),t,Qe(n),e)}function nh(n,e,t,i,r,o,s,a,c,l,u){const d=e.blueprint.slice();return d[hn]=r,d[dt]=140|i,(null!==l||n&&2048&n[dt])&&(d[dt]|=2048),Db(d),d[cn]=d[ka]=n,d[xn]=t,d[La]=s||n&&n[La],d[rt]=a||n&&n[rt],d[qo]=c||n&&n[qo]||null,d[Qn]=o,d[Wl]=function TL(){return PL++}(),d[ho]=u,d[ab]=l,d[Mn]=2==e.type?n[Mn]:d,d}function dc(n,e,t,i,r){let o=n.data[e];if(null===o)o=function F_(n,e,t,i,r){const o=Fb(),s=Pm(),c=n.data[e]=function TF(n,e,t,i,r,o){let s=e?e.injectorIndex:-1,a=0;return function za(){return null!==Ze.skipHydrationRootTNode}()&&(a|=128),{type:t,index:i,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:r,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,s?o:o&&o.parent,t,e,i,r);return null===n.firstChild&&(n.firstChild=c),null!==o&&(s?null==o.child&&null!==c.parent&&(o.child=c):null===o.next&&(o.next=c,c.prev=o)),c}(n,e,t,i,r),function PN(){return Ze.lFrame.inI18n}()&&(o.flags|=32);else if(64&o.type){o.type=t,o.value=i,o.attrs=r;const s=function Yl(){const n=Ze.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}();o.injectorIndex=null===s?-1:s.injectorIndex}return zr(o,!0),o}function gu(n,e,t,i){if(0===t)return-1;const r=e.length;for(let o=0;o<t;o++)e.push(i),n.blueprint.push(i),n.data.push(null);return r}function j1(n,e,t,i,r){const o=B1(e,jl),s=di(),a=2&i;try{Rs(-1),a&&e.length>St&&G1(n,e,St,!1),Vr(a?2:0,r);const l=a?o:null,u=Mm(l);try{null!==l&&(l.dirty=!1),t(i,r)}finally{bm(l,u)}}finally{a&&null===e[jl]&&V1(e,jl),Rs(s),Vr(a?3:1,r)}}function U_(n,e,t){if(vm(e)){const i=tr(null);try{const o=e.directiveEnd;for(let s=e.directiveStart;s<o;s++){const a=n.data[s];a.contentQueries&&a.contentQueries(1,t[s],s)}}finally{tr(i)}}}function B_(n,e,t){kb()&&(function LF(n,e,t,i){const r=t.directiveStart,o=t.directiveEnd;Ds(t)&&function HF(n,e,t){const i=Pi(e,n),r=$1(t);let s=16;t.signals?s=4096:t.onPush&&(s=64);const a=ih(n,nh(n,r,null,s,i,e,null,n[La].rendererFactory.createRenderer(i,t),null,null,null));n[e.index]=a}(e,t,n.data[r+t.componentOffset]),n.firstCreatePass||xf(t,e),ei(i,e);const s=t.initialInputs;for(let a=r;a<o;a++){const c=n.data[a],l=Ns(e,n,a,t);ei(l,e),null!==s&&GF(0,a-r,l,c,0,s),wr(c)&&(Vi(t.index,e)[xn]=Ns(e,n,a,t))}}(n,e,t,Pi(t,e)),64==(64&t.flags)&&K1(n,e,t))}function V_(n,e,t=Pi){const i=e.localNames;if(null!==i){let r=e.index+1;for(let o=0;o<i.length;o+=2){const s=i[o+1],a=-1===s?t(e,n):n[s];n[r++]=a}}}function $1(n){const e=n.tView;return null===e||e.incompleteFirstPass?n.tView=z_(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function z_(n,e,t,i,r,o,s,a,c,l,u){const d=St+i,f=d+r,h=function bF(n,e){const t=[];for(let i=0;i<e;i++)t.push(i<n?null:lt);return t}(d,f),p="function"==typeof l?l():l;return h[Se]={type:n,blueprint:h,template:t,queries:null,viewQuery:a,declTNode:e,data:h.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:f,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof o?o():o,pipeRegistry:"function"==typeof s?s():s,firstChild:null,schemas:c,consts:p,incompleteFirstPass:!1,ssrId:u}}let q1=n=>null;function X1(n,e,t,i){for(let r in n)if(n.hasOwnProperty(r)){t=null===t?{}:t;const o=n[r];null===i?Y1(t,e,r,o):i.hasOwnProperty(r)&&Y1(t,e,i[r],o)}return t}function Y1(n,e,t,i){n.hasOwnProperty(t)?n[t].push(e,i):n[t]=[e,i]}function H_(n,e,t,i){if(kb()){const r=null===i?null:{"":-1},o=function FF(n,e){const t=n.directiveRegistry;let i=null,r=null;if(t)for(let o=0;o<t.length;o++){const s=t[o];if(tb(e,s.selectors,!1))if(i||(i=[]),wr(s))if(null!==s.findHostDirectiveDefs){const a=[];r=r||new Map,s.findHostDirectiveDefs(s,a,r),i.unshift(...a,s),G_(n,e,a.length)}else i.unshift(s),G_(n,e,0);else r=r||new Map,s.findHostDirectiveDefs?.(s,i,r),i.push(s)}return null===i?null:[i,r]}(n,t);let s,a;null===o?s=a=null:[s,a]=o,null!==s&&Z1(n,e,t,s,r,a),r&&function UF(n,e,t){if(e){const i=n.localNames=[];for(let r=0;r<e.length;r+=2){const o=t[e[r+1]];if(null==o)throw new ce(-301,!1);i.push(e[r],o)}}}(t,i,r)}t.mergedAttrs=Vl(t.mergedAttrs,t.attrs)}function Z1(n,e,t,i,r,o){for(let l=0;l<i.length;l++)Bm(xf(t,e),n,i[l].type);!function VF(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}(t,n.data.length,i.length);for(let l=0;l<i.length;l++){const u=i[l];u.providersResolver&&u.providersResolver(u)}let s=!1,a=!1,c=gu(n,e,i.length,null);for(let l=0;l<i.length;l++){const u=i[l];t.mergedAttrs=Vl(t.mergedAttrs,u.hostAttrs),zF(n,t,e,c,u),BF(c,u,r),null!==u.contentQueries&&(t.flags|=4),(null!==u.hostBindings||null!==u.hostAttrs||0!==u.hostVars)&&(t.flags|=64);const d=u.type.prototype;!s&&(d.ngOnChanges||d.ngOnInit||d.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),s=!0),!a&&(d.ngOnChanges||d.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),a=!0),c++}!function AF(n,e,t){const r=e.directiveEnd,o=n.data,s=e.attrs,a=[];let c=null,l=null;for(let u=e.directiveStart;u<r;u++){const d=o[u],f=t?t.get(d):null,p=f?f.outputs:null;c=X1(d.inputs,u,c,f?f.inputs:null),l=X1(d.outputs,u,l,p);const _=null===c||null===s||eb(e)?null:WF(c,u,s);a.push(_)}null!==c&&(c.hasOwnProperty("class")&&(e.flags|=8),c.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=c,e.outputs=l}(n,t,o)}function K1(n,e,t){const i=t.directiveStart,r=t.directiveEnd,o=t.index,s=function AN(){return Ze.lFrame.currentDirectiveIndex}();try{Rs(o);for(let a=i;a<r;a++){const c=n.data[a],l=e[a];Am(a),(null!==c.hostBindings||0!==c.hostVars||null!==c.hostAttrs)&&kF(c,l)}}finally{Rs(-1),Am(s)}}function kF(n,e){null!==n.hostBindings&&n.hostBindings(1,e)}function G_(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function BF(n,e,t){if(t){if(e.exportAs)for(let i=0;i<e.exportAs.length;i++)t[e.exportAs[i]]=n;wr(e)&&(t[""]=n)}}function zF(n,e,t,i,r){n.data[i]=r;const o=r.factory||(r.factory=Is(r.type)),s=new Zl(o,wr(r),ee);n.blueprint[i]=s,t[i]=s,function RF(n,e,t,i,r){const o=r.hostBindings;if(o){let s=n.hostBindingOpCodes;null===s&&(s=n.hostBindingOpCodes=[]);const a=~e.index;(function NF(n){let e=n.length;for(;e>0;){const t=n[--e];if("number"==typeof t&&t<0)return t}return 0})(s)!=a&&s.push(a),s.push(t,i,o)}}(n,e,i,gu(n,t,r.hostVars,lt),r)}function jr(n,e,t,i,r,o){const s=Pi(n,e);!function W_(n,e,t,i,r,o,s){if(null==o)n.removeAttribute(e,r,t);else{const a=null==s?it(o):s(o,i||"",r);n.setAttribute(e,r,a,t)}}(e[rt],s,o,n.value,t,i,r)}function GF(n,e,t,i,r,o){const s=o[e];if(null!==s)for(let a=0;a<s.length;)J1(i,t,s[a++],s[a++],s[a++])}function J1(n,e,t,i,r){const o=tr(null);try{const s=n.inputTransforms;null!==s&&s.hasOwnProperty(i)&&(r=s[i].call(e,r)),null!==n.setInput?n.setInput(e,r,t,i):e[i]=r}finally{tr(o)}}function WF(n,e,t){let i=null,r=0;for(;r<t.length;){const o=t[r];if(0!==o)if(5!==o){if("number"==typeof o)break;if(n.hasOwnProperty(o)){null===i&&(i=[]);const s=n[o];for(let a=0;a<s.length;a+=2)if(s[a]===e){i.push(o,s[a+1],t[r+1]);break}}r+=2}else r+=2;else r+=4}return i}function Q1(n,e,t,i){return[n,!0,!1,e,null,0,i,t,null,null,null]}function ew(n,e){const t=n.contentQueries;if(null!==t)for(let i=0;i<t.length;i+=2){const o=t[i+1];if(-1!==o){const s=n.data[o];Dm(t[i]),s.contentQueries(2,e[o],o)}}}function ih(n,e){return n[Hl]?n[sb][Cr]=e:n[Hl]=e,n[sb]=e,e}function j_(n,e,t){Dm(0);const i=tr(null);try{e(n,t)}finally{tr(i)}}function tw(n){return n[Na]||(n[Na]=[])}function nw(n){return n.cleanup||(n.cleanup=[])}function rw(n,e){const t=n[qo],i=t?t.get(_o,null):null;i&&i.handleError(e)}function $_(n,e,t,i,r){for(let o=0;o<t.length;){const s=t[o++],a=t[o++];J1(n.data[s],e[s],i,a,r)}}function yo(n,e,t){const i=pf(e,n);!function IC(n,e,t){n.setValue(e,t)}(n[rt],i,t)}function jF(n,e){const t=Vi(e,n),i=t[Se];!function $F(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}(i,t);const r=t[hn];null!==r&&null===t[ho]&&(t[ho]=E_(r,t[qo])),q_(i,t,t[xn])}function q_(n,e,t){Im(e);try{const i=n.viewQuery;null!==i&&j_(1,i,t);const r=n.template;null!==r&&j1(n,e,r,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&ew(n,e),n.staticViewQueries&&j_(2,n.viewQuery,t);const o=n.components;null!==o&&function qF(n,e){for(let t=0;t<e.length;t++)jF(n,e[t])}(e,o)}catch(i){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),i}finally{e[dt]&=-5,Rm()}}let ow=(()=>{class n{constructor(){this.all=new Set,this.queue=new Map}create(t,i,r){const o=typeof Zone>"u"?null:Zone.current,s=function oN(n,e,t){const i=Object.create(sN);t&&(i.consumerAllowSignalWrites=!0),i.fn=n,i.schedule=e;const r=s=>{i.cleanupFn=s};return i.ref={notify:()=>gb(i),run:()=>{if(i.dirty=!1,i.hasRun&&!mb(i))return;i.hasRun=!0;const s=Mm(i);try{i.cleanupFn(),i.cleanupFn=wb,i.fn(r)}finally{bm(i,s)}},cleanup:()=>i.cleanupFn()},i.ref}(t,l=>{this.all.has(l)&&this.queue.set(l,o)},r);let a;this.all.add(s),s.notify();const c=()=>{s.cleanup(),a?.(),this.all.delete(s),this.queue.delete(s)};return a=i?.onDestroy(c),{destroy:c}}flush(){if(0!==this.queue.size)for(const[t,i]of this.queue)this.queue.delete(t),i?i.run(()=>t.run()):t.run()}get isQueueEmpty(){return 0===this.queue.size}static{this.\u0275prov=We({token:n,providedIn:"root",factory:()=>new n})}}return n})();function rh(n,e,t){let i=t?n.styles:null,r=t?n.classes:null,o=0;if(null!==e)for(let s=0;s<e.length;s++){const a=e[s];"number"==typeof a?o=a:1==o?r=nm(r,a):2==o&&(i=nm(i,a+": "+e[++s]+";"))}t?n.styles=i:n.stylesWithoutHost=i,t?n.classes=r:n.classesWithoutHost=r}function mu(n,e,t,i,r=!1){for(;null!==t;){const o=e[t.index];null!==o&&i.push(Jt(o)),li(o)&&sw(o,i);const s=t.type;if(8&s)mu(n,e,t.child,i);else if(32&s){const a=Km(t,e);let c;for(;c=a();)i.push(c)}else if(16&s){const a=zC(e,t);if(Array.isArray(a))i.push(...a);else{const c=ru(e[Mn]);mu(c[Se],c,a,i,!0)}}t=r?t.projectionNext:t.next}return i}function sw(n,e){for(let t=Xn;t<n.length;t++){const i=n[t],r=i[Se].firstChild;null!==r&&mu(i[Se],i,r,e)}n[Br]!==n[hn]&&e.push(n[Br])}function oh(n,e,t,i=!0){const r=e[La],o=r.rendererFactory,s=r.afterRenderEventManager;o.begin?.(),s?.begin();try{aw(n,e,n.template,t)}catch(c){throw i&&rw(e,c),c}finally{o.end?.(),r.effectManager?.flush(),s?.end()}}function aw(n,e,t,i){const r=e[dt];if(256!=(256&r)){e[La].effectManager?.flush(),Im(e);try{Db(e),function Bb(n){return Ze.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==t&&j1(n,e,t,2,i);const s=3==(3&r);if(s){const l=n.preOrderCheckHooks;null!==l&&_f(e,l,null)}else{const l=n.preOrderHooks;null!==l&&vf(e,l,0,null),Nm(e,0)}if(function ZF(n){for(let e=AC(n);null!==e;e=OC(e)){if(!e[cb])continue;const t=e[Ua];for(let i=0;i<t.length;i++){mN(t[i])}}}(e),cw(e,2),null!==n.contentQueries&&ew(n,e),s){const l=n.contentCheckHooks;null!==l&&_f(e,l)}else{const l=n.contentHooks;null!==l&&vf(e,l,1),Nm(e,1)}!function MF(n,e){const t=n.hostBindingOpCodes;if(null===t)return;const i=B1(e,$l);try{for(let r=0;r<t.length;r++){const o=t[r];if(o<0)Rs(~o);else{const s=o,a=t[++r],c=t[++r];TN(a,s),i.dirty=!1;const l=Mm(i);try{c(2,e[s])}finally{bm(i,l)}}}}finally{null===e[$l]&&V1(e,$l),Rs(-1)}}(n,e);const a=n.components;null!==a&&uw(e,a,0);const c=n.viewQuery;if(null!==c&&j_(2,c,i),s){const l=n.viewCheckHooks;null!==l&&_f(e,l)}else{const l=n.viewHooks;null!==l&&vf(e,l,2),Nm(e,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),e[dt]&=-73,Ib(e)}finally{Rm()}}}function cw(n,e){for(let t=AC(n);null!==t;t=OC(t))for(let i=Xn;i<t.length;i++)lw(t[i],e)}function KF(n,e,t){lw(Vi(e,n),t)}function lw(n,e){if(!function pN(n){return 128==(128&n[dt])}(n))return;const t=n[Se],i=n[dt];if(80&i&&0===e||1024&i||2===e)aw(t,n,t.template,n[xn]);else if(n[zl]>0){cw(n,1);const r=t.components;null!==r&&uw(n,r,1)}}function uw(n,e,t){for(let i=0;i<e.length;i++)KF(n,e[i],t)}class _u{get rootNodes(){const e=this._lView,t=e[Se];return mu(t,e,t.firstChild,[])}constructor(e,t){this._lView=e,this._cdRefInjectingView=t,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[xn]}set context(e){this._lView[xn]=e}get destroyed(){return 256==(256&this._lView[dt])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[cn];if(li(e)){const t=e[8],i=t?t.indexOf(this):-1;i>-1&&(kf(e,i),wf(t,i))}this._attachedToViewContainer=!1}Qm(this._lView[Se],this._lView)}onDestroy(e){!function Nb(n,e){if(256==(256&n[dt]))throw new ce(911,!1);null===n[Xo]&&(n[Xo]=[]),n[Xo].push(e)}(this._lView,e)}markForCheck(){pu(this._cdRefInjectingView||this._lView)}detach(){this._lView[dt]&=-129}reattach(){this._lView[dt]|=128}detectChanges(){oh(this._lView[Se],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new ce(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function HL(n,e){su(n,e,e[rt],2,null,null)}(this._lView[Se],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new ce(902,!1);this._appRef=e}}class JF extends _u{constructor(e){super(e),this._view=e}detectChanges(){const e=this._view;oh(e[Se],e,e[xn],!1)}checkNoChanges(){}get context(){return null}}class dw extends Jf{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const t=At(e);return new vu(t,this.ngModule)}}function fw(n){const e=[];for(let t in n)n.hasOwnProperty(t)&&e.push({propName:n[t],templateName:t});return e}class eU{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,i){i=sf(i);const r=this.injector.get(e,A_,i);return r!==A_||t===A_?r:this.parentInjector.get(e,t,i)}}class vu extends _1{get inputs(){const e=this.componentDef,t=e.inputTransforms,i=fw(e.inputs);if(null!==t)for(const r of i)t.hasOwnProperty(r.propName)&&(r.transform=t[r.propName]);return i}get outputs(){return fw(this.componentDef.outputs)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=function V3(n){return n.map(B3).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}create(e,t,i,r){let o=(r=r||this.ngModule)instanceof rr?r:r?.injector;o&&null!==this.componentDef.getStandaloneInjector&&(o=this.componentDef.getStandaloneInjector(o)||o);const s=o?new eU(e,o):e,a=s.get(y1,null);if(null===a)throw new ce(407,!1);const d={rendererFactory:a,sanitizer:s.get(Kk,null),effectManager:s.get(ow,null),afterRenderEventManager:s.get(k_,null)},f=a.createRenderer(null,this.componentDef),h=this.componentDef.selectors[0][0]||"div",p=i?function CF(n,e,t,i){const o=i.get(L1,!1)||t===xr.ShadowDom,s=n.selectRootElement(e,o);return function wF(n){q1(n)}(s),s}(f,i,this.componentDef.encapsulation,s):Lf(f,h,function QF(n){const e=n.toLowerCase();return"svg"===e?"svg":"math"===e?"math":null}(h)),g=this.componentDef.signals?4608:this.componentDef.onPush?576:528;let v=null;null!==p&&(v=E_(p,s,!0));const y=z_(0,null,null,1,0,null,null,null,null,null,null),x=nh(null,y,null,g,null,null,d,f,s,null,v);let C,S;Im(x);try{const T=this.componentDef;let R,w=null;T.findHostDirectiveDefs?(R=[],w=new Map,T.findHostDirectiveDefs(T,R,w),R.push(T)):R=[T];const A=function nU(n,e){const t=n[Se],i=St;return n[i]=e,dc(t,i,2,"#host",null)}(x,p),z=function iU(n,e,t,i,r,o,s){const a=r[Se];!function rU(n,e,t,i){for(const r of n)e.mergedAttrs=Vl(e.mergedAttrs,r.hostAttrs);null!==e.mergedAttrs&&(rh(e,e.mergedAttrs,!0),null!==t&&jC(i,t,e))}(i,n,e,s);let c=null;null!==e&&(c=E_(e,r[qo]));const l=o.rendererFactory.createRenderer(e,t);let u=16;t.signals?u=4096:t.onPush&&(u=64);const d=nh(r,$1(t),null,u,r[n.index],n,o,l,null,null,c);return a.firstCreatePass&&G_(a,n,i.length-1),ih(r,d),r[n.index]=d}(A,p,T,R,x,d,f);S=Ob(y,St),p&&function sU(n,e,t,i){if(i)mm(n,t,["ng-version",Jk.full]);else{const{attrs:r,classes:o}=function z3(n){const e=[],t=[];let i=1,r=2;for(;i<n.length;){let o=n[i];if("string"==typeof o)2===r?""!==o&&e.push(o,n[++i]):8===r&&t.push(o);else{if(!Mr(r))break;r=o}i++}return{attrs:e,classes:t}}(e.selectors[0]);r&&mm(n,t,r),o&&o.length>0&&WC(n,t,o.join(" "))}}(f,T,p,i),void 0!==t&&function aU(n,e,t){const i=n.projection=[];for(let r=0;r<e.length;r++){const o=t[r];i.push(null!=o?Array.from(o):null)}}(S,this.ngContentSelectors,t),C=function oU(n,e,t,i,r,o){const s=Zn(),a=r[Se],c=Pi(s,r);Z1(a,r,s,t,null,i);for(let u=0;u<t.length;u++)ei(Ns(r,a,s.directiveStart+u,s),r);K1(a,r,s),c&&ei(c,r);const l=Ns(r,a,s.directiveStart+s.componentOffset,s);if(n[xn]=r[xn]=l,null!==o)for(const u of o)u(l,e);return U_(a,s,n),l}(z,T,R,w,x,[cU]),q_(y,x,null)}finally{Rm()}return new tU(this.componentType,C,cc(S,x),x,S)}}class tU extends jk{constructor(e,t,i,r,o){super(),this.location=i,this._rootLView=r,this._tNode=o,this.previousInputValues=null,this.instance=t,this.hostView=this.changeDetectorRef=new JF(r),this.componentType=e}setInput(e,t){const i=this._tNode.inputs;let r;if(null!==i&&(r=i[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;const o=this._rootLView;$_(o[Se],o,r,e,t),this.previousInputValues.set(e,t),pu(Vi(this._tNode.index,o))}}get injector(){return new fi(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}function cU(){const n=Zn();mf(re()[Se],n)}function zt(n){let e=function hw(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),t=!0;const i=[n];for(;e;){let r;if(wr(n))r=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new ce(903,!1);r=e.\u0275dir}if(r){if(t){i.push(r);const s=n;s.inputs=sh(n.inputs),s.inputTransforms=sh(n.inputTransforms),s.declaredInputs=sh(n.declaredInputs),s.outputs=sh(n.outputs);const a=r.hostBindings;a&&fU(n,a);const c=r.viewQuery,l=r.contentQueries;if(c&&uU(n,c),l&&dU(n,l),Jd(n.inputs,r.inputs),Jd(n.declaredInputs,r.declaredInputs),Jd(n.outputs,r.outputs),null!==r.inputTransforms&&(null===s.inputTransforms&&(s.inputTransforms={}),Jd(s.inputTransforms,r.inputTransforms)),wr(r)&&r.data.animation){const u=n.data;u.animation=(u.animation||[]).concat(r.data.animation)}}const o=r.features;if(o)for(let s=0;s<o.length;s++){const a=o[s];a&&a.ngInherit&&a(n),a===zt&&(t=!1)}}e=Object.getPrototypeOf(e)}!function lU(n){let e=0,t=null;for(let i=n.length-1;i>=0;i--){const r=n[i];r.hostVars=e+=r.hostVars,r.hostAttrs=Vl(r.hostAttrs,t=Vl(t,r.hostAttrs))}}(i)}function sh(n){return n===Fr?{}:n===Rt?[]:n}function uU(n,e){const t=n.viewQuery;n.viewQuery=t?(i,r)=>{e(i,r),t(i,r)}:e}function dU(n,e){const t=n.contentQueries;n.contentQueries=t?(i,r,o)=>{e(i,r,o),t(i,r,o)}:e}function fU(n,e){const t=n.hostBindings;n.hostBindings=t?(i,r)=>{e(i,r),t(i,r)}:e}function ah(n){return!!X_(n)&&(Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n)}function X_(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function $r(n,e,t){return n[e]=t}function ti(n,e,t){return!Object.is(n[e],t)&&(n[e]=t,!0)}function Us(n,e,t,i){const r=ti(n,e,t);return ti(n,e+1,i)||r}function qr(n,e,t,i){const r=re();return ti(r,Ha(),e)&&(Ot(),jr(un(),r,n,e,t,i)),qr}function pc(n,e,t,i,r,o){const a=Us(n,function po(){return Ze.lFrame.bindingIndex}(),t,r);return go(2),a?e+it(t)+i+it(r)+o:lt}function se(n,e,t,i,r,o,s,a){const c=re(),l=Ot(),u=n+St,d=l.firstCreatePass?function FU(n,e,t,i,r,o,s,a,c){const l=e.consts,u=dc(e,n,4,s||null,Zo(l,a));H_(e,t,u,Zo(l,c)),mf(e,u);const d=u.tView=z_(2,u,i,r,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return null!==e.queries&&(e.queries.template(e,u),d.queries=e.queries.embeddedTView(u)),u}(u,l,c,e,t,i,r,o,s):l.data[u];zr(d,!1);const f=Ow(l,c,d,n);gf()&&Uf(l,c,f,d),ei(f,c),ih(c,c[u]=Q1(f,c,f,d)),df(d)&&B_(l,c,d),null!=s&&V_(c,d,a)}let Ow=function Dw(n,e,t,i){return Ko(!0),e[rt].createComment("")};function Bs(n){return Va(function EN(){return Ze.lFrame.contextLView}(),St+n)}function q(n,e,t){const i=re();return ti(i,Ha(),e)&&function Wi(n,e,t,i,r,o,s,a){const c=Pi(e,t);let u,l=e.inputs;!a&&null!=l&&(u=l[i])?($_(n,t,u,i,r),Ds(e)&&function DF(n,e){const t=Vi(e,n);16&t[dt]||(t[dt]|=64)}(t,e.index)):3&e.type&&(i=function OF(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(i),r=null!=s?s(r,e.value||"",i):r,o.setProperty(c,i,r))}(Ot(),un(),i,n,e,i[rt],t,!1),q}function e0(n,e,t,i,r){const s=r?"class":"style";$_(n,t,e.inputs[s],s,i)}function M(n,e,t,i){const r=re(),o=Ot(),s=St+n,a=r[rt],c=o.firstCreatePass?function zU(n,e,t,i,r,o){const s=e.consts,c=dc(e,n,2,i,Zo(s,r));return H_(e,t,c,Zo(s,o)),null!==c.attrs&&rh(c,c.attrs,!1),null!==c.mergedAttrs&&rh(c,c.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,c),c}(s,o,r,e,t,i):o.data[s],l=Iw(o,r,c,a,e,n);r[s]=l;const u=df(c);return zr(c,!0),jC(a,l,c),32!=(32&c.flags)&&gf()&&Uf(o,r,l,c),0===function vN(){return Ze.lFrame.elementDepthCount}()&&ei(l,r),function yN(){Ze.lFrame.elementDepthCount++}(),u&&(B_(o,r,c),U_(o,c,r)),null!==i&&V_(r,c),M}function b(){let n=Zn();Pm()?Tm():(n=n.parent,zr(n,!1));const e=n;(function MN(n){return Ze.skipHydrationRootTNode===n})(e)&&function SN(){Ze.skipHydrationRootTNode=null}(),function xN(){Ze.lFrame.elementDepthCount--}();const t=Ot();return t.firstCreatePass&&(mf(t,n),vm(n)&&t.queries.elementEnd(n)),null!=e.classesWithoutHost&&function VN(n){return 0!=(8&n.flags)}(e)&&e0(t,e,re(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function zN(n){return 0!=(16&n.flags)}(e)&&e0(t,e,re(),e.stylesWithoutHost,!1),b}function U(n,e,t,i){return M(n,e,t,i),b(),U}let Iw=(n,e,t,i,r,o)=>(Ko(!0),Lf(i,r,function qb(){return Ze.lFrame.currentNamespace}()));function Vs(n,e,t){const i=re(),r=Ot(),o=n+St,s=r.firstCreatePass?function WU(n,e,t,i,r){const o=e.consts,s=Zo(o,i),a=dc(e,n,8,"ng-container",s);return null!==s&&rh(a,s,!0),H_(e,t,a,Zo(o,r)),null!==e.queries&&e.queries.elementStart(e,a),a}(o,r,i,e,t):r.data[o];zr(s,!0);const a=Nw(r,i,s,n);return i[o]=a,gf()&&Uf(r,i,a,s),ei(a,i),df(s)&&(B_(r,i,s),U_(r,s,i)),null!=t&&V_(i,s),Vs}function zs(){let n=Zn();const e=Ot();return Pm()?Tm():(n=n.parent,zr(n,!1)),e.firstCreatePass&&(mf(e,n),vm(n)&&e.queries.elementEnd(n)),zs}let Nw=(n,e,t,i)=>(Ko(!0),Jm(e[rt],""));function jt(){return re()}function Cu(n){return!!n&&"function"==typeof n.then}function Lw(n){return!!n&&"function"==typeof n.subscribe}function ge(n,e,t,i){const r=re(),o=Ot(),s=Zn();return function Fw(n,e,t,i,r,o,s){const a=df(i),l=n.firstCreatePass&&nw(n),u=e[xn],d=tw(e);let f=!0;if(3&i.type||s){const _=Pi(i,e),m=s?s(_):_,g=d.length,v=s?x=>s(Jt(x[i.index])):i.index;let y=null;if(!s&&a&&(y=function qU(n,e,t,i){const r=n.cleanup;if(null!=r)for(let o=0;o<r.length-1;o+=2){const s=r[o];if(s===t&&r[o+1]===i){const a=e[Na],c=r[o+2];return a.length>c?a[c]:null}"string"==typeof s&&(o+=2)}return null}(n,e,r,i.index)),null!==y)(y.__ngLastListenerFn__||y).__ngNextListenerFn__=o,y.__ngLastListenerFn__=o,f=!1;else{o=Bw(i,e,u,o,!1);const x=t.listen(m,r,o);d.push(o,x),l&&l.push(r,v,g,g+1)}}else o=Bw(i,e,u,o,!1);const h=i.outputs;let p;if(f&&null!==h&&(p=h[r])){const _=p.length;if(_)for(let m=0;m<_;m+=2){const C=e[p[m]][p[m+1]].subscribe(o),S=d.length;d.push(o,C),l&&l.push(r,i.index,S,-(S+1))}}}(o,r,r[rt],s,n,e,i),ge}function Uw(n,e,t,i){try{return Vr(6,e,t),!1!==t(i)}catch(r){return rw(n,r),!1}finally{Vr(7,e,t)}}function Bw(n,e,t,i,r){return function o(s){if(s===Function)return i;pu(n.componentOffset>-1?Vi(n.index,e):e);let c=Uw(e,t,i,s),l=o.__ngNextListenerFn__;for(;l;)c=Uw(e,t,l,s)&&c,l=l.__ngNextListenerFn__;return r&&!1===c&&s.preventDefault(),c}}function Z(n=1){return function DN(n){return(Ze.lFrame.contextLView=function IN(n,e){for(;n>0;)e=e[ka],n--;return e}(n,Ze.lFrame.contextLView))[xn]}(n)}function fh(n,e){return n<<17|e<<2}function es(n){return n>>17&32767}function n0(n){return 2|n}function Hs(n){return(131068&n)>>2}function r0(n,e){return-131069&n|e<<2}function o0(n){return 1|n}function Yw(n,e,t,i,r){const o=n[t+1],s=null===e;let a=i?es(o):Hs(o),c=!1;for(;0!==a&&(!1===c||s);){const u=n[a+1];n5(n[a],e)&&(c=!0,n[a+1]=i?o0(u):n0(u)),a=i?es(u):Hs(u)}c&&(n[t+1]=i?n0(o):o0(o))}function n5(n,e){return null===n||null==e||(Array.isArray(n)?n[1]:n)===e||!(!Array.isArray(n)||"string"!=typeof e)&&Za(n,e)>=0}const Fn={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function Zw(n){return n.substring(Fn.key,Fn.keyEnd)}function Kw(n,e){const t=Fn.textEnd;return t===e?-1:(e=Fn.keyEnd=function s5(n,e,t){for(;e<t&&n.charCodeAt(e)>32;)e++;return e}(n,Fn.key=e,t),Mc(n,e,t))}function Mc(n,e,t){for(;e<t&&n.charCodeAt(e)<=32;)e++;return e}function Xr(n,e,t){return Sr(n,e,t,!1),Xr}function mt(n,e){return Sr(n,e,null,!0),mt}function bc(n){!function Er(n,e,t,i){const r=Ot(),o=go(2);r.firstUpdatePass&&iS(r,null,o,i);const s=re();if(t!==lt&&ti(s,o,t)){const a=r.data[di()];if(aS(a,i)&&!nS(r,o)){let c=i?a.classesWithoutHost:a.stylesWithoutHost;null!==c&&(t=nm(c,t||"")),e0(r,a,s,t,i)}else!function m5(n,e,t,i,r,o,s,a){r===lt&&(r=Rt);let c=0,l=0,u=0<r.length?r[0]:null,d=0<o.length?o[0]:null;for(;null!==u||null!==d;){const f=c<r.length?r[c+1]:void 0,h=l<o.length?o[l+1]:void 0;let _,p=null;u===d?(c+=2,l+=2,f!==h&&(p=d,_=h)):null===d||null!==u&&u<d?(c+=2,p=u):(l+=2,p=d,_=h),null!==p&&oS(n,e,t,i,p,_,s,a),u=c<r.length?r[c]:null,d=l<o.length?o[l]:null}}(r,a,s,s[rt],s[o+1],s[o+1]=function p5(n,e,t){if(null==t||""===t)return Rt;const i=[],r=Qo(t);if(Array.isArray(r))for(let o=0;o<r.length;o++)n(i,r[o],!0);else if("object"==typeof r)for(const o in r)r.hasOwnProperty(o)&&n(i,o,r[o]);else"string"==typeof r&&e(i,r);return i}(n,e,t),i,o)}}(g5,Zr,n,!0)}function Zr(n,e){for(let t=function r5(n){return function Qw(n){Fn.key=0,Fn.keyEnd=0,Fn.value=0,Fn.valueEnd=0,Fn.textEnd=n.length}(n),Kw(n,Mc(n,0,Fn.textEnd))}(e);t>=0;t=Kw(e,t))zi(n,Zw(e),!0)}function Sr(n,e,t,i){const r=re(),o=Ot(),s=go(2);o.firstUpdatePass&&iS(o,n,s,i),e!==lt&&ti(r,s,e)&&oS(o,o.data[di()],r,r[rt],n,r[s+1]=function _5(n,e){return null==n||""===n||("string"==typeof e?n+=e:"object"==typeof n&&(n=Ln(Qo(n)))),n}(e,t),i,s)}function nS(n,e){return e>=n.expandoStartIndex}function iS(n,e,t,i){const r=n.data;if(null===r[t+1]){const o=r[di()],s=nS(n,t);aS(o,i)&&null===e&&!s&&(e=!1),e=function u5(n,e,t,i){const r=function Om(n){const e=Ze.lFrame.currentDirectiveIndex;return-1===e?null:n[e]}(n);let o=i?e.residualClasses:e.residualStyles;if(null===r)0===(i?e.classBindings:e.styleBindings)&&(t=wu(t=s0(null,n,e,t,i),e.attrs,i),o=null);else{const s=e.directiveStylingLast;if(-1===s||n[s]!==r)if(t=s0(r,n,e,t,i),null===o){let c=function d5(n,e,t){const i=t?e.classBindings:e.styleBindings;if(0!==Hs(i))return n[es(i)]}(n,e,i);void 0!==c&&Array.isArray(c)&&(c=s0(null,n,e,c[1],i),c=wu(c,e.attrs,i),function f5(n,e,t,i){n[es(t?e.classBindings:e.styleBindings)]=i}(n,e,i,c))}else o=function h5(n,e,t){let i;const r=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<r;o++)i=wu(i,n[o].hostAttrs,t);return wu(i,e.attrs,t)}(n,e,i)}return void 0!==o&&(i?e.residualClasses=o:e.residualStyles=o),t}(r,o,e,i),function e5(n,e,t,i,r,o){let s=o?e.classBindings:e.styleBindings,a=es(s),c=Hs(s);n[i]=t;let u,l=!1;if(Array.isArray(t)?(u=t[1],(null===u||Za(t,u)>0)&&(l=!0)):u=t,r)if(0!==c){const f=es(n[a+1]);n[i+1]=fh(f,a),0!==f&&(n[f+1]=r0(n[f+1],i)),n[a+1]=function JU(n,e){return 131071&n|e<<17}(n[a+1],i)}else n[i+1]=fh(a,0),0!==a&&(n[a+1]=r0(n[a+1],i)),a=i;else n[i+1]=fh(c,0),0===a?a=i:n[c+1]=r0(n[c+1],i),c=i;l&&(n[i+1]=n0(n[i+1])),Yw(n,u,i,!0),Yw(n,u,i,!1),function t5(n,e,t,i,r){const o=r?n.residualClasses:n.residualStyles;null!=o&&"string"==typeof e&&Za(o,e)>=0&&(t[i+1]=o0(t[i+1]))}(e,u,n,i,o),s=fh(a,c),o?e.classBindings=s:e.styleBindings=s}(r,o,e,t,s,i)}}function s0(n,e,t,i,r){let o=null;const s=t.directiveEnd;let a=t.directiveStylingLast;for(-1===a?a=t.directiveStart:a++;a<s&&(o=e[a],i=wu(i,o.hostAttrs,r),o!==n);)a++;return null!==n&&(t.directiveStylingLast=a),i}function wu(n,e,t){const i=t?1:2;let r=-1;if(null!==e)for(let o=0;o<e.length;o++){const s=e[o];"number"==typeof s?r=s:r===i&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),zi(n,s,!!t||e[++o]))}return void 0===n?null:n}function g5(n,e,t){const i=String(e);""!==i&&!i.includes(" ")&&zi(n,i,t)}function oS(n,e,t,i,r,o,s,a){if(!(3&e.type))return;const c=n.data,l=c[a+1],u=function QU(n){return 1==(1&n)}(l)?sS(c,e,t,r,Hs(l),s):void 0;hh(u)||(hh(o)||function KU(n){return 2==(2&n)}(l)&&(o=sS(c,null,t,r,a,s)),function JL(n,e,t,i,r){if(e)r?n.addClass(t,i):n.removeClass(t,i);else{let o=-1===i.indexOf("-")?void 0:Jo.DashCase;null==r?n.removeStyle(t,i,o):("string"==typeof r&&r.endsWith("!important")&&(r=r.slice(0,-10),o|=Jo.Important),n.setStyle(t,i,r,o))}}(i,s,pf(di(),t),r,o))}function sS(n,e,t,i,r,o){const s=null===e;let a;for(;r>0;){const c=n[r],l=Array.isArray(c),u=l?c[1]:c,d=null===u;let f=t[r+1];f===lt&&(f=d?Rt:void 0);let h=d?Hm(f,i):u===i?f:void 0;if(l&&!hh(h)&&(h=Hm(c,i)),hh(h)&&(a=h,s))return a;const p=n[r+1];r=s?es(p):Hs(p)}if(null!==e){let c=o?e.residualClasses:e.residualStyles;null!=c&&(a=Hm(c,i))}return a}function hh(n){return void 0!==n}function aS(n,e){return 0!=(n.flags&(e?8:16))}function P(n,e=""){const t=re(),i=Ot(),r=n+St,o=i.firstCreatePass?dc(i,r,1,e,null):i.data[r],s=cS(i,t,o,e,n);t[r]=s,gf()&&Uf(i,t,s,o),zr(o,!1)}let cS=(n,e,t,i,r)=>(Ko(!0),function Nf(n,e){return n.createText(e)}(e[rt],i));function ot(n){return Ve("",n,""),ot}function Ve(n,e,t){const i=re(),r=function hc(n,e,t,i){return ti(n,Ha(),t)?e+it(t)+i:lt}(i,n,e,t);return r!==lt&&yo(i,di(),r),Ve}function ph(n,e,t,i,r){const o=re(),s=pc(o,n,e,t,i,r);return s!==lt&&yo(o,di(),s),ph}const Gs=void 0;var B5=["en",[["a","p"],["AM","PM"],Gs],[["AM","PM"],Gs,Gs],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Gs,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Gs,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Gs,"{1} 'at' {0}",Gs],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function U5(n){const t=Math.floor(Math.abs(n)),i=n.toString().replace(/^[^.]*\.?/,"").length;return 1===t&&0===i?1:5}];let Cc={};function hi(n){const e=function V5(n){return n.toLowerCase().replace(/_/g,"-")}(n);let t=TS(e);if(t)return t;const i=e.split("-")[0];if(t=TS(i),t)return t;if("en"===i)return B5;throw new ce(701,!1)}function TS(n){return n in Cc||(Cc[n]=Kt.ng&&Kt.ng.common&&Kt.ng.common.locales&&Kt.ng.common.locales[n]),Cc[n]}var en=function(n){return n[n.LocaleId=0]="LocaleId",n[n.DayPeriodsFormat=1]="DayPeriodsFormat",n[n.DayPeriodsStandalone=2]="DayPeriodsStandalone",n[n.DaysFormat=3]="DaysFormat",n[n.DaysStandalone=4]="DaysStandalone",n[n.MonthsFormat=5]="MonthsFormat",n[n.MonthsStandalone=6]="MonthsStandalone",n[n.Eras=7]="Eras",n[n.FirstDayOfWeek=8]="FirstDayOfWeek",n[n.WeekendRange=9]="WeekendRange",n[n.DateFormat=10]="DateFormat",n[n.TimeFormat=11]="TimeFormat",n[n.DateTimeFormat=12]="DateTimeFormat",n[n.NumberSymbols=13]="NumberSymbols",n[n.NumberFormats=14]="NumberFormats",n[n.CurrencyCode=15]="CurrencyCode",n[n.CurrencySymbol=16]="CurrencySymbol",n[n.CurrencyName=17]="CurrencyName",n[n.Currencies=18]="Currencies",n[n.Directionality=19]="Directionality",n[n.PluralCase=20]="PluralCase",n[n.ExtraData=21]="ExtraData",n}(en||{});const wc="en-US";let AS=wc;function l0(n,e,t,i,r){if(n=Qe(n),Array.isArray(n))for(let o=0;o<n.length;o++)l0(n[o],e,t,i,r);else{const o=Ot(),s=re(),a=Zn();let c=ks(n)?n:Qe(n.provide);const l=d1(n),u=1048575&a.providerIndexes,d=a.directiveStart,f=a.providerIndexes>>20;if(ks(n)||!n.multi){const h=new Zl(l,r,ee),p=d0(c,e,r?u:u+f,d);-1===p?(Bm(xf(a,s),o,c),u0(o,n,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,r&&(a.providerIndexes+=1048576),t.push(h),s.push(h)):(t[p]=h,s[p]=h)}else{const h=d0(c,e,u+f,d),p=d0(c,e,u,u+f),m=p>=0&&t[p];if(r&&!m||!r&&!(h>=0&&t[h])){Bm(xf(a,s),o,c);const g=function U4(n,e,t,i,r){const o=new Zl(n,t,ee);return o.multi=[],o.index=e,o.componentProviders=0,eE(o,r,i&&!t),o}(r?F4:k4,t.length,r,i,l);!r&&m&&(t[p].providerFactory=g),u0(o,n,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,r&&(a.providerIndexes+=1048576),t.push(g),s.push(g)}else u0(o,n,h>-1?h:p,eE(t[r?p:h],l,!r&&i));!r&&i&&m&&t[p].componentProviders++}}}function u0(n,e,t,i){const r=ks(e),o=function Tk(n){return!!n.useClass}(e);if(r||o){const c=(o?Qe(e.useClass):e).prototype.ngOnDestroy;if(c){const l=n.destroyHooks||(n.destroyHooks=[]);if(!r&&e.multi){const u=l.indexOf(t);-1===u?l.push(t,[i,c]):l[u+1].push(i,c)}else l.push(t,c)}}}function eE(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function d0(n,e,t,i){for(let r=t;r<i;r++)if(e[r]===n)return r;return-1}function k4(n,e,t,i){return f0(this.multi,[])}function F4(n,e,t,i){const r=this.multi;let o;if(this.providerFactory){const s=this.providerFactory.componentProviders,a=Ns(t,t[Se],this.providerFactory.index,i);o=a.slice(0,s),f0(r,o);for(let c=s;c<a.length;c++)o.push(a[c])}else o=[],f0(r,o);return o}function f0(n,e){for(let t=0;t<n.length;t++)e.push((0,n[t])());return e}function ln(n,e=[]){return t=>{t.providersResolver=(i,r)=>function L4(n,e,t){const i=Ot();if(i.firstCreatePass){const r=wr(n);l0(t,i.data,i.blueprint,r,!0),l0(e,i.data,i.blueprint,r,!1)}}(i,r?r(n):n,e)}}class Ws{}class tE{}class h0 extends Ws{constructor(e,t,i){super(),this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new dw(this);const r=Bi(e);this._bootstrapComponents=vo(r.bootstrap),this._r3Injector=w1(e,t,[{provide:Ws,useValue:this},{provide:Jf,useValue:this.componentFactoryResolver},...i],Ln(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class p0 extends tE{constructor(e){super(),this.moduleType=e}create(e){return new h0(this.moduleType,e,[])}}class nE extends Ws{constructor(e){super(),this.componentFactoryResolver=new dw(this),this.instance=null;const t=new ic([...e.providers,{provide:Ws,useValue:this},{provide:Jf,useValue:this.componentFactoryResolver}],e.parent||jf(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}}function g0(n,e,t=null){return new nE({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}let z4=(()=>{class n{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){const i=a1(0,t.type),r=i.length>0?g0([i],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,r)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(const t of this.cachedInjectors.values())null!==t&&t.destroy()}finally{this.cachedInjectors.clear()}}static{this.\u0275prov=We({token:n,providedIn:"environment",factory:()=>new n($e(rr))})}}return n})();function m0(n){n.getStandaloneInjector=e=>e.get(z4).getOrCreateStandaloneInjector(n)}function Ou(n,e,t){const i=ui()+n,r=re();return r[i]===lt?$r(r,i,t?e.call(t):e()):function yu(n,e){return n[e]}(r,i)}function Du(n,e){const t=n[e];return t===lt?void 0:t}function dE(n,e,t,i,r,o,s,a){const c=e+t;return function ch(n,e,t,i,r){const o=Us(n,e,t,i);return ti(n,e+2,r)||o}(n,c,r,o,s)?$r(n,c+3,a?i.call(a,r,o,s):i(r,o,s)):Du(n,c+3)}function Iu(n,e){const t=Ot();let i;const r=n+St;t.firstCreatePass?(i=function oB(n,e){if(e)for(let t=e.length-1;t>=0;t--){const i=e[t];if(n===i.name)return i}}(e,t.pipeRegistry),t.data[r]=i,i.onDestroy&&(t.destroyHooks??=[]).push(r,i.onDestroy)):i=t.data[r];const o=i.factory||(i.factory=Is(i.type)),a=wi(ee);try{const c=yf(!1),l=o();return yf(c),function VU(n,e,t,i){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=i}(t,re(),r,l),l}finally{wi(a)}}function pE(n,e,t){const i=n+St,r=re(),o=Va(r,i);return Ru(r,i)?function lE(n,e,t,i,r,o){const s=e+t;return ti(n,s,r)?$r(n,s+1,o?i.call(o,r):i(r)):Du(n,s+1)}(r,ui(),e,o.transform,t,o):o.transform(t)}function yh(n,e,t,i,r){const o=n+St,s=re(),a=Va(s,o);return Ru(s,o)?dE(s,ui(),e,a.transform,t,i,r,a):a.transform(t,i,r)}function Ru(n,e){return n[Se].data[e].pure}function lB(){return this._results[Symbol.iterator]()}class v0{get changes(){return this._changes||(this._changes=new dn)}constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const t=v0.prototype;t[Symbol.iterator]||(t[Symbol.iterator]=lB)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){const i=this;i.dirty=!1;const r=function ir(n){return n.flat(Number.POSITIVE_INFINITY)}(e);(this._changesDetected=!function tL(n,e,t){if(n.length!==e.length)return!1;for(let i=0;i<n.length;i++){let r=n[i],o=e[i];if(t&&(r=t(r),o=t(o)),o!==r)return!1}return!0}(i._results,r,t))&&(i._results=r,i.length=r.length,i.last=r[this.length-1],i.first=r[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}function dB(n,e,t,i=!0){const r=e[Se];if(function WL(n,e,t,i){const r=Xn+i,o=t.length;i>0&&(t[r-1][Cr]=e),i<o-Xn?(e[Cr]=t[r],cC(t,Xn+i,e)):(t.push(e),e[Cr]=null),e[cn]=t;const s=e[Gl];null!==s&&t!==s&&function jL(n,e){const t=n[Ua];e[Mn]!==e[cn][cn][Mn]&&(n[cb]=!0),null===t?n[Ua]=[e]:t.push(e)}(s,e);const a=e[Ur];null!==a&&a.insertView(n),e[dt]|=128}(r,e,n,t),i){const o=i_(t,n),s=e[rt],a=Ff(s,n[Br]);null!==a&&function zL(n,e,t,i,r,o){i[hn]=r,i[Qn]=e,su(n,i,t,1,r,o)}(r,n[Qn],s,e,a,o)}}let xo=(()=>{class n{static{this.__NG_ELEMENT_ID__=pB}}return n})();const fB=xo,hB=class extends fB{constructor(e,t,i){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,i){const r=function uB(n,e,t,i){const r=e.tView,a=nh(n,r,t,4096&n[dt]?4096:16,null,e,null,null,null,i?.injector??null,i?.hydrationInfo??null);a[Gl]=n[e.index];const l=n[Ur];return null!==l&&(a[Ur]=l.createEmbeddedView(r)),q_(r,a,t),a}(this._declarationLView,this._declarationTContainer,e,{injector:t,hydrationInfo:i});return new _u(r)}};function pB(){return xh(Zn(),re())}function xh(n,e){return 4&n.type?new hB(e,n,cc(n,e)):null}let Pr=(()=>{class n{static{this.__NG_ELEMENT_ID__=xB}}return n})();function xB(){return ME(Zn(),re())}const MB=Pr,yE=class extends MB{constructor(e,t,i){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=i}get element(){return cc(this._hostTNode,this._hostLView)}get injector(){return new fi(this._hostTNode,this._hostLView)}get parentInjector(){const e=Mf(this._hostTNode,this._hostLView);if(km(e)){const t=Jl(e,this._hostLView),i=Kl(e);return new fi(t[Se].data[i+8],t)}return new fi(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const t=xE(this._lContainer);return null!==t&&t[e]||null}get length(){return this._lContainer.length-Xn}createEmbeddedView(e,t,i){let r,o;"number"==typeof i?r=i:null!=i&&(r=i.index,o=i.injector);const a=e.createEmbeddedViewImpl(t||{},o,null);return this.insertImpl(a,r,false),a}createComponent(e,t,i,r,o){const s=e&&!function eu(n){return"function"==typeof n}(e);let a;if(s)a=t;else{const _=t||{};a=_.index,i=_.injector,r=_.projectableNodes,o=_.environmentInjector||_.ngModuleRef}const c=s?e:new vu(At(e)),l=i||this.parentInjector;if(!o&&null==c.ngModule){const m=(s?l:this.parentInjector).get(rr,null);m&&(o=m)}At(c.componentType??{});const h=c.create(l,r,null,o);return this.insertImpl(h.hostView,a,false),h}insert(e,t){return this.insertImpl(e,t,!1)}insertImpl(e,t,i){const r=e._lView;if(function gN(n){return li(n[cn])}(r)){const c=this.indexOf(e);if(-1!==c)this.detach(c);else{const l=r[cn],u=new yE(l,l[Qn],l[cn]);u.detach(u.indexOf(e))}}const s=this._adjustIndex(t),a=this._lContainer;return dB(a,r,s,!i),e.attachToViewContainerRef(),cC(y0(a),s,e),e}move(e,t){return this.insert(e,t)}indexOf(e){const t=xE(this._lContainer);return null!==t?t.indexOf(e):-1}remove(e){const t=this._adjustIndex(e,-1),i=kf(this._lContainer,t);i&&(wf(y0(this._lContainer),t),Qm(i[Se],i))}detach(e){const t=this._adjustIndex(e,-1),i=kf(this._lContainer,t);return i&&null!=wf(y0(this._lContainer),t)?new _u(i):null}_adjustIndex(e,t=0){return e??this.length+t}};function xE(n){return n[8]}function y0(n){return n[8]||(n[8]=[])}function ME(n,e){let t;const i=e[n.index];return li(i)?t=i:(t=Q1(i,e,null,n),e[n.index]=t,ih(e,t)),bE(t,e,n,i),new yE(t,n,e)}let bE=function CE(n,e,t,i){if(n[Br])return;let r;r=8&t.type?Jt(i):function bB(n,e){const t=n[rt],i=t.createComment(""),r=Pi(e,n);return Ls(t,Ff(t,r),i,function YL(n,e){return n.nextSibling(e)}(t,r),!1),i}(e,t),n[Br]=r};class x0{constructor(e){this.queryList=e,this.matches=null}clone(){return new x0(this.queryList)}setDirty(){this.queryList.setDirty()}}class M0{constructor(e=[]){this.queries=e}createEmbeddedView(e){const t=e.queries;if(null!==t){const i=null!==e.contentQueries?e.contentQueries[0]:t.length,r=[];for(let o=0;o<i;o++){const s=t.getByIndex(o);r.push(this.queries[s.indexInDeclarationView].clone())}return new M0(r)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)null!==AE(e,t).matches&&this.queries[t].setDirty()}}class wE{constructor(e,t,i=null){this.predicate=e,this.flags=t,this.read=i}}class b0{constructor(e=[]){this.queries=e}elementStart(e,t){for(let i=0;i<this.queries.length;i++)this.queries[i].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let i=0;i<this.length;i++){const r=null!==t?t.length:0,o=this.getByIndex(i).embeddedTView(e,r);o&&(o.indexInDeclarationView=i,null!==t?t.push(o):t=[o])}return null!==t?new b0(t):null}template(e,t){for(let i=0;i<this.queries.length;i++)this.queries[i].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}}class C0{constructor(e,t=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new C0(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const t=this._declarationNodeIndex;let i=e.parent;for(;null!==i&&8&i.type&&i.index!==t;)i=i.parent;return t===(null!==i?i.index:-1)}return this._appliesToNextNode}matchTNode(e,t){const i=this.metadata.predicate;if(Array.isArray(i))for(let r=0;r<i.length;r++){const o=i[r];this.matchTNodeWithReadOption(e,t,SB(t,o)),this.matchTNodeWithReadOption(e,t,bf(t,e,o,!1,!1))}else i===xo?4&t.type&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,bf(t,e,i,!1,!1))}matchTNodeWithReadOption(e,t,i){if(null!==i){const r=this.metadata.read;if(null!==r)if(r===Hi||r===Pr||r===xo&&4&t.type)this.addMatch(t.index,-2);else{const o=bf(t,e,r,!1,!1);null!==o&&this.addMatch(t.index,o)}else this.addMatch(t.index,i)}}addMatch(e,t){null===this.matches?this.matches=[e,t]:this.matches.push(e,t)}}function SB(n,e){const t=n.localNames;if(null!==t)for(let i=0;i<t.length;i+=2)if(t[i]===e)return t[i+1];return null}function PB(n,e,t,i){return-1===t?function EB(n,e){return 11&n.type?cc(n,e):4&n.type?xh(n,e):null}(e,n):-2===t?function TB(n,e,t){return t===Hi?cc(e,n):t===xo?xh(e,n):t===Pr?ME(e,n):void 0}(n,e,i):Ns(n,n[Se],t,e)}function SE(n,e,t,i){const r=e[Ur].queries[i];if(null===r.matches){const o=n.data,s=t.matches,a=[];for(let c=0;c<s.length;c+=2){const l=s[c];a.push(l<0?null:PB(e,o[l],s[c+1],t.metadata.read))}r.matches=a}return r.matches}function w0(n,e,t,i){const r=n.queries.getByIndex(t),o=r.matches;if(null!==o){const s=SE(n,e,r,t);for(let a=0;a<o.length;a+=2){const c=o[a];if(c>0)i.push(s[a/2]);else{const l=o[a+1],u=e[-c];for(let d=Xn;d<u.length;d++){const f=u[d];f[Gl]===f[cn]&&w0(f[Se],f,l,i)}if(null!==u[Ua]){const d=u[Ua];for(let f=0;f<d.length;f++){const h=d[f];w0(h[Se],h,l,i)}}}}}return i}function Nu(n){const e=re(),t=Ot(),i=zb();Dm(i+1);const r=AE(t,i);if(n.dirty&&function hN(n){return 4==(4&n[dt])}(e)===(2==(2&r.metadata.flags))){if(null===r.matches)n.reset([]);else{const o=r.crossesNgTemplate?w0(t,e,i,[]):SE(t,e,r,i);n.reset(o,Yk),n.notifyOnChanges()}return!0}return!1}function bh(n,e,t){const i=Ot();i.firstCreatePass&&(function TE(n,e,t){null===n.queries&&(n.queries=new b0),n.queries.track(new C0(e,t))}(i,new wE(n,e,t),-1),2==(2&e)&&(i.staticViewQueries=!0)),function PE(n,e,t){const i=new v0(4==(4&t));(function PF(n,e,t,i){const r=tw(e);r.push(t),n.firstCreatePass&&nw(n).push(i,r.length-1)})(n,e,i,i.destroy),null===e[Ur]&&(e[Ur]=new M0),e[Ur].queries.push(new x0(i))}(i,re(),e)}function Lu(){return function AB(n,e){return n[Ur].queries[e].queryList}(re(),zb())}function AE(n,e){return n.queries.getByIndex(e)}function js(n,e){return xh(n,e)}const O0=new Ne("Application Initializer");let D0=(()=>{class n{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,i)=>{this.resolve=t,this.reject=i}),this.appInits=Ie(O0,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const t=[];for(const r of this.appInits){const o=r();if(Cu(o))t.push(o);else if(Lw(o)){const s=new Promise((a,c)=>{o.subscribe({complete:a,error:c})});t.push(s)}}const i=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{i()}).catch(r=>{this.reject(r)}),0===t.length&&i(),this.initialized=!0}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=We({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),$E=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=We({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})();const Mo=new Ne("LocaleId",{providedIn:"root",factory:()=>Ie(Mo,wt.Optional|wt.SkipSelf)||function KB(){return typeof $localize<"u"&&$localize.locale||wc}()});let qE=(()=>{class n{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new ki(!1)}add(){this.hasPendingTasks.next(!0);const t=this.taskId++;return this.pendingTasks.add(t),t}remove(t){this.pendingTasks.delete(t),0===this.pendingTasks.size&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=We({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();class eV{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}}let XE=(()=>{class n{compileModuleSync(t){return new p0(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){const i=this.compileModuleSync(t),o=vo(Bi(t).declarations).reduce((s,a)=>{const c=At(a);return c&&s.push(new vu(c)),s},[]);return new eV(i,o)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=We({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();const JE=new Ne(""),Sh=new Ne("");let k0,N0=(()=>{class n{constructor(t,i,r){this._ngZone=t,this.registry=i,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,k0||(function bV(n){k0=n}(r),r.addToWindow(i)),this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Qt.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(i=>!i.updateCb||!i.updateCb(t)||(clearTimeout(i.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,i,r){let o=-1;i&&i>0&&(o=setTimeout(()=>{this._callbacks=this._callbacks.filter(s=>s.timeoutId!==o),t(this._didWork,this.getPendingTasks())},i)),this._callbacks.push({doneCb:t,timeoutId:o,updateCb:r})}whenStable(t,i,r){if(r&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,i,r),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(t){this.registry.registerApplication(t,this)}unregisterApplication(t){this.registry.unregisterApplication(t)}findProviders(t,i,r){return[]}static{this.\u0275fac=function(i){return new(i||n)($e(Qt),$e(L0),$e(Sh))}}static{this.\u0275prov=We({token:n,factory:n.\u0275fac})}}return n})(),L0=(()=>{class n{constructor(){this._applications=new Map}registerApplication(t,i){this._applications.set(t,i)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,i=!0){return k0?.findTestabilityInTree(this,t,i)??null}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=We({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})(),ts=null;const QE=new Ne("AllowMultipleToken"),F0=new Ne("PlatformDestroyListeners"),U0=new Ne("appBootstrapListener");class tP{constructor(e,t){this.name=e,this.token=t}}function iP(n,e,t=[]){const i=`Platform: ${e}`,r=new Ne(i);return(o=[])=>{let s=B0();if(!s||s.injector.get(QE,!1)){const a=[...t,...o,{provide:r,useValue:!0}];n?n(a):function SV(n){if(ts&&!ts.get(QE,!1))throw new ce(400,!1);(function eP(){!function eN(n){xb=n}(()=>{throw new ce(600,!1)})})(),ts=n;const e=n.get(oP);(function nP(n){n.get(f1,null)?.forEach(t=>t())})(n)}(function rP(n=[],e){return Gi.create({name:e,providers:[{provide:g_,useValue:"platform"},{provide:F0,useValue:new Set([()=>ts=null])},...n]})}(a,i))}return function PV(n){const e=B0();if(!e)throw new ce(401,!1);return e}()}}function B0(){return ts?.get(oP)??null}let oP=(()=>{class n{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,i){const r=function TV(n="zone.js",e){return"noop"===n?new dF:"zone.js"===n?new Qt(e):n}(i?.ngZone,function sP(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}({eventCoalescing:i?.ngZoneEventCoalescing,runCoalescing:i?.ngZoneRunCoalescing}));return r.run(()=>{const o=function V4(n,e,t){return new h0(n,e,t)}(t.moduleType,this.injector,function dP(n){return[{provide:Qt,useFactory:n},{provide:uu,multi:!0,useFactory:()=>{const e=Ie(OV,{optional:!0});return()=>e.initialize()}},{provide:uP,useFactory:AV},{provide:A1,useFactory:O1}]}(()=>r)),s=o.injector.get(_o,null);return r.runOutsideAngular(()=>{const a=r.onError.subscribe({next:c=>{s.handleError(c)}});o.onDestroy(()=>{Eh(this._modules,o),a.unsubscribe()})}),function aP(n,e,t){try{const i=t();return Cu(i)?i.catch(r=>{throw e.runOutsideAngular(()=>n.handleError(r)),r}):i}catch(i){throw e.runOutsideAngular(()=>n.handleError(i)),i}}(s,r,()=>{const a=o.injector.get(D0);return a.runInitializers(),a.donePromise.then(()=>(function OS(n){Qi(n,"Expected localeId to be defined"),"string"==typeof n&&(AS=n.toLowerCase().replace(/_/g,"-"))}(o.injector.get(Mo,wc)||wc),this._moduleDoBootstrap(o),o))})})}bootstrapModule(t,i=[]){const r=cP({},i);return function CV(n,e,t){const i=new p0(t);return Promise.resolve(i)}(0,0,t).then(o=>this.bootstrapModuleFactory(o,r))}_moduleDoBootstrap(t){const i=t.injector.get(Pc);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(r=>i.bootstrap(r));else{if(!t.instance.ngDoBootstrap)throw new ce(-403,!1);t.instance.ngDoBootstrap(i)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new ce(404,!1);this._modules.slice().forEach(i=>i.destroy()),this._destroyListeners.forEach(i=>i());const t=this._injector.get(F0,null);t&&(t.forEach(i=>i()),t.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static{this.\u0275fac=function(i){return new(i||n)($e(Gi))}}static{this.\u0275prov=We({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})();function cP(n,e){return Array.isArray(e)?e.reduce(cP,n):{...n,...e}}let Pc=(()=>{class n{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=Ie(uP),this.zoneIsStable=Ie(A1),this.componentTypes=[],this.components=[],this.isStable=Ie(qE).hasPendingTasks.pipe(kr(t=>t?tt(!1):this.zoneIsStable),function d3(n,e=Wo){return n=n??f3,Nn((t,i)=>{let r,o=!0;t.subscribe(Tn(i,s=>{const a=e(s);(o||!n(r,a))&&(o=!1,r=a,i.next(s))}))})}(),UM()),this._injector=Ie(rr)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(t,i){const r=t instanceof _1;if(!this._injector.get(D0).done)throw!r&&function Ra(n){const e=At(n)||qn(n)||ci(n);return null!==e&&e.standalone}(t),new ce(405,!1);let s;s=r?t:this._injector.get(Jf).resolveComponentFactory(t),this.componentTypes.push(s.componentType);const a=function wV(n){return n.isBoundToModule}(s)?void 0:this._injector.get(Ws),l=s.create(Gi.NULL,[],i||s.selector,a),u=l.location.nativeElement,d=l.injector.get(JE,null);return d?.registerApplication(u),l.onDestroy(()=>{this.detachView(l.hostView),Eh(this.components,l),d?.unregisterApplication(u)}),this._loadComponent(l),l}tick(){if(this._runningTick)throw new ce(101,!1);try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this.internalErrorHandler(t)}finally{this._runningTick=!1}}attachView(t){const i=t;this._views.push(i),i.attachToAppRef(this)}detachView(t){const i=t;Eh(this._views,i),i.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);const i=this._injector.get(U0,[]);i.push(...this._bootstrapListeners),i.forEach(r=>r(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>Eh(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new ce(406,!1);const t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=We({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function Eh(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const uP=new Ne("",{providedIn:"root",factory:()=>Ie(_o).handleError.bind(void 0)});function AV(){const n=Ie(Qt),e=Ie(_o);return t=>n.runOutsideAngular(()=>e.handleError(t))}let OV=(()=>{class n{constructor(){this.zone=Ie(Qt),this.applicationRef=Ie(Pc)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=We({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();let Tc=(()=>{class n{static{this.__NG_ELEMENT_ID__=IV}}return n})();function IV(n){return function RV(n,e,t){if(Ds(n)&&!t){const i=Vi(n.index,e);return new _u(i,i)}return 47&n.type?new _u(e[Mn],e):null}(Zn(),re(),16==(16&n))}class mP{constructor(){}supports(e){return ah(e)}create(e){return new UV(e)}}const FV=(n,e)=>e;class UV{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||FV}forEachItem(e){let t;for(t=this._itHead;null!==t;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,i=this._removalsHead,r=0,o=null;for(;t||i;){const s=!i||t&&t.currentIndex<vP(i,r,o)?t:i,a=vP(s,r,o),c=s.currentIndex;if(s===i)r--,i=i._nextRemoved;else if(t=t._next,null==s.previousIndex)r++;else{o||(o=[]);const l=a-r,u=c-r;if(l!=u){for(let f=0;f<l;f++){const h=f<o.length?o[f]:o[f]=0,p=h+f;u<=p&&p<l&&(o[f]=h+1)}o[s.previousIndex]=u-l}}a!==c&&e(s,a,c)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;null!==t;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)e(t)}diff(e){if(null==e&&(e=[]),!ah(e))throw new ce(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let r,o,s,t=this._itHead,i=!1;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),null!==t&&Object.is(t.trackById,s)?(i&&(t=this._verifyReinsertion(t,o,s,a)),Object.is(t.item,o)||this._addIdentityChange(t,o)):(t=this._mismatch(t,o,s,a),i=!0),t=t._next}else r=0,function yU(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{const t=n[Symbol.iterator]();let i;for(;!(i=t.next()).done;)e(i.value)}}(e,a=>{s=this._trackByFn(r,a),null!==t&&Object.is(t.trackById,s)?(i&&(t=this._verifyReinsertion(t,a,s,r)),Object.is(t.item,a)||this._addIdentityChange(t,a)):(t=this._mismatch(t,a,s,r),i=!0),t=t._next,r++}),this.length=r;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,i,r){let o;return null===e?o=this._itTail:(o=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,o,r)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(i,r))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,o,r)):e=this._addAfter(new BV(t,i),o,r),e}_verifyReinsertion(e,t,i,r){let o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null);return null!==o?e=this._reinsertAfter(o,e._prev,r):e.currentIndex!=r&&(e.currentIndex=r,this._addToMoves(e,r)),e}_truncate(e){for(;null!==e;){const t=e._next;this._addToRemovals(this._unlink(e)),e=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,i){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const r=e._prevRemoved,o=e._nextRemoved;return null===r?this._removalsHead=o:r._nextRemoved=o,null===o?this._removalsTail=r:o._prevRemoved=r,this._insertAfter(e,t,i),this._addToMoves(e,i),e}_moveAfter(e,t,i){return this._unlink(e),this._insertAfter(e,t,i),this._addToMoves(e,i),e}_addAfter(e,t,i){return this._insertAfter(e,t,i),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,t,i){const r=null===t?this._itHead:t._next;return e._next=r,e._prev=t,null===r?this._itTail=e:r._prev=e,null===t?this._itHead=e:t._next=e,null===this._linkedRecords&&(this._linkedRecords=new _P),this._linkedRecords.put(e),e.currentIndex=i,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const t=e._prev,i=e._next;return null===t?this._itHead=i:t._next=i,null===i?this._itTail=t:i._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new _P),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class BV{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class VV{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let i;for(i=this._head;null!==i;i=i._nextDup)if((null===t||t<=i.currentIndex)&&Object.is(i.trackById,e))return i;return null}remove(e){const t=e._prevDup,i=e._nextDup;return null===t?this._head=i:t._nextDup=i,null===i?this._tail=t:i._prevDup=t,null===this._head}}class _P{constructor(){this.map=new Map}put(e){const t=e.trackById;let i=this.map.get(t);i||(i=new VV,this.map.set(t,i)),i.add(e)}get(e,t){const r=this.map.get(e);return r?r.get(e,t):null}remove(e){const t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function vP(n,e,t){const i=n.previousIndex;if(null===i)return i;let r=0;return t&&i<t.length&&(r=t[i]),i+e+r}class yP{constructor(){}supports(e){return e instanceof Map||X_(e)}create(){return new zV}}class zV{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(e){let t;for(t=this._mapHead;null!==t;t=t._next)e(t)}forEachPreviousItem(e){let t;for(t=this._previousMapHead;null!==t;t=t._nextPrevious)e(t)}forEachChangedItem(e){let t;for(t=this._changesHead;null!==t;t=t._nextChanged)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}diff(e){if(e){if(!(e instanceof Map||X_(e)))throw new ce(900,!1)}else e=new Map;return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._mapHead;if(this._appendAfter=null,this._forEach(e,(i,r)=>{if(t&&t.key===r)this._maybeAddToChanges(t,i),this._appendAfter=t,t=t._next;else{const o=this._getOrCreateRecordForKey(r,i);t=this._insertBeforeOrAppend(t,o)}}),t){t._prev&&(t._prev._next=null),this._removalsHead=t;for(let i=t;null!==i;i=i._nextRemoved)i===this._mapHead&&(this._mapHead=null),this._records.delete(i.key),i._nextRemoved=i._next,i.previousValue=i.currentValue,i.currentValue=null,i._prev=null,i._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,t){if(e){const i=e._prev;return t._next=e,t._prev=i,e._prev=t,i&&(i._next=t),e===this._mapHead&&(this._mapHead=t),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}_getOrCreateRecordForKey(e,t){if(this._records.has(e)){const r=this._records.get(e);this._maybeAddToChanges(r,t);const o=r._prev,s=r._next;return o&&(o._next=s),s&&(s._prev=o),r._next=null,r._prev=null,r}const i=new HV(e);return this._records.set(e,i),i.currentValue=t,this._addToAdditions(i),i}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;null!==e;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;null!=e;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,t){Object.is(t,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=t,this._addToChanges(e))}_addToAdditions(e){null===this._additionsHead?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){null===this._changesHead?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,t){e instanceof Map?e.forEach(t):Object.keys(e).forEach(i=>t(e[i],i))}}class HV{constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function xP(){return new Ah([new mP])}let Ah=(()=>{class n{static{this.\u0275prov=We({token:n,providedIn:"root",factory:xP})}constructor(t){this.factories=t}static create(t,i){if(null!=i){const r=i.factories.slice();t=t.concat(r)}return new n(t)}static extend(t){return{provide:n,useFactory:i=>n.create(t,i||xP()),deps:[[n,new Pf,new Ef]]}}find(t){const i=this.factories.find(r=>r.supports(t));if(null!=i)return i;throw new ce(901,!1)}}return n})();function MP(){return new Uu([new yP])}let Uu=(()=>{class n{static{this.\u0275prov=We({token:n,providedIn:"root",factory:MP})}constructor(t){this.factories=t}static create(t,i){if(i){const r=i.factories.slice();t=t.concat(r)}return new n(t)}static extend(t){return{provide:n,useFactory:i=>n.create(t,i||MP()),deps:[[n,new Pf,new Ef]]}}find(t){const i=this.factories.find(r=>r.supports(t));if(i)return i;throw new ce(901,!1)}}return n})();const jV=iP(null,"core",[]);let $V=(()=>{class n{constructor(t){}static{this.\u0275fac=function(i){return new(i||n)($e(Pc))}}static{this.\u0275mod=br({type:n})}static{this.\u0275inj=er({})}}return n})();let j0=null;function ns(){return j0}class sz{}const sr=new Ne("DocumentToken");let $0=(()=>{class n{historyGo(t){throw new Error("Not implemented")}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=We({token:n,factory:function(){return Ie(cz)},providedIn:"platform"})}}return n})();const az=new Ne("Location Initialized");let cz=(()=>{class n extends $0{constructor(){super(),this._doc=Ie(sr),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return ns().getBaseHref(this._doc)}onPopState(t){const i=ns().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",t,!1),()=>i.removeEventListener("popstate",t)}onHashChange(t){const i=ns().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",t,!1),()=>i.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,i,r){this._history.pushState(t,i,r)}replaceState(t,i,r){this._history.replaceState(t,i,r)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=We({token:n,factory:function(){return new n},providedIn:"platform"})}}return n})();function q0(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function OP(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function bo(n){return n&&"?"!==n[0]?"?"+n:n}let qs=(()=>{class n{historyGo(t){throw new Error("Not implemented")}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=We({token:n,factory:function(){return Ie(IP)},providedIn:"root"})}}return n})();const DP=new Ne("appBaseHref");let IP=(()=>{class n extends qs{constructor(t,i){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??Ie(sr).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return q0(this._baseHref,t)}path(t=!1){const i=this._platformLocation.pathname+bo(this._platformLocation.search),r=this._platformLocation.hash;return r&&t?`${i}${r}`:i}pushState(t,i,r,o){const s=this.prepareExternalUrl(r+bo(o));this._platformLocation.pushState(t,i,s)}replaceState(t,i,r,o){const s=this.prepareExternalUrl(r+bo(o));this._platformLocation.replaceState(t,i,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(i){return new(i||n)($e($0),$e(DP,8))}}static{this.\u0275prov=We({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),lz=(()=>{class n extends qs{constructor(t,i){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=i&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let i=this._platformLocation.hash;return null==i&&(i="#"),i.length>0?i.substring(1):i}prepareExternalUrl(t){const i=q0(this._baseHref,t);return i.length>0?"#"+i:i}pushState(t,i,r,o){let s=this.prepareExternalUrl(r+bo(o));0==s.length&&(s=this._platformLocation.pathname),this._platformLocation.pushState(t,i,s)}replaceState(t,i,r,o){let s=this.prepareExternalUrl(r+bo(o));0==s.length&&(s=this._platformLocation.pathname),this._platformLocation.replaceState(t,i,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(i){return new(i||n)($e($0),$e(DP,8))}}static{this.\u0275prov=We({token:n,factory:n.\u0275fac})}}return n})(),X0=(()=>{class n{constructor(t){this._subject=new dn,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const i=this._locationStrategy.getBaseHref();this._basePath=function fz(n){if(new RegExp("^(https?:)?//").test(n)){const[,t]=n.split(/\/\/[^\/]+/);return t}return n}(OP(RP(i))),this._locationStrategy.onPopState(r=>{this._subject.emit({url:this.path(!0),pop:!0,state:r.state,type:r.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,i=""){return this.path()==this.normalize(t+bo(i))}normalize(t){return n.stripTrailingSlash(function dz(n,e){if(!n||!e.startsWith(n))return e;const t=e.substring(n.length);return""===t||["/",";","?","#"].includes(t[0])?t:e}(this._basePath,RP(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,i="",r=null){this._locationStrategy.pushState(r,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+bo(i)),r)}replaceState(t,i="",r=null){this._locationStrategy.replaceState(r,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+bo(i)),r)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)})),()=>{const i=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(i,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",i){this._urlChangeListeners.forEach(r=>r(t,i))}subscribe(t,i,r){return this._subject.subscribe({next:t,error:i,complete:r})}static{this.normalizeQueryParams=bo}static{this.joinWithSlash=q0}static{this.stripTrailingSlash=OP}static{this.\u0275fac=function(i){return new(i||n)($e(qs))}}static{this.\u0275prov=We({token:n,factory:function(){return function uz(){return new X0($e(qs))}()},providedIn:"root"})}}return n})();function RP(n){return n.replace(/\/index.html$/,"")}var Dh=function(n){return n[n.Decimal=0]="Decimal",n[n.Percent=1]="Percent",n[n.Currency=2]="Currency",n[n.Scientific=3]="Scientific",n}(Dh||{}),bn=function(n){return n[n.Decimal=0]="Decimal",n[n.Group=1]="Group",n[n.List=2]="List",n[n.PercentSign=3]="PercentSign",n[n.PlusSign=4]="PlusSign",n[n.MinusSign=5]="MinusSign",n[n.Exponential=6]="Exponential",n[n.SuperscriptingExponent=7]="SuperscriptingExponent",n[n.PerMille=8]="PerMille",n[n.Infinity=9]="Infinity",n[n.NaN=10]="NaN",n[n.TimeSeparator=11]="TimeSeparator",n[n.CurrencyDecimal=12]="CurrencyDecimal",n[n.CurrencyGroup=13]="CurrencyGroup",n}(bn||{});function ar(n,e){const t=hi(n),i=t[en.NumberSymbols][e];if(typeof i>"u"){if(e===bn.CurrencyDecimal)return t[en.NumberSymbols][bn.Decimal];if(e===bn.CurrencyGroup)return t[en.NumberSymbols][bn.Group]}return i}const Bz=/^(\d+)?\.((\d+)(-(\d+))?)?$/;function nv(n){const e=parseInt(n);if(isNaN(e))throw new Error("Invalid integer literal when parsing "+n);return e}const rv=/\s+/,HP=[];let GP=(()=>{class n{constructor(t,i,r,o){this._iterableDiffers=t,this._keyValueDiffers=i,this._ngEl=r,this._renderer=o,this.initialClasses=HP,this.stateMap=new Map}set klass(t){this.initialClasses=null!=t?t.trim().split(rv):HP}set ngClass(t){this.rawClass="string"==typeof t?t.trim().split(rv):t}ngDoCheck(){for(const i of this.initialClasses)this._updateState(i,!0);const t=this.rawClass;if(Array.isArray(t)||t instanceof Set)for(const i of t)this._updateState(i,!0);else if(null!=t)for(const i of Object.keys(t))this._updateState(i,!!t[i]);this._applyStateDiff()}_updateState(t,i){const r=this.stateMap.get(t);void 0!==r?(r.enabled!==i&&(r.changed=!0,r.enabled=i),r.touched=!0):this.stateMap.set(t,{enabled:i,changed:!0,touched:!0})}_applyStateDiff(){for(const t of this.stateMap){const i=t[0],r=t[1];r.changed?(this._toggleClass(i,r.enabled),r.changed=!1):r.touched||(r.enabled&&this._toggleClass(i,!1),this.stateMap.delete(i)),r.touched=!1}}_toggleClass(t,i){(t=t.trim()).length>0&&t.split(rv).forEach(r=>{i?this._renderer.addClass(this._ngEl.nativeElement,r):this._renderer.removeClass(this._ngEl.nativeElement,r)})}static{this.\u0275fac=function(i){return new(i||n)(ee(Ah),ee(Uu),ee(Hi),ee(Wr))}}static{this.\u0275dir=et({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0})}}return n})();class Jz{constructor(e,t,i,r){this.$implicit=e,this.ngForOf=t,this.index=i,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let is=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,i,r){this._viewContainer=t,this._template=i,this._differs=r,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const i=this._viewContainer;t.forEachOperation((r,o,s)=>{if(null==r.previousIndex)i.createEmbeddedView(this._template,new Jz(r.item,this._ngForOf,-1,-1),null===s?void 0:s);else if(null==s)i.remove(null===o?void 0:o);else if(null!==o){const a=i.get(o);i.move(a,s),jP(a,r)}});for(let r=0,o=i.length;r<o;r++){const a=i.get(r).context;a.index=r,a.count=o,a.ngForOf=this._ngForOf}t.forEachIdentityChange(r=>{jP(i.get(r.currentIndex),r)})}static ngTemplateContextGuard(t,i){return!0}static{this.\u0275fac=function(i){return new(i||n)(ee(Pr),ee(xo),ee(Ah))}}static{this.\u0275dir=et({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}}return n})();function jP(n,e){n.context.$implicit=e.item}let Kr=(()=>{class n{constructor(t,i){this._viewContainer=t,this._context=new Qz,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){$P("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){$P("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,i){return!0}static{this.\u0275fac=function(i){return new(i||n)(ee(Pr),ee(xo))}}static{this.\u0275dir=et({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}}return n})();class Qz{constructor(){this.$implicit=null,this.ngIf=null}}function $P(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${Ln(e)}'.`)}function Ar(n,e){return new ce(2100,!1)}let YP=(()=>{class n{constructor(t){this._locale=t}transform(t,i,r){if(!function av(n){return!(null==n||""===n||n!=n)}(t))return null;r=r||this._locale;try{return function jz(n,e,t){return function ev(n,e,t,i,r,o,s=!1){let a="",c=!1;if(isFinite(n)){let l=function qz(n){let i,r,o,s,a,e=Math.abs(n)+"",t=0;for((r=e.indexOf("."))>-1&&(e=e.replace(".","")),(o=e.search(/e/i))>0?(r<0&&(r=o),r+=+e.slice(o+1),e=e.substring(0,o)):r<0&&(r=e.length),o=0;"0"===e.charAt(o);o++);if(o===(a=e.length))i=[0],r=1;else{for(a--;"0"===e.charAt(a);)a--;for(r-=o,i=[],s=0;o<=a;o++,s++)i[s]=Number(e.charAt(o))}return r>22&&(i=i.splice(0,21),t=r-1,r=1),{digits:i,exponent:t,integerLen:r}}(n);s&&(l=function $z(n){if(0===n.digits[0])return n;const e=n.digits.length-n.integerLen;return n.exponent?n.exponent+=2:(0===e?n.digits.push(0,0):1===e&&n.digits.push(0),n.integerLen+=2),n}(l));let u=e.minInt,d=e.minFrac,f=e.maxFrac;if(o){const v=o.match(Bz);if(null===v)throw new Error(`${o} is not a valid digit info`);const y=v[1],x=v[3],C=v[5];null!=y&&(u=nv(y)),null!=x&&(d=nv(x)),null!=C?f=nv(C):null!=x&&d>f&&(f=d)}!function Xz(n,e,t){if(e>t)throw new Error(`The minimum number of digits after fraction (${e}) is higher than the maximum (${t}).`);let i=n.digits,r=i.length-n.integerLen;const o=Math.min(Math.max(e,r),t);let s=o+n.integerLen,a=i[s];if(s>0){i.splice(Math.max(n.integerLen,s));for(let d=s;d<i.length;d++)i[d]=0}else{r=Math.max(0,r),n.integerLen=1,i.length=Math.max(1,s=o+1),i[0]=0;for(let d=1;d<s;d++)i[d]=0}if(a>=5)if(s-1<0){for(let d=0;d>s;d--)i.unshift(0),n.integerLen++;i.unshift(1),n.integerLen++}else i[s-1]++;for(;r<Math.max(0,o);r++)i.push(0);let c=0!==o;const l=e+n.integerLen,u=i.reduceRight(function(d,f,h,p){return p[h]=(f+=d)<10?f:f-10,c&&(0===p[h]&&h>=l?p.pop():c=!1),f>=10?1:0},0);u&&(i.unshift(u),n.integerLen++)}(l,d,f);let h=l.digits,p=l.integerLen;const _=l.exponent;let m=[];for(c=h.every(v=>!v);p<u;p++)h.unshift(0);for(;p<0;p++)h.unshift(0);p>0?m=h.splice(p,h.length):(m=h,h=[0]);const g=[];for(h.length>=e.lgSize&&g.unshift(h.splice(-e.lgSize,h.length).join(""));h.length>e.gSize;)g.unshift(h.splice(-e.gSize,h.length).join(""));h.length&&g.unshift(h.join("")),a=g.join(ar(t,i)),m.length&&(a+=ar(t,r)+m.join("")),_&&(a+=ar(t,bn.Exponential)+"+"+_)}else a=ar(t,bn.Infinity);return a=n<0&&!c?e.negPre+a+e.negSuf:e.posPre+a+e.posSuf,a}(n,function tv(n,e="-"){const t={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},i=n.split(";"),r=i[0],o=i[1],s=-1!==r.indexOf(".")?r.split("."):[r.substring(0,r.lastIndexOf("0")+1),r.substring(r.lastIndexOf("0")+1)],a=s[0],c=s[1]||"";t.posPre=a.substring(0,a.indexOf("#"));for(let u=0;u<c.length;u++){const d=c.charAt(u);"0"===d?t.minFrac=t.maxFrac=u+1:"#"===d?t.maxFrac=u+1:t.posSuf+=d}const l=a.split(",");if(t.gSize=l[1]?l[1].length:0,t.lgSize=l[2]||l[1]?(l[2]||l[1]).length:0,o){const u=r.length-t.posPre.length-t.posSuf.length,d=o.indexOf("#");t.negPre=o.substring(0,d).replace(/'/g,""),t.negSuf=o.slice(d+u).replace(/'/g,"")}else t.negPre=e+t.posPre,t.negSuf=t.posSuf;return t}(function Y0(n,e){return hi(n)[en.NumberFormats][e]}(e,Dh.Decimal),ar(e,bn.MinusSign)),e,bn.Group,bn.Decimal,t)}(function cv(n){if("string"==typeof n&&!isNaN(Number(n)-parseFloat(n)))return Number(n);if("number"!=typeof n)throw new Error(`${n} is not a number`);return n}(t),r,i)}catch(o){throw Ar()}}static{this.\u0275fac=function(i){return new(i||n)(ee(Mo,16))}}static{this.\u0275pipe=Si({name:"number",type:n,pure:!0,standalone:!0})}}return n})();let lv=(()=>{class n{transform(t,i,r){if(null==t)return null;if(!this.supports(t))throw Ar();return t.slice(i,r)}supports(t){return"string"==typeof t||Array.isArray(t)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275pipe=Si({name:"slice",type:n,pure:!1,standalone:!0})}}return n})(),ZP=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=br({type:n})}static{this.\u0275inj=er({})}}return n})();function JP(n){return"server"===n}let EH=(()=>{class n{static{this.\u0275prov=We({token:n,providedIn:"root",factory:()=>new PH($e(sr),window)})}}return n})();class PH{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function TH(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&"function"==typeof n.body.attachShadow){const i=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let r=i.currentNode;for(;r;){const o=r.shadowRoot;if(o){const s=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(s)return s}r=i.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){this.supportsScrolling()&&(this.window.history.scrollRestoration=e)}scrollToElement(e){const t=e.getBoundingClientRect(),i=t.left+this.window.pageXOffset,r=t.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(i-o[0],r-o[1])}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}class JH extends sz{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class fv extends JH{static makeCurrent(){!function oz(n){j0||(j0=n)}(new fv)}onAndCancel(e,t,i){return e.addEventListener(t,i),()=>{e.removeEventListener(t,i)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function QH(){return Hu=Hu||document.querySelector("base"),Hu?Hu.getAttribute("href"):null}();return null==t?null:function eG(n){Gh=Gh||document.createElement("a"),Gh.setAttribute("href",n);const e=Gh.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){Hu=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function Zz(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const i=t.indexOf("="),[r,o]=-1==i?[t,""]:[t.slice(0,i),t.slice(i+1)];if(r.trim()===e)return decodeURIComponent(o)}return null}(document.cookie,e)}}let Gh,Hu=null,nG=(()=>{class n{build(){return new XMLHttpRequest}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=We({token:n,factory:n.\u0275fac})}}return n})();const hv=new Ne("EventManagerPlugins");let iT=(()=>{class n{constructor(t,i){this._zone=i,this._eventNameToPlugin=new Map,t.forEach(r=>{r.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,i,r){return this._findPluginFor(i).addEventListener(t,i,r)}getZone(){return this._zone}_findPluginFor(t){let i=this._eventNameToPlugin.get(t);if(i)return i;if(i=this._plugins.find(o=>o.supports(t)),!i)throw new ce(5101,!1);return this._eventNameToPlugin.set(t,i),i}static{this.\u0275fac=function(i){return new(i||n)($e(hv),$e(Qt))}}static{this.\u0275prov=We({token:n,factory:n.\u0275fac})}}return n})();class rT{constructor(e){this._doc=e}}const pv="ng-app-id";let oT=(()=>{class n{constructor(t,i,r,o={}){this.doc=t,this.appId=i,this.nonce=r,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=JP(o),this.resetHostNodes()}addStyles(t){for(const i of t)1===this.changeUsageCount(i,1)&&this.onStyleAdded(i)}removeStyles(t){for(const i of t)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){const t=this.styleNodesInDOM;t&&(t.forEach(i=>i.remove()),t.clear());for(const i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(const i of this.getAllStyles())this.addStyleToHost(t,i)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(const i of this.hostNodes)this.addStyleToHost(i,t)}onStyleRemoved(t){const i=this.styleRef;i.get(t)?.elements?.forEach(r=>r.remove()),i.delete(t)}collectServerRenderedStyles(){const t=this.doc.head?.querySelectorAll(`style[${pv}="${this.appId}"]`);if(t?.length){const i=new Map;return t.forEach(r=>{null!=r.textContent&&i.set(r.textContent,r)}),i}return null}changeUsageCount(t,i){const r=this.styleRef;if(r.has(t)){const o=r.get(t);return o.usage+=i,o.usage}return r.set(t,{usage:i,elements:[]}),i}getStyleElement(t,i){const r=this.styleNodesInDOM,o=r?.get(i);if(o?.parentNode===t)return r.delete(i),o.removeAttribute(pv),o;{const s=this.doc.createElement("style");return this.nonce&&s.setAttribute("nonce",this.nonce),s.textContent=i,this.platformIsServer&&s.setAttribute(pv,this.appId),s}}addStyleToHost(t,i){const r=this.getStyleElement(t,i);t.appendChild(r);const o=this.styleRef,s=o.get(i)?.elements;s?s.push(r):o.set(i,{elements:[r],usage:1})}resetHostNodes(){const t=this.hostNodes;t.clear(),t.add(this.doc.head)}static{this.\u0275fac=function(i){return new(i||n)($e(sr),$e($f),$e(h1,8),$e(oc))}}static{this.\u0275prov=We({token:n,factory:n.\u0275fac})}}return n})();const gv={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},mv=/%COMP%/g,sG=new Ne("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>!1});function aT(n,e){return e.map(t=>t.replace(mv,n))}let cT=(()=>{class n{constructor(t,i,r,o,s,a,c,l=null){this.eventManager=t,this.sharedStylesHost=i,this.appId=r,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=a,this.ngZone=c,this.nonce=l,this.rendererByCompId=new Map,this.platformIsServer=JP(a),this.defaultRenderer=new _v(t,s,c,this.platformIsServer)}createRenderer(t,i){if(!t||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===xr.ShadowDom&&(i={...i,encapsulation:xr.Emulated});const r=this.getOrCreateRenderer(t,i);return r instanceof uT?r.applyToHost(t):r instanceof vv&&r.applyStyles(),r}getOrCreateRenderer(t,i){const r=this.rendererByCompId;let o=r.get(i.id);if(!o){const s=this.doc,a=this.ngZone,c=this.eventManager,l=this.sharedStylesHost,u=this.removeStylesOnCompDestroy,d=this.platformIsServer;switch(i.encapsulation){case xr.Emulated:o=new uT(c,l,i,this.appId,u,s,a,d);break;case xr.ShadowDom:return new uG(c,l,t,i,s,a,this.nonce,d);default:o=new vv(c,l,i,u,s,a,d)}r.set(i.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(i){return new(i||n)($e(iT),$e(oT),$e($f),$e(sG),$e(sr),$e(oc),$e(Qt),$e(h1))}}static{this.\u0275prov=We({token:n,factory:n.\u0275fac})}}return n})();class _v{constructor(e,t,i,r){this.eventManager=e,this.doc=t,this.ngZone=i,this.platformIsServer=r,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(gv[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(lT(e)?e.content:e).appendChild(t)}insertBefore(e,t,i){e&&(lT(e)?e.content:e).insertBefore(t,i)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let i="string"==typeof e?this.doc.querySelector(e):e;if(!i)throw new ce(-5104,!1);return t||(i.textContent=""),i}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,i,r){if(r){t=r+":"+t;const o=gv[r];o?e.setAttributeNS(o,t,i):e.setAttribute(t,i)}else e.setAttribute(t,i)}removeAttribute(e,t,i){if(i){const r=gv[i];r?e.removeAttributeNS(r,t):e.removeAttribute(`${i}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,i,r){r&(Jo.DashCase|Jo.Important)?e.style.setProperty(t,i,r&Jo.Important?"important":""):e.style[t]=i}removeStyle(e,t,i){i&Jo.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,i){e[t]=i}setValue(e,t){e.nodeValue=t}listen(e,t,i){if("string"==typeof e&&!(e=ns().getGlobalEventTarget(this.doc,e)))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(i))}decoratePreventDefault(e){return t=>{if("__ngUnwrap__"===t)return e;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))&&t.preventDefault()}}}function lT(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class uG extends _v{constructor(e,t,i,r,o,s,a,c){super(e,o,s,c),this.sharedStylesHost=t,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const l=aT(r.id,r.styles);for(const u of l){const d=document.createElement("style");a&&d.setAttribute("nonce",a),d.textContent=u,this.shadowRoot.appendChild(d)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,i){return super.insertBefore(this.nodeOrShadowRoot(e),t,i)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class vv extends _v{constructor(e,t,i,r,o,s,a,c){super(e,o,s,a),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=r,this.styles=c?aT(c,i.styles):i.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class uT extends vv{constructor(e,t,i,r,o,s,a,c){const l=r+"-"+i.id;super(e,t,i,o,s,a,c,l),this.contentAttr=function aG(n){return"_ngcontent-%COMP%".replace(mv,n)}(l),this.hostAttr=function cG(n){return"_nghost-%COMP%".replace(mv,n)}(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){const i=super.createElement(e,t);return super.setAttribute(i,this.contentAttr,""),i}}let dG=(()=>{class n extends rT{constructor(t){super(t)}supports(t){return!0}addEventListener(t,i,r){return t.addEventListener(i,r,!1),()=>this.removeEventListener(t,i,r)}removeEventListener(t,i,r){return t.removeEventListener(i,r)}static{this.\u0275fac=function(i){return new(i||n)($e(sr))}}static{this.\u0275prov=We({token:n,factory:n.\u0275fac})}}return n})();const dT=["alt","control","meta","shift"],fG={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},hG={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let pG=(()=>{class n extends rT{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,i,r){const o=n.parseEventName(i),s=n.eventCallback(o.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>ns().onAndCancel(t,o.domEventName,s))}static parseEventName(t){const i=t.toLowerCase().split("."),r=i.shift();if(0===i.length||"keydown"!==r&&"keyup"!==r)return null;const o=n._normalizeKey(i.pop());let s="",a=i.indexOf("code");if(a>-1&&(i.splice(a,1),s="code."),dT.forEach(l=>{const u=i.indexOf(l);u>-1&&(i.splice(u,1),s+=l+".")}),s+=o,0!=i.length||0===o.length)return null;const c={};return c.domEventName=r,c.fullKey=s,c}static matchEventFullKeyCode(t,i){let r=fG[t.key]||t.key,o="";return i.indexOf("code.")>-1&&(r=t.code,o="code."),!(null==r||!r)&&(r=r.toLowerCase()," "===r?r="space":"."===r&&(r="dot"),dT.forEach(s=>{s!==r&&(0,hG[s])(t)&&(o+=s+".")}),o+=r,o===i)}static eventCallback(t,i,r){return o=>{n.matchEventFullKeyCode(o,t)&&r.runGuarded(()=>i(o))}}static _normalizeKey(t){return"esc"===t?"escape":t}static{this.\u0275fac=function(i){return new(i||n)($e(sr))}}static{this.\u0275prov=We({token:n,factory:n.\u0275fac})}}return n})();const vG=iP(jV,"browser",[{provide:oc,useValue:"browser"},{provide:f1,useValue:function gG(){fv.makeCurrent()},multi:!0},{provide:sr,useFactory:function _G(){return function ik(n){s_=n}(document),document},deps:[]}]),yG=new Ne(""),pT=[{provide:Sh,useClass:class tG{addToWindow(e){Kt.getAngularTestability=(i,r=!0)=>{const o=e.findTestabilityInTree(i,r);if(null==o)throw new ce(5103,!1);return o},Kt.getAllAngularTestabilities=()=>e.getAllTestabilities(),Kt.getAllAngularRootElements=()=>e.getAllRootElements(),Kt.frameworkStabilizers||(Kt.frameworkStabilizers=[]),Kt.frameworkStabilizers.push(i=>{const r=Kt.getAllAngularTestabilities();let o=r.length,s=!1;const a=function(c){s=s||c,o--,0==o&&i(s)};r.forEach(c=>{c.whenStable(a)})})}findTestabilityInTree(e,t,i){return null==t?null:e.getTestability(t)??(i?ns().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:JE,useClass:N0,deps:[Qt,L0,Sh]},{provide:N0,useClass:N0,deps:[Qt,L0,Sh]}],gT=[{provide:g_,useValue:"root"},{provide:_o,useFactory:function mG(){return new _o},deps:[]},{provide:hv,useClass:dG,multi:!0,deps:[sr,Qt,oc]},{provide:hv,useClass:pG,multi:!0,deps:[sr]},cT,oT,iT,{provide:y1,useExisting:cT},{provide:class AH{},useClass:nG,deps:[]},[]];let xG=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:$f,useValue:t.appId}]}}static{this.\u0275fac=function(i){return new(i||n)($e(yG,12))}}static{this.\u0275mod=br({type:n})}static{this.\u0275inj=er({providers:[...gT,...pT],imports:[ZP,$V]})}}return n})(),mT=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static{this.\u0275fac=function(i){return new(i||n)($e(sr))}}static{this.\u0275prov=We({token:n,factory:function(i){let r=null;return r=i?new i:function bG(){return new mT($e(sr))}(),r},providedIn:"root"})}}return n})();typeof window<"u"&&window;const{isArray:TG}=Array,{getPrototypeOf:AG,prototype:OG,keys:DG}=Object;function xT(n){if(1===n.length){const e=n[0];if(TG(e))return{args:e,keys:null};if(function IG(n){return n&&"object"==typeof n&&AG(n)===OG}(e)){const t=DG(e);return{args:t.map(i=>e[i]),keys:t}}}return{args:n,keys:null}}const{isArray:RG}=Array;function MT(n){return Xt(e=>function NG(n,e){return RG(e)?n(...e):n(e)}(n,e))}function bT(n,e){return n.reduce((t,i,r)=>(t[i]=e[r],t),{})}function xv(...n){const e=kl(n),t=NM(n),{args:i,keys:r}=xT(n);if(0===i.length)return zn([],e);const o=new Pn(function LG(n,e,t=Wo){return i=>{CT(e,()=>{const{length:r}=n,o=new Array(r);let s=r,a=r;for(let c=0;c<r;c++)CT(e,()=>{const l=zn(n[c],e);let u=!1;l.subscribe(Tn(i,d=>{o[c]=d,u||(u=!0,a--),a||i.next(t(o.slice()))},()=>{--s||i.complete()}))},i)},i)}}(i,e,r?s=>bT(r,s):Wo));return t?o.pipe(MT(t)):o}function CT(n,e,t){n?lo(t,n,e):e()}const Wh=Rl(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function Mv(...n){return function kG(){return Da(1)}()(zn(n,kl(n)))}function wT(n){return new Pn(e=>{Li(n()).subscribe(e)})}function Gu(n,e){const t=Wt(n)?n:()=>n,i=r=>r.error(t());return new Pn(e?r=>e.schedule(i,0,r):i)}function bv(){return Nn((n,e)=>{let t=null;n._refCount++;const i=Tn(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const r=n._connection,o=t;t=null,r&&(!o||r===o)&&r.unsubscribe(),e.unsubscribe()});n.subscribe(i),i.closed||(t=n.connect())})}class ST extends Pn{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,yM(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Ni;const t=this.getSubject();e.add(this.source.subscribe(Tn(t,void 0,()=>{this._teardown(),t.complete()},i=>{this._teardown(),t.error(i)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Ni.EMPTY)}return e}refCount(){return bv()(this)}}function Dc(n){return n<=0?()=>Lr:Nn((e,t)=>{let i=0;e.subscribe(Tn(t,r=>{++i<=n&&(t.next(r),n<=i&&t.complete())}))})}function os(n,e){return Nn((t,i)=>{let r=0;t.subscribe(Tn(i,o=>n.call(e,o,r++)&&i.next(o)))})}function jh(n){return Nn((e,t)=>{let i=!1;e.subscribe(Tn(t,r=>{i=!0,t.next(r)},()=>{i||t.next(n),t.complete()}))})}function ET(n=UG){return Nn((e,t)=>{let i=!1;e.subscribe(Tn(t,r=>{i=!0,t.next(r)},()=>i?t.complete():t.error(n())))})}function UG(){return new Wh}function Xs(n,e){const t=arguments.length>=2;return i=>i.pipe(n?os((r,o)=>n(r,o,i)):Wo,Dc(1),t?jh(e):ET(()=>new Wh))}function Wu(n,e){return Wt(e)?$n(n,e,1):$n(n,1)}function ni(n,e,t){const i=Wt(n)||e||t?{next:n,error:e,complete:t}:n;return i?Nn((r,o)=>{var s;null===(s=i.subscribe)||void 0===s||s.call(i);let a=!0;r.subscribe(Tn(o,c=>{var l;null===(l=i.next)||void 0===l||l.call(i,c),o.next(c)},()=>{var c;a=!1,null===(c=i.complete)||void 0===c||c.call(i),o.complete()},c=>{var l;a=!1,null===(l=i.error)||void 0===l||l.call(i,c),o.error(c)},()=>{var c,l;a&&(null===(c=i.unsubscribe)||void 0===c||c.call(i)),null===(l=i.finalize)||void 0===l||l.call(i)}))}):Wo}function Ys(n){return Nn((e,t)=>{let o,i=null,r=!1;i=e.subscribe(Tn(t,void 0,void 0,s=>{o=Li(n(s,Ys(n)(e))),i?(i.unsubscribe(),i=null,o.subscribe(t)):r=!0})),r&&(i.unsubscribe(),i=null,o.subscribe(t))})}function Cv(n){return n<=0?()=>Lr:Nn((e,t)=>{let i=[];e.subscribe(Tn(t,r=>{i.push(r),n<i.length&&i.shift()},()=>{for(const r of i)t.next(r);t.complete()},void 0,()=>{i=null}))})}function wv(n){return Nn((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const ht="primary",ju=Symbol("RouteTitle");class WG{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Ic(n){return new WG(n)}function jG(n,e,t){const i=t.path.split("/");if(i.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||i.length<n.length))return null;const r={};for(let o=0;o<i.length;o++){const s=i[o],a=n[o];if(s.startsWith(":"))r[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:n.slice(0,i.length),posParams:r}}function Jr(n,e){const t=n?Object.keys(n):void 0,i=e?Object.keys(e):void 0;if(!t||!i||t.length!=i.length)return!1;let r;for(let o=0;o<t.length;o++)if(r=t[o],!PT(n[r],e[r]))return!1;return!0}function PT(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),i=[...e].sort();return t.every((r,o)=>i[o]===r)}return n===e}function TT(n){return n.length>0?n[n.length-1]:null}function ss(n){return function PG(n){return!!n&&(n instanceof Pn||Wt(n.lift)&&Wt(n.subscribe))}(n)?n:Cu(n)?zn(Promise.resolve(n)):tt(n)}const qG={exact:function DT(n,e,t){if(!Zs(n.segments,e.segments)||!$h(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const i in e.children)if(!n.children[i]||!DT(n.children[i],e.children[i],t))return!1;return!0},subset:IT},AT={exact:function XG(n,e){return Jr(n,e)},subset:function YG(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>PT(n[t],e[t]))},ignored:()=>!0};function OT(n,e,t){return qG[t.paths](n.root,e.root,t.matrixParams)&&AT[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function IT(n,e,t){return RT(n,e,e.segments,t)}function RT(n,e,t,i){if(n.segments.length>t.length){const r=n.segments.slice(0,t.length);return!(!Zs(r,t)||e.hasChildren()||!$h(r,t,i))}if(n.segments.length===t.length){if(!Zs(n.segments,t)||!$h(n.segments,t,i))return!1;for(const r in e.children)if(!n.children[r]||!IT(n.children[r],e.children[r],i))return!1;return!0}{const r=t.slice(0,n.segments.length),o=t.slice(n.segments.length);return!!(Zs(n.segments,r)&&$h(n.segments,r,i)&&n.children[ht])&&RT(n.children[ht],e,o,i)}}function $h(n,e,t){return e.every((i,r)=>AT[t](n[r].parameters,i.parameters))}class Rc{constructor(e=new Ht([],{}),t={},i=null){this.root=e,this.queryParams=t,this.fragment=i}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Ic(this.queryParams)),this._queryParamMap}toString(){return JG.serialize(this)}}class Ht{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(i=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return qh(this)}}class $u{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Ic(this.parameters)),this._parameterMap}toString(){return kT(this)}}function Zs(n,e){return n.length===e.length&&n.every((t,i)=>t.path===e[i].path)}let qu=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=We({token:n,factory:function(){return new Sv},providedIn:"root"})}}return n})();class Sv{parse(e){const t=new l8(e);return new Rc(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${Xu(e.root,!0)}`,i=function t8(n){const e=Object.keys(n).map(t=>{const i=n[t];return Array.isArray(i)?i.map(r=>`${Xh(t)}=${Xh(r)}`).join("&"):`${Xh(t)}=${Xh(i)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${i}${"string"==typeof e.fragment?`#${function QG(n){return encodeURI(n)}(e.fragment)}`:""}`}}const JG=new Sv;function qh(n){return n.segments.map(e=>kT(e)).join("/")}function Xu(n,e){if(!n.hasChildren())return qh(n);if(e){const t=n.children[ht]?Xu(n.children[ht],!1):"",i=[];return Object.entries(n.children).forEach(([r,o])=>{r!==ht&&i.push(`${r}:${Xu(o,!1)}`)}),i.length>0?`${t}(${i.join("//")})`:t}{const t=function KG(n,e){let t=[];return Object.entries(n.children).forEach(([i,r])=>{i===ht&&(t=t.concat(e(r,i)))}),Object.entries(n.children).forEach(([i,r])=>{i!==ht&&(t=t.concat(e(r,i)))}),t}(n,(i,r)=>r===ht?[Xu(n.children[ht],!1)]:[`${r}:${Xu(i,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[ht]?`${qh(n)}/${t[0]}`:`${qh(n)}/(${t.join("//")})`}}function NT(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Xh(n){return NT(n).replace(/%3B/gi,";")}function Ev(n){return NT(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Yh(n){return decodeURIComponent(n)}function LT(n){return Yh(n.replace(/\+/g,"%20"))}function kT(n){return`${Ev(n.path)}${function e8(n){return Object.keys(n).map(e=>`;${Ev(e)}=${Ev(n[e])}`).join("")}(n.parameters)}`}const n8=/^[^\/()?;#]+/;function Pv(n){const e=n.match(n8);return e?e[0]:""}const i8=/^[^\/()?;=#]+/,o8=/^[^=?&#]+/,a8=/^[^&#]+/;class l8{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Ht([],{}):new Ht([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(i[ht]=new Ht(e,t)),i}parseSegment(){const e=Pv(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new ce(4009,!1);return this.capture(e),new $u(Yh(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=function r8(n){const e=n.match(i8);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){const r=Pv(this.remaining);r&&(i=r,this.capture(i))}e[Yh(t)]=Yh(i)}parseQueryParam(e){const t=function s8(n){const e=n.match(o8);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){const s=function c8(n){const e=n.match(a8);return e?e[0]:""}(this.remaining);s&&(i=s,this.capture(i))}const r=LT(t),o=LT(i);if(e.hasOwnProperty(r)){let s=e[r];Array.isArray(s)||(s=[s],e[r]=s),s.push(o)}else e[r]=o}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const i=Pv(this.remaining),r=this.remaining[i.length];if("/"!==r&&")"!==r&&";"!==r)throw new ce(4010,!1);let o;i.indexOf(":")>-1?(o=i.slice(0,i.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=ht);const s=this.parseChildren();t[o]=1===Object.keys(s).length?s[ht]:new Ht([],s),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new ce(4011,!1)}}function FT(n){return n.segments.length>0?new Ht([],{[ht]:n}):n}function UT(n){const e={};for(const i of Object.keys(n.children)){const o=UT(n.children[i]);if(i===ht&&0===o.segments.length&&o.hasChildren())for(const[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[i]=o)}return function u8(n){if(1===n.numberOfChildren&&n.children[ht]){const e=n.children[ht];return new Ht(n.segments.concat(e.segments),e.children)}return n}(new Ht(n.segments,e))}function Ks(n){return n instanceof Rc}function BT(n){let e;const r=FT(function t(o){const s={};for(const c of o.children){const l=t(c);s[c.outlet]=l}const a=new Ht(o.url,s);return o===n&&(e=a),a}(n.root));return e??r}function VT(n,e,t,i){let r=n;for(;r.parent;)r=r.parent;if(0===e.length)return Tv(r,r,r,t,i);const o=function f8(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new HT(!0,0,n);let e=0,t=!1;const i=n.reduce((r,o,s)=>{if("object"==typeof o&&null!=o){if(o.outlets){const a={};return Object.entries(o.outlets).forEach(([c,l])=>{a[c]="string"==typeof l?l.split("/"):l}),[...r,{outlets:a}]}if(o.segmentPath)return[...r,o.segmentPath]}return"string"!=typeof o?[...r,o]:0===s?(o.split("/").forEach((a,c)=>{0==c&&"."===a||(0==c&&""===a?t=!0:".."===a?e++:""!=a&&r.push(a))}),r):[...r,o]},[]);return new HT(t,e,i)}(e);if(o.toRoot())return Tv(r,r,new Ht([],{}),t,i);const s=function h8(n,e,t){if(n.isAbsolute)return new Kh(e,!0,0);if(!t)return new Kh(e,!1,NaN);if(null===t.parent)return new Kh(t,!0,0);const i=Zh(n.commands[0])?0:1;return function p8(n,e,t){let i=n,r=e,o=t;for(;o>r;){if(o-=r,i=i.parent,!i)throw new ce(4005,!1);r=i.segments.length}return new Kh(i,!1,r-o)}(t,t.segments.length-1+i,n.numberOfDoubleDots)}(o,r,n),a=s.processChildren?Zu(s.segmentGroup,s.index,o.commands):GT(s.segmentGroup,s.index,o.commands);return Tv(r,s.segmentGroup,a,t,i)}function Zh(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Yu(n){return"object"==typeof n&&null!=n&&n.outlets}function Tv(n,e,t,i,r){let s,o={};i&&Object.entries(i).forEach(([c,l])=>{o[c]=Array.isArray(l)?l.map(u=>`${u}`):`${l}`}),s=n===e?t:zT(n,e,t);const a=FT(UT(s));return new Rc(a,o,r)}function zT(n,e,t){const i={};return Object.entries(n.children).forEach(([r,o])=>{i[r]=o===e?t:zT(o,e,t)}),new Ht(n.segments,i)}class HT{constructor(e,t,i){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=i,e&&i.length>0&&Zh(i[0]))throw new ce(4003,!1);const r=i.find(Yu);if(r&&r!==TT(i))throw new ce(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Kh{constructor(e,t,i){this.segmentGroup=e,this.processChildren=t,this.index=i}}function GT(n,e,t){if(n||(n=new Ht([],{})),0===n.segments.length&&n.hasChildren())return Zu(n,e,t);const i=function m8(n,e,t){let i=0,r=e;const o={match:!1,pathIndex:0,commandIndex:0};for(;r<n.segments.length;){if(i>=t.length)return o;const s=n.segments[r],a=t[i];if(Yu(a))break;const c=`${a}`,l=i<t.length-1?t[i+1]:null;if(r>0&&void 0===c)break;if(c&&l&&"object"==typeof l&&void 0===l.outlets){if(!jT(c,l,s))return o;i+=2}else{if(!jT(c,{},s))return o;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}(n,e,t),r=t.slice(i.commandIndex);if(i.match&&i.pathIndex<n.segments.length){const o=new Ht(n.segments.slice(0,i.pathIndex),{});return o.children[ht]=new Ht(n.segments.slice(i.pathIndex),n.children),Zu(o,0,r)}return i.match&&0===r.length?new Ht(n.segments,{}):i.match&&!n.hasChildren()?Av(n,e,t):i.match?Zu(n,0,r):Av(n,e,t)}function Zu(n,e,t){if(0===t.length)return new Ht(n.segments,{});{const i=function g8(n){return Yu(n[0])?n[0].outlets:{[ht]:n}}(t),r={};if(Object.keys(i).some(o=>o!==ht)&&n.children[ht]&&1===n.numberOfChildren&&0===n.children[ht].segments.length){const o=Zu(n.children[ht],e,t);return new Ht(n.segments,o.children)}return Object.entries(i).forEach(([o,s])=>{"string"==typeof s&&(s=[s]),null!==s&&(r[o]=GT(n.children[o],e,s))}),Object.entries(n.children).forEach(([o,s])=>{void 0===i[o]&&(r[o]=s)}),new Ht(n.segments,r)}}function Av(n,e,t){const i=n.segments.slice(0,e);let r=0;for(;r<t.length;){const o=t[r];if(Yu(o)){const c=_8(o.outlets);return new Ht(i,c)}if(0===r&&Zh(t[0])){i.push(new $u(n.segments[e].path,WT(t[0]))),r++;continue}const s=Yu(o)?o.outlets[ht]:`${o}`,a=r<t.length-1?t[r+1]:null;s&&a&&Zh(a)?(i.push(new $u(s,WT(a))),r+=2):(i.push(new $u(s,{})),r++)}return new Ht(i,{})}function _8(n){const e={};return Object.entries(n).forEach(([t,i])=>{"string"==typeof i&&(i=[i]),null!==i&&(e[t]=Av(new Ht([],{}),0,i))}),e}function WT(n){const e={};return Object.entries(n).forEach(([t,i])=>e[t]=`${i}`),e}function jT(n,e,t){return n==t.path&&Jr(e,t.parameters)}const Ku="imperative";class Qr{constructor(e,t){this.id=e,this.url=t}}class Jh extends Qr{constructor(e,t,i="imperative",r=null){super(e,t),this.type=0,this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class So extends Qr{constructor(e,t,i){super(e,t),this.urlAfterRedirects=i,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Ju extends Qr{constructor(e,t,i,r){super(e,t),this.reason=i,this.code=r,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Nc extends Qr{constructor(e,t,i,r){super(e,t),this.reason=i,this.code=r,this.type=16}}class Qh extends Qr{constructor(e,t,i,r){super(e,t),this.error=i,this.target=r,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class $T extends Qr{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class v8 extends Qr{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class y8 extends Qr{constructor(e,t,i,r,o){super(e,t),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=o,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class x8 extends Qr{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class M8 extends Qr{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class b8{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class C8{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class w8{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class S8{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class E8{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class P8{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class qT{constructor(e,t,i){this.routerEvent=e,this.position=t,this.anchor=i,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class Ov{}class Dv{constructor(e){this.url=e}}class T8{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new Qu,this.attachRef=null}}let Qu=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,i){const r=this.getOrCreateContext(t);r.outlet=i,this.contexts.set(t,r)}onChildOutletDestroyed(t){const i=this.getContext(t);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let i=this.getContext(t);return i||(i=new T8,this.contexts.set(t,i)),i}getContext(t){return this.contexts.get(t)||null}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=We({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();class XT{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=Iv(e,this._root);return t?t.children.map(i=>i.value):[]}firstChild(e){const t=Iv(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=Rv(e,this._root);return t.length<2?[]:t[t.length-2].children.map(r=>r.value).filter(r=>r!==e)}pathFromRoot(e){return Rv(e,this._root).map(t=>t.value)}}function Iv(n,e){if(n===e.value)return e;for(const t of e.children){const i=Iv(n,t);if(i)return i}return null}function Rv(n,e){if(n===e.value)return[e];for(const t of e.children){const i=Rv(n,t);if(i.length)return i.unshift(e),i}return[]}class Eo{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Lc(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class YT extends XT{constructor(e,t){super(e),this.snapshot=t,Nv(this,e)}toString(){return this.snapshot.toString()}}function ZT(n,e){const t=function A8(n,e){const s=new ep([],{},{},"",{},ht,e,null,{});return new JT("",new Eo(s,[]))}(0,e),i=new ki([new $u("",{})]),r=new ki({}),o=new ki({}),s=new ki({}),a=new ki(""),c=new as(i,r,s,a,o,ht,e,t.root);return c.snapshot=t.root,new YT(new Eo(c,[]),t)}class as{constructor(e,t,i,r,o,s,a,c){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=i,this.fragmentSubject=r,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(Xt(l=>l[ju]))??tt(void 0),this.url=e,this.params=t,this.queryParams=i,this.fragment=r,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(Xt(e=>Ic(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(Xt(e=>Ic(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function KT(n,e="emptyOnly"){const t=n.pathFromRoot;let i=0;if("always"!==e)for(i=t.length-1;i>=1;){const r=t[i],o=t[i-1];if(r.routeConfig&&""===r.routeConfig.path)i--;else{if(o.component)break;i--}}return function O8(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(i))}class ep{get title(){return this.data?.[ju]}constructor(e,t,i,r,o,s,a,c,l){this.url=e,this.params=t,this.queryParams=i,this.fragment=r,this.data=o,this.outlet=s,this.component=a,this.routeConfig=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Ic(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Ic(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(i=>i.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class JT extends XT{constructor(e,t){super(t),this.url=e,Nv(this,t)}toString(){return QT(this._root)}}function Nv(n,e){e.value._routerState=n,e.children.forEach(t=>Nv(n,t))}function QT(n){const e=n.children.length>0?` { ${n.children.map(QT).join(", ")} } `:"";return`${n.value}${e}`}function Lv(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Jr(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),Jr(e.params,t.params)||n.paramsSubject.next(t.params),function $G(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Jr(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.urlSubject.next(t.url),Jr(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function kv(n,e){const t=Jr(n.params,e.params)&&function ZG(n,e){return Zs(n,e)&&n.every((t,i)=>Jr(t.parameters,e[i].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||kv(n.parent,e.parent))}let Fv=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=ht,this.activateEvents=new dn,this.deactivateEvents=new dn,this.attachEvents=new dn,this.detachEvents=new dn,this.parentContexts=Ie(Qu),this.location=Ie(Pr),this.changeDetector=Ie(Tc),this.environmentInjector=Ie(rr),this.inputBinder=Ie(tp,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){const{firstChange:i,previousValue:r}=t.name;if(i)return;this.isTrackedInParentContexts(r)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(r)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new ce(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new ce(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new ce(4012,!1);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,i){this.activated=t,this._activatedRoute=i,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,i){if(this.isActivated)throw new ce(4013,!1);this._activatedRoute=t;const r=this.location,s=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new D8(t,a,r.injector);this.activated=r.createComponent(s,{index:r.length,injector:c,environmentInjector:i??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275dir=et({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[nr]})}}return n})();class D8{constructor(e,t,i){this.route=e,this.childContexts=t,this.parent=i}get(e,t){return e===as?this.route:e===Qu?this.childContexts:this.parent.get(e,t)}}const tp=new Ne("");let eA=(()=>{class n{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){const{activatedRoute:i}=t,r=xv([i.queryParams,i.params,i.data]).pipe(kr(([o,s,a],c)=>(a={...o,...s,...a},0===c?tt(a):Promise.resolve(a)))).subscribe(o=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==i||null===i.component)return void this.unsubscribeFromRouteData(t);const s=function rz(n){const e=At(n);if(!e)return null;const t=new vu(e);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}(i.component);if(s)for(const{templateName:a}of s.inputs)t.activatedComponentRef.setInput(a,o[a]);else this.unsubscribeFromRouteData(t)});this.outletDataSubscriptions.set(t,r)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=We({token:n,factory:n.\u0275fac})}}return n})();function ed(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const i=t.value;i._futureSnapshot=e.value;const r=function R8(n,e,t){return e.children.map(i=>{for(const r of t.children)if(n.shouldReuseRoute(i.value,r.value.snapshot))return ed(n,i,r);return ed(n,i)})}(n,e,t);return new Eo(i,r)}{if(n.shouldAttach(e.value)){const o=n.retrieve(e.value);if(null!==o){const s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>ed(n,a)),s}}const i=function N8(n){return new as(new ki(n.url),new ki(n.params),new ki(n.queryParams),new ki(n.fragment),new ki(n.data),n.outlet,n.component,n)}(e.value),r=e.children.map(o=>ed(n,o));return new Eo(i,r)}}const Uv="ngNavigationCancelingError";function tA(n,e){const{redirectTo:t,navigationBehaviorOptions:i}=Ks(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,r=nA(!1,0,e);return r.url=t,r.navigationBehaviorOptions=i,r}function nA(n,e,t){const i=new Error("NavigationCancelingError: "+(n||""));return i[Uv]=!0,i.cancellationCode=e,t&&(i.url=t),i}function iA(n){return n&&n[Uv]}let rA=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=Ui({type:n,selectors:[["ng-component"]],standalone:!0,features:[m0],decls:1,vars:0,template:function(i,r){1&i&&U(0,"router-outlet")},dependencies:[Fv],encapsulation:2})}}return n})();function Bv(n){const e=n.children&&n.children.map(Bv),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==ht&&(t.component=rA),t}function Or(n){return n.outlet||ht}function td(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class H8{constructor(e,t,i,r,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=i,this.forwardEvent=r,this.inputBindingEnabled=o}activate(e){const t=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,i,e),Lv(this.futureState.root),this.activateChildRoutes(t,i,e)}deactivateChildRoutes(e,t,i){const r=Lc(t);e.children.forEach(o=>{const s=o.value.outlet;this.deactivateRoutes(o,r[s],i),delete r[s]}),Object.values(r).forEach(o=>{this.deactivateRouteAndItsChildren(o,i)})}deactivateRoutes(e,t,i){const r=e.value,o=t?t.value:null;if(r===o)if(r.component){const s=i.getContext(r.outlet);s&&this.deactivateChildRoutes(e,t,s.children)}else this.deactivateChildRoutes(e,t,i);else o&&this.deactivateRouteAndItsChildren(t,i)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const i=t.getContext(e.value.outlet),r=i&&e.value.component?i.children:t,o=Lc(e);for(const s of Object.keys(o))this.deactivateRouteAndItsChildren(o[s],r);if(i&&i.outlet){const s=i.outlet.detach(),a=i.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){const i=t.getContext(e.value.outlet),r=i&&e.value.component?i.children:t,o=Lc(e);for(const s of Object.keys(o))this.deactivateRouteAndItsChildren(o[s],r);i&&(i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated()),i.attachRef=null,i.route=null)}activateChildRoutes(e,t,i){const r=Lc(t);e.children.forEach(o=>{this.activateRoutes(o,r[o.value.outlet],i),this.forwardEvent(new P8(o.value.snapshot))}),e.children.length&&this.forwardEvent(new S8(e.value.snapshot))}activateRoutes(e,t,i){const r=e.value,o=t?t.value:null;if(Lv(r),r===o)if(r.component){const s=i.getOrCreateContext(r.outlet);this.activateChildRoutes(e,t,s.children)}else this.activateChildRoutes(e,t,i);else if(r.component){const s=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const a=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),Lv(a.route.value),this.activateChildRoutes(e,null,s.children)}else{const a=td(r.snapshot);s.attachRef=null,s.route=r,s.injector=a,s.outlet&&s.outlet.activateWith(r,s.injector),this.activateChildRoutes(e,null,s.children)}}else this.activateChildRoutes(e,null,i)}}class oA{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class np{constructor(e,t){this.component=e,this.route=t}}function G8(n,e,t){const i=n._root;return nd(i,e?e._root:null,t,[i.value])}function kc(n,e){const t=Symbol(),i=e.get(n,t);return i===t?"function"!=typeof n||function y3(n){return null!==ef(n)}(n)?e.get(n):n:i}function nd(n,e,t,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const o=Lc(e);return n.children.forEach(s=>{(function j8(n,e,t,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const o=n.value,s=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){const c=function $8(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!Zs(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Zs(n.url,e.url)||!Jr(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!kv(n,e)||!Jr(n.queryParams,e.queryParams);default:return!kv(n,e)}}(s,o,o.routeConfig.runGuardsAndResolvers);c?r.canActivateChecks.push(new oA(i)):(o.data=s.data,o._resolvedData=s._resolvedData),nd(n,e,o.component?a?a.children:null:t,i,r),c&&a&&a.outlet&&a.outlet.isActivated&&r.canDeactivateChecks.push(new np(a.outlet.component,s))}else s&&id(e,a,r),r.canActivateChecks.push(new oA(i)),nd(n,null,o.component?a?a.children:null:t,i,r)})(s,o[s.value.outlet],t,i.concat([s.value]),r),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>id(a,t.getContext(s),r)),r}function id(n,e,t){const i=Lc(n),r=n.value;Object.entries(i).forEach(([o,s])=>{id(s,r.component?e?e.children.getContext(o):null:e,t)}),t.canDeactivateChecks.push(new np(r.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,r))}function rd(n){return"function"==typeof n}function sA(n){return n instanceof Wh||"EmptyError"===n?.name}const ip=Symbol("INITIAL_VALUE");function Fc(){return kr(n=>xv(n.map(e=>e.pipe(Dc(1),function FG(...n){const e=kl(n);return Nn((t,i)=>{(e?Mv(n,t,e):Mv(n,t)).subscribe(i)})}(ip)))).pipe(Xt(e=>{for(const t of e)if(!0!==t){if(t===ip)return ip;if(!1===t||t instanceof Rc)return t}return!0}),os(e=>e!==ip),Dc(1)))}function aA(n){return function mR(...n){return mM(n)}(ni(e=>{if(Ks(e))throw tA(0,e)}),Xt(e=>!0===e))}class rp{constructor(e){this.segmentGroup=e||null}}class cA{constructor(e){this.urlTree=e}}function Uc(n){return Gu(new rp(n))}function lA(n){return Gu(new cA(n))}class f6{constructor(e,t){this.urlSerializer=e,this.urlTree=t}noMatchError(e){return new ce(4002,!1)}lineralizeSegments(e,t){let i=[],r=t.root;for(;;){if(i=i.concat(r.segments),0===r.numberOfChildren)return tt(i);if(r.numberOfChildren>1||!r.children[ht])return Gu(new ce(4e3,!1));r=r.children[ht]}}applyRedirectCommands(e,t,i){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,i)}applyRedirectCreateUrlTree(e,t,i,r){const o=this.createSegmentGroup(e,t.root,i,r);return new Rc(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const i={};return Object.entries(e).forEach(([r,o])=>{if("string"==typeof o&&o.startsWith(":")){const a=o.substring(1);i[r]=t[a]}else i[r]=o}),i}createSegmentGroup(e,t,i,r){const o=this.createSegments(e,t.segments,i,r);let s={};return Object.entries(t.children).forEach(([a,c])=>{s[a]=this.createSegmentGroup(e,c,i,r)}),new Ht(o,s)}createSegments(e,t,i,r){return t.map(o=>o.path.startsWith(":")?this.findPosParam(e,o,r):this.findOrReturn(o,i))}findPosParam(e,t,i){const r=i[t.path.substring(1)];if(!r)throw new ce(4001,!1);return r}findOrReturn(e,t){let i=0;for(const r of t){if(r.path===e.path)return t.splice(i),r;i++}return e}}const Vv={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function h6(n,e,t,i,r){const o=zv(n,e,t);return o.matched?(i=function k8(n,e){return n.providers&&!n._injector&&(n._injector=g0(n.providers,e,`Route: ${n.path}`)),n._injector??e}(e,i),function l6(n,e,t,i){const r=e.canMatch;return r&&0!==r.length?tt(r.map(s=>{const a=kc(s,n);return ss(function J8(n){return n&&rd(n.canMatch)}(a)?a.canMatch(e,t):n.runInContext(()=>a(e,t)))})).pipe(Fc(),aA()):tt(!0)}(i,e,t).pipe(Xt(s=>!0===s?o:{...Vv}))):tt(o)}function zv(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...Vv}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const r=(e.matcher||jG)(t,n,e);if(!r)return{...Vv};const o={};Object.entries(r.posParams??{}).forEach(([a,c])=>{o[a]=c.path});const s=r.consumed.length>0?{...o,...r.consumed[r.consumed.length-1].parameters}:o;return{matched:!0,consumedSegments:r.consumed,remainingSegments:t.slice(r.consumed.length),parameters:s,positionalParamSegments:r.posParams??{}}}function uA(n,e,t,i){return t.length>0&&function m6(n,e,t){return t.some(i=>op(n,e,i)&&Or(i)!==ht)}(n,t,i)?{segmentGroup:new Ht(e,g6(i,new Ht(t,n.children))),slicedSegments:[]}:0===t.length&&function _6(n,e,t){return t.some(i=>op(n,e,i))}(n,t,i)?{segmentGroup:new Ht(n.segments,p6(n,0,t,i,n.children)),slicedSegments:t}:{segmentGroup:new Ht(n.segments,n.children),slicedSegments:t}}function p6(n,e,t,i,r){const o={};for(const s of i)if(op(n,t,s)&&!r[Or(s)]){const a=new Ht([],{});o[Or(s)]=a}return{...r,...o}}function g6(n,e){const t={};t[ht]=e;for(const i of n)if(""===i.path&&Or(i)!==ht){const r=new Ht([],{});t[Or(i)]=r}return t}function op(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}class M6{constructor(e,t,i,r,o,s,a){this.injector=e,this.configLoader=t,this.rootComponentType=i,this.config=r,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.allowRedirects=!0,this.applyRedirects=new f6(this.urlSerializer,this.urlTree)}noMatchError(e){return new ce(4002,!1)}recognize(){const e=uA(this.urlTree.root,[],[],this.config).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,ht).pipe(Ys(t=>{if(t instanceof cA)return this.allowRedirects=!1,this.urlTree=t.urlTree,this.match(t.urlTree);throw t instanceof rp?this.noMatchError(t):t}),Xt(t=>{const i=new ep([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},ht,this.rootComponentType,null,{}),r=new Eo(i,t),o=new JT("",r),s=function d8(n,e,t=null,i=null){return VT(BT(n),e,t,i)}(i,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),this.inheritParamsAndData(o._root),{state:o,tree:s}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e.root,ht).pipe(Ys(i=>{throw i instanceof rp?this.noMatchError(i):i}))}inheritParamsAndData(e){const t=e.value,i=KT(t,this.paramsInheritanceStrategy);t.params=Object.freeze(i.params),t.data=Object.freeze(i.data),e.children.forEach(r=>this.inheritParamsAndData(r))}processSegmentGroup(e,t,i,r){return 0===i.segments.length&&i.hasChildren()?this.processChildren(e,t,i):this.processSegment(e,t,i,i.segments,r,!0)}processChildren(e,t,i){const r=[];for(const o of Object.keys(i.children))"primary"===o?r.unshift(o):r.push(o);return zn(r).pipe(Wu(o=>{const s=i.children[o],a=function V8(n,e){const t=n.filter(i=>Or(i)===e);return t.push(...n.filter(i=>Or(i)!==e)),t}(t,o);return this.processSegmentGroup(e,a,s,o)}),function VG(n,e){return Nn(function BG(n,e,t,i,r){return(o,s)=>{let a=t,c=e,l=0;o.subscribe(Tn(s,u=>{const d=l++;c=a?n(c,u,d):(a=!0,u),i&&s.next(c)},r&&(()=>{a&&s.next(c),s.complete()})))}}(n,e,arguments.length>=2,!0))}((o,s)=>(o.push(...s),o)),jh(null),function zG(n,e){const t=arguments.length>=2;return i=>i.pipe(n?os((r,o)=>n(r,o,i)):Wo,Cv(1),t?jh(e):ET(()=>new Wh))}(),$n(o=>{if(null===o)return Uc(i);const s=dA(o);return function b6(n){n.sort((e,t)=>e.value.outlet===ht?-1:t.value.outlet===ht?1:e.value.outlet.localeCompare(t.value.outlet))}(s),tt(s)}))}processSegment(e,t,i,r,o,s){return zn(t).pipe(Wu(a=>this.processSegmentAgainstRoute(a._injector??e,t,a,i,r,o,s).pipe(Ys(c=>{if(c instanceof rp)return tt(null);throw c}))),Xs(a=>!!a),Ys(a=>{if(sA(a))return function y6(n,e,t){return 0===e.length&&!n.children[t]}(i,r,o)?tt([]):Uc(i);throw a}))}processSegmentAgainstRoute(e,t,i,r,o,s,a){return function v6(n,e,t,i){return!!(Or(n)===i||i!==ht&&op(e,t,n))&&("**"===n.path||zv(e,n,t).matched)}(i,r,o,s)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,r,i,o,s,a):a&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,r,t,i,o,s):Uc(r):Uc(r)}expandSegmentAgainstRouteUsingRedirect(e,t,i,r,o,s){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,i,r,s):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,i,r,o,s)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,i,r){const o=this.applyRedirects.applyRedirectCommands([],i.redirectTo,{});return i.redirectTo.startsWith("/")?lA(o):this.applyRedirects.lineralizeSegments(i,o).pipe($n(s=>{const a=new Ht(s,{});return this.processSegment(e,t,a,s,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,i,r,o,s){const{matched:a,consumedSegments:c,remainingSegments:l,positionalParamSegments:u}=zv(t,r,o);if(!a)return Uc(t);const d=this.applyRedirects.applyRedirectCommands(c,r.redirectTo,u);return r.redirectTo.startsWith("/")?lA(d):this.applyRedirects.lineralizeSegments(r,d).pipe($n(f=>this.processSegment(e,i,t,f.concat(l),s,!1)))}matchSegmentAgainstRoute(e,t,i,r,o,s){let a;if("**"===i.path){const c=r.length>0?TT(r).parameters:{};a=tt({snapshot:new ep(r,c,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,fA(i),Or(i),i.component??i._loadedComponent??null,i,hA(i)),consumedSegments:[],remainingSegments:[]}),t.children={}}else a=h6(t,i,r,e).pipe(Xt(({matched:c,consumedSegments:l,remainingSegments:u,parameters:d})=>c?{snapshot:new ep(l,d,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,fA(i),Or(i),i.component??i._loadedComponent??null,i,hA(i)),consumedSegments:l,remainingSegments:u}:null));return a.pipe(kr(c=>null===c?Uc(t):this.getChildConfig(e=i._injector??e,i,r).pipe(kr(({routes:l})=>{const u=i._loadedInjector??e,{snapshot:d,consumedSegments:f,remainingSegments:h}=c,{segmentGroup:p,slicedSegments:_}=uA(t,f,h,l);if(0===_.length&&p.hasChildren())return this.processChildren(u,l,p).pipe(Xt(g=>null===g?null:[new Eo(d,g)]));if(0===l.length&&0===_.length)return tt([new Eo(d,[])]);const m=Or(i)===o;return this.processSegment(u,l,p,_,m?ht:o,!0).pipe(Xt(g=>[new Eo(d,g)]))}))))}getChildConfig(e,t,i){return t.children?tt({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?tt({routes:t._loadedRoutes,injector:t._loadedInjector}):function c6(n,e,t,i){const r=e.canLoad;return void 0===r||0===r.length?tt(!0):tt(r.map(s=>{const a=kc(s,n);return ss(function X8(n){return n&&rd(n.canLoad)}(a)?a.canLoad(e,t):n.runInContext(()=>a(e,t)))})).pipe(Fc(),aA())}(e,t,i).pipe($n(r=>r?this.configLoader.loadChildren(e,t).pipe(ni(o=>{t._loadedRoutes=o.routes,t._loadedInjector=o.injector})):function d6(n){return Gu(nA(!1,3))}())):tt({routes:[],injector:e})}}function C6(n){const e=n.value.routeConfig;return e&&""===e.path}function dA(n){const e=[],t=new Set;for(const i of n){if(!C6(i)){e.push(i);continue}const r=e.find(o=>i.value.routeConfig===o.value.routeConfig);void 0!==r?(r.children.push(...i.children),t.add(r)):e.push(i)}for(const i of t){const r=dA(i.children);e.push(new Eo(i.value,r))}return e.filter(i=>!t.has(i))}function fA(n){return n.data||{}}function hA(n){return n.resolve||{}}function pA(n){return"string"==typeof n.title||null===n.title}function Hv(n){return kr(e=>{const t=n(e);return t?zn(t).pipe(Xt(()=>e)):tt(e)})}const Bc=new Ne("ROUTES");let Gv=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=Ie(XE)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return tt(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const i=ss(t.loadComponent()).pipe(Xt(gA),ni(o=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=o}),wv(()=>{this.componentLoaders.delete(t)})),r=new ST(i,()=>new yr).pipe(bv());return this.componentLoaders.set(t,r),r}loadChildren(t,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return tt({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);const o=function O6(n,e,t,i){return ss(n.loadChildren()).pipe(Xt(gA),$n(r=>r instanceof tE||Array.isArray(r)?tt(r):zn(e.compileModuleAsync(r))),Xt(r=>{i&&i(n);let o,s,a=!1;return Array.isArray(r)?(s=r,!0):(o=r.create(t).injector,s=o.get(Bc,[],{optional:!0,self:!0}).flat()),{routes:s.map(Bv),injector:o}}))}(i,this.compiler,t,this.onLoadEndListener).pipe(wv(()=>{this.childrenLoaders.delete(i)})),s=new ST(o,()=>new yr).pipe(bv());return this.childrenLoaders.set(i,s),s}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=We({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function gA(n){return function D6(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let sp=(()=>{class n{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new yr,this.transitionAbortSubject=new yr,this.configLoader=Ie(Gv),this.environmentInjector=Ie(rr),this.urlSerializer=Ie(qu),this.rootContexts=Ie(Qu),this.inputBindingEnabled=null!==Ie(tp,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>tt(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=r=>this.events.next(new C8(r)),this.configLoader.onLoadStartListener=r=>this.events.next(new b8(r))}complete(){this.transitions?.complete()}handleNavigationRequest(t){const i=++this.navigationId;this.transitions?.next({...this.transitions.value,...t,id:i})}setupNavigations(t,i,r){return this.transitions=new ki({id:0,currentUrlTree:i,currentRawUrl:i,currentBrowserUrl:i,extractedUrl:t.urlHandlingStrategy.extract(i),urlAfterRedirects:t.urlHandlingStrategy.extract(i),rawUrl:i,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:Ku,restoredState:null,currentSnapshot:r.snapshot,targetSnapshot:null,currentRouterState:r,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(os(o=>0!==o.id),Xt(o=>({...o,extractedUrl:t.urlHandlingStrategy.extract(o.rawUrl)})),kr(o=>{this.currentTransition=o;let s=!1,a=!1;return tt(o).pipe(ni(c=>{this.currentNavigation={id:c.id,initialUrl:c.rawUrl,extractedUrl:c.extractedUrl,trigger:c.source,extras:c.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),kr(c=>{const l=c.currentBrowserUrl.toString(),u=!t.navigated||c.extractedUrl.toString()!==l||l!==c.currentUrlTree.toString();if(!u&&"reload"!==(c.extras.onSameUrlNavigation??t.onSameUrlNavigation)){const f="";return this.events.next(new Nc(c.id,this.urlSerializer.serialize(c.rawUrl),f,0)),c.resolve(null),Lr}if(t.urlHandlingStrategy.shouldProcessUrl(c.rawUrl))return tt(c).pipe(kr(f=>{const h=this.transitions?.getValue();return this.events.next(new Jh(f.id,this.urlSerializer.serialize(f.extractedUrl),f.source,f.restoredState)),h!==this.transitions?.getValue()?Lr:Promise.resolve(f)}),function w6(n,e,t,i,r,o){return $n(s=>function x6(n,e,t,i,r,o,s="emptyOnly"){return new M6(n,e,t,i,r,s,o).recognize()}(n,e,t,i,s.extractedUrl,r,o).pipe(Xt(({state:a,tree:c})=>({...s,targetSnapshot:a,urlAfterRedirects:c}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,t.paramsInheritanceStrategy),ni(f=>{o.targetSnapshot=f.targetSnapshot,o.urlAfterRedirects=f.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:f.urlAfterRedirects};const h=new $T(f.id,this.urlSerializer.serialize(f.extractedUrl),this.urlSerializer.serialize(f.urlAfterRedirects),f.targetSnapshot);this.events.next(h)}));if(u&&t.urlHandlingStrategy.shouldProcessUrl(c.currentRawUrl)){const{id:f,extractedUrl:h,source:p,restoredState:_,extras:m}=c,g=new Jh(f,this.urlSerializer.serialize(h),p,_);this.events.next(g);const v=ZT(0,this.rootComponentType).snapshot;return this.currentTransition=o={...c,targetSnapshot:v,urlAfterRedirects:h,extras:{...m,skipLocationChange:!1,replaceUrl:!1}},tt(o)}{const f="";return this.events.next(new Nc(c.id,this.urlSerializer.serialize(c.extractedUrl),f,1)),c.resolve(null),Lr}}),ni(c=>{const l=new v8(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(l)}),Xt(c=>(this.currentTransition=o={...c,guards:G8(c.targetSnapshot,c.currentSnapshot,this.rootContexts)},o)),function e6(n,e){return $n(t=>{const{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:o,canDeactivateChecks:s}}=t;return 0===s.length&&0===o.length?tt({...t,guardsResult:!0}):function t6(n,e,t,i){return zn(n).pipe($n(r=>function a6(n,e,t,i,r){const o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return o&&0!==o.length?tt(o.map(a=>{const c=td(e)??r,l=kc(a,c);return ss(function K8(n){return n&&rd(n.canDeactivate)}(l)?l.canDeactivate(n,e,t,i):c.runInContext(()=>l(n,e,t,i))).pipe(Xs())})).pipe(Fc()):tt(!0)}(r.component,r.route,t,e,i)),Xs(r=>!0!==r,!0))}(s,i,r,n).pipe($n(a=>a&&function q8(n){return"boolean"==typeof n}(a)?function n6(n,e,t,i){return zn(e).pipe(Wu(r=>Mv(function r6(n,e){return null!==n&&e&&e(new w8(n)),tt(!0)}(r.route.parent,i),function i6(n,e){return null!==n&&e&&e(new E8(n)),tt(!0)}(r.route,i),function s6(n,e,t){const i=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>function W8(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(s)).filter(s=>null!==s).map(s=>wT(()=>tt(s.guards.map(c=>{const l=td(s.node)??t,u=kc(c,l);return ss(function Z8(n){return n&&rd(n.canActivateChild)}(u)?u.canActivateChild(i,n):l.runInContext(()=>u(i,n))).pipe(Xs())})).pipe(Fc())));return tt(o).pipe(Fc())}(n,r.path,t),function o6(n,e,t){const i=e.routeConfig?e.routeConfig.canActivate:null;if(!i||0===i.length)return tt(!0);const r=i.map(o=>wT(()=>{const s=td(e)??t,a=kc(o,s);return ss(function Y8(n){return n&&rd(n.canActivate)}(a)?a.canActivate(e,n):s.runInContext(()=>a(e,n))).pipe(Xs())}));return tt(r).pipe(Fc())}(n,r.route,t))),Xs(r=>!0!==r,!0))}(i,o,n,e):tt(a)),Xt(a=>({...t,guardsResult:a})))})}(this.environmentInjector,c=>this.events.next(c)),ni(c=>{if(o.guardsResult=c.guardsResult,Ks(c.guardsResult))throw tA(0,c.guardsResult);const l=new y8(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot,!!c.guardsResult);this.events.next(l)}),os(c=>!!c.guardsResult||(this.cancelNavigationTransition(c,"",3),!1)),Hv(c=>{if(c.guards.canActivateChecks.length)return tt(c).pipe(ni(l=>{const u=new x8(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(u)}),kr(l=>{let u=!1;return tt(l).pipe(function S6(n,e){return $n(t=>{const{targetSnapshot:i,guards:{canActivateChecks:r}}=t;if(!r.length)return tt(t);let o=0;return zn(r).pipe(Wu(s=>function E6(n,e,t,i){const r=n.routeConfig,o=n._resolve;return void 0!==r?.title&&!pA(r)&&(o[ju]=r.title),function P6(n,e,t,i){const r=function T6(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===r.length)return tt({});const o={};return zn(r).pipe($n(s=>function A6(n,e,t,i){const r=td(e)??i,o=kc(n,r);return ss(o.resolve?o.resolve(e,t):r.runInContext(()=>o(e,t)))}(n[s],e,t,i).pipe(Xs(),ni(a=>{o[s]=a}))),Cv(1),function HG(n){return Xt(()=>n)}(o),Ys(s=>sA(s)?Lr:Gu(s)))}(o,n,e,i).pipe(Xt(s=>(n._resolvedData=s,n.data=KT(n,t).resolve,r&&pA(r)&&(n.data[ju]=r.title),null)))}(s.route,i,n,e)),ni(()=>o++),Cv(1),$n(s=>o===r.length?tt(t):Lr))})}(t.paramsInheritanceStrategy,this.environmentInjector),ni({next:()=>u=!0,complete:()=>{u||this.cancelNavigationTransition(l,"",2)}}))}),ni(l=>{const u=new M8(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(u)}))}),Hv(c=>{const l=u=>{const d=[];u.routeConfig?.loadComponent&&!u.routeConfig._loadedComponent&&d.push(this.configLoader.loadComponent(u.routeConfig).pipe(ni(f=>{u.component=f}),Xt(()=>{})));for(const f of u.children)d.push(...l(f));return d};return xv(l(c.targetSnapshot.root)).pipe(jh(),Dc(1))}),Hv(()=>this.afterPreactivation()),Xt(c=>{const l=function I8(n,e,t){const i=ed(n,e._root,t?t._root:void 0);return new YT(i,e)}(t.routeReuseStrategy,c.targetSnapshot,c.currentRouterState);return this.currentTransition=o={...c,targetRouterState:l},o}),ni(()=>{this.events.next(new Ov)}),((n,e,t,i)=>Xt(r=>(new H8(e,r.targetRouterState,r.currentRouterState,t,i).activate(n),r)))(this.rootContexts,t.routeReuseStrategy,c=>this.events.next(c),this.inputBindingEnabled),Dc(1),ni({next:c=>{s=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new So(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects))),t.titleStrategy?.updateTitle(c.targetRouterState.snapshot),c.resolve(!0)},complete:()=>{s=!0}}),function GG(n){return Nn((e,t)=>{Li(n).subscribe(Tn(t,()=>t.complete(),Gg)),!t.closed&&e.subscribe(t)})}(this.transitionAbortSubject.pipe(ni(c=>{throw c}))),wv(()=>{s||a||this.cancelNavigationTransition(o,"",1),this.currentNavigation?.id===o.id&&(this.currentNavigation=null)}),Ys(c=>{if(a=!0,iA(c))this.events.next(new Ju(o.id,this.urlSerializer.serialize(o.extractedUrl),c.message,c.cancellationCode)),function L8(n){return iA(n)&&Ks(n.url)}(c)?this.events.next(new Dv(c.url)):o.resolve(!1);else{this.events.next(new Qh(o.id,this.urlSerializer.serialize(o.extractedUrl),c,o.targetSnapshot??void 0));try{o.resolve(t.errorHandler(c))}catch(l){o.reject(l)}}return Lr}))}))}cancelNavigationTransition(t,i,r){const o=new Ju(t.id,this.urlSerializer.serialize(t.extractedUrl),i,r);this.events.next(o),t.resolve(!1)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=We({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function mA(n){return n!==Ku}let _A=(()=>{class n{buildTitle(t){let i,r=t.root;for(;void 0!==r;)i=this.getResolvedTitleForRoute(r)??i,r=r.children.find(o=>o.outlet===ht);return i}getResolvedTitleForRoute(t){return t.data[ju]}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=We({token:n,factory:function(){return Ie(I6)},providedIn:"root"})}}return n})(),I6=(()=>{class n extends _A{constructor(t){super(),this.title=t}updateTitle(t){const i=this.buildTitle(t);void 0!==i&&this.title.setTitle(i)}static{this.\u0275fac=function(i){return new(i||n)($e(mT))}}static{this.\u0275prov=We({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),R6=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=We({token:n,factory:function(){return Ie(L6)},providedIn:"root"})}}return n})();class N6{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}let L6=(()=>{class n extends N6{static{this.\u0275fac=function(){let t;return function(r){return(t||(t=Kn(n)))(r||n)}}()}static{this.\u0275prov=We({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();const ap=new Ne("",{providedIn:"root",factory:()=>({})});let k6=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=We({token:n,factory:function(){return Ie(F6)},providedIn:"root"})}}return n})(),F6=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,i){return t}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=We({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var od=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(od||{});function vA(n,e){n.events.pipe(os(t=>t instanceof So||t instanceof Ju||t instanceof Qh||t instanceof Nc),Xt(t=>t instanceof So||t instanceof Nc?od.COMPLETE:t instanceof Ju&&(0===t.code||1===t.code)?od.REDIRECTING:od.FAILED),os(t=>t!==od.REDIRECTING),Dc(1)).subscribe(()=>{e()})}function U6(n){throw n}function B6(n,e,t){return e.parse("/")}const V6={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},z6={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Hn=(()=>{class n{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.location.getState()?.\u0275routerPageId??this.currentPageId}get events(){return this._events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=Ie($E),this.isNgZoneEnabled=!1,this._events=new yr,this.options=Ie(ap,{optional:!0})||{},this.pendingTasks=Ie(qE),this.errorHandler=this.options.errorHandler||U6,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||B6,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=Ie(k6),this.routeReuseStrategy=Ie(R6),this.titleStrategy=Ie(_A),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=Ie(Bc,{optional:!0})?.flat()??[],this.navigationTransitions=Ie(sp),this.urlSerializer=Ie(qu),this.location=Ie(X0),this.componentInputBindingEnabled=!!Ie(tp,{optional:!0}),this.eventsSubscription=new Ni,this.isNgZoneEnabled=Ie(Qt)instanceof Qt&&Qt.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new Rc,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=ZT(0,null),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe(t=>{this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){const t=this.navigationTransitions.events.subscribe(i=>{try{const{currentTransition:r}=this.navigationTransitions;if(null===r)return void(yA(i)&&this._events.next(i));if(i instanceof Jh)mA(r.source)&&(this.browserUrlTree=r.extractedUrl);else if(i instanceof Nc)this.rawUrlTree=r.rawUrl;else if(i instanceof $T){if("eager"===this.urlUpdateStrategy){if(!r.extras.skipLocationChange){const o=this.urlHandlingStrategy.merge(r.urlAfterRedirects,r.rawUrl);this.setBrowserUrl(o,r)}this.browserUrlTree=r.urlAfterRedirects}}else if(i instanceof Ov)this.currentUrlTree=r.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(r.urlAfterRedirects,r.rawUrl),this.routerState=r.targetRouterState,"deferred"===this.urlUpdateStrategy&&(r.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,r),this.browserUrlTree=r.urlAfterRedirects);else if(i instanceof Ju)0!==i.code&&1!==i.code&&(this.navigated=!0),(3===i.code||2===i.code)&&this.restoreHistory(r);else if(i instanceof Dv){const o=this.urlHandlingStrategy.merge(i.url,r.currentRawUrl),s={skipLocationChange:r.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||mA(r.source)};this.scheduleNavigation(o,Ku,null,s,{resolve:r.resolve,reject:r.reject,promise:r.promise})}i instanceof Qh&&this.restoreHistory(r,!0),i instanceof So&&(this.navigated=!0),yA(i)&&this._events.next(i)}catch(r){this.navigationTransitions.transitionAbortSubject.next(r)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const t=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),Ku,t)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const i="popstate"===t.type?"popstate":"hashchange";"popstate"===i&&setTimeout(()=>{this.navigateToSyncWithBrowser(t.url,i,t.state)},0)}))}navigateToSyncWithBrowser(t,i,r){const o={replaceUrl:!0},s=r?.navigationId?r:null;if(r){const c={...r};delete c.navigationId,delete c.\u0275routerPageId,0!==Object.keys(c).length&&(o.state=c)}const a=this.parseUrl(t);this.scheduleNavigation(a,i,s,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(Bv),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,i={}){const{relativeTo:r,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:c}=i,l=c?this.currentUrlTree.fragment:s;let d,u=null;switch(a){case"merge":u={...this.currentUrlTree.queryParams,...o};break;case"preserve":u=this.currentUrlTree.queryParams;break;default:u=o||null}null!==u&&(u=this.removeEmptyProps(u));try{d=BT(r?r.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof t[0]||!t[0].startsWith("/"))&&(t=[]),d=this.currentUrlTree.root}return VT(d,t,u,l??null)}navigateByUrl(t,i={skipLocationChange:!1}){const r=Ks(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(o,Ku,null,i)}navigate(t,i={skipLocationChange:!1}){return function H6(n){for(let e=0;e<n.length;e++)if(null==n[e])throw new ce(4008,!1)}(t),this.navigateByUrl(this.createUrlTree(t,i),i)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let i;try{i=this.urlSerializer.parse(t)}catch(r){i=this.malformedUriErrorHandler(r,this.urlSerializer,t)}return i}isActive(t,i){let r;if(r=!0===i?{...V6}:!1===i?{...z6}:i,Ks(t))return OT(this.currentUrlTree,t,r);const o=this.parseUrl(t);return OT(this.currentUrlTree,o,r)}removeEmptyProps(t){return Object.keys(t).reduce((i,r)=>{const o=t[r];return null!=o&&(i[r]=o),i},{})}scheduleNavigation(t,i,r,o,s){if(this.disposed)return Promise.resolve(!1);let a,c,l;s?(a=s.resolve,c=s.reject,l=s.promise):l=new Promise((d,f)=>{a=d,c=f});const u=this.pendingTasks.add();return vA(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(u))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,currentBrowserUrl:this.browserUrlTree,rawUrl:t,extras:o,resolve:a,reject:c,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(d=>Promise.reject(d))}setBrowserUrl(t,i){const r=this.urlSerializer.serialize(t);if(this.location.isCurrentPathEqualTo(r)||i.extras.replaceUrl){const s={...i.extras.state,...this.generateNgRouterState(i.id,this.browserPageId)};this.location.replaceState(r,"",s)}else{const o={...i.extras.state,...this.generateNgRouterState(i.id,this.browserPageId+1)};this.location.go(r,"",o)}}restoreHistory(t,i=!1){if("computed"===this.canceledNavigationResolution){const o=this.currentPageId-this.browserPageId;0!==o?this.location.historyGo(o):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===o&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(i&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,i){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:i}:{navigationId:t}}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=We({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function yA(n){return!(n instanceof Ov||n instanceof Dv)}class xA{}let j6=(()=>{class n{constructor(t,i,r,o,s){this.router=t,this.injector=r,this.preloadingStrategy=o,this.loader=s}setUpPreloading(){this.subscription=this.router.events.pipe(os(t=>t instanceof So),Wu(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,i){const r=[];for(const o of i){o.providers&&!o._injector&&(o._injector=g0(o.providers,t,`Route: ${o.path}`));const s=o._injector??t,a=o._loadedInjector??s;(o.loadChildren&&!o._loadedRoutes&&void 0===o.canLoad||o.loadComponent&&!o._loadedComponent)&&r.push(this.preloadConfig(s,o)),(o.children||o._loadedRoutes)&&r.push(this.processRoutes(a,o.children??o._loadedRoutes))}return zn(r).pipe(Da())}preloadConfig(t,i){return this.preloadingStrategy.preload(i,()=>{let r;r=i.loadChildren&&void 0===i.canLoad?this.loader.loadChildren(t,i):tt(null);const o=r.pipe($n(s=>null===s?tt(void 0):(i._loadedRoutes=s.routes,i._loadedInjector=s.injector,this.processRoutes(s.injector??t,s.routes))));return i.loadComponent&&!i._loadedComponent?zn([o,this.loader.loadComponent(i)]).pipe(Da()):o})}static{this.\u0275fac=function(i){return new(i||n)($e(Hn),$e(XE),$e(rr),$e(xA),$e(Gv))}}static{this.\u0275prov=We({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();const jv=new Ne("");let MA=(()=>{class n{constructor(t,i,r,o,s={}){this.urlSerializer=t,this.transitions=i,this.viewportScroller=r,this.zone=o,this.options=s,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},s.scrollPositionRestoration=s.scrollPositionRestoration||"disabled",s.anchorScrolling=s.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Jh?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof So?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof Nc&&0===t.code&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof qT&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,i){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new qT(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,i))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static{this.\u0275fac=function(i){!function W1(){throw new Error("invalid")}()}}static{this.\u0275prov=We({token:n,factory:n.\u0275fac})}}return n})();function Po(n,e){return{\u0275kind:n,\u0275providers:e}}function CA(){const n=Ie(Gi);return e=>{const t=n.get(Pc);if(e!==t.components[0])return;const i=n.get(Hn),r=n.get(wA);1===n.get($v)&&i.initialNavigation(),n.get(SA,null,wt.Optional)?.setUpPreloading(),n.get(jv,null,wt.Optional)?.init(),i.resetRootComponentType(t.componentTypes[0]),r.closed||(r.next(),r.complete(),r.unsubscribe())}}const wA=new Ne("",{factory:()=>new yr}),$v=new Ne("",{providedIn:"root",factory:()=>1}),SA=new Ne("");function Y6(n){return Po(0,[{provide:SA,useExisting:j6},{provide:xA,useExisting:n}])}const EA=new Ne("ROUTER_FORROOT_GUARD"),K6=[X0,{provide:qu,useClass:Sv},Hn,Qu,{provide:as,useFactory:function bA(n){return n.routerState.root},deps:[Hn]},Gv,[]];function J6(){return new tP("Router",Hn)}let PA=(()=>{class n{constructor(t){}static forRoot(t,i){return{ngModule:n,providers:[K6,[],{provide:Bc,multi:!0,useValue:t},{provide:EA,useFactory:n9,deps:[[Hn,new Ef,new Pf]]},{provide:ap,useValue:i||{}},i?.useHash?{provide:qs,useClass:lz}:{provide:qs,useClass:IP},{provide:jv,useFactory:()=>{const n=Ie(EH),e=Ie(Qt),t=Ie(ap),i=Ie(sp),r=Ie(qu);return t.scrollOffset&&n.setOffset(t.scrollOffset),new MA(r,i,n,e,t)}},i?.preloadingStrategy?Y6(i.preloadingStrategy).\u0275providers:[],{provide:tP,multi:!0,useFactory:J6},i?.initialNavigation?i9(i):[],i?.bindToComponentInputs?Po(8,[eA,{provide:tp,useExisting:eA}]).\u0275providers:[],[{provide:TA,useFactory:CA},{provide:U0,multi:!0,useExisting:TA}]]}}static forChild(t){return{ngModule:n,providers:[{provide:Bc,multi:!0,useValue:t}]}}static{this.\u0275fac=function(i){return new(i||n)($e(EA,8))}}static{this.\u0275mod=br({type:n})}static{this.\u0275inj=er({})}}return n})();function n9(n){return"guarded"}function i9(n){return["disabled"===n.initialNavigation?Po(3,[{provide:O0,multi:!0,useFactory:()=>{const e=Ie(Hn);return()=>{e.setUpLocationChangeListener()}}},{provide:$v,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?Po(2,[{provide:$v,useValue:0},{provide:O0,multi:!0,deps:[Gi],useFactory:e=>{const t=e.get(az,Promise.resolve());return()=>t.then(()=>new Promise(i=>{const r=e.get(Hn),o=e.get(wA);vA(r,()=>{i(!0)}),e.get(sp).afterPreactivation=()=>(i(!0),o.closed?tt(void 0):o),r.initialNavigation()}))}}]).\u0275providers:[]]}const TA=new Ne(""),cp=[{id:"1",name:"GREEN CAMO HOODIE",description:"Urban camouflage hoodie with street style.",price:65,originalPrice:85,category:"TOPS",images:["assets/images/products/hoodie1.png"],sizes:["S","M","L","XL"],colors:["Green","Black"],brand:"FREPPING",rating:4.5,reviewCount:42,inStock:!0,tags:["streetwear","hoodie","camo"],material:"80% Cotton, 20% Polyester",isFeatured:!0,has3DModel:!1,discount:.24,isNew:!0},{id:"2",name:"DISTRESSED DENIM",description:"Vintage style distressed jeans with custom rips and fading.",price:89,originalPrice:120,category:"BOTTOMS",images:["assets/images/products/pant1.png"],sizes:["28","30","32","34"],colors:["Blue","Black"],brand:"FREPPING",rating:4.2,reviewCount:31,inStock:!0,tags:["jeans","vintage","distressed"],material:"100% Cotton Denim",isFeatured:!0,has3DModel:!1,discount:.26,isNew:!1},{id:"3",name:"NEON SNEAKERS",description:"High-top sneakers with neon accents and custom glow-in-the-dark details.",price:120,originalPrice:150,category:"SHOES",images:["assets/images/products/hoodie2.png"],sizes:["8","9","10","11","12"],colors:["Black/Green","White/Orange"],brand:"FREPPING",rating:4.8,reviewCount:56,inStock:!0,tags:["sneakers","high-top","glow"],material:"Leather/Synthetic",isFeatured:!0,has3DModel:!1,discount:.2,isNew:!0},{id:"4",name:"GIRL'S GRAPHIC TEE",description:"Stylish graphic t-shirt with modern design and comfortable fit.",price:45,originalPrice:60,category:"TOPS",images:["assets/images/products/tshert1.png"],sizes:["XS","S","M","L"],colors:["White","Pink","Black"],brand:"FREPPING",rating:4.6,reviewCount:28,inStock:!0,tags:["tshirt","graphic","casual","girls"],material:"100% Cotton",isFeatured:!0,has3DModel:!1,discount:.25,isNew:!1},{id:"5",name:"STREETWEAR CARGO PANTS",description:"Urban cargo pants with multiple pockets and tactical design.",price:79,originalPrice:99,category:"BOTTOMS",images:["assets/3dmodel/uploads_files_4988185_\u9ed1\u8272\u62fc\u63a5\u5bbd\u677e\u536b\u8863_obj/\u9ed1\u8272\u62fc\u63a5\u5bbd\u677e\u536b\u8863_obj.obj","assets/images/products/hoody1.png"],sizes:["28","30","32","34","36"],colors:["Black","Olive Green","Gray"],brand:"FREPPING",rating:4.7,reviewCount:89,inStock:!0,tags:["pants","cargo","streetwear","tactical"],material:"100% Cotton Twill",isFeatured:!0,has3DModel:!0,discount:.2,isNew:!0},{id:"6",name:"3D HOODIE",description:"Modern hoodie with 3D model preview available.",price:75,originalPrice:95,category:"TOPS",images:["assets/3dmodel/tshert_girl.obj","assets/images/products/tshert_girl.png"],sizes:["S","M","L","XL"],colors:["Black","Gray","Navy"],brand:"FREPPING",rating:4.9,reviewCount:63,inStock:!0,tags:["hoodie","3d","modern","streetwear"],material:"80% Cotton, 20% Polyester",isFeatured:!0,has3DModel:!0,discount:.21,isNew:!1},{id:"7",name:"DESIGNER JACKET",description:"Premium designer jacket with custom details.",price:145,originalPrice:180,category:"OUTERWEAR",images:["assets/3dmodel/uploads_files_5109932_\u7c73\u767d\u5370\u82b1\u536b\u8863/\u7c73\u767d\u5370\u82b1\u536b\u8863.obj","assets/images/products/shert1.png"],sizes:["S","M","L","XL"],colors:["Black","Brown","Green"],brand:"FREPPING",rating:4.8,reviewCount:47,inStock:!0,tags:["jacket","designer","premium"],material:"Leather/Cotton Blend",isFeatured:!0,has3DModel:!1,discount:.19,isNew:!1},{id:"8",name:"RUNNING SHOES",description:"High-performance running shoes with comfort technology.",price:110,originalPrice:140,category:"SHOES",images:["assets/images/products/shumis1.png"],sizes:["7","8","9","10","11","12"],colors:["Black/White","Blue/White","Red/Black"],brand:"FREPPING",rating:4.6,reviewCount:72,inStock:!0,tags:["shoes","running","sports"],material:"Mesh/Synthetic",isFeatured:!0,has3DModel:!1,discount:.21,isNew:!0}],o9=[{id:"1",name:"TOPS",icon:"fas fa-tshirt"},{id:"2",name:"BOTTOMS",icon:"fas fa-vest"},{id:"3",name:"SHOES",icon:"fas fa-shoe-prints"},{id:"4",name:"ACCESSORIES",icon:"fas fa-gem"},{id:"5",name:"OUTERWEAR",icon:"fas fa-jacket"},{id:"6",name:"ALL",icon:"fas fa-store"}];let sd=(()=>{class n{constructor(){this.cartItemsSubject=new ki([]),this.cartItems$=this.cartItemsSubject.asObservable()}getSubtotal(){throw new Error("Method not implemented.")}getCartItems(){return this.cartItemsSubject.value}addToCart(t,i=1){const r=this.getCartItems(),o=r.findIndex(s=>s.product.id===t.id);o>-1?r[o].quantity+=i:r.push({product:t,quantity:i}),this.cartItemsSubject.next([...r])}removeFromCart(t){const i=this.getCartItems().filter(r=>r.product.id!==t);this.cartItemsSubject.next(i)}clearCart(){this.cartItemsSubject.next([])}updateQuantity(t,i){const r=this.getCartItems().map(o=>o.product.id===t?{...o,quantity:i}:o);this.cartItemsSubject.next(r)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=We({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function s9(n,e){if(1&n&&(M(0,"span",7),P(1),b()),2&n){const t=Z(2);bc(t.badgeClass),I(1),Ve(" ",t.getBadgeText()," ")}}function a9(n,e){if(1&n){const t=jt();M(0,"div",3),ge("click",function(){const o=Ue(t).$implicit;return Be(Z().navigateTo(o.path))}),M(1,"div",4),U(2,"i"),M(3,"span",5),P(4),b(),se(5,s9,2,3,"span",6),b()()}if(2&n){const t=e.$implicit,i=Z();I(1),mt("active",t.active),I(1),bc(t.icon),I(2),ot(t.label),I(1),q("ngIf","CART"===t.label&&i.cartItemCount>0)}}let Vc=(()=>{class n{constructor(t,i,r){this.router=t,this.cartService=i,this.cdRef=r,this.cartItemCount=0,this.badgeClass="",this.navItems=[{path:"/",icon:"fas fa-home",label:"HOME",active:!0},{path:"/shop",icon:"fas fa-store",label:"SHOP",active:!1},{path:"/try-on",icon:"fas fa-user",label:"TRY-ON",active:!1},{path:"/cart",icon:"fas fa-shopping-cart",label:"CART",active:!1},{path:"/mod",icon:"fas fa-user-circle",label:"PROFILE",active:!1}],this.updateActiveNav(),this.router.events.subscribe(()=>{this.updateActiveNav()})}ngOnInit(){this.cartSubscription=this.cartService.cartItems$.subscribe(t=>{const i=this.cartItemCount;this.cartItemCount=this.calculateTotalItems(t),this.updateBadgeClass(),i!==this.cartItemCount&&this.triggerBadgeAnimation(),this.cdRef.detectChanges()})}ngOnDestroy(){this.cartSubscription&&this.cartSubscription.unsubscribe()}updateActiveNav(){const t=this.router.url;this.navItems.forEach(i=>{i.active=t===i.path||"/"!==i.path&&t.startsWith(i.path)})}navigateTo(t){this.router.navigate([t])}calculateTotalItems(t){return t.reduce((i,r)=>i+r.quantity,0)}updateBadgeClass(){this.badgeClass=0===this.cartItemCount?"":this.cartItemCount>5&&this.cartItemCount<=9?"many-items":this.cartItemCount>9?"many-items many-many":""}triggerBadgeAnimation(){this.badgeClass+=" changing",setTimeout(()=>{this.badgeClass=this.badgeClass.replace(" changing",""),this.updateBadgeClass()},300)}getBadgeText(){return 0===this.cartItemCount?"":this.cartItemCount>99?"99+":this.cartItemCount.toString()}static{this.\u0275fac=function(i){return new(i||n)(ee(Hn),ee(sd),ee(Tc))}}static{this.\u0275cmp=Ui({type:n,selectors:[["app-bottom-nav"]],decls:3,vars:1,consts:[[1,"bottom-nav"],[1,"nav-list"],["class","nav-item",3,"click",4,"ngFor","ngForOf"],[1,"nav-item",3,"click"],[1,"nav-link"],[1,"nav-label"],["class","cart-badge",3,"class",4,"ngIf"],[1,"cart-badge"]],template:function(i,r){1&i&&(M(0,"nav",0)(1,"div",1),se(2,a9,6,6,"div",2),b()()),2&i&&(I(2),q("ngForOf",r.navItems))},dependencies:[is,Kr],styles:['.bottom-nav[_ngcontent-%COMP%]{position:fixed;bottom:0;left:0;right:0;background:#000;border-top:3px solid #39ff14;z-index:1000;box-shadow:0 -8px 20px #000c;padding:8px 0 12px;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px)}.bottom-nav[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;right:0;height:100%;background:linear-gradient(45deg,transparent 49%,rgba(57,255,20,.1) 50%,transparent 51%),linear-gradient(-45deg,transparent 49%,rgba(57,255,20,.1) 50%,transparent 51%);background-size:15px 15px;opacity:.3;pointer-events:none}.bottom-nav[_ngcontent-%COMP%]:after{content:"";position:absolute;top:-3px;left:0;right:0;height:3px;background:repeating-linear-gradient(90deg,#39ff14,#39ff14 10px,transparent 10px,transparent 20px);animation:_ngcontent-%COMP%_borderSlide 2s linear infinite}@keyframes _ngcontent-%COMP%_borderSlide{0%{background-position:0 0}to{background-position:40px 0}}.nav-list[_ngcontent-%COMP%]{display:flex;justify-content:space-around;align-items:center;padding:0 10px;max-width:1200px;margin:0 auto}.nav-item[_ngcontent-%COMP%]{flex:1;display:flex;justify-content:center;position:relative;cursor:pointer;transform:skew(-3deg);transition:all .3s cubic-bezier(.4,0,.2,1)}.nav-item[_ngcontent-%COMP%]:hover{transform:skew(-3deg) translateY(-5px)}.nav-item[_ngcontent-%COMP%]:hover   .nav-link[_ngcontent-%COMP%]{background:rgba(57,255,20,.1);border-color:#f90}.nav-item[_ngcontent-%COMP%]:hover   .nav-link[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#f90;transform:scale(1.2)}.nav-item[_ngcontent-%COMP%]:hover   .nav-link[_ngcontent-%COMP%]   .nav-label[_ngcontent-%COMP%]{color:#f90;text-shadow:0 0 10px rgba(255,153,0,.5)}.nav-item[_ngcontent-%COMP%]:active{transform:skew(-3deg) translateY(-2px)}.nav-item[_ngcontent-%COMP%]:active   .nav-link[_ngcontent-%COMP%]{background:rgba(57,255,20,.2);box-shadow:0 3px #000}.nav-link[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:4px;padding:10px 12px;background:rgba(0,0,0,.7);border:2px solid #39ff14;border-radius:0;width:80%;position:relative;transition:all .3s cubic-bezier(.4,0,.2,1);transform:skew(3deg);box-shadow:4px 4px #000}.nav-link[_ngcontent-%COMP%]:before{content:"";position:absolute;inset:0;background:linear-gradient(135deg,transparent 0%,rgba(57,255,20,.1) 50%,transparent 100%);opacity:0;transition:opacity .3s ease}.nav-link[_ngcontent-%COMP%]:hover:before{opacity:1}.nav-link.active[_ngcontent-%COMP%]{background:#39ff14;border-color:#000;box-shadow:6px 6px #000}.nav-link.active[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#000;animation:_ngcontent-%COMP%_iconPulse 2s infinite}.nav-link.active[_ngcontent-%COMP%]   .nav-label[_ngcontent-%COMP%]{color:#000;font-weight:900;text-shadow:1px 1px 0 rgba(255,255,255,.3)}.nav-link.active[_ngcontent-%COMP%]:after{content:"";position:absolute;bottom:-12px;left:50%;transform:translate(-50%);width:60%;height:3px;background:#ff9900;border-radius:2px;animation:_ngcontent-%COMP%_activePulse 2s infinite}@keyframes _ngcontent-%COMP%_iconPulse{0%,to{transform:scale(1);filter:drop-shadow(0 0 0 rgba(255,153,0,0))}50%{transform:scale(1.1);filter:drop-shadow(0 0 8px rgba(255,153,0,.5))}}@keyframes _ngcontent-%COMP%_activePulse{0%,to{opacity:1;width:60%}50%{opacity:.7;width:80%}}.nav-link[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:20px;color:#39ff14;transition:all .3s ease;transform-origin:center}.nav-label[_ngcontent-%COMP%]{font-family:Street,Pricedown,sans-serif;font-size:10px;letter-spacing:1.5px;color:#39ff14;text-transform:uppercase;text-shadow:1px 1px 0 #000;transition:all .3s ease;font-weight:700;line-height:1}.cart-badge[_ngcontent-%COMP%]{position:absolute;top:5px;right:5px;background:linear-gradient(135deg,#ff3333,#ff6600);color:#fff;font-family:Street,Pricedown,sans-serif;font-size:10px;font-weight:900;min-width:18px;height:18px;border-radius:0;display:flex;align-items:center;justify-content:center;padding:0 4px;border:2px solid #000;box-shadow:2px 2px #000;transform:skew(-5deg);z-index:10;animation:_ngcontent-%COMP%_badgeGlow 2s infinite alternate}.cart-badge.many-items[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_badgeDanger 1s infinite alternate;background:linear-gradient(135deg,#ff0000,#ff3300);text-shadow:0 0 5px rgba(255,255,255,.5)}.cart-badge.many-items.many-many[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_badgeCritical .5s infinite alternate;background:linear-gradient(135deg,#ff0000,#990000);font-size:8px}@keyframes _ngcontent-%COMP%_badgeGlow{0%{box-shadow:2px 2px #000,0 0 #f330;transform:skew(-5deg) scale(1)}to{box-shadow:2px 2px #000,0 0 15px #f33c;transform:skew(-5deg) scale(1.1)}}@keyframes _ngcontent-%COMP%_badgeDanger{0%{box-shadow:2px 2px #000,0 0 #f330;transform:skew(-5deg) scale(1)}to{box-shadow:2px 2px #000,0 0 20px red;transform:skew(-5deg) scale(1.2)}}@keyframes _ngcontent-%COMP%_badgeCritical{0%{box-shadow:2px 2px #000,0 0 #f000;transform:skew(-5deg) scale(1);background:linear-gradient(135deg,#ff0000,#990000)}to{box-shadow:2px 2px #000,0 0 25px red,0 0 15px #f90c;transform:skew(-5deg) scale(1.3);background:linear-gradient(135deg,#ff3300,#cc0000)}}.cart-badge.changing[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_numberChange .3s ease-in-out}@keyframes _ngcontent-%COMP%_numberChange{0%{transform:skew(-5deg) scale(1) rotate(0)}25%{transform:skew(-5deg) scale(1.2) rotate(-10deg)}50%{transform:skew(-5deg) scale(1.3) rotate(10deg)}75%{transform:skew(-5deg) scale(1.2) rotate(-5deg)}to{transform:skew(-5deg) scale(1) rotate(0)}}.nav-item[_ngcontent-%COMP%]:has(.cart-badge)   .nav-link[_ngcontent-%COMP%]{position:relative}.nav-item[_ngcontent-%COMP%]:has(.cart-badge)   .nav-link[_ngcontent-%COMP%]:before{content:"";position:absolute;inset:-5px;border-radius:inherit;background:radial-gradient(circle at 30% 30%,rgba(255,51,51,.2) 0%,transparent 50%);z-index:-1;opacity:0;transition:opacity .3s ease}.nav-item[_ngcontent-%COMP%]:has(.cart-badge)   .nav-link[_ngcontent-%COMP%]:hover:before{opacity:.5}@media (max-width: 768px){.bottom-nav[_ngcontent-%COMP%]{padding:6px 0 10px}.nav-link[_ngcontent-%COMP%]{padding:8px 6px;width:85%}.nav-link[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:18px}.nav-label[_ngcontent-%COMP%]{font-size:9px;letter-spacing:1px}.cart-badge[_ngcontent-%COMP%]{min-width:16px;height:16px;font-size:9px;top:3px;right:3px}}@media (max-width: 480px){.bottom-nav[_ngcontent-%COMP%]{padding:4px 0 8px}.nav-list[_ngcontent-%COMP%]{padding:0 5px}.nav-link[_ngcontent-%COMP%]{padding:6px 4px}.nav-link[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:16px}.nav-label[_ngcontent-%COMP%]{font-size:8px;letter-spacing:.5px}.cart-badge[_ngcontent-%COMP%]{min-width:14px;height:14px;font-size:8px;top:2px;right:2px}}@media (prefers-color-scheme: dark){.bottom-nav[_ngcontent-%COMP%]{background:rgba(0,0,0,.95);border-top:3px solid #39ff14}.nav-link[_ngcontent-%COMP%]{background:rgba(20,20,20,.9)}.nav-link.active[_ngcontent-%COMP%]{background:#39ff14}}.nav-link[_ngcontent-%COMP%]:focus-visible{outline:2px solid #ff9900;outline-offset:2px}.nav-item[_ngcontent-%COMP%]:focus-visible{outline:none}@media (hover: none) and (pointer: coarse){.nav-item[_ngcontent-%COMP%]:hover{transform:skew(-3deg)}.nav-item[_ngcontent-%COMP%]:hover   .nav-link[_ngcontent-%COMP%]{transform:skew(3deg)}.nav-link.active[_ngcontent-%COMP%]{background:#39ff14}}']})}}return n})();function AA(n,e,t,i,r,o,s){try{var a=n[o](s),c=a.value}catch(l){return void t(l)}a.done?e(c):Promise.resolve(c).then(i,r)}function $i(n){return function(){var e=this,t=arguments;return new Promise(function(i,r){var o=n.apply(e,t);function s(c){AA(o,i,r,s,a,"next",c)}function a(c){AA(o,i,r,s,a,"throw",c)}s(void 0)})}}const DA=1,Xv=2,To=3,up=0,R9=1,N9=2,ls=0,L9=1,k9=2,F9=3,U9=4,B9=5,FA="attached",us=301,Qs=302,ad=306,ds=1e3,ii=1001,Cn=1003,gn=1006,Ao=1008,fs=1009,hs=1014,Oo=1015,ud=1016,ea=1020,lr=1023,ta=1026,Hc=1027,dd=2300,Gc=2301,na=3001,nn="srgb",Jn="srgb-linear",cy="display-p3",gp="display-p3-linear",mp="linear",an="srgb",_p="rec709",vp="p3",$c=7680,yO="300 es",Do=2e3;class ps{addEventListener(e,t){void 0===this._listeners&&(this._listeners={});const i=this._listeners;void 0===i[e]&&(i[e]=[]),-1===i[e].indexOf(t)&&i[e].push(t)}hasEventListener(e,t){if(void 0===this._listeners)return!1;const i=this._listeners;return void 0!==i[e]&&-1!==i[e].indexOf(t)}removeEventListener(e,t){if(void 0===this._listeners)return;const r=this._listeners[e];if(void 0!==r){const o=r.indexOf(t);-1!==o&&r.splice(o,1)}}dispatchEvent(e){if(void 0===this._listeners)return;const i=this._listeners[e.type];if(void 0!==i){e.target=this;const r=i.slice(0);for(let o=0,s=r.length;o<s;o++)r[o].call(this,e);e.target=null}}}const ri=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];const ra=Math.PI/180,qc=180/Math.PI;function qi(){const n=4294967295*Math.random()|0,e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,i=4294967295*Math.random()|0;return(ri[255&n]+ri[n>>8&255]+ri[n>>16&255]+ri[n>>24&255]+"-"+ri[255&e]+ri[e>>8&255]+"-"+ri[e>>16&15|64]+ri[e>>24&255]+"-"+ri[63&t|128]+ri[t>>8&255]+"-"+ri[t>>16&255]+ri[t>>24&255]+ri[255&i]+ri[i>>8&255]+ri[i>>16&255]+ri[i>>24&255]).toLowerCase()}function mn(n,e,t){return Math.max(e,Math.min(t,n))}function uy(n,e){return(n%e+e)%e}function fd(n,e,t){return(1-t)*n+t*e}function dy(n){return 0==(n&n-1)&&0!==n}function MO(n){return Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function Mp(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}function Ii(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return n/4294967295;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int32Array:return Math.max(n/2147483647,-1);case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function _t(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return Math.round(4294967295*n);case Uint16Array:return Math.round(65535*n);case Uint8Array:return Math.round(255*n);case Int32Array:return Math.round(2147483647*n);case Int16Array:return Math.round(32767*n);case Int8Array:return Math.round(127*n);default:throw new Error("Invalid component type.")}}const wW_radToDeg=function bW(n){return n*qc};class oe{constructor(e=0,t=0){oe.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,i=this.y,r=e.elements;return this.x=r[0]*t+r[3]*i+r[6],this.y=r[1]*t+r[4]*i+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(mn(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y;return t*t+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const i=Math.cos(t),r=Math.sin(t),o=this.x-e.x,s=this.y-e.y;return this.x=o*i-s*r+e.x,this.y=o*r+s*i+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class bt{constructor(e,t,i,r,o,s,a,c,l){bt.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],void 0!==e&&this.set(e,t,i,r,o,s,a,c,l)}set(e,t,i,r,o,s,a,c,l){const u=this.elements;return u[0]=e,u[1]=r,u[2]=a,u[3]=t,u[4]=o,u[5]=c,u[6]=i,u[7]=s,u[8]=l,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],this}extractBasis(e,t,i){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,r=t.elements,o=this.elements,s=i[0],a=i[3],c=i[6],l=i[1],u=i[4],d=i[7],f=i[2],h=i[5],p=i[8],_=r[0],m=r[3],g=r[6],v=r[1],y=r[4],x=r[7],C=r[2],S=r[5],T=r[8];return o[0]=s*_+a*v+c*C,o[3]=s*m+a*y+c*S,o[6]=s*g+a*x+c*T,o[1]=l*_+u*v+d*C,o[4]=l*m+u*y+d*S,o[7]=l*g+u*x+d*T,o[2]=f*_+h*v+p*C,o[5]=f*m+h*y+p*S,o[8]=f*g+h*x+p*T,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[1],r=e[2],o=e[3],s=e[4],a=e[5],c=e[6],l=e[7],u=e[8];return t*s*u-t*a*l-i*o*u+i*a*c+r*o*l-r*s*c}invert(){const e=this.elements,t=e[0],i=e[1],r=e[2],o=e[3],s=e[4],a=e[5],c=e[6],l=e[7],u=e[8],d=u*s-a*l,f=a*c-u*o,h=l*o-s*c,p=t*d+i*f+r*h;if(0===p)return this.set(0,0,0,0,0,0,0,0,0);const _=1/p;return e[0]=d*_,e[1]=(r*l-u*i)*_,e[2]=(a*i-r*s)*_,e[3]=f*_,e[4]=(u*t-r*c)*_,e[5]=(r*o-a*t)*_,e[6]=h*_,e[7]=(i*c-l*t)*_,e[8]=(s*t-i*o)*_,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,i,r,o,s,a){const c=Math.cos(o),l=Math.sin(o);return this.set(i*c,i*l,-i*(c*s+l*a)+s+e,-r*l,r*c,-r*(-l*s+c*a)+a+t,0,0,1),this}scale(e,t){return this.premultiply(fy.makeScale(e,t)),this}rotate(e){return this.premultiply(fy.makeRotation(-e)),this}translate(e,t){return this.premultiply(fy.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,i,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,i=e.elements;for(let r=0;r<9;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<9;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e}clone(){return(new this.constructor).fromArray(this.elements)}}const fy=new bt;function bO(n){for(let e=n.length-1;e>=0;--e)if(n[e]>=65535)return!0;return!1}function hd(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}function EW(){const n=hd("canvas");return n.style.display="block",n}Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array;const CO={};function pd(n){n in CO||(CO[n]=!0,console.warn(n))}const wO=(new bt).set(.8224621,.177538,0,.0331941,.9668058,0,.0170827,.0723974,.9105199),SO=(new bt).set(1.2249401,-.2249404,0,-.0420569,1.0420571,0,-.0196376,-.0786361,1.0982735),bp={[Jn]:{transfer:mp,primaries:_p,toReference:n=>n,fromReference:n=>n},[nn]:{transfer:an,primaries:_p,toReference:n=>n.convertSRGBToLinear(),fromReference:n=>n.convertLinearToSRGB()},[gp]:{transfer:mp,primaries:vp,toReference:n=>n.applyMatrix3(SO),fromReference:n=>n.applyMatrix3(wO)},[cy]:{transfer:an,primaries:vp,toReference:n=>n.convertSRGBToLinear().applyMatrix3(SO),fromReference:n=>n.applyMatrix3(wO).convertLinearToSRGB()}},PW=new Set([Jn,gp]),Bt={enabled:!0,_workingColorSpace:Jn,get legacyMode(){return console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),!this.enabled},set legacyMode(n){console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),this.enabled=!n},get workingColorSpace(){return this._workingColorSpace},set workingColorSpace(n){if(!PW.has(n))throw new Error(`Unsupported working color space, "${n}".`);this._workingColorSpace=n},convert:function(n,e,t){return!1!==this.enabled&&e!==t&&e&&t?(0,bp[t].fromReference)((0,bp[e].toReference)(n)):n},fromWorkingColorSpace:function(n,e){return this.convert(n,this._workingColorSpace,e)},toWorkingColorSpace:function(n,e){return this.convert(n,e,this._workingColorSpace)},getPrimaries:function(n){return bp[n].primaries},getTransfer:function(n){return""===n?mp:bp[n].transfer}};function Yc(n){return n<.04045?.0773993808*n:Math.pow(.9478672986*n+.0521327014,2.4)}function hy(n){return n<.0031308?12.92*n:1.055*Math.pow(n,.41666)-.055}let Zc;class EO{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{void 0===Zc&&(Zc=hd("canvas")),Zc.width=e.width,Zc.height=e.height;const i=Zc.getContext("2d");e instanceof ImageData?i.putImageData(e,0,0):i.drawImage(e,0,0,e.width,e.height),t=Zc}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=hd("canvas");t.width=e.width,t.height=e.height;const i=t.getContext("2d");i.drawImage(e,0,0,e.width,e.height);const r=i.getImageData(0,0,e.width,e.height),o=r.data;for(let s=0;s<o.length;s++)o[s]=255*Yc(o[s]/255);return i.putImageData(r,0,0),t}if(e.data){const t=e.data.slice(0);for(let i=0;i<t.length;i++)t[i]=t instanceof Uint8Array||t instanceof Uint8ClampedArray?Math.floor(255*Yc(t[i]/255)):Yc(t[i]);return{data:t,width:e.width,height:e.height}}return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let TW=0;class Kc{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:TW++}),this.uuid=qi(),this.data=e,this.version=0}set needsUpdate(e){!0===e&&this.version++}toJSON(e){const t=void 0===e||"string"==typeof e;if(!t&&void 0!==e.images[this.uuid])return e.images[this.uuid];const i={uuid:this.uuid,url:""},r=this.data;if(null!==r){let o;if(Array.isArray(r)){o=[];for(let s=0,a=r.length;s<a;s++)o.push(py(r[s].isDataTexture?r[s].image:r[s]))}else o=py(r);i.url=o}return t||(e.images[this.uuid]=i),i}}function py(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?EO.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let AW=0,mi=(()=>{class n extends ps{constructor(t=n.DEFAULT_IMAGE,i=n.DEFAULT_MAPPING,r=ii,o=ii,s=gn,a=Ao,c=lr,l=fs,u=n.DEFAULT_ANISOTROPY,d=""){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:AW++}),this.uuid=qi(),this.name="",this.source=new Kc(t),this.mipmaps=[],this.mapping=i,this.channel=0,this.wrapS=r,this.wrapT=o,this.magFilter=s,this.minFilter=a,this.anisotropy=u,this.format=c,this.internalFormat=null,this.type=l,this.offset=new oe(0,0),this.repeat=new oe(1,1),this.center=new oe(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new bt,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,"string"==typeof d?this.colorSpace=d:(pd("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=d===na?nn:""),this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(t=null){this.source.data=t}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return(new this.constructor).copy(this)}copy(t){return this.name=t.name,this.source=t.source,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.channel=t.channel,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.internalFormat=t.internalFormat,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.colorSpace=t.colorSpace,this.userData=JSON.parse(JSON.stringify(t.userData)),this.needsUpdate=!0,this}toJSON(t){const i=void 0===t||"string"==typeof t;if(!i&&void 0!==t.textures[this.uuid])return t.textures[this.uuid];const r={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(t).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(r.userData=this.userData),i||(t.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(t){if(300!==this.mapping)return t;if(t.applyMatrix3(this.matrix),t.x<0||t.x>1)switch(this.wrapS){case ds:t.x=t.x-Math.floor(t.x);break;case ii:t.x=t.x<0?0:1;break;case 1002:t.x=1===Math.abs(Math.floor(t.x)%2)?Math.ceil(t.x)-t.x:t.x-Math.floor(t.x)}if(t.y<0||t.y>1)switch(this.wrapT){case ds:t.y=t.y-Math.floor(t.y);break;case ii:t.y=t.y<0?0:1;break;case 1002:t.y=1===Math.abs(Math.floor(t.y)%2)?Math.ceil(t.y)-t.y:t.y-Math.floor(t.y)}return this.flipY&&(t.y=1-t.y),t}set needsUpdate(t){!0===t&&(this.version++,this.source.needsUpdate=!0)}get encoding(){return pd("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace===nn?na:3e3}set encoding(t){pd("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=t===na?nn:""}}return n.DEFAULT_IMAGE=null,n.DEFAULT_MAPPING=300,n.DEFAULT_ANISOTROPY=1,n})();class $t{constructor(e=0,t=0,i=0,r=1){$t.prototype.isVector4=!0,this.x=e,this.y=t,this.z=i,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,i,r){return this.x=e,this.y=t,this.z=i,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,i=this.y,r=this.z,o=this.w,s=e.elements;return this.x=s[0]*t+s[4]*i+s[8]*r+s[12]*o,this.y=s[1]*t+s[5]*i+s[9]*r+s[13]*o,this.z=s[2]*t+s[6]*i+s[10]*r+s[14]*o,this.w=s[3]*t+s[7]*i+s[11]*r+s[15]*o,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,i,r,o;const c=e.elements,l=c[0],u=c[4],d=c[8],f=c[1],h=c[5],p=c[9],_=c[2],m=c[6],g=c[10];if(Math.abs(u-f)<.01&&Math.abs(d-_)<.01&&Math.abs(p-m)<.01){if(Math.abs(u+f)<.1&&Math.abs(d+_)<.1&&Math.abs(p+m)<.1&&Math.abs(l+h+g-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const y=(l+1)/2,x=(h+1)/2,C=(g+1)/2,S=(u+f)/4,T=(d+_)/4,R=(p+m)/4;return y>x&&y>C?y<.01?(i=0,r=.707106781,o=.707106781):(i=Math.sqrt(y),r=S/i,o=T/i):x>C?x<.01?(i=.707106781,r=0,o=.707106781):(r=Math.sqrt(x),i=S/r,o=R/r):C<.01?(i=.707106781,r=.707106781,o=0):(o=Math.sqrt(C),i=T/o,r=R/o),this.set(i,r,o,t),this}let v=Math.sqrt((m-p)*(m-p)+(d-_)*(d-_)+(f-u)*(f-u));return Math.abs(v)<.001&&(v=1),this.x=(m-p)/v,this.y=(d-_)/v,this.z=(f-u)/v,this.w=Math.acos((l+h+g-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this.w=e.w+(t.w-e.w)*i,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class OW extends ps{constructor(e=1,t=1,i={}){super(),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new $t(0,0,e,t),this.scissorTest=!1,this.viewport=new $t(0,0,e,t);const r={width:e,height:t,depth:1};void 0!==i.encoding&&(pd("THREE.WebGLRenderTarget: option.encoding has been replaced by option.colorSpace."),i.colorSpace=i.encoding===na?nn:""),i=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:gn,depthBuffer:!0,stencilBuffer:!1,depthTexture:null,samples:0},i),this.texture=new mi(r,i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=i.generateMipmaps,this.texture.internalFormat=i.internalFormat,this.depthBuffer=i.depthBuffer,this.stencilBuffer=i.stencilBuffer,this.depthTexture=i.depthTexture,this.samples=i.samples}setSize(e,t,i=1){(this.width!==e||this.height!==t||this.depth!==i)&&(this.width=e,this.height=t,this.depth=i,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=i,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return(new this.constructor).copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;const t=Object.assign({},e.texture.image);return this.texture.source=new Kc(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,null!==e.depthTexture&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class no extends OW{constructor(e=1,t=1,i={}){super(e,t,i),this.isWebGLRenderTarget=!0}}class gy extends mi{constructor(e=null,t=1,i=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=Cn,this.minFilter=Cn,this.wrapR=ii,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class PO extends mi{constructor(e=null,t=1,i=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=Cn,this.minFilter=Cn,this.wrapR=ii,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class _i{constructor(e=0,t=0,i=0,r=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=i,this._w=r}static slerpFlat(e,t,i,r,o,s,a){let c=i[r+0],l=i[r+1],u=i[r+2],d=i[r+3];const f=o[s+0],h=o[s+1],p=o[s+2],_=o[s+3];if(0===a)return e[t+0]=c,e[t+1]=l,e[t+2]=u,void(e[t+3]=d);if(1===a)return e[t+0]=f,e[t+1]=h,e[t+2]=p,void(e[t+3]=_);if(d!==_||c!==f||l!==h||u!==p){let m=1-a;const g=c*f+l*h+u*p+d*_,v=g>=0?1:-1,y=1-g*g;if(y>Number.EPSILON){const C=Math.sqrt(y),S=Math.atan2(C,g*v);m=Math.sin(m*S)/C,a=Math.sin(a*S)/C}const x=a*v;if(c=c*m+f*x,l=l*m+h*x,u=u*m+p*x,d=d*m+_*x,m===1-a){const C=1/Math.sqrt(c*c+l*l+u*u+d*d);c*=C,l*=C,u*=C,d*=C}}e[t]=c,e[t+1]=l,e[t+2]=u,e[t+3]=d}static multiplyQuaternionsFlat(e,t,i,r,o,s){const a=i[r],c=i[r+1],l=i[r+2],u=i[r+3],d=o[s],f=o[s+1],h=o[s+2],p=o[s+3];return e[t]=a*p+u*d+c*h-l*f,e[t+1]=c*p+u*f+l*d-a*h,e[t+2]=l*p+u*h+a*f-c*d,e[t+3]=u*p-a*d-c*f-l*h,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,i,r){return this._x=e,this._y=t,this._z=i,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t){const i=e._x,r=e._y,o=e._z,s=e._order,a=Math.cos,c=Math.sin,l=a(i/2),u=a(r/2),d=a(o/2),f=c(i/2),h=c(r/2),p=c(o/2);switch(s){case"XYZ":this._x=f*u*d+l*h*p,this._y=l*h*d-f*u*p,this._z=l*u*p+f*h*d,this._w=l*u*d-f*h*p;break;case"YXZ":this._x=f*u*d+l*h*p,this._y=l*h*d-f*u*p,this._z=l*u*p-f*h*d,this._w=l*u*d+f*h*p;break;case"ZXY":this._x=f*u*d-l*h*p,this._y=l*h*d+f*u*p,this._z=l*u*p+f*h*d,this._w=l*u*d-f*h*p;break;case"ZYX":this._x=f*u*d-l*h*p,this._y=l*h*d+f*u*p,this._z=l*u*p-f*h*d,this._w=l*u*d+f*h*p;break;case"YZX":this._x=f*u*d+l*h*p,this._y=l*h*d+f*u*p,this._z=l*u*p-f*h*d,this._w=l*u*d-f*h*p;break;case"XZY":this._x=f*u*d-l*h*p,this._y=l*h*d-f*u*p,this._z=l*u*p+f*h*d,this._w=l*u*d+f*h*p;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+s)}return!1!==t&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const i=t/2,r=Math.sin(i);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,i=t[0],r=t[4],o=t[8],s=t[1],a=t[5],c=t[9],l=t[2],u=t[6],d=t[10],f=i+a+d;if(f>0){const h=.5/Math.sqrt(f+1);this._w=.25/h,this._x=(u-c)*h,this._y=(o-l)*h,this._z=(s-r)*h}else if(i>a&&i>d){const h=2*Math.sqrt(1+i-a-d);this._w=(u-c)/h,this._x=.25*h,this._y=(r+s)/h,this._z=(o+l)/h}else if(a>d){const h=2*Math.sqrt(1+a-i-d);this._w=(o-l)/h,this._x=(r+s)/h,this._y=.25*h,this._z=(c+u)/h}else{const h=2*Math.sqrt(1+d-i-a);this._w=(s-r)/h,this._x=(o+l)/h,this._y=(c+u)/h,this._z=.25*h}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let i=e.dot(t)+1;return i<Number.EPSILON?(i=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=i):(this._x=0,this._y=-e.z,this._z=e.y,this._w=i)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=i),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(mn(this.dot(e),-1,1)))}rotateTowards(e,t){const i=this.angleTo(e);if(0===i)return this;const r=Math.min(1,t/i);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const i=e._x,r=e._y,o=e._z,s=e._w,a=t._x,c=t._y,l=t._z,u=t._w;return this._x=i*u+s*a+r*l-o*c,this._y=r*u+s*c+o*a-i*l,this._z=o*u+s*l+i*c-r*a,this._w=s*u-i*a-r*c-o*l,this._onChangeCallback(),this}slerp(e,t){if(0===t)return this;if(1===t)return this.copy(e);const i=this._x,r=this._y,o=this._z,s=this._w;let a=s*e._w+i*e._x+r*e._y+o*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=s,this._x=i,this._y=r,this._z=o,this;const c=1-a*a;if(c<=Number.EPSILON){const h=1-t;return this._w=h*s+t*this._w,this._x=h*i+t*this._x,this._y=h*r+t*this._y,this._z=h*o+t*this._z,this.normalize(),this._onChangeCallback(),this}const l=Math.sqrt(c),u=Math.atan2(l,a),d=Math.sin((1-t)*u)/l,f=Math.sin(t*u)/l;return this._w=s*d+this._w*f,this._x=i*d+this._x*f,this._y=r*d+this._y*f,this._z=o*d+this._z*f,this._onChangeCallback(),this}slerpQuaternions(e,t,i){return this.copy(e).slerp(t,i)}random(){const e=Math.random(),t=Math.sqrt(1-e),i=Math.sqrt(e),r=2*Math.PI*Math.random(),o=2*Math.PI*Math.random();return this.set(t*Math.cos(r),i*Math.sin(o),i*Math.cos(o),t*Math.sin(r))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class D{constructor(e=0,t=0,i=0){D.prototype.isVector3=!0,this.x=e,this.y=t,this.z=i}set(e,t,i){return void 0===i&&(i=this.z),this.x=e,this.y=t,this.z=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(TO.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(TO.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,i=this.y,r=this.z,o=e.elements;return this.x=o[0]*t+o[3]*i+o[6]*r,this.y=o[1]*t+o[4]*i+o[7]*r,this.z=o[2]*t+o[5]*i+o[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,i=this.y,r=this.z,o=e.elements,s=1/(o[3]*t+o[7]*i+o[11]*r+o[15]);return this.x=(o[0]*t+o[4]*i+o[8]*r+o[12])*s,this.y=(o[1]*t+o[5]*i+o[9]*r+o[13])*s,this.z=(o[2]*t+o[6]*i+o[10]*r+o[14])*s,this}applyQuaternion(e){const t=this.x,i=this.y,r=this.z,o=e.x,s=e.y,a=e.z,c=e.w,l=2*(s*r-a*i),u=2*(a*t-o*r),d=2*(o*i-s*t);return this.x=t+c*l+s*d-a*u,this.y=i+c*u+a*l-o*d,this.z=r+c*d+o*u-s*l,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,i=this.y,r=this.z,o=e.elements;return this.x=o[0]*t+o[4]*i+o[8]*r,this.y=o[1]*t+o[5]*i+o[9]*r,this.z=o[2]*t+o[6]*i+o[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const i=e.x,r=e.y,o=e.z,s=t.x,a=t.y,c=t.z;return this.x=r*c-o*a,this.y=o*s-i*c,this.z=i*a-r*s,this}projectOnVector(e){const t=e.lengthSq();if(0===t)return this.set(0,0,0);const i=e.dot(this)/t;return this.copy(e).multiplyScalar(i)}projectOnPlane(e){return my.copy(this).projectOnVector(e),this.sub(my)}reflect(e){return this.sub(my.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(mn(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y,r=this.z-e.z;return t*t+i*i+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,i){const r=Math.sin(t)*e;return this.x=r*Math.sin(i),this.y=Math.cos(t)*e,this.z=r*Math.cos(i),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,i){return this.x=e*Math.sin(t),this.y=i,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=i,this.z=r,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,4*t)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,3*t)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=2*(Math.random()-.5),t=Math.random()*Math.PI*2,i=Math.sqrt(1-e**2);return this.x=i*Math.cos(t),this.y=i*Math.sin(t),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const my=new D,TO=new _i;class dr{constructor(e=new D(1/0,1/0,1/0),t=new D(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t+=3)this.expandByPoint(Dr.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,i=e.count;t<i;t++)this.expandByPoint(Dr.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=Dr.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return(new this.constructor).copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const i=e.geometry;if(void 0!==i){const o=i.getAttribute("position");if(!0===t&&void 0!==o&&!0!==e.isInstancedMesh)for(let s=0,a=o.count;s<a;s++)!0===e.isMesh?e.getVertexPosition(s,Dr):Dr.fromBufferAttribute(o,s),Dr.applyMatrix4(e.matrixWorld),this.expandByPoint(Dr);else void 0!==e.boundingBox?(null===e.boundingBox&&e.computeBoundingBox(),Cp.copy(e.boundingBox)):(null===i.boundingBox&&i.computeBoundingBox(),Cp.copy(i.boundingBox)),Cp.applyMatrix4(e.matrixWorld),this.union(Cp)}const r=e.children;for(let o=0,s=r.length;o<s;o++)this.expandByObject(r[o],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,Dr),Dr.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,i;return e.normal.x>0?(t=e.normal.x*this.min.x,i=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,i=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,i+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,i+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,i+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,i+=e.normal.z*this.min.z),t<=-e.constant&&i>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(gd),wp.subVectors(this.max,gd),Jc.subVectors(e.a,gd),Qc.subVectors(e.b,gd),el.subVectors(e.c,gd),gs.subVectors(Qc,Jc),ms.subVectors(el,Qc),oa.subVectors(Jc,el);let t=[0,-gs.z,gs.y,0,-ms.z,ms.y,0,-oa.z,oa.y,gs.z,0,-gs.x,ms.z,0,-ms.x,oa.z,0,-oa.x,-gs.y,gs.x,0,-ms.y,ms.x,0,-oa.y,oa.x,0];return!(!_y(t,Jc,Qc,el,wp)||(t=[1,0,0,0,1,0,0,0,1],!_y(t,Jc,Qc,el,wp)))&&(Sp.crossVectors(gs,ms),t=[Sp.x,Sp.y,Sp.z],_y(t,Jc,Qc,el,wp))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,Dr).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=.5*this.getSize(Dr).length()),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()||(Io[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Io[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Io[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Io[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Io[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Io[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Io[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Io[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Io)),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const Io=[new D,new D,new D,new D,new D,new D,new D,new D],Dr=new D,Cp=new dr,Jc=new D,Qc=new D,el=new D,gs=new D,ms=new D,oa=new D,gd=new D,wp=new D,Sp=new D,sa=new D;function _y(n,e,t,i,r){for(let o=0,s=n.length-3;o<=s;o+=3){sa.fromArray(n,o);const a=r.x*Math.abs(sa.x)+r.y*Math.abs(sa.y)+r.z*Math.abs(sa.z),c=e.dot(sa),l=t.dot(sa),u=i.dot(sa);if(Math.max(-Math.max(c,l,u),Math.min(c,l,u))>a)return!1}return!0}const DW=new dr,md=new D,vy=new D;class Ir{constructor(e=new D,t=-1){this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const i=this.center;void 0!==t?i.copy(t):DW.setFromPoints(e).getCenter(i);let r=0;for(let o=0,s=e.length;o<s;o++)r=Math.max(r,i.distanceToSquared(e[o]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const i=this.center.distanceToSquared(e);return t.copy(e),i>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;md.subVectors(e,this.center);const t=md.lengthSq();if(t>this.radius*this.radius){const i=Math.sqrt(t),r=.5*(i-this.radius);this.center.addScaledVector(md,r/i),this.radius+=r}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(!0===this.center.equals(e.center)?this.radius=Math.max(this.radius,e.radius):(vy.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(md.copy(e.center).add(vy)),this.expandByPoint(md.copy(e.center).sub(vy))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return(new this.constructor).copy(this)}}const Ro=new D,yy=new D,Ep=new D,_s=new D,xy=new D,Pp=new D,My=new D;class _d{constructor(e=new D,t=new D(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Ro)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const i=t.dot(this.direction);return i<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,i)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=Ro.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(Ro.copy(this.origin).addScaledVector(this.direction,t),Ro.distanceToSquared(e))}distanceSqToSegment(e,t,i,r){yy.copy(e).add(t).multiplyScalar(.5),Ep.copy(t).sub(e).normalize(),_s.copy(this.origin).sub(yy);const o=.5*e.distanceTo(t),s=-this.direction.dot(Ep),a=_s.dot(this.direction),c=-_s.dot(Ep),l=_s.lengthSq(),u=Math.abs(1-s*s);let d,f,h,p;if(u>0)if(d=s*c-a,f=s*a-c,p=o*u,d>=0)if(f>=-p)if(f<=p){const _=1/u;d*=_,f*=_,h=d*(d+s*f+2*a)+f*(s*d+f+2*c)+l}else f=o,d=Math.max(0,-(s*f+a)),h=-d*d+f*(f+2*c)+l;else f=-o,d=Math.max(0,-(s*f+a)),h=-d*d+f*(f+2*c)+l;else f<=-p?(d=Math.max(0,-(-s*o+a)),f=d>0?-o:Math.min(Math.max(-o,-c),o),h=-d*d+f*(f+2*c)+l):f<=p?(d=0,f=Math.min(Math.max(-o,-c),o),h=f*(f+2*c)+l):(d=Math.max(0,-(s*o+a)),f=d>0?o:Math.min(Math.max(-o,-c),o),h=-d*d+f*(f+2*c)+l);else f=s>0?-o:o,d=Math.max(0,-(s*f+a)),h=-d*d+f*(f+2*c)+l;return i&&i.copy(this.origin).addScaledVector(this.direction,d),r&&r.copy(yy).addScaledVector(Ep,f),h}intersectSphere(e,t){Ro.subVectors(e.center,this.origin);const i=Ro.dot(this.direction),r=Ro.dot(Ro)-i*i,o=e.radius*e.radius;if(r>o)return null;const s=Math.sqrt(o-r),a=i-s,c=i+s;return c<0?null:this.at(a<0?c:a,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;const i=-(this.origin.dot(e.normal)+e.constant)/t;return i>=0?i:null}intersectPlane(e,t){const i=this.distanceToPlane(e);return null===i?null:this.at(i,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return 0===t||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let i,r,o,s,a,c;const l=1/this.direction.x,u=1/this.direction.y,d=1/this.direction.z,f=this.origin;return l>=0?(i=(e.min.x-f.x)*l,r=(e.max.x-f.x)*l):(i=(e.max.x-f.x)*l,r=(e.min.x-f.x)*l),u>=0?(o=(e.min.y-f.y)*u,s=(e.max.y-f.y)*u):(o=(e.max.y-f.y)*u,s=(e.min.y-f.y)*u),i>s||o>r||((o>i||isNaN(i))&&(i=o),(s<r||isNaN(r))&&(r=s),d>=0?(a=(e.min.z-f.z)*d,c=(e.max.z-f.z)*d):(a=(e.max.z-f.z)*d,c=(e.min.z-f.z)*d),i>c||a>r)||((a>i||i!=i)&&(i=a),(c<r||r!=r)&&(r=c),r<0)?null:this.at(i>=0?i:r,t)}intersectsBox(e){return null!==this.intersectBox(e,Ro)}intersectTriangle(e,t,i,r,o){xy.subVectors(t,e),Pp.subVectors(i,e),My.crossVectors(xy,Pp);let a,s=this.direction.dot(My);if(s>0){if(r)return null;a=1}else{if(!(s<0))return null;a=-1,s=-s}_s.subVectors(this.origin,e);const c=a*this.direction.dot(Pp.crossVectors(_s,Pp));if(c<0)return null;const l=a*this.direction.dot(xy.cross(_s));if(l<0||c+l>s)return null;const u=-a*_s.dot(My);return u<0?null:this.at(u/s,o)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}}class nt{constructor(e,t,i,r,o,s,a,c,l,u,d,f,h,p,_,m){nt.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],void 0!==e&&this.set(e,t,i,r,o,s,a,c,l,u,d,f,h,p,_,m)}set(e,t,i,r,o,s,a,c,l,u,d,f,h,p,_,m){const g=this.elements;return g[0]=e,g[4]=t,g[8]=i,g[12]=r,g[1]=o,g[5]=s,g[9]=a,g[13]=c,g[2]=l,g[6]=u,g[10]=d,g[14]=f,g[3]=h,g[7]=p,g[11]=_,g[15]=m,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new nt).fromArray(this.elements)}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],t[9]=i[9],t[10]=i[10],t[11]=i[11],t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15],this}copyPosition(e){const t=this.elements,i=e.elements;return t[12]=i[12],t[13]=i[13],t[14]=i[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,i){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(e,t,i){return this.set(e.x,t.x,i.x,0,e.y,t.y,i.y,0,e.z,t.z,i.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,i=e.elements,r=1/tl.setFromMatrixColumn(e,0).length(),o=1/tl.setFromMatrixColumn(e,1).length(),s=1/tl.setFromMatrixColumn(e,2).length();return t[0]=i[0]*r,t[1]=i[1]*r,t[2]=i[2]*r,t[3]=0,t[4]=i[4]*o,t[5]=i[5]*o,t[6]=i[6]*o,t[7]=0,t[8]=i[8]*s,t[9]=i[9]*s,t[10]=i[10]*s,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,i=e.x,r=e.y,o=e.z,s=Math.cos(i),a=Math.sin(i),c=Math.cos(r),l=Math.sin(r),u=Math.cos(o),d=Math.sin(o);if("XYZ"===e.order){const f=s*u,h=s*d,p=a*u,_=a*d;t[0]=c*u,t[4]=-c*d,t[8]=l,t[1]=h+p*l,t[5]=f-_*l,t[9]=-a*c,t[2]=_-f*l,t[6]=p+h*l,t[10]=s*c}else if("YXZ"===e.order){const f=c*u,h=c*d,p=l*u,_=l*d;t[0]=f+_*a,t[4]=p*a-h,t[8]=s*l,t[1]=s*d,t[5]=s*u,t[9]=-a,t[2]=h*a-p,t[6]=_+f*a,t[10]=s*c}else if("ZXY"===e.order){const f=c*u,h=c*d,p=l*u,_=l*d;t[0]=f-_*a,t[4]=-s*d,t[8]=p+h*a,t[1]=h+p*a,t[5]=s*u,t[9]=_-f*a,t[2]=-s*l,t[6]=a,t[10]=s*c}else if("ZYX"===e.order){const f=s*u,h=s*d,p=a*u,_=a*d;t[0]=c*u,t[4]=p*l-h,t[8]=f*l+_,t[1]=c*d,t[5]=_*l+f,t[9]=h*l-p,t[2]=-l,t[6]=a*c,t[10]=s*c}else if("YZX"===e.order){const f=s*c,h=s*l,p=a*c,_=a*l;t[0]=c*u,t[4]=_-f*d,t[8]=p*d+h,t[1]=d,t[5]=s*u,t[9]=-a*u,t[2]=-l*u,t[6]=h*d+p,t[10]=f-_*d}else if("XZY"===e.order){const f=s*c,h=s*l,p=a*c,_=a*l;t[0]=c*u,t[4]=-d,t[8]=l*u,t[1]=f*d+_,t[5]=s*u,t[9]=h*d-p,t[2]=p*d-h,t[6]=a*u,t[10]=_*d+f}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(IW,e,RW)}lookAt(e,t,i){const r=this.elements;return Xi.subVectors(e,t),0===Xi.lengthSq()&&(Xi.z=1),Xi.normalize(),vs.crossVectors(i,Xi),0===vs.lengthSq()&&(1===Math.abs(i.z)?Xi.x+=1e-4:Xi.z+=1e-4,Xi.normalize(),vs.crossVectors(i,Xi)),vs.normalize(),Tp.crossVectors(Xi,vs),r[0]=vs.x,r[4]=Tp.x,r[8]=Xi.x,r[1]=vs.y,r[5]=Tp.y,r[9]=Xi.y,r[2]=vs.z,r[6]=Tp.z,r[10]=Xi.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,r=t.elements,o=this.elements,s=i[0],a=i[4],c=i[8],l=i[12],u=i[1],d=i[5],f=i[9],h=i[13],p=i[2],_=i[6],m=i[10],g=i[14],v=i[3],y=i[7],x=i[11],C=i[15],S=r[0],T=r[4],R=r[8],w=r[12],A=r[1],z=r[5],Y=r[9],ne=r[13],k=r[2],H=r[6],X=r[10],K=r[14],de=r[3],ie=r[7],le=r[11],B=r[15];return o[0]=s*S+a*A+c*k+l*de,o[4]=s*T+a*z+c*H+l*ie,o[8]=s*R+a*Y+c*X+l*le,o[12]=s*w+a*ne+c*K+l*B,o[1]=u*S+d*A+f*k+h*de,o[5]=u*T+d*z+f*H+h*ie,o[9]=u*R+d*Y+f*X+h*le,o[13]=u*w+d*ne+f*K+h*B,o[2]=p*S+_*A+m*k+g*de,o[6]=p*T+_*z+m*H+g*ie,o[10]=p*R+_*Y+m*X+g*le,o[14]=p*w+_*ne+m*K+g*B,o[3]=v*S+y*A+x*k+C*de,o[7]=v*T+y*z+x*H+C*ie,o[11]=v*R+y*Y+x*X+C*le,o[15]=v*w+y*ne+x*K+C*B,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[4],r=e[8],o=e[12],s=e[1],a=e[5],c=e[9],l=e[13],u=e[2],d=e[6],f=e[10],h=e[14];return e[3]*(+o*c*d-r*l*d-o*a*f+i*l*f+r*a*h-i*c*h)+e[7]*(+t*c*h-t*l*f+o*s*f-r*s*h+r*l*u-o*c*u)+e[11]*(+t*l*d-t*a*h-o*s*d+i*s*h+o*a*u-i*l*u)+e[15]*(-r*a*u-t*c*d+t*a*f+r*s*d-i*s*f+i*c*u)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,i){const r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=i),this}invert(){const e=this.elements,t=e[0],i=e[1],r=e[2],o=e[3],s=e[4],a=e[5],c=e[6],l=e[7],u=e[8],d=e[9],f=e[10],h=e[11],p=e[12],_=e[13],m=e[14],g=e[15],v=d*m*l-_*f*l+_*c*h-a*m*h-d*c*g+a*f*g,y=p*f*l-u*m*l-p*c*h+s*m*h+u*c*g-s*f*g,x=u*_*l-p*d*l+p*a*h-s*_*h-u*a*g+s*d*g,C=p*d*c-u*_*c-p*a*f+s*_*f+u*a*m-s*d*m,S=t*v+i*y+r*x+o*C;if(0===S)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const T=1/S;return e[0]=v*T,e[1]=(_*f*o-d*m*o-_*r*h+i*m*h+d*r*g-i*f*g)*T,e[2]=(a*m*o-_*c*o+_*r*l-i*m*l-a*r*g+i*c*g)*T,e[3]=(d*c*o-a*f*o-d*r*l+i*f*l+a*r*h-i*c*h)*T,e[4]=y*T,e[5]=(u*m*o-p*f*o+p*r*h-t*m*h-u*r*g+t*f*g)*T,e[6]=(p*c*o-s*m*o-p*r*l+t*m*l+s*r*g-t*c*g)*T,e[7]=(s*f*o-u*c*o+u*r*l-t*f*l-s*r*h+t*c*h)*T,e[8]=x*T,e[9]=(p*d*o-u*_*o-p*i*h+t*_*h+u*i*g-t*d*g)*T,e[10]=(s*_*o-p*a*o+p*i*l-t*_*l-s*i*g+t*a*g)*T,e[11]=(u*a*o-s*d*o-u*i*l+t*d*l+s*i*h-t*a*h)*T,e[12]=C*T,e[13]=(u*_*r-p*d*r+p*i*f-t*_*f-u*i*m+t*d*m)*T,e[14]=(p*a*r-s*_*r-p*i*c+t*_*c+s*i*m-t*a*m)*T,e[15]=(s*d*r-u*a*r+u*i*c-t*d*c-s*i*f+t*a*f)*T,this}scale(e){const t=this.elements,i=e.x,r=e.y,o=e.z;return t[0]*=i,t[4]*=r,t[8]*=o,t[1]*=i,t[5]*=r,t[9]*=o,t[2]*=i,t[6]*=r,t[10]*=o,t[3]*=i,t[7]*=r,t[11]*=o,this}getMaxScaleOnAxis(){const e=this.elements;return Math.sqrt(Math.max(e[0]*e[0]+e[1]*e[1]+e[2]*e[2],e[4]*e[4]+e[5]*e[5]+e[6]*e[6],e[8]*e[8]+e[9]*e[9]+e[10]*e[10]))}makeTranslation(e,t,i){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,i,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),i=Math.sin(e);return this.set(1,0,0,0,0,t,-i,0,0,i,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,0,i,0,0,1,0,0,-i,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,0,i,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const i=Math.cos(t),r=Math.sin(t),o=1-i,s=e.x,a=e.y,c=e.z,l=o*s,u=o*a;return this.set(l*s+i,l*a-r*c,l*c+r*a,0,l*a+r*c,u*a+i,u*c-r*s,0,l*c-r*a,u*c+r*s,o*c*c+i,0,0,0,0,1),this}makeScale(e,t,i){return this.set(e,0,0,0,0,t,0,0,0,0,i,0,0,0,0,1),this}makeShear(e,t,i,r,o,s){return this.set(1,i,o,0,e,1,s,0,t,r,1,0,0,0,0,1),this}compose(e,t,i){const r=this.elements,o=t._x,s=t._y,a=t._z,c=t._w,l=o+o,u=s+s,d=a+a,f=o*l,h=o*u,p=o*d,_=s*u,m=s*d,g=a*d,v=c*l,y=c*u,x=c*d,C=i.x,S=i.y,T=i.z;return r[0]=(1-(_+g))*C,r[1]=(h+x)*C,r[2]=(p-y)*C,r[3]=0,r[4]=(h-x)*S,r[5]=(1-(f+g))*S,r[6]=(m+v)*S,r[7]=0,r[8]=(p+y)*T,r[9]=(m-v)*T,r[10]=(1-(f+_))*T,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,t,i){const r=this.elements;let o=tl.set(r[0],r[1],r[2]).length();const s=tl.set(r[4],r[5],r[6]).length(),a=tl.set(r[8],r[9],r[10]).length();this.determinant()<0&&(o=-o),e.x=r[12],e.y=r[13],e.z=r[14],Rr.copy(this);const l=1/o,u=1/s,d=1/a;return Rr.elements[0]*=l,Rr.elements[1]*=l,Rr.elements[2]*=l,Rr.elements[4]*=u,Rr.elements[5]*=u,Rr.elements[6]*=u,Rr.elements[8]*=d,Rr.elements[9]*=d,Rr.elements[10]*=d,t.setFromRotationMatrix(Rr),i.x=o,i.y=s,i.z=a,this}makePerspective(e,t,i,r,o,s,a=Do){const c=this.elements,l=2*o/(t-e),u=2*o/(i-r),d=(t+e)/(t-e),f=(i+r)/(i-r);let h,p;if(a===Do)h=-(s+o)/(s-o),p=-2*s*o/(s-o);else{if(2001!==a)throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+a);h=-s/(s-o),p=-s*o/(s-o)}return c[0]=l,c[4]=0,c[8]=d,c[12]=0,c[1]=0,c[5]=u,c[9]=f,c[13]=0,c[2]=0,c[6]=0,c[10]=h,c[14]=p,c[3]=0,c[7]=0,c[11]=-1,c[15]=0,this}makeOrthographic(e,t,i,r,o,s,a=Do){const c=this.elements,l=1/(t-e),u=1/(i-r),d=1/(s-o),f=(t+e)*l,h=(i+r)*u;let p,_;if(a===Do)p=(s+o)*d,_=-2*d;else{if(2001!==a)throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+a);p=o*d,_=-1*d}return c[0]=2*l,c[4]=0,c[8]=0,c[12]=-f,c[1]=0,c[5]=2*u,c[9]=0,c[13]=-h,c[2]=0,c[6]=0,c[10]=_,c[14]=-p,c[3]=0,c[7]=0,c[11]=0,c[15]=1,this}equals(e){const t=this.elements,i=e.elements;for(let r=0;r<16;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<16;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e[t+9]=i[9],e[t+10]=i[10],e[t+11]=i[11],e[t+12]=i[12],e[t+13]=i[13],e[t+14]=i[14],e[t+15]=i[15],e}}const tl=new D,Rr=new nt,IW=new D(0,0,0),RW=new D(1,1,1),vs=new D,Tp=new D,Xi=new D,AO=new nt,OO=new _i;let NW=(()=>{class n{constructor(t=0,i=0,r=0,o=n.DEFAULT_ORDER){this.isEuler=!0,this._x=t,this._y=i,this._z=r,this._order=o}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get order(){return this._order}set order(t){this._order=t,this._onChangeCallback()}set(t,i,r,o=this._order){return this._x=t,this._y=i,this._z=r,this._order=o,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this}setFromRotationMatrix(t,i=this._order,r=!0){const o=t.elements,s=o[0],a=o[4],c=o[8],l=o[1],u=o[5],d=o[9],f=o[2],h=o[6],p=o[10];switch(i){case"XYZ":this._y=Math.asin(mn(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(-d,p),this._z=Math.atan2(-a,s)):(this._x=Math.atan2(h,u),this._z=0);break;case"YXZ":this._x=Math.asin(-mn(d,-1,1)),Math.abs(d)<.9999999?(this._y=Math.atan2(c,p),this._z=Math.atan2(l,u)):(this._y=Math.atan2(-f,s),this._z=0);break;case"ZXY":this._x=Math.asin(mn(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(-f,p),this._z=Math.atan2(-a,u)):(this._y=0,this._z=Math.atan2(l,s));break;case"ZYX":this._y=Math.asin(-mn(f,-1,1)),Math.abs(f)<.9999999?(this._x=Math.atan2(h,p),this._z=Math.atan2(l,s)):(this._x=0,this._z=Math.atan2(-a,u));break;case"YZX":this._z=Math.asin(mn(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-d,u),this._y=Math.atan2(-f,s)):(this._x=0,this._y=Math.atan2(c,p));break;case"XZY":this._z=Math.asin(-mn(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(h,u),this._y=Math.atan2(c,s)):(this._x=Math.atan2(-d,p),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+i)}return this._order=i,!0===r&&this._onChangeCallback(),this}setFromQuaternion(t,i,r){return AO.makeRotationFromQuaternion(t),this.setFromRotationMatrix(AO,i,r)}setFromVector3(t,i=this._order){return this.set(t.x,t.y,t.z,i)}reorder(t){return OO.setFromEuler(this),this.setFromQuaternion(OO,t)}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order}fromArray(t){return this._x=t[0],this._y=t[1],this._z=t[2],void 0!==t[3]&&(this._order=t[3]),this._onChangeCallback(),this}toArray(t=[],i=0){return t[i]=this._x,t[i+1]=this._y,t[i+2]=this._z,t[i+3]=this._order,t}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}return n.DEFAULT_ORDER="XYZ",n})();class by{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return 0!=(this.mask&e.mask)}isEnabled(e){return 0!=(this.mask&(1<<e|0))}}let LW=0;const DO=new D,nl=new _i,No=new nt,Ap=new D,vd=new D,kW=new D,FW=new _i,IO=new D(1,0,0),RO=new D(0,1,0),NO=new D(0,0,1),UW={type:"added"},BW={type:"removed"};let rn=(()=>{class n extends ps{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:LW++}),this.uuid=qi(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=n.DEFAULT_UP.clone();const t=new D,i=new NW,r=new _i,o=new D(1,1,1);i._onChange(function s(){r.setFromEuler(i,!1)}),r._onChange(function a(){i.setFromQuaternion(r,void 0,!1)}),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:t},rotation:{configurable:!0,enumerable:!0,value:i},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:o},modelViewMatrix:{value:new nt},normalMatrix:{value:new bt}}),this.matrix=new nt,this.matrixWorld=new nt,this.matrixAutoUpdate=n.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.matrixWorldAutoUpdate=n.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.layers=new by,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(t){return this.quaternion.premultiply(t),this}setRotationFromAxisAngle(t,i){this.quaternion.setFromAxisAngle(t,i)}setRotationFromEuler(t){this.quaternion.setFromEuler(t,!0)}setRotationFromMatrix(t){this.quaternion.setFromRotationMatrix(t)}setRotationFromQuaternion(t){this.quaternion.copy(t)}rotateOnAxis(t,i){return nl.setFromAxisAngle(t,i),this.quaternion.multiply(nl),this}rotateOnWorldAxis(t,i){return nl.setFromAxisAngle(t,i),this.quaternion.premultiply(nl),this}rotateX(t){return this.rotateOnAxis(IO,t)}rotateY(t){return this.rotateOnAxis(RO,t)}rotateZ(t){return this.rotateOnAxis(NO,t)}translateOnAxis(t,i){return DO.copy(t).applyQuaternion(this.quaternion),this.position.add(DO.multiplyScalar(i)),this}translateX(t){return this.translateOnAxis(IO,t)}translateY(t){return this.translateOnAxis(RO,t)}translateZ(t){return this.translateOnAxis(NO,t)}localToWorld(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(this.matrixWorld)}worldToLocal(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(No.copy(this.matrixWorld).invert())}lookAt(t,i,r){t.isVector3?Ap.copy(t):Ap.set(t,i,r);const o=this.parent;this.updateWorldMatrix(!0,!1),vd.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?No.lookAt(vd,Ap,this.up):No.lookAt(Ap,vd,this.up),this.quaternion.setFromRotationMatrix(No),o&&(No.extractRotation(o.matrixWorld),nl.setFromRotationMatrix(No),this.quaternion.premultiply(nl.invert()))}add(t){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.add(arguments[i]);return this}return t===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",t),this):(t&&t.isObject3D?(null!==t.parent&&t.parent.remove(t),t.parent=this,this.children.push(t),t.dispatchEvent(UW)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this)}remove(t){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.remove(arguments[r]);return this}const i=this.children.indexOf(t);return-1!==i&&(t.parent=null,this.children.splice(i,1),t.dispatchEvent(BW)),this}removeFromParent(){const t=this.parent;return null!==t&&t.remove(this),this}clear(){return this.remove(...this.children)}attach(t){return this.updateWorldMatrix(!0,!1),No.copy(this.matrixWorld).invert(),null!==t.parent&&(t.parent.updateWorldMatrix(!0,!1),No.multiply(t.parent.matrixWorld)),t.applyMatrix4(No),this.add(t),t.updateWorldMatrix(!1,!0),this}getObjectById(t){return this.getObjectByProperty("id",t)}getObjectByName(t){return this.getObjectByProperty("name",t)}getObjectByProperty(t,i){if(this[t]===i)return this;for(let r=0,o=this.children.length;r<o;r++){const a=this.children[r].getObjectByProperty(t,i);if(void 0!==a)return a}}getObjectsByProperty(t,i){let r=[];this[t]===i&&r.push(this);for(let o=0,s=this.children.length;o<s;o++){const a=this.children[o].getObjectsByProperty(t,i);a.length>0&&(r=r.concat(a))}return r}getWorldPosition(t){return this.updateWorldMatrix(!0,!1),t.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(vd,t,kW),t}getWorldScale(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(vd,FW,t),t}getWorldDirection(t){this.updateWorldMatrix(!0,!1);const i=this.matrixWorld.elements;return t.set(i[8],i[9],i[10]).normalize()}raycast(){}traverse(t){t(this);const i=this.children;for(let r=0,o=i.length;r<o;r++)i[r].traverse(t)}traverseVisible(t){if(!1===this.visible)return;t(this);const i=this.children;for(let r=0,o=i.length;r<o;r++)i[r].traverseVisible(t)}traverseAncestors(t){const i=this.parent;null!==i&&(t(i),i.traverseAncestors(t))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,t=!0);const i=this.children;for(let r=0,o=i.length;r<o;r++){const s=i[r];(!0===s.matrixWorldAutoUpdate||!0===t)&&s.updateMatrixWorld(t)}}updateWorldMatrix(t,i){const r=this.parent;if(!0===t&&null!==r&&!0===r.matrixWorldAutoUpdate&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===i){const o=this.children;for(let s=0,a=o.length;s<a;s++){const c=o[s];!0===c.matrixWorldAutoUpdate&&c.updateWorldMatrix(!1,!0)}}}toJSON(t){const i=void 0===t||"string"==typeof t,r={};i&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},r.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const o={};function s(c,l){return void 0===c[l.uuid]&&(c[l.uuid]=l.toJSON(t)),l.uuid}if(o.uuid=this.uuid,o.type=this.type,""!==this.name&&(o.name=this.name),!0===this.castShadow&&(o.castShadow=!0),!0===this.receiveShadow&&(o.receiveShadow=!0),!1===this.visible&&(o.visible=!1),!1===this.frustumCulled&&(o.frustumCulled=!1),0!==this.renderOrder&&(o.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(o.userData=this.userData),o.layers=this.layers.mask,o.matrix=this.matrix.toArray(),o.up=this.up.toArray(),!1===this.matrixAutoUpdate&&(o.matrixAutoUpdate=!1),this.isInstancedMesh&&(o.type="InstancedMesh",o.count=this.count,o.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(o.instanceColor=this.instanceColor.toJSON())),this.isScene)this.background&&(this.background.isColor?o.background=this.background.toJSON():this.background.isTexture&&(o.background=this.background.toJSON(t).uuid)),this.environment&&this.environment.isTexture&&!0!==this.environment.isRenderTargetTexture&&(o.environment=this.environment.toJSON(t).uuid);else if(this.isMesh||this.isLine||this.isPoints){o.geometry=s(t.geometries,this.geometry);const c=this.geometry.parameters;if(void 0!==c&&void 0!==c.shapes){const l=c.shapes;if(Array.isArray(l))for(let u=0,d=l.length;u<d;u++)s(t.shapes,l[u]);else s(t.shapes,l)}}if(this.isSkinnedMesh&&(o.bindMode=this.bindMode,o.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(s(t.skeletons,this.skeleton),o.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const c=[];for(let l=0,u=this.material.length;l<u;l++)c.push(s(t.materials,this.material[l]));o.material=c}else o.material=s(t.materials,this.material);if(this.children.length>0){o.children=[];for(let c=0;c<this.children.length;c++)o.children.push(this.children[c].toJSON(t).object)}if(this.animations.length>0){o.animations=[];for(let c=0;c<this.animations.length;c++)o.animations.push(s(t.animations,this.animations[c]))}if(i){const c=a(t.geometries),l=a(t.materials),u=a(t.textures),d=a(t.images),f=a(t.shapes),h=a(t.skeletons),p=a(t.animations),_=a(t.nodes);c.length>0&&(r.geometries=c),l.length>0&&(r.materials=l),u.length>0&&(r.textures=u),d.length>0&&(r.images=d),f.length>0&&(r.shapes=f),h.length>0&&(r.skeletons=h),p.length>0&&(r.animations=p),_.length>0&&(r.nodes=_)}return r.object=o,r;function a(c){const l=[];for(const u in c){const d=c[u];delete d.metadata,l.push(d)}return l}}clone(t){return(new this.constructor).copy(this,t)}copy(t,i=!0){if(this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.rotation.order=t.rotation.order,this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=t.matrixWorldAutoUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.animations=t.animations.slice(),this.userData=JSON.parse(JSON.stringify(t.userData)),!0===i)for(let r=0;r<t.children.length;r++)this.add(t.children[r].clone());return this}}return n.DEFAULT_UP=new D(0,1,0),n.DEFAULT_MATRIX_AUTO_UPDATE=!0,n.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0,n})();const Nr=new D,Lo=new D,Cy=new D,ko=new D,il=new D,rl=new D,LO=new D,wy=new D,Sy=new D,Ey=new D;let Op=!1;class Yi{constructor(e=new D,t=new D,i=new D){this.a=e,this.b=t,this.c=i}static getNormal(e,t,i,r){r.subVectors(i,t),Nr.subVectors(e,t),r.cross(Nr);const o=r.lengthSq();return o>0?r.multiplyScalar(1/Math.sqrt(o)):r.set(0,0,0)}static getBarycoord(e,t,i,r,o){Nr.subVectors(r,t),Lo.subVectors(i,t),Cy.subVectors(e,t);const s=Nr.dot(Nr),a=Nr.dot(Lo),c=Nr.dot(Cy),l=Lo.dot(Lo),u=Lo.dot(Cy),d=s*l-a*a;if(0===d)return o.set(-2,-1,-1);const f=1/d,h=(l*c-a*u)*f,p=(s*u-a*c)*f;return o.set(1-h-p,p,h)}static containsPoint(e,t,i,r){return this.getBarycoord(e,t,i,r,ko),ko.x>=0&&ko.y>=0&&ko.x+ko.y<=1}static getUV(e,t,i,r,o,s,a,c){return!1===Op&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),Op=!0),this.getInterpolation(e,t,i,r,o,s,a,c)}static getInterpolation(e,t,i,r,o,s,a,c){return this.getBarycoord(e,t,i,r,ko),c.setScalar(0),c.addScaledVector(o,ko.x),c.addScaledVector(s,ko.y),c.addScaledVector(a,ko.z),c}static isFrontFacing(e,t,i,r){return Nr.subVectors(i,t),Lo.subVectors(e,t),Nr.cross(Lo).dot(r)<0}set(e,t,i){return this.a.copy(e),this.b.copy(t),this.c.copy(i),this}setFromPointsAndIndices(e,t,i,r){return this.a.copy(e[t]),this.b.copy(e[i]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,t,i,r){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,i),this.c.fromBufferAttribute(e,r),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Nr.subVectors(this.c,this.b),Lo.subVectors(this.a,this.b),.5*Nr.cross(Lo).length()}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Yi.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return Yi.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,i,r,o){return!1===Op&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),Op=!0),Yi.getInterpolation(e,this.a,this.b,this.c,t,i,r,o)}getInterpolation(e,t,i,r,o){return Yi.getInterpolation(e,this.a,this.b,this.c,t,i,r,o)}containsPoint(e){return Yi.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Yi.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const i=this.a,r=this.b,o=this.c;let s,a;il.subVectors(r,i),rl.subVectors(o,i),wy.subVectors(e,i);const c=il.dot(wy),l=rl.dot(wy);if(c<=0&&l<=0)return t.copy(i);Sy.subVectors(e,r);const u=il.dot(Sy),d=rl.dot(Sy);if(u>=0&&d<=u)return t.copy(r);const f=c*d-u*l;if(f<=0&&c>=0&&u<=0)return s=c/(c-u),t.copy(i).addScaledVector(il,s);Ey.subVectors(e,o);const h=il.dot(Ey),p=rl.dot(Ey);if(p>=0&&h<=p)return t.copy(o);const _=h*l-c*p;if(_<=0&&l>=0&&p<=0)return a=l/(l-p),t.copy(i).addScaledVector(rl,a);const m=u*p-h*d;if(m<=0&&d-u>=0&&h-p>=0)return LO.subVectors(o,r),a=(d-u)/(d-u+(h-p)),t.copy(r).addScaledVector(LO,a);const g=1/(m+_+f);return s=_*g,a=f*g,t.copy(i).addScaledVector(il,s).addScaledVector(rl,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const kO={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},ys={h:0,s:0,l:0},Dp={h:0,s:0,l:0};function Py(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+6*(e-n)*t:t<.5?e:t<2/3?n+6*(e-n)*(2/3-t):n}class ye{constructor(e,t,i){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,i)}set(e,t,i){if(void 0===t&&void 0===i){const r=e;r&&r.isColor?this.copy(r):"number"==typeof r?this.setHex(r):"string"==typeof r&&this.setStyle(r)}else this.setRGB(e,t,i);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=nn){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,Bt.toWorkingColorSpace(this,t),this}setRGB(e,t,i,r=Bt.workingColorSpace){return this.r=e,this.g=t,this.b=i,Bt.toWorkingColorSpace(this,r),this}setHSL(e,t,i,r=Bt.workingColorSpace){if(e=uy(e,1),t=mn(t,0,1),i=mn(i,0,1),0===t)this.r=this.g=this.b=i;else{const o=i<=.5?i*(1+t):i+t-i*t,s=2*i-o;this.r=Py(s,o,e+1/3),this.g=Py(s,o,e),this.b=Py(s,o,e-1/3)}return Bt.toWorkingColorSpace(this,r),this}setStyle(e,t=nn){function i(o){void 0!==o&&parseFloat(o)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let r;if(r=/^(\w+)\(([^\)]*)\)/.exec(e)){let o;const a=r[2];switch(r[1]){case"rgb":case"rgba":if(o=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(o[4]),this.setRGB(Math.min(255,parseInt(o[1],10))/255,Math.min(255,parseInt(o[2],10))/255,Math.min(255,parseInt(o[3],10))/255,t);if(o=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(o[4]),this.setRGB(Math.min(100,parseInt(o[1],10))/100,Math.min(100,parseInt(o[2],10))/100,Math.min(100,parseInt(o[3],10))/100,t);break;case"hsl":case"hsla":if(o=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(o[4]),this.setHSL(parseFloat(o[1])/360,parseFloat(o[2])/100,parseFloat(o[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(e)){const o=r[1],s=o.length;if(3===s)return this.setRGB(parseInt(o.charAt(0),16)/15,parseInt(o.charAt(1),16)/15,parseInt(o.charAt(2),16)/15,t);if(6===s)return this.setHex(parseInt(o,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=nn){const i=kO[e.toLowerCase()];return void 0!==i?this.setHex(i,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Yc(e.r),this.g=Yc(e.g),this.b=Yc(e.b),this}copyLinearToSRGB(e){return this.r=hy(e.r),this.g=hy(e.g),this.b=hy(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=nn){return Bt.fromWorkingColorSpace(oi.copy(this),e),65536*Math.round(mn(255*oi.r,0,255))+256*Math.round(mn(255*oi.g,0,255))+Math.round(mn(255*oi.b,0,255))}getHexString(e=nn){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=Bt.workingColorSpace){Bt.fromWorkingColorSpace(oi.copy(this),t);const i=oi.r,r=oi.g,o=oi.b,s=Math.max(i,r,o),a=Math.min(i,r,o);let c,l;const u=(a+s)/2;if(a===s)c=0,l=0;else{const d=s-a;switch(l=u<=.5?d/(s+a):d/(2-s-a),s){case i:c=(r-o)/d+(r<o?6:0);break;case r:c=(o-i)/d+2;break;case o:c=(i-r)/d+4}c/=6}return e.h=c,e.s=l,e.l=u,e}getRGB(e,t=Bt.workingColorSpace){return Bt.fromWorkingColorSpace(oi.copy(this),t),e.r=oi.r,e.g=oi.g,e.b=oi.b,e}getStyle(e=nn){Bt.fromWorkingColorSpace(oi.copy(this),e);const t=oi.r,i=oi.g,r=oi.b;return e!==nn?`color(${e} ${t.toFixed(3)} ${i.toFixed(3)} ${r.toFixed(3)})`:`rgb(${Math.round(255*t)},${Math.round(255*i)},${Math.round(255*r)})`}offsetHSL(e,t,i){return this.getHSL(ys),this.setHSL(ys.h+e,ys.s+t,ys.l+i)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,i){return this.r=e.r+(t.r-e.r)*i,this.g=e.g+(t.g-e.g)*i,this.b=e.b+(t.b-e.b)*i,this}lerpHSL(e,t){this.getHSL(ys),e.getHSL(Dp);const i=fd(ys.h,Dp.h,t),r=fd(ys.s,Dp.s,t),o=fd(ys.l,Dp.l,t);return this.setHSL(i,r,o),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,i=this.g,r=this.b,o=e.elements;return this.r=o[0]*t+o[3]*i+o[6]*r,this.g=o[1]*t+o[4]*i+o[7]*r,this.b=o[2]*t+o[5]*i+o[8]*r,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const oi=new ye;ye.NAMES=kO;let VW=0;class On extends ps{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:VW++}),this.uuid=qi(),this.name="",this.type="Material",this.blending=1,this.side=0,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=204,this.blendDst=205,this.blendEquation=100,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new ye(0,0,0),this.blendAlpha=0,this.depthFunc=3,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=519,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=$c,this.stencilZFail=$c,this.stencilZPass=$c,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(void 0!==e)for(const t in e){const i=e[t];if(void 0===i){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}const r=this[t];void 0!==r?r&&r.isColor?r.set(i):r&&r.isVector3&&i&&i.isVector3?r.copy(i):this[t]=i:console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`)}}toJSON(e){const t=void 0===e||"string"==typeof e;t&&(e={textures:{},images:{}});const i={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};function r(o){const s=[];for(const a in o){const c=o[a];delete c.metadata,s.push(c)}return s}if(i.uuid=this.uuid,i.type=this.type,""!==this.name&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),void 0!==this.roughness&&(i.roughness=this.roughness),void 0!==this.metalness&&(i.metalness=this.metalness),void 0!==this.sheen&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(i.shininess=this.shininess),void 0!==this.clearcoat&&(i.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),void 0!==this.iridescence&&(i.iridescence=this.iridescence),void 0!==this.iridescenceIOR&&(i.iridescenceIOR=this.iridescenceIOR),void 0!==this.iridescenceThicknessRange&&(i.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(i.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(i.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),void 0!==this.anisotropy&&(i.anisotropy=this.anisotropy),void 0!==this.anisotropyRotation&&(i.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(i.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(e).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(e).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(e).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(e).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(e).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(e).uuid,void 0!==this.combine&&(i.combine=this.combine)),void 0!==this.envMapIntensity&&(i.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(i.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.transmission&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(e).uuid),void 0!==this.thickness&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(e).uuid),void 0!==this.attenuationDistance&&this.attenuationDistance!==1/0&&(i.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(i.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(i.size=this.size),null!==this.shadowSide&&(i.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(i.sizeAttenuation=this.sizeAttenuation),1!==this.blending&&(i.blending=this.blending),0!==this.side&&(i.side=this.side),!0===this.vertexColors&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),!0===this.transparent&&(i.transparent=!0),204!==this.blendSrc&&(i.blendSrc=this.blendSrc),205!==this.blendDst&&(i.blendDst=this.blendDst),100!==this.blendEquation&&(i.blendEquation=this.blendEquation),null!==this.blendSrcAlpha&&(i.blendSrcAlpha=this.blendSrcAlpha),null!==this.blendDstAlpha&&(i.blendDstAlpha=this.blendDstAlpha),null!==this.blendEquationAlpha&&(i.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(i.blendColor=this.blendColor.getHex()),0!==this.blendAlpha&&(i.blendAlpha=this.blendAlpha),3!==this.depthFunc&&(i.depthFunc=this.depthFunc),!1===this.depthTest&&(i.depthTest=this.depthTest),!1===this.depthWrite&&(i.depthWrite=this.depthWrite),!1===this.colorWrite&&(i.colorWrite=this.colorWrite),255!==this.stencilWriteMask&&(i.stencilWriteMask=this.stencilWriteMask),519!==this.stencilFunc&&(i.stencilFunc=this.stencilFunc),0!==this.stencilRef&&(i.stencilRef=this.stencilRef),255!==this.stencilFuncMask&&(i.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==$c&&(i.stencilFail=this.stencilFail),this.stencilZFail!==$c&&(i.stencilZFail=this.stencilZFail),this.stencilZPass!==$c&&(i.stencilZPass=this.stencilZPass),!0===this.stencilWrite&&(i.stencilWrite=this.stencilWrite),void 0!==this.rotation&&0!==this.rotation&&(i.rotation=this.rotation),!0===this.polygonOffset&&(i.polygonOffset=!0),0!==this.polygonOffsetFactor&&(i.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(i.polygonOffsetUnits=this.polygonOffsetUnits),void 0!==this.linewidth&&1!==this.linewidth&&(i.linewidth=this.linewidth),void 0!==this.dashSize&&(i.dashSize=this.dashSize),void 0!==this.gapSize&&(i.gapSize=this.gapSize),void 0!==this.scale&&(i.scale=this.scale),!0===this.dithering&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),!0===this.alphaHash&&(i.alphaHash=!0),!0===this.alphaToCoverage&&(i.alphaToCoverage=!0),!0===this.premultipliedAlpha&&(i.premultipliedAlpha=!0),!0===this.forceSinglePass&&(i.forceSinglePass=!0),!0===this.wireframe&&(i.wireframe=!0),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(i.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(i.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(i.flatShading=!0),!1===this.visible&&(i.visible=!1),!1===this.toneMapped&&(i.toneMapped=!1),!1===this.fog&&(i.fog=!1),Object.keys(this.userData).length>0&&(i.userData=this.userData),t){const o=r(e.textures),s=r(e.images);o.length>0&&(i.textures=o),s.length>0&&(i.images=s)}return i}clone(){return(new this.constructor).copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let i=null;if(null!==t){const r=t.length;i=new Array(r);for(let o=0;o!==r;++o)i[o]=t[o].clone()}return this.clippingPlanes=i,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){!0===e&&this.version++}}class fr extends On{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new ye(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=up,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const Dn=new D,Ip=new oe;class Gt{constructor(e,t,i=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=void 0!==e?e.length/t:0,this.normalized=i,this.usage=35044,this.updateRange={offset:0,count:-1},this.gpuType=Oo,this.version=0}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,i){e*=this.itemSize,i*=t.itemSize;for(let r=0,o=this.itemSize;r<o;r++)this.array[e+r]=t.array[i+r];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(2===this.itemSize)for(let t=0,i=this.count;t<i;t++)Ip.fromBufferAttribute(this,t),Ip.applyMatrix3(e),this.setXY(t,Ip.x,Ip.y);else if(3===this.itemSize)for(let t=0,i=this.count;t<i;t++)Dn.fromBufferAttribute(this,t),Dn.applyMatrix3(e),this.setXYZ(t,Dn.x,Dn.y,Dn.z);return this}applyMatrix4(e){for(let t=0,i=this.count;t<i;t++)Dn.fromBufferAttribute(this,t),Dn.applyMatrix4(e),this.setXYZ(t,Dn.x,Dn.y,Dn.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)Dn.fromBufferAttribute(this,t),Dn.applyNormalMatrix(e),this.setXYZ(t,Dn.x,Dn.y,Dn.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)Dn.fromBufferAttribute(this,t),Dn.transformDirection(e),this.setXYZ(t,Dn.x,Dn.y,Dn.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let i=this.array[e*this.itemSize+t];return this.normalized&&(i=Ii(i,this.array)),i}setComponent(e,t,i){return this.normalized&&(i=_t(i,this.array)),this.array[e*this.itemSize+t]=i,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=Ii(t,this.array)),t}setX(e,t){return this.normalized&&(t=_t(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=Ii(t,this.array)),t}setY(e,t){return this.normalized&&(t=_t(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=Ii(t,this.array)),t}setZ(e,t){return this.normalized&&(t=_t(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=Ii(t,this.array)),t}setW(e,t){return this.normalized&&(t=_t(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,i){return e*=this.itemSize,this.normalized&&(t=_t(t,this.array),i=_t(i,this.array)),this.array[e+0]=t,this.array[e+1]=i,this}setXYZ(e,t,i,r){return e*=this.itemSize,this.normalized&&(t=_t(t,this.array),i=_t(i,this.array),r=_t(r,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this}setXYZW(e,t,i,r,o){return e*=this.itemSize,this.normalized&&(t=_t(t,this.array),i=_t(i,this.array),r=_t(r,this.array),o=_t(o,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this.array[e+3]=o,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return""!==this.name&&(e.name=this.name),35044!==this.usage&&(e.usage=this.usage),(0!==this.updateRange.offset||-1!==this.updateRange.count)&&(e.updateRange=this.updateRange),e}}class FO extends Gt{constructor(e,t,i){super(new Uint16Array(e),t,i)}}class UO extends Gt{constructor(e,t,i){super(new Uint32Array(e),t,i)}}class De extends Gt{constructor(e,t,i){super(new Float32Array(e),t,i)}}let HW=0;const hr=new nt,Ty=new rn,ol=new D,Zi=new dr,xd=new dr,Gn=new D;class vt extends ps{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:HW++}),this.uuid=qi(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return this.index=Array.isArray(e)?new(bO(e)?UO:FO)(e,1):e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return void 0!==this.attributes[e]}addGroup(e,t,i=0){this.groups.push({start:e,count:t,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;void 0!==t&&(t.applyMatrix4(e),t.needsUpdate=!0);const i=this.attributes.normal;if(void 0!==i){const o=(new bt).getNormalMatrix(e);i.applyNormalMatrix(o),i.needsUpdate=!0}const r=this.attributes.tangent;return void 0!==r&&(r.transformDirection(e),r.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(e){return hr.makeRotationFromQuaternion(e),this.applyMatrix4(hr),this}rotateX(e){return hr.makeRotationX(e),this.applyMatrix4(hr),this}rotateY(e){return hr.makeRotationY(e),this.applyMatrix4(hr),this}rotateZ(e){return hr.makeRotationZ(e),this.applyMatrix4(hr),this}translate(e,t,i){return hr.makeTranslation(e,t,i),this.applyMatrix4(hr),this}scale(e,t,i){return hr.makeScale(e,t,i),this.applyMatrix4(hr),this}lookAt(e){return Ty.lookAt(e),Ty.updateMatrix(),this.applyMatrix4(Ty.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(ol).negate(),this.translate(ol.x,ol.y,ol.z),this}setFromPoints(e){const t=[];for(let i=0,r=e.length;i<r;i++){const o=e[i];t.push(o.x,o.y,o.z||0)}return this.setAttribute("position",new De(t,3)),this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new dr);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingBox.set(new D(-1/0,-1/0,-1/0),new D(1/0,1/0,1/0));if(void 0!==e){if(this.boundingBox.setFromBufferAttribute(e),t)for(let i=0,r=t.length;i<r;i++)Zi.setFromBufferAttribute(t[i]),this.morphTargetsRelative?(Gn.addVectors(this.boundingBox.min,Zi.min),this.boundingBox.expandByPoint(Gn),Gn.addVectors(this.boundingBox.max,Zi.max),this.boundingBox.expandByPoint(Gn)):(this.boundingBox.expandByPoint(Zi.min),this.boundingBox.expandByPoint(Zi.max))}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new Ir);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingSphere.set(new D,1/0);if(e){const i=this.boundingSphere.center;if(Zi.setFromBufferAttribute(e),t)for(let o=0,s=t.length;o<s;o++)xd.setFromBufferAttribute(t[o]),this.morphTargetsRelative?(Gn.addVectors(Zi.min,xd.min),Zi.expandByPoint(Gn),Gn.addVectors(Zi.max,xd.max),Zi.expandByPoint(Gn)):(Zi.expandByPoint(xd.min),Zi.expandByPoint(xd.max));Zi.getCenter(i);let r=0;for(let o=0,s=e.count;o<s;o++)Gn.fromBufferAttribute(e,o),r=Math.max(r,i.distanceToSquared(Gn));if(t)for(let o=0,s=t.length;o<s;o++){const a=t[o],c=this.morphTargetsRelative;for(let l=0,u=a.count;l<u;l++)Gn.fromBufferAttribute(a,l),c&&(ol.fromBufferAttribute(e,l),Gn.add(ol)),r=Math.max(r,i.distanceToSquared(Gn))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(null===e||void 0===t.position||void 0===t.normal||void 0===t.uv)return void console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");const i=e.array,r=t.position.array,o=t.normal.array,s=t.uv.array,a=r.length/3;!1===this.hasAttribute("tangent")&&this.setAttribute("tangent",new Gt(new Float32Array(4*a),4));const c=this.getAttribute("tangent").array,l=[],u=[];for(let A=0;A<a;A++)l[A]=new D,u[A]=new D;const d=new D,f=new D,h=new D,p=new oe,_=new oe,m=new oe,g=new D,v=new D;function y(A,z,Y){d.fromArray(r,3*A),f.fromArray(r,3*z),h.fromArray(r,3*Y),p.fromArray(s,2*A),_.fromArray(s,2*z),m.fromArray(s,2*Y),f.sub(d),h.sub(d),_.sub(p),m.sub(p);const ne=1/(_.x*m.y-m.x*_.y);isFinite(ne)&&(g.copy(f).multiplyScalar(m.y).addScaledVector(h,-_.y).multiplyScalar(ne),v.copy(h).multiplyScalar(_.x).addScaledVector(f,-m.x).multiplyScalar(ne),l[A].add(g),l[z].add(g),l[Y].add(g),u[A].add(v),u[z].add(v),u[Y].add(v))}let x=this.groups;0===x.length&&(x=[{start:0,count:i.length}]);for(let A=0,z=x.length;A<z;++A){const Y=x[A],ne=Y.start;for(let H=ne,X=ne+Y.count;H<X;H+=3)y(i[H+0],i[H+1],i[H+2])}const C=new D,S=new D,T=new D,R=new D;function w(A){T.fromArray(o,3*A),R.copy(T);const z=l[A];C.copy(z),C.sub(T.multiplyScalar(T.dot(z))).normalize(),S.crossVectors(R,z);const ne=S.dot(u[A])<0?-1:1;c[4*A]=C.x,c[4*A+1]=C.y,c[4*A+2]=C.z,c[4*A+3]=ne}for(let A=0,z=x.length;A<z;++A){const Y=x[A],ne=Y.start;for(let H=ne,X=ne+Y.count;H<X;H+=3)w(i[H+0]),w(i[H+1]),w(i[H+2])}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(void 0!==t){let i=this.getAttribute("normal");if(void 0===i)i=new Gt(new Float32Array(3*t.count),3),this.setAttribute("normal",i);else for(let f=0,h=i.count;f<h;f++)i.setXYZ(f,0,0,0);const r=new D,o=new D,s=new D,a=new D,c=new D,l=new D,u=new D,d=new D;if(e)for(let f=0,h=e.count;f<h;f+=3){const p=e.getX(f+0),_=e.getX(f+1),m=e.getX(f+2);r.fromBufferAttribute(t,p),o.fromBufferAttribute(t,_),s.fromBufferAttribute(t,m),u.subVectors(s,o),d.subVectors(r,o),u.cross(d),a.fromBufferAttribute(i,p),c.fromBufferAttribute(i,_),l.fromBufferAttribute(i,m),a.add(u),c.add(u),l.add(u),i.setXYZ(p,a.x,a.y,a.z),i.setXYZ(_,c.x,c.y,c.z),i.setXYZ(m,l.x,l.y,l.z)}else for(let f=0,h=t.count;f<h;f+=3)r.fromBufferAttribute(t,f+0),o.fromBufferAttribute(t,f+1),s.fromBufferAttribute(t,f+2),u.subVectors(s,o),d.subVectors(r,o),u.cross(d),i.setXYZ(f+0,u.x,u.y,u.z),i.setXYZ(f+1,u.x,u.y,u.z),i.setXYZ(f+2,u.x,u.y,u.z);this.normalizeNormals(),i.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,i=e.count;t<i;t++)Gn.fromBufferAttribute(e,t),Gn.normalize(),e.setXYZ(t,Gn.x,Gn.y,Gn.z)}toNonIndexed(){function e(a,c){const l=a.array,u=a.itemSize,d=a.normalized,f=new l.constructor(c.length*u);let h=0,p=0;for(let _=0,m=c.length;_<m;_++){h=a.isInterleavedBufferAttribute?c[_]*a.data.stride+a.offset:c[_]*u;for(let g=0;g<u;g++)f[p++]=l[h++]}return new Gt(f,u,d)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new vt,i=this.index.array,r=this.attributes;for(const a in r){const l=e(r[a],i);t.setAttribute(a,l)}const o=this.morphAttributes;for(const a in o){const c=[],l=o[a];for(let u=0,d=l.length;u<d;u++){const h=e(l[u],i);c.push(h)}t.morphAttributes[a]=c}t.morphTargetsRelative=this.morphTargetsRelative;const s=this.groups;for(let a=0,c=s.length;a<c;a++){const l=s[a];t.addGroup(l.start,l.count,l.materialIndex)}return t}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),void 0!==this.parameters){const c=this.parameters;for(const l in c)void 0!==c[l]&&(e[l]=c[l]);return e}e.data={attributes:{}};const t=this.index;null!==t&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const i=this.attributes;for(const c in i)e.data.attributes[c]=i[c].toJSON(e.data);const r={};let o=!1;for(const c in this.morphAttributes){const l=this.morphAttributes[c],u=[];for(let d=0,f=l.length;d<f;d++)u.push(l[d].toJSON(e.data));u.length>0&&(r[c]=u,o=!0)}o&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);const s=this.groups;s.length>0&&(e.data.groups=JSON.parse(JSON.stringify(s)));const a=this.boundingSphere;return null!==a&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return(new this.constructor).copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const i=e.index;null!==i&&this.setIndex(i.clone(t));const r=e.attributes;for(const l in r)this.setAttribute(l,r[l].clone(t));const o=e.morphAttributes;for(const l in o){const u=[],d=o[l];for(let f=0,h=d.length;f<h;f++)u.push(d[f].clone(t));this.morphAttributes[l]=u}this.morphTargetsRelative=e.morphTargetsRelative;const s=e.groups;for(let l=0,u=s.length;l<u;l++){const d=s[l];this.addGroup(d.start,d.count,d.materialIndex)}const a=e.boundingBox;null!==a&&(this.boundingBox=a.clone());const c=e.boundingSphere;return null!==c&&(this.boundingSphere=c.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const BO=new nt,aa=new _d,Rp=new Ir,VO=new D,sl=new D,al=new D,cl=new D,Ay=new D,Np=new D,Lp=new oe,kp=new oe,Fp=new oe,zO=new D,HO=new D,GO=new D,Up=new D,Bp=new D;class Dt extends rn{constructor(e=new vt,t=new fr){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(void 0!==r){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let o=0,s=r.length;o<s;o++){const a=r[o].name||String(o);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=o}}}}getVertexPosition(e,t){const i=this.geometry,o=i.morphAttributes.position,s=i.morphTargetsRelative;t.fromBufferAttribute(i.attributes.position,e);const a=this.morphTargetInfluences;if(o&&a){Np.set(0,0,0);for(let c=0,l=o.length;c<l;c++){const u=a[c];0!==u&&(Ay.fromBufferAttribute(o[c],e),Np.addScaledVector(s?Ay:Ay.sub(t),u))}t.add(Np)}return t}raycast(e,t){const i=this.geometry,o=this.matrixWorld;void 0!==this.material&&(null===i.boundingSphere&&i.computeBoundingSphere(),Rp.copy(i.boundingSphere),Rp.applyMatrix4(o),aa.copy(e.ray).recast(e.near),(!1!==Rp.containsPoint(aa.origin)||!(null===aa.intersectSphere(Rp,VO)||aa.origin.distanceToSquared(VO)>(e.far-e.near)**2))&&(BO.copy(o).invert(),aa.copy(e.ray).applyMatrix4(BO),(null===i.boundingBox||!1!==aa.intersectsBox(i.boundingBox))&&this._computeIntersections(e,t,aa)))}_computeIntersections(e,t,i){let r;const o=this.geometry,s=this.material,a=o.index,c=o.attributes.position,l=o.attributes.uv,u=o.attributes.uv1,d=o.attributes.normal,f=o.groups,h=o.drawRange;if(null!==a)if(Array.isArray(s))for(let p=0,_=f.length;p<_;p++){const m=f[p],g=s[m.materialIndex];for(let x=Math.max(m.start,h.start),C=Math.min(a.count,Math.min(m.start+m.count,h.start+h.count));x<C;x+=3)r=Vp(this,g,e,i,l,u,d,a.getX(x),a.getX(x+1),a.getX(x+2)),r&&(r.faceIndex=Math.floor(x/3),r.face.materialIndex=m.materialIndex,t.push(r))}else for(let m=Math.max(0,h.start),g=Math.min(a.count,h.start+h.count);m<g;m+=3)r=Vp(this,s,e,i,l,u,d,a.getX(m),a.getX(m+1),a.getX(m+2)),r&&(r.faceIndex=Math.floor(m/3),t.push(r));else if(void 0!==c)if(Array.isArray(s))for(let p=0,_=f.length;p<_;p++){const m=f[p],g=s[m.materialIndex];for(let x=Math.max(m.start,h.start),C=Math.min(c.count,Math.min(m.start+m.count,h.start+h.count));x<C;x+=3)r=Vp(this,g,e,i,l,u,d,x,x+1,x+2),r&&(r.faceIndex=Math.floor(x/3),r.face.materialIndex=m.materialIndex,t.push(r))}else for(let m=Math.max(0,h.start),g=Math.min(c.count,h.start+h.count);m<g;m+=3)r=Vp(this,s,e,i,l,u,d,m,m+1,m+2),r&&(r.faceIndex=Math.floor(m/3),t.push(r))}}function Vp(n,e,t,i,r,o,s,a,c,l){n.getVertexPosition(a,sl),n.getVertexPosition(c,al),n.getVertexPosition(l,cl);const u=function GW(n,e,t,i,r,o,s,a){let c;if(c=1===e.side?i.intersectTriangle(s,o,r,!0,a):i.intersectTriangle(r,o,s,0===e.side,a),null===c)return null;Bp.copy(a),Bp.applyMatrix4(n.matrixWorld);const l=t.ray.origin.distanceTo(Bp);return l<t.near||l>t.far?null:{distance:l,point:Bp.clone(),object:n}}(n,e,t,i,sl,al,cl,Up);if(u){r&&(Lp.fromBufferAttribute(r,a),kp.fromBufferAttribute(r,c),Fp.fromBufferAttribute(r,l),u.uv=Yi.getInterpolation(Up,sl,al,cl,Lp,kp,Fp,new oe)),o&&(Lp.fromBufferAttribute(o,a),kp.fromBufferAttribute(o,c),Fp.fromBufferAttribute(o,l),u.uv1=Yi.getInterpolation(Up,sl,al,cl,Lp,kp,Fp,new oe),u.uv2=u.uv1),s&&(zO.fromBufferAttribute(s,a),HO.fromBufferAttribute(s,c),GO.fromBufferAttribute(s,l),u.normal=Yi.getInterpolation(Up,sl,al,cl,zO,HO,GO,new D),u.normal.dot(i.direction)>0&&u.normal.multiplyScalar(-1));const d={a,b:c,c:l,normal:new D,materialIndex:0};Yi.getNormal(sl,al,cl,d.normal),u.face=d}return u}class Uo extends vt{constructor(e=1,t=1,i=1,r=1,o=1,s=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:i,widthSegments:r,heightSegments:o,depthSegments:s};const a=this;r=Math.floor(r),o=Math.floor(o),s=Math.floor(s);const c=[],l=[],u=[],d=[];let f=0,h=0;function p(_,m,g,v,y,x,C,S,T,R,w){const A=x/T,z=C/R,Y=x/2,ne=C/2,k=S/2,H=T+1,X=R+1;let K=0,de=0;const ie=new D;for(let le=0;le<X;le++){const B=le*z-ne;for(let J=0;J<H;J++)ie[_]=(J*A-Y)*v,ie[m]=B*y,ie[g]=k,l.push(ie.x,ie.y,ie.z),ie[_]=0,ie[m]=0,ie[g]=S>0?1:-1,u.push(ie.x,ie.y,ie.z),d.push(J/T),d.push(1-le/R),K+=1}for(let le=0;le<R;le++)for(let B=0;B<T;B++){const xe=f+B+H*(le+1),we=f+(B+1)+H*(le+1),Ee=f+(B+1)+H*le;c.push(f+B+H*le,xe,Ee),c.push(xe,we,Ee),de+=6}a.addGroup(h,de,w),h+=de,f+=K}p("z","y","x",-1,-1,i,t,e,s,o,0),p("z","y","x",1,-1,i,t,-e,s,o,1),p("x","z","y",1,1,e,i,t,r,s,2),p("x","z","y",1,-1,e,i,-t,r,s,3),p("x","y","z",1,-1,e,t,i,r,o,4),p("x","y","z",-1,-1,e,t,-i,r,o,5),this.setIndex(c),this.setAttribute("position",new De(l,3)),this.setAttribute("normal",new De(u,3)),this.setAttribute("uv",new De(d,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Uo(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function ll(n){const e={};for(const t in n){e[t]={};for(const i in n[t]){const r=n[t][i];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?r.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][i]=null):e[t][i]=r.clone():e[t][i]=Array.isArray(r)?r.slice():r}}return e}function vi(n){const e={};for(let t=0;t<n.length;t++){const i=ll(n[t]);for(const r in i)e[r]=i[r]}return e}function WO(n){return null===n.getRenderTarget()?n.outputColorSpace:Bt.workingColorSpace}const jW={clone:ll,merge:vi};class Bo extends On{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==e&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=ll(e.uniforms),this.uniformsGroups=function WW(n){const e=[];for(let t=0;t<n.length;t++)e.push(n[t].clone());return e}(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const r in this.uniforms){const s=this.uniforms[r].value;t.uniforms[r]=s&&s.isTexture?{type:"t",value:s.toJSON(e).uuid}:s&&s.isColor?{type:"c",value:s.getHex()}:s&&s.isVector2?{type:"v2",value:s.toArray()}:s&&s.isVector3?{type:"v3",value:s.toArray()}:s&&s.isVector4?{type:"v4",value:s.toArray()}:s&&s.isMatrix3?{type:"m3",value:s.toArray()}:s&&s.isMatrix4?{type:"m4",value:s.toArray()}:{value:s}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const i={};for(const r in this.extensions)!0===this.extensions[r]&&(i[r]=!0);return Object.keys(i).length>0&&(t.extensions=i),t}}class Oy extends rn{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new nt,this.projectionMatrix=new nt,this.projectionMatrixInverse=new nt,this.coordinateSystem=Do}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return(new this.constructor).copy(this)}}class Un extends Oy{constructor(e=50,t=1,i=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=i,this.far=r,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=2*qc*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(.5*ra*this.fov);return.5*this.getFilmHeight()/e}getEffectiveFOV(){return 2*qc*Math.atan(Math.tan(.5*ra*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,t,i,r,o,s){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=o,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(.5*ra*this.fov)/this.zoom,i=2*t,r=this.aspect*i,o=-.5*r;const s=this.view;if(null!==this.view&&this.view.enabled){const c=s.fullWidth,l=s.fullHeight;o+=s.offsetX*r/c,t-=s.offsetY*i/l,r*=s.width/c,i*=s.height/l}const a=this.filmOffset;0!==a&&(o+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(o,o+r,t,t-i,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}class XW extends rn{constructor(e,t,i){super(),this.type="CubeCamera",this.renderTarget=i,this.coordinateSystem=null,this.activeMipmapLevel=0;const r=new Un(-90,1,e,t);r.layers=this.layers,this.add(r);const o=new Un(-90,1,e,t);o.layers=this.layers,this.add(o);const s=new Un(-90,1,e,t);s.layers=this.layers,this.add(s);const a=new Un(-90,1,e,t);a.layers=this.layers,this.add(a);const c=new Un(-90,1,e,t);c.layers=this.layers,this.add(c);const l=new Un(-90,1,e,t);l.layers=this.layers,this.add(l)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[i,r,o,s,a,c]=t;for(const l of t)this.remove(l);if(e===Do)i.up.set(0,1,0),i.lookAt(1,0,0),r.up.set(0,1,0),r.lookAt(-1,0,0),o.up.set(0,0,-1),o.lookAt(0,1,0),s.up.set(0,0,1),s.lookAt(0,-1,0),a.up.set(0,1,0),a.lookAt(0,0,1),c.up.set(0,1,0),c.lookAt(0,0,-1);else{if(2001!==e)throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);i.up.set(0,-1,0),i.lookAt(-1,0,0),r.up.set(0,-1,0),r.lookAt(1,0,0),o.up.set(0,0,1),o.lookAt(0,1,0),s.up.set(0,0,-1),s.lookAt(0,-1,0),a.up.set(0,-1,0),a.lookAt(0,0,1),c.up.set(0,-1,0),c.lookAt(0,0,-1)}for(const l of t)this.add(l),l.updateMatrixWorld()}update(e,t){null===this.parent&&this.updateMatrixWorld();const{renderTarget:i,activeMipmapLevel:r}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[o,s,a,c,l,u]=this.children,d=e.getRenderTarget(),f=e.getActiveCubeFace(),h=e.getActiveMipmapLevel(),p=e.xr.enabled;e.xr.enabled=!1;const _=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,e.setRenderTarget(i,0,r),e.render(t,o),e.setRenderTarget(i,1,r),e.render(t,s),e.setRenderTarget(i,2,r),e.render(t,a),e.setRenderTarget(i,3,r),e.render(t,c),e.setRenderTarget(i,4,r),e.render(t,l),i.texture.generateMipmaps=_,e.setRenderTarget(i,5,r),e.render(t,u),e.setRenderTarget(d,f,h),e.xr.enabled=p,i.texture.needsPMREMUpdate=!0}}class zp extends mi{constructor(e,t,i,r,o,s,a,c,l,u){super(e=void 0!==e?e:[],t=void 0!==t?t:us,i,r,o,s,a,c,l,u),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class YW extends no{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const i={width:e,height:e,depth:1},r=[i,i,i,i,i,i];void 0!==t.encoding&&(pd("THREE.WebGLCubeRenderTarget: option.encoding has been replaced by option.colorSpace."),t.colorSpace=t.encoding===na?nn:""),this.texture=new zp(r,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=void 0!==t.generateMipmaps&&t.generateMipmaps,this.texture.minFilter=void 0!==t.minFilter?t.minFilter:gn}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const i_uniforms={tEquirect:{value:null}},i_vertexShader="\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",i_fragmentShader="\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t",r=new Uo(5,5,5),o=new Bo({name:"CubemapFromEquirect",uniforms:ll(i_uniforms),vertexShader:i_vertexShader,fragmentShader:i_fragmentShader,side:1,blending:0});o.uniforms.tEquirect.value=t;const s=new Dt(r,o),a=t.minFilter;return t.minFilter===Ao&&(t.minFilter=gn),new XW(1,10,this).update(e,s),t.minFilter=a,s.geometry.dispose(),s.material.dispose(),this}clear(e,t,i,r){const o=e.getRenderTarget();for(let s=0;s<6;s++)e.setRenderTarget(this,s),e.clear(t,i,r);e.setRenderTarget(o)}}const Dy=new D,ZW=new D,KW=new bt;class ca{constructor(e=new D(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,i,r){return this.normal.set(e,t,i),this.constant=r,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,i){const r=Dy.subVectors(i,t).cross(ZW.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const i=e.delta(Dy),r=this.normal.dot(i);if(0===r)return 0===this.distanceToPoint(e.start)?t.copy(e.start):null;const o=-(e.start.dot(this.normal)+this.constant)/r;return o<0||o>1?null:t.copy(e.start).addScaledVector(i,o)}intersectsLine(e){const t=this.distanceToPoint(e.start),i=this.distanceToPoint(e.end);return t<0&&i>0||i<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const i=t||KW.getNormalMatrix(e),r=this.coplanarPoint(Dy).applyMatrix4(e),o=this.normal.applyMatrix3(i).normalize();return this.constant=-r.dot(o),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return(new this.constructor).copy(this)}}const la=new Ir,Hp=new D;class Iy{constructor(e=new ca,t=new ca,i=new ca,r=new ca,o=new ca,s=new ca){this.planes=[e,t,i,r,o,s]}set(e,t,i,r,o,s){const a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(i),a[3].copy(r),a[4].copy(o),a[5].copy(s),this}copy(e){const t=this.planes;for(let i=0;i<6;i++)t[i].copy(e.planes[i]);return this}setFromProjectionMatrix(e,t=Do){const i=this.planes,r=e.elements,o=r[0],s=r[1],a=r[2],c=r[3],l=r[4],u=r[5],d=r[6],f=r[7],h=r[8],p=r[9],_=r[10],m=r[11],g=r[12],v=r[13],y=r[14],x=r[15];if(i[0].setComponents(c-o,f-l,m-h,x-g).normalize(),i[1].setComponents(c+o,f+l,m+h,x+g).normalize(),i[2].setComponents(c+s,f+u,m+p,x+v).normalize(),i[3].setComponents(c-s,f-u,m-p,x-v).normalize(),i[4].setComponents(c-a,f-d,m-_,x-y).normalize(),t===Do)i[5].setComponents(c+a,f+d,m+_,x+y).normalize();else{if(2001!==t)throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);i[5].setComponents(a,d,_,y).normalize()}return this}intersectsObject(e){if(void 0!==e.boundingSphere)null===e.boundingSphere&&e.computeBoundingSphere(),la.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;null===t.boundingSphere&&t.computeBoundingSphere(),la.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(la)}intersectsSprite(e){return la.center.set(0,0,0),la.radius=.7071067811865476,la.applyMatrix4(e.matrixWorld),this.intersectsSphere(la)}intersectsSphere(e){const t=this.planes,i=e.center,r=-e.radius;for(let o=0;o<6;o++)if(t[o].distanceToPoint(i)<r)return!1;return!0}intersectsBox(e){const t=this.planes;for(let i=0;i<6;i++){const r=t[i];if(Hp.x=r.normal.x>0?e.max.x:e.min.x,Hp.y=r.normal.y>0?e.max.y:e.min.y,Hp.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(Hp)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let i=0;i<6;i++)if(t[i].distanceToPoint(e)<0)return!1;return!0}clone(){return(new this.constructor).copy(this)}}function jO(){let n=null,e=!1,t=null,i=null;function r(o,s){t(o,s),i=n.requestAnimationFrame(r)}return{start:function(){!0!==e&&null!==t&&(i=n.requestAnimationFrame(r),e=!0)},stop:function(){n.cancelAnimationFrame(i),e=!1},setAnimationLoop:function(o){t=o},setContext:function(o){n=o}}}function JW(n,e){const t=e.isWebGL2,i=new WeakMap;return{get:function s(l){return l.isInterleavedBufferAttribute&&(l=l.data),i.get(l)},remove:function a(l){l.isInterleavedBufferAttribute&&(l=l.data);const u=i.get(l);u&&(n.deleteBuffer(u.buffer),i.delete(l))},update:function c(l,u){if(l.isGLBufferAttribute){const f=i.get(l);return void((!f||f.version<l.version)&&i.set(l,{buffer:l.buffer,type:l.type,bytesPerElement:l.elementSize,version:l.version}))}l.isInterleavedBufferAttribute&&(l=l.data);const d=i.get(l);void 0===d?i.set(l,function r(l,u){const d=l.array,f=l.usage,h=n.createBuffer();let p;if(n.bindBuffer(u,h),n.bufferData(u,d,f),l.onUploadCallback(),d instanceof Float32Array)p=n.FLOAT;else if(d instanceof Uint16Array)if(l.isFloat16BufferAttribute){if(!t)throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");p=n.HALF_FLOAT}else p=n.UNSIGNED_SHORT;else if(d instanceof Int16Array)p=n.SHORT;else if(d instanceof Uint32Array)p=n.UNSIGNED_INT;else if(d instanceof Int32Array)p=n.INT;else if(d instanceof Int8Array)p=n.BYTE;else if(d instanceof Uint8Array)p=n.UNSIGNED_BYTE;else{if(!(d instanceof Uint8ClampedArray))throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+d);p=n.UNSIGNED_BYTE}return{buffer:h,type:p,bytesPerElement:d.BYTES_PER_ELEMENT,version:l.version}}(l,u)):d.version<l.version&&(function o(l,u,d){const f=u.array,h=u.updateRange;n.bindBuffer(d,l),-1===h.count?n.bufferSubData(d,0,f):(t?n.bufferSubData(d,h.offset*f.BYTES_PER_ELEMENT,f,h.offset,h.count):n.bufferSubData(d,h.offset*f.BYTES_PER_ELEMENT,f.subarray(h.offset,h.offset+h.count)),h.count=-1),u.onUploadCallback()}(d.buffer,l,u),d.version=l.version)}}}class xs extends vt{constructor(e=1,t=1,i=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:i,heightSegments:r};const o=e/2,s=t/2,a=Math.floor(i),c=Math.floor(r),l=a+1,u=c+1,d=e/a,f=t/c,h=[],p=[],_=[],m=[];for(let g=0;g<u;g++){const v=g*f-s;for(let y=0;y<l;y++)p.push(y*d-o,-v,0),_.push(0,0,1),m.push(y/a),m.push(1-g/c)}for(let g=0;g<c;g++)for(let v=0;v<a;v++){const x=v+l*(g+1),C=v+1+l*(g+1),S=v+1+l*g;h.push(v+l*g,x,S),h.push(x,C,S)}this.setIndex(h),this.setAttribute("position",new De(p,3)),this.setAttribute("normal",new De(_,3)),this.setAttribute("uv",new De(m,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new xs(e.width,e.height,e.widthSegments,e.heightSegments)}}const xt={alphahash_fragment:"#ifdef USE_ALPHAHASH\n\tif ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;\n#endif",alphahash_pars_fragment:"#ifdef USE_ALPHAHASH\n\tconst float ALPHA_HASH_SCALE = 0.05;\n\tfloat hash2D( vec2 value ) {\n\t\treturn fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );\n\t}\n\tfloat hash3D( vec3 value ) {\n\t\treturn hash2D( vec2( hash2D( value.xy ), value.z ) );\n\t}\n\tfloat getAlphaHashThreshold( vec3 position ) {\n\t\tfloat maxDeriv = max(\n\t\t\tlength( dFdx( position.xyz ) ),\n\t\t\tlength( dFdy( position.xyz ) )\n\t\t);\n\t\tfloat pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );\n\t\tvec2 pixScales = vec2(\n\t\t\texp2( floor( log2( pixScale ) ) ),\n\t\t\texp2( ceil( log2( pixScale ) ) )\n\t\t);\n\t\tvec2 alpha = vec2(\n\t\t\thash3D( floor( pixScales.x * position.xyz ) ),\n\t\t\thash3D( floor( pixScales.y * position.xyz ) )\n\t\t);\n\t\tfloat lerpFactor = fract( log2( pixScale ) );\n\t\tfloat x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;\n\t\tfloat a = min( lerpFactor, 1.0 - lerpFactor );\n\t\tvec3 cases = vec3(\n\t\t\tx * x / ( 2.0 * a * ( 1.0 - a ) ),\n\t\t\t( x - 0.5 * a ) / ( 1.0 - a ),\n\t\t\t1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )\n\t\t);\n\t\tfloat threshold = ( x < ( 1.0 - a ) )\n\t\t\t? ( ( x < a ) ? cases.x : cases.y )\n\t\t\t: cases.z;\n\t\treturn clamp( threshold , 1.0e-6, 1.0 );\n\t}\n#endif",alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n\tif ( diffuseColor.a < alphaTest ) discard;\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_CLEARCOAT ) \n\t\tclearcoatSpecularIndirect *= ambientOcclusion;\n\t#endif\n\t#if defined( USE_SHEEN ) \n\t\tsheenSpecularIndirect *= ambientOcclusion;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometryNormal, geometryViewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );\n#ifdef USE_ALPHAHASH\n\tvPosition = vec3( position );\n#endif",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"float G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n} // validated",iridescence_fragment:"#ifdef USE_IRIDESCENCE\n\tconst mat3 XYZ_TO_REC709 = mat3(\n\t\t 3.2404542, -0.9692660,  0.0556434,\n\t\t-1.5371385,  1.8760108, -0.2040259,\n\t\t-0.4985314,  0.0415560,  1.0572252\n\t);\n\tvec3 Fresnel0ToIor( vec3 fresnel0 ) {\n\t\tvec3 sqrtF0 = sqrt( fresnel0 );\n\t\treturn ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );\n\t}\n\tvec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );\n\t}\n\tfloat IorToFresnel0( float transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));\n\t}\n\tvec3 evalSensitivity( float OPD, vec3 shift ) {\n\t\tfloat phase = 2.0 * PI * OPD * 1.0e-9;\n\t\tvec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );\n\t\tvec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );\n\t\tvec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );\n\t\tvec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );\n\t\txyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );\n\t\txyz /= 1.0685e-7;\n\t\tvec3 rgb = XYZ_TO_REC709 * xyz;\n\t\treturn rgb;\n\t}\n\tvec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {\n\t\tvec3 I;\n\t\tfloat iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );\n\t\tfloat sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );\n\t\tfloat cosTheta2Sq = 1.0 - sinTheta2Sq;\n\t\tif ( cosTheta2Sq < 0.0 ) {\n\t\t\treturn vec3( 1.0 );\n\t\t}\n\t\tfloat cosTheta2 = sqrt( cosTheta2Sq );\n\t\tfloat R0 = IorToFresnel0( iridescenceIOR, outsideIOR );\n\t\tfloat R12 = F_Schlick( R0, 1.0, cosTheta1 );\n\t\tfloat T121 = 1.0 - R12;\n\t\tfloat phi12 = 0.0;\n\t\tif ( iridescenceIOR < outsideIOR ) phi12 = PI;\n\t\tfloat phi21 = PI - phi12;\n\t\tvec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );\t\tvec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );\n\t\tvec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );\n\t\tvec3 phi23 = vec3( 0.0 );\n\t\tif ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;\n\t\tif ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;\n\t\tif ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;\n\t\tfloat OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;\n\t\tvec3 phi = vec3( phi21 ) + phi23;\n\t\tvec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );\n\t\tvec3 r123 = sqrt( R123 );\n\t\tvec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );\n\t\tvec3 C0 = R12 + Rs;\n\t\tI = C0;\n\t\tvec3 Cm = Rs - T121;\n\t\tfor ( int m = 1; m <= 2; ++ m ) {\n\t\t\tCm *= r123;\n\t\t\tvec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );\n\t\t\tI += Cm * Sm;\n\t\t}\n\t\treturn max( I, vec3( 0.0 ) );\n\t}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vBumpMapUv );\n\t\tvec2 dSTdy = dFdy( vBumpMapUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );\n\t\tvec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nvec3 pow2( const in vec3 x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\n#ifdef USE_ALPHAHASH\n\tvarying vec3 vPosition;\n#endif\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat luminance( const in vec3 rgb ) {\n\tconst vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );\n\treturn dot( weights, rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}\nvec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat F_Schlick( const in float f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n} // validated",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\thighp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tuv.x += filterInt * 3.0 * cubeUV_minTileSize;\n\t\tuv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\n\t\tuv.x *= CUBEUV_TEXEL_WIDTH;\n\t\tuv.y *= CUBEUV_TEXEL_HEIGHT;\n\t\t#ifdef texture2DGradEXT\n\t\t\treturn texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;\n\t\t#else\n\t\t\treturn texture2D( envMap, uv ).rgb;\n\t\t#endif\n\t}\n\t#define cubeUV_r0 1.0\n\t#define cubeUV_v0 0.339\n\t#define cubeUV_m0 - 2.0\n\t#define cubeUV_r1 0.8\n\t#define cubeUV_v1 0.276\n\t#define cubeUV_m1 - 1.0\n\t#define cubeUV_r4 0.4\n\t#define cubeUV_v4 0.046\n\t#define cubeUV_m4 2.0\n\t#define cubeUV_r5 0.305\n\t#define cubeUV_v5 0.016\n\t#define cubeUV_m5 3.0\n\t#define cubeUV_r6 0.21\n\t#define cubeUV_v6 0.0038\n\t#define cubeUV_m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= cubeUV_r1 ) {\n\t\t\tmip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;\n\t\t} else if ( roughness >= cubeUV_r4 ) {\n\t\t\tmip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;\n\t\t} else if ( roughness >= cubeUV_r5 ) {\n\t\t\tmip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;\n\t\t} else if ( roughness >= cubeUV_r6 ) {\n\t\t\tmip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",colorspace_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",colorspace_pars_fragment:"\nconst mat3 LINEAR_SRGB_TO_LINEAR_DISPLAY_P3 = mat3(\n\tvec3( 0.8224621, 0.177538, 0.0 ),\n\tvec3( 0.0331941, 0.9668058, 0.0 ),\n\tvec3( 0.0170827, 0.0723974, 0.9105199 )\n);\nconst mat3 LINEAR_DISPLAY_P3_TO_LINEAR_SRGB = mat3(\n\tvec3( 1.2249401, - 0.2249404, 0.0 ),\n\tvec3( - 0.0420569, 1.0420571, 0.0 ),\n\tvec3( - 0.0196376, - 0.0786361, 1.0982735 )\n);\nvec4 LinearSRGBToLinearDisplayP3( in vec4 value ) {\n\treturn vec4( value.rgb * LINEAR_SRGB_TO_LINEAR_DISPLAY_P3, value.a );\n}\nvec4 LinearDisplayP3ToLinearSRGB( in vec4 value ) {\n\treturn vec4( value.rgb * LINEAR_DISPLAY_P3_TO_LINEAR_SRGB, value.a );\n}\nvec4 LinearTransferOETF( in vec4 value ) {\n\treturn value;\n}\nvec4 sRGBTransferOETF( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn sRGBTransferOETF( value );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#ifdef USE_ENVMAP\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\tvec3 reflectVec = reflect( - viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\t#ifdef USE_ANISOTROPY\n\t\tvec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {\n\t\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\t\tvec3 bentNormal = cross( bitangent, viewDir );\n\t\t\t\tbentNormal = normalize( cross( bentNormal, bitangent ) );\n\t\t\t\tbentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );\n\t\t\t\treturn getIBLRadiance( viewDir, bentNormal, roughness );\n\t\t\t#else\n\t\t\t\treturn vec3( 0.0 );\n\t\t\t#endif\n\t\t}\n\t#endif\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn vec3( texture2D( gradientMap, coord ).r );\n\t#else\n\t\tvec2 fw = fwidth( coord ) * 0.5;\n\t\treturn mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );\n\t#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\treflectedLight.indirectDiffuse += lightMapIrradiance;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_fragment:"LambertMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularStrength = specularStrength;",lights_lambert_pars_fragment:"varying vec3 vViewPosition;\nstruct LambertMaterial {\n\tvec3 diffuseColor;\n\tfloat specularStrength;\n};\nvoid RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Lambert\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Lambert",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\n#if defined( USE_LIGHT_PROBES )\n\tuniform vec3 lightProbe[ 9 ];\n#endif\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\t#if defined ( LEGACY_LIGHTS )\n\t\tif ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\t\treturn pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t\t}\n\t\treturn 1.0;\n\t#else\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tif ( cutoffDistance > 0.0 ) {\n\t\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t}\n\t\treturn distanceFalloff;\n\t#endif\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometryPosition;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometryPosition;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\tmaterial.ior = ior;\n\t#ifdef USE_SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULAR_COLORMAP\n\t\t\tspecularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;\n\t\t#endif\n\t\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_IRIDESCENCE\n\tmaterial.iridescence = iridescence;\n\tmaterial.iridescenceIOR = iridescenceIOR;\n\t#ifdef USE_IRIDESCENCEMAP\n\t\tmaterial.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;\n\t#endif\n\t#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\t\tmaterial.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;\n\t#else\n\t\tmaterial.iridescenceThickness = iridescenceThicknessMaximum;\n\t#endif\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tmaterial.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;\n\t#endif\n#endif\n#ifdef USE_ANISOTROPY\n\t#ifdef USE_ANISOTROPYMAP\n\t\tmat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );\n\t\tvec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;\n\t\tvec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;\n\t#else\n\t\tvec2 anisotropyV = anisotropyVector;\n\t#endif\n\tmaterial.anisotropy = length( anisotropyV );\n\tanisotropyV /= material.anisotropy;\n\tmaterial.anisotropy = saturate( material.anisotropy );\n\tmaterial.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );\n\tmaterial.anisotropyT = tbn[ 0 ] * anisotropyV.x - tbn[ 1 ] * anisotropyV.y;\n\tmaterial.anisotropyB = tbn[ 1 ] * anisotropyV.x + tbn[ 0 ] * anisotropyV.y;\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\tfloat iridescence;\n\t\tfloat iridescenceIOR;\n\t\tfloat iridescenceThickness;\n\t\tvec3 iridescenceFresnel;\n\t\tvec3 iridescenceF0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n\t#ifdef IOR\n\t\tfloat ior;\n\t#endif\n\t#ifdef USE_TRANSMISSION\n\t\tfloat transmission;\n\t\tfloat transmissionAlpha;\n\t\tfloat thickness;\n\t\tfloat attenuationDistance;\n\t\tvec3 attenuationColor;\n\t#endif\n\t#ifdef USE_ANISOTROPY\n\t\tfloat anisotropy;\n\t\tfloat alphaT;\n\t\tvec3 anisotropyT;\n\t\tvec3 anisotropyB;\n\t#endif\n};\nvec3 clearcoatSpecularDirect = vec3( 0.0 );\nvec3 clearcoatSpecularIndirect = vec3( 0.0 );\nvec3 sheenSpecularDirect = vec3( 0.0 );\nvec3 sheenSpecularIndirect = vec3(0.0 );\nvec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {\n    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );\n    float x2 = x * x;\n    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );\n    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\n#ifdef USE_ANISOTROPY\n\tfloat V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {\n\t\tfloat gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );\n\t\tfloat gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );\n\t\tfloat v = 0.5 / ( gv + gl );\n\t\treturn saturate(v);\n\t}\n\tfloat D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {\n\t\tfloat a2 = alphaT * alphaB;\n\t\thighp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );\n\t\thighp float v2 = dot( v, v );\n\t\tfloat w2 = a2 / v2;\n\t\treturn RECIPROCAL_PI * a2 * pow2 ( w2 );\n\t}\n#endif\n#ifdef USE_CLEARCOAT\n\tvec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {\n\t\tvec3 f0 = material.clearcoatF0;\n\t\tfloat f90 = material.clearcoatF90;\n\t\tfloat roughness = material.clearcoatRoughness;\n\t\tfloat alpha = pow2( roughness );\n\t\tvec3 halfDir = normalize( lightDir + viewDir );\n\t\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\t\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\t\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\t\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\t\tvec3 F = F_Schlick( f0, f90, dotVH );\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t\treturn F * ( V * D );\n\t}\n#endif\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {\n\tvec3 f0 = material.specularColor;\n\tfloat f90 = material.specularF90;\n\tfloat roughness = material.roughness;\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\t#ifdef USE_IRIDESCENCE\n\t\tF = mix( F, material.iridescenceFresnel, material.iridescence );\n\t#endif\n\t#ifdef USE_ANISOTROPY\n\t\tfloat dotTL = dot( material.anisotropyT, lightDir );\n\t\tfloat dotTV = dot( material.anisotropyT, viewDir );\n\t\tfloat dotTH = dot( material.anisotropyT, halfDir );\n\t\tfloat dotBL = dot( material.anisotropyB, lightDir );\n\t\tfloat dotBV = dot( material.anisotropyB, viewDir );\n\t\tfloat dotBH = dot( material.anisotropyB, halfDir );\n\t\tfloat V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );\n\t\tfloat D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );\n\t#else\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t#endif\n\treturn F * ( V * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat r2 = roughness * roughness;\n\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n\treturn saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\n#ifdef USE_IRIDESCENCE\nvoid computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#else\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#endif\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\t#ifdef USE_IRIDESCENCE\n\t\tvec3 Fr = mix( specularColor, iridescenceF0, iridescence );\n\t#else\n\t\tvec3 Fr = specularColor;\n\t#endif\n\tvec3 FssEss = Fr * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometryNormal;\n\t\tvec3 viewDir = geometryViewDir;\n\t\tvec3 position = geometryPosition;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\t#ifdef USE_IRIDESCENCE\n\t\tcomputeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );\n\t#else\n\t\tcomputeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\t#endif\n\tvec3 totalScattering = singleScattering + multiScattering;\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nvec3 geometryPosition = - vViewPosition;\nvec3 geometryNormal = normal;\nvec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\nvec3 geometryClearcoatNormal = vec3( 0.0 );\n#ifdef USE_CLEARCOAT\n\tgeometryClearcoatNormal = clearcoatNormal;\n#endif\n#ifdef USE_IRIDESCENCE\n\tfloat dotNVi = saturate( dot( normal, geometryViewDir ) );\n\tif ( material.iridescenceThickness == 0.0 ) {\n\t\tmaterial.iridescence = 0.0;\n\t} else {\n\t\tmaterial.iridescence = saturate( material.iridescence );\n\t}\n\tif ( material.iridescence > 0.0 ) {\n\t\tmaterial.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );\n\t\tmaterial.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );\n\t}\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometryPosition, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\tvec4 spotColor;\n\tvec3 spotLightCoord;\n\tbool inSpotLightMap;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometryPosition, directLight );\n\t\t#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX\n\t\t#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS\n\t\t#else\n\t\t#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#endif\n\t\t#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )\n\t\t\tspotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;\n\t\t\tinSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );\n\t\t\tspotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );\n\t\t\tdirectLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;\n\t\t#endif\n\t\t#undef SPOT_LIGHT_MAP_INDEX\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\t#if defined( USE_LIGHT_PROBES )\n\t\tirradiance += getLightProbeIrradiance( lightProbe, geometryNormal );\n\t#endif\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometryNormal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\t#ifdef USE_ANISOTROPY\n\t\tradiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );\n\t#else\n\t\tradiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 sampledDiffuseColor = texture2D( map, vMapUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tsampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );\n\t\n\t#endif\n\tdiffuseColor *= sampledDiffuseColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t#if defined( USE_POINTS_UV )\n\t\tvec2 uv = vUv;\n\t#else\n\t\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_POINTS_UV )\n\tvarying vec2 vUv;\n#else\n\t#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t\tuniform mat3 uvTransform;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphcolor_vertex:"#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )\n\tvColor *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t#if defined( USE_COLOR_ALPHA )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\n\t\t#elif defined( USE_COLOR )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];\n\t\t#endif\n\t}\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\t\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\t\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\t\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n\t#endif\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t\tuniform sampler2DArray morphTargetsTexture;\n\t\tuniform ivec2 morphTargetsTextureSize;\n\t\tvec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\n\t\t\tint texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;\n\t\t\tint y = texelIndex / morphTargetsTextureSize.x;\n\t\t\tint x = texelIndex - y * morphTargetsTextureSize.x;\n\t\t\tivec3 morphUV = ivec3( x, y, morphTargetIndex );\n\t\t\treturn texelFetch( morphTargetsTexture, morphUV, 0 );\n\t\t}\n\t#else\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\tuniform float morphTargetInfluences[ 8 ];\n\t\t#else\n\t\t\tuniform float morphTargetInfluences[ 4 ];\n\t\t#endif\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\t\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\t\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\t\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t\t#endif\n\t#endif\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = dFdx( vViewPosition );\n\tvec3 fdy = dFdy( vViewPosition );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal *= faceDirection;\n\t#endif\n#endif\n#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn = getTangentFrame( - vViewPosition, normal,\n\t\t#if defined( USE_NORMALMAP )\n\t\t\tvNormalMapUv\n\t\t#elif defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tvClearcoatNormalMapUv\n\t\t#else\n\t\t\tvUv\n\t\t#endif\n\t\t);\n\t#endif\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\t\ttbn[0] *= faceDirection;\n\t\ttbn[1] *= faceDirection;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );\n\t#endif\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\t\ttbn2[0] *= faceDirection;\n\t\ttbn2[1] *= faceDirection;\n\t#endif\n#endif\nvec3 nonPerturbedNormal = normal;",normal_fragment_maps:"#ifdef USE_NORMALMAP_OBJECTSPACE\n\tnormal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( USE_NORMALMAP_TANGENTSPACE )\n\tvec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\tnormal = normalize( tbn * mapN );\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef USE_NORMALMAP_OBJECTSPACE\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )\n\tmat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\n\t\tvec2 st0 = dFdx( uv.st );\n\t\tvec2 st1 = dFdy( uv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );\n\t\treturn mat3( T * scale, B * scale, N );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = nonPerturbedNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\tclearcoatNormal = normalize( tbn2 * clearcoatMapN );\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif",iridescence_pars_fragment:"#ifdef USE_IRIDESCENCEMAP\n\tuniform sampler2D iridescenceMap;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform sampler2D iridescenceThicknessMap;\n#endif",opaque_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= material.transmissionAlpha;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec2 packDepthToRG( in highp float v ) {\n\treturn packDepthToRGBA( v ).yx;\n}\nfloat unpackRGToDepth( const in highp vec2 v ) {\n\treturn unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn depth * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * depth - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#if NUM_SPOT_LIGHT_COORDS > 0\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#if NUM_SPOT_LIGHT_MAPS > 0\n\tuniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;\n\t\tbool frustumTest = inFrustum && shadowCoord.z <= 1.0;\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#if NUM_SPOT_LIGHT_COORDS > 0\n\tuniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )\n\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\tvec4 shadowWorldPosition;\n#endif\n#if defined( USE_SHADOWMAP )\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if NUM_SPOT_LIGHT_COORDS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition;\n\t\t#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t\tshadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;\n\t\t#endif\n\t\tvSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\tuniform highp sampler2D boneTexture;\n\tuniform int boneTextureSize;\n\tmat4 getBoneMatrix( const in float i ) {\n\t\tfloat j = i * 4.0;\n\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\ty = dy * ( y + 0.5 );\n\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\treturn bone;\n\t}\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn saturate( toneMappingExposure * color );\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\tmaterial.transmission = transmission;\n\tmaterial.transmissionAlpha = 1.0;\n\tmaterial.thickness = thickness;\n\tmaterial.attenuationDistance = attenuationDistance;\n\tmaterial.attenuationColor = attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tmaterial.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tmaterial.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmitted = getIBLVolumeRefraction(\n\t\tn, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,\n\t\tmaterial.attenuationColor, material.attenuationDistance );\n\tmaterial.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );\n\ttotalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tfloat w0( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );\n\t}\n\tfloat w1( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );\n\t}\n\tfloat w2( float a ){\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );\n\t}\n\tfloat w3( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * a * a );\n\t}\n\tfloat g0( float a ) {\n\t\treturn w0( a ) + w1( a );\n\t}\n\tfloat g1( float a ) {\n\t\treturn w2( a ) + w3( a );\n\t}\n\tfloat h0( float a ) {\n\t\treturn - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );\n\t}\n\tfloat h1( float a ) {\n\t\treturn 1.0 + w3( a ) / ( w2( a ) + w3( a ) );\n\t}\n\tvec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {\n\t\tuv = uv * texelSize.zw + 0.5;\n\t\tvec2 iuv = floor( uv );\n\t\tvec2 fuv = fract( uv );\n\t\tfloat g0x = g0( fuv.x );\n\t\tfloat g1x = g1( fuv.x );\n\t\tfloat h0x = h0( fuv.x );\n\t\tfloat h1x = h1( fuv.x );\n\t\tfloat h0y = h0( fuv.y );\n\t\tfloat h1y = h1( fuv.y );\n\t\tvec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\treturn g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +\n\t\t\tg1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );\n\t}\n\tvec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {\n\t\tvec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );\n\t\tvec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );\n\t\tvec2 fLodSizeInv = 1.0 / fLodSize;\n\t\tvec2 cLodSizeInv = 1.0 / cLodSize;\n\t\tvec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );\n\t\tvec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );\n\t\treturn mix( fSample, cSample, fract( lod ) );\n\t}\n\tvec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( const in float roughness, const in float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n\t\tfloat lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\treturn textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );\n\t}\n\tvec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tif ( isinf( attenuationDistance ) ) {\n\t\t\treturn vec3( 1.0 );\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n\t\tconst in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n\t\tconst in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,\n\t\tconst in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\trefractionCoords += 1.0;\n\t\trefractionCoords /= 2.0;\n\t\tvec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\tvec3 transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\tvec3 attenuatedColor = transmittance * transmittedLight.rgb;\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\tfloat transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );\n\t}\n#endif",uv_pars_fragment:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_MAP\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tvarying vec2 vAnisotropyMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif",uv_pars_vertex:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_MAP\n\tuniform mat3 mapTransform;\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform mat3 alphaMapTransform;\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tuniform mat3 lightMapTransform;\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tuniform mat3 aoMapTransform;\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tuniform mat3 bumpMapTransform;\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tuniform mat3 normalMapTransform;\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tuniform mat3 displacementMapTransform;\n\tvarying vec2 vDisplacementMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tuniform mat3 emissiveMapTransform;\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tuniform mat3 metalnessMapTransform;\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tuniform mat3 roughnessMapTransform;\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tuniform mat3 anisotropyMapTransform;\n\tvarying vec2 vAnisotropyMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tuniform mat3 clearcoatMapTransform;\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform mat3 clearcoatNormalMapTransform;\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform mat3 clearcoatRoughnessMapTransform;\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tuniform mat3 sheenColorMapTransform;\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tuniform mat3 sheenRoughnessMapTransform;\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tuniform mat3 iridescenceMapTransform;\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform mat3 iridescenceThicknessMapTransform;\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tuniform mat3 specularMapTransform;\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tuniform mat3 specularColorMapTransform;\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tuniform mat3 specularIntensityMapTransform;\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif",uv_vertex:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvUv = vec3( uv, 1 ).xy;\n#endif\n#ifdef USE_MAP\n\tvMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ALPHAMAP\n\tvAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_LIGHTMAP\n\tvLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_AOMAP\n\tvAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_BUMPMAP\n\tvBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_NORMALMAP\n\tvNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tvDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_METALNESSMAP\n\tvMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tvAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULARMAP\n\tvSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tvTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_THICKNESSMAP\n\tvThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",background_frag:"uniform sampler2D t2D;\nuniform float backgroundIntensity;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\ttexColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",backgroundCube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",backgroundCube_frag:"#ifdef ENVMAP_TYPE_CUBE\n\tuniform samplerCube envMap;\n#elif defined( ENVMAP_TYPE_CUBE_UV )\n\tuniform sampler2D envMap;\n#endif\nuniform float flipEnvMap;\nuniform float backgroundBlurriness;\nuniform float backgroundIntensity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );\n\t#else\n\t\tvec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldDirection;\nvoid main() {\n\tvec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );\n\tgl_FragColor = texColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\treflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"#define LAMBERT\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_lambert_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_lambert_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t#else\n\t\tvec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n\t#ifdef OPAQUE\n\t\tgl_FragColor.a = 1.0;\n\t#endif\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define USE_SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef USE_SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULAR_COLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_IRIDESCENCE\n\tuniform float iridescence;\n\tuniform float iridescenceIOR;\n\tuniform float iridescenceThicknessMinimum;\n\tuniform float iridescenceThicknessMaximum;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\n#ifdef USE_ANISOTROPY\n\tuniform vec2 anisotropyVector;\n\t#ifdef USE_ANISOTROPYMAP\n\t\tuniform sampler2D anisotropyMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <iridescence_fragment>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <iridescence_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_SHEEN\n\t\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\t\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;\n\t#endif\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n#ifdef USE_POINTS_UV\n\tvarying vec2 vUv;\n\tuniform mat3 uvTransform;\n#endif\nvoid main() {\n\t#ifdef USE_POINTS_UV\n\t\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\t#endif\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <logdepthbuf_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\t#include <logdepthbuf_fragment>\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n}"},Ce={common:{diffuse:{value:new ye(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new bt},alphaMap:{value:null},alphaMapTransform:{value:new bt},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new bt}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new bt}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new bt}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new bt},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new bt},normalScale:{value:new oe(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new bt},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new bt}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new bt}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new bt}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new ye(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new ye(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new bt},alphaTest:{value:0},uvTransform:{value:new bt}},sprite:{diffuse:{value:new ye(16777215)},opacity:{value:1},center:{value:new oe(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new bt},alphaMap:{value:null},alphaMapTransform:{value:new bt},alphaTest:{value:0}}},io={basic:{uniforms:vi([Ce.common,Ce.specularmap,Ce.envmap,Ce.aomap,Ce.lightmap,Ce.fog]),vertexShader:xt.meshbasic_vert,fragmentShader:xt.meshbasic_frag},lambert:{uniforms:vi([Ce.common,Ce.specularmap,Ce.envmap,Ce.aomap,Ce.lightmap,Ce.emissivemap,Ce.bumpmap,Ce.normalmap,Ce.displacementmap,Ce.fog,Ce.lights,{emissive:{value:new ye(0)}}]),vertexShader:xt.meshlambert_vert,fragmentShader:xt.meshlambert_frag},phong:{uniforms:vi([Ce.common,Ce.specularmap,Ce.envmap,Ce.aomap,Ce.lightmap,Ce.emissivemap,Ce.bumpmap,Ce.normalmap,Ce.displacementmap,Ce.fog,Ce.lights,{emissive:{value:new ye(0)},specular:{value:new ye(1118481)},shininess:{value:30}}]),vertexShader:xt.meshphong_vert,fragmentShader:xt.meshphong_frag},standard:{uniforms:vi([Ce.common,Ce.envmap,Ce.aomap,Ce.lightmap,Ce.emissivemap,Ce.bumpmap,Ce.normalmap,Ce.displacementmap,Ce.roughnessmap,Ce.metalnessmap,Ce.fog,Ce.lights,{emissive:{value:new ye(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:xt.meshphysical_vert,fragmentShader:xt.meshphysical_frag},toon:{uniforms:vi([Ce.common,Ce.aomap,Ce.lightmap,Ce.emissivemap,Ce.bumpmap,Ce.normalmap,Ce.displacementmap,Ce.gradientmap,Ce.fog,Ce.lights,{emissive:{value:new ye(0)}}]),vertexShader:xt.meshtoon_vert,fragmentShader:xt.meshtoon_frag},matcap:{uniforms:vi([Ce.common,Ce.bumpmap,Ce.normalmap,Ce.displacementmap,Ce.fog,{matcap:{value:null}}]),vertexShader:xt.meshmatcap_vert,fragmentShader:xt.meshmatcap_frag},points:{uniforms:vi([Ce.points,Ce.fog]),vertexShader:xt.points_vert,fragmentShader:xt.points_frag},dashed:{uniforms:vi([Ce.common,Ce.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:xt.linedashed_vert,fragmentShader:xt.linedashed_frag},depth:{uniforms:vi([Ce.common,Ce.displacementmap]),vertexShader:xt.depth_vert,fragmentShader:xt.depth_frag},normal:{uniforms:vi([Ce.common,Ce.bumpmap,Ce.normalmap,Ce.displacementmap,{opacity:{value:1}}]),vertexShader:xt.meshnormal_vert,fragmentShader:xt.meshnormal_frag},sprite:{uniforms:vi([Ce.sprite,Ce.fog]),vertexShader:xt.sprite_vert,fragmentShader:xt.sprite_frag},background:{uniforms:{uvTransform:{value:new bt},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:xt.background_vert,fragmentShader:xt.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:xt.backgroundCube_vert,fragmentShader:xt.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:xt.cube_vert,fragmentShader:xt.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:xt.equirect_vert,fragmentShader:xt.equirect_frag},distanceRGBA:{uniforms:vi([Ce.common,Ce.displacementmap,{referencePosition:{value:new D},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:xt.distanceRGBA_vert,fragmentShader:xt.distanceRGBA_frag},shadow:{uniforms:vi([Ce.lights,Ce.fog,{color:{value:new ye(0)},opacity:{value:1}}]),vertexShader:xt.shadow_vert,fragmentShader:xt.shadow_frag}};io.physical={uniforms:vi([io.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new bt},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new bt},clearcoatNormalScale:{value:new oe(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new bt},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new bt},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new bt},sheen:{value:0},sheenColor:{value:new ye(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new bt},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new bt},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new bt},transmissionSamplerSize:{value:new oe},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new bt},attenuationDistance:{value:0},attenuationColor:{value:new ye(0)},specularColor:{value:new ye(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new bt},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new bt},anisotropyVector:{value:new oe},anisotropyMap:{value:null},anisotropyMapTransform:{value:new bt}}]),vertexShader:xt.meshphysical_vert,fragmentShader:xt.meshphysical_frag};const Gp={r:0,b:0,g:0};function Z7(n,e,t,i,r,o,s){const a=new ye(0);let l,u,c=!0===o?0:1,d=null,f=0,h=null;function _(m,g){m.getRGB(Gp,WO(n)),i.buffers.color.setClear(Gp.r,Gp.g,Gp.b,g,s)}return{getClearColor:function(){return a},setClearColor:function(m,g=1){a.set(m),c=g,_(a,c)},getClearAlpha:function(){return c},setClearAlpha:function(m){c=m,_(a,c)},render:function p(m,g){let v=!1,y=!0===g.isScene?g.background:null;y&&y.isTexture&&(y=(g.backgroundBlurriness>0?t:e).get(y)),null===y?_(a,c):y&&y.isColor&&(_(y,1),v=!0);const x=n.xr.getEnvironmentBlendMode();"additive"===x?i.buffers.color.setClear(0,0,0,1,s):"alpha-blend"===x&&i.buffers.color.setClear(0,0,0,0,s),(n.autoClear||v)&&n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil),y&&(y.isCubeTexture||y.mapping===ad)?(void 0===u&&(u=new Dt(new Uo(1,1,1),new Bo({name:"BackgroundCubeMaterial",uniforms:ll(io.backgroundCube.uniforms),vertexShader:io.backgroundCube.vertexShader,fragmentShader:io.backgroundCube.fragmentShader,side:1,depthTest:!1,depthWrite:!1,fog:!1})),u.geometry.deleteAttribute("normal"),u.geometry.deleteAttribute("uv"),u.onBeforeRender=function(C,S,T){this.matrixWorld.copyPosition(T.matrixWorld)},Object.defineProperty(u.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(u)),u.material.uniforms.envMap.value=y,u.material.uniforms.flipEnvMap.value=y.isCubeTexture&&!1===y.isRenderTargetTexture?-1:1,u.material.uniforms.backgroundBlurriness.value=g.backgroundBlurriness,u.material.uniforms.backgroundIntensity.value=g.backgroundIntensity,u.material.toneMapped=Bt.getTransfer(y.colorSpace)!==an,(d!==y||f!==y.version||h!==n.toneMapping)&&(u.material.needsUpdate=!0,d=y,f=y.version,h=n.toneMapping),u.layers.enableAll(),m.unshift(u,u.geometry,u.material,0,0,null)):y&&y.isTexture&&(void 0===l&&(l=new Dt(new xs(2,2),new Bo({name:"BackgroundMaterial",uniforms:ll(io.background.uniforms),vertexShader:io.background.vertexShader,fragmentShader:io.background.fragmentShader,side:0,depthTest:!1,depthWrite:!1,fog:!1})),l.geometry.deleteAttribute("normal"),Object.defineProperty(l.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(l)),l.material.uniforms.t2D.value=y,l.material.uniforms.backgroundIntensity.value=g.backgroundIntensity,l.material.toneMapped=Bt.getTransfer(y.colorSpace)!==an,!0===y.matrixAutoUpdate&&y.updateMatrix(),l.material.uniforms.uvTransform.value.copy(y.matrix),(d!==y||f!==y.version||h!==n.toneMapping)&&(l.material.needsUpdate=!0,d=y,f=y.version,h=n.toneMapping),l.layers.enableAll(),m.unshift(l,l.geometry,l.material,0,0,null))}}}function K7(n,e,t,i){const r=n.getParameter(n.MAX_VERTEX_ATTRIBS),o=i.isWebGL2?null:e.get("OES_vertex_array_object"),s=i.isWebGL2||null!==o,a={},c=m(null);let l=c,u=!1;function h(k){return i.isWebGL2?n.bindVertexArray(k):o.bindVertexArrayOES(k)}function p(k){return i.isWebGL2?n.deleteVertexArray(k):o.deleteVertexArrayOES(k)}function m(k){const H=[],X=[],K=[];for(let de=0;de<r;de++)H[de]=0,X[de]=0,K[de]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:H,enabledAttributes:X,attributeDivisors:K,object:k,attributes:{},index:null}}function y(){const k=l.newAttributes;for(let H=0,X=k.length;H<X;H++)k[H]=0}function x(k){C(k,0)}function C(k,H){const K=l.enabledAttributes,de=l.attributeDivisors;l.newAttributes[k]=1,0===K[k]&&(n.enableVertexAttribArray(k),K[k]=1),de[k]!==H&&((i.isWebGL2?n:e.get("ANGLE_instanced_arrays"))[i.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](k,H),de[k]=H)}function S(){const k=l.newAttributes,H=l.enabledAttributes;for(let X=0,K=H.length;X<K;X++)H[X]!==k[X]&&(n.disableVertexAttribArray(X),H[X]=0)}function T(k,H,X,K,de,ie,le){!0===le?n.vertexAttribIPointer(k,H,X,de,ie):n.vertexAttribPointer(k,H,X,K,de,ie)}function Y(){ne(),u=!0,l!==c&&(l=c,h(l.object))}function ne(){c.geometry=null,c.program=null,c.wireframe=!1}return{setup:function d(k,H,X,K,de){let ie=!1;if(s){const le=function _(k,H,X){const K=!0===X.wireframe;let de=a[k.id];void 0===de&&(de={},a[k.id]=de);let ie=de[H.id];void 0===ie&&(ie={},de[H.id]=ie);let le=ie[K];return void 0===le&&(le=m(function f(){return i.isWebGL2?n.createVertexArray():o.createVertexArrayOES()}()),ie[K]=le),le}(K,X,H);l!==le&&(l=le,h(l.object)),ie=function g(k,H,X,K){const de=l.attributes,ie=H.attributes;let le=0;const B=X.getAttributes();for(const J in B)if(B[J].location>=0){const we=de[J];let Ee=ie[J];if(void 0===Ee&&("instanceMatrix"===J&&k.instanceMatrix&&(Ee=k.instanceMatrix),"instanceColor"===J&&k.instanceColor&&(Ee=k.instanceColor)),void 0===we||we.attribute!==Ee||Ee&&we.data!==Ee.data)return!0;le++}return l.attributesNum!==le||l.index!==K}(k,K,X,de),ie&&function v(k,H,X,K){const de={},ie=H.attributes;let le=0;const B=X.getAttributes();for(const J in B)if(B[J].location>=0){let we=ie[J];void 0===we&&("instanceMatrix"===J&&k.instanceMatrix&&(we=k.instanceMatrix),"instanceColor"===J&&k.instanceColor&&(we=k.instanceColor));const Ee={};Ee.attribute=we,we&&we.data&&(Ee.data=we.data),de[J]=Ee,le++}l.attributes=de,l.attributesNum=le,l.index=K}(k,K,X,de)}else{const le=!0===H.wireframe;(l.geometry!==K.id||l.program!==X.id||l.wireframe!==le)&&(l.geometry=K.id,l.program=X.id,l.wireframe=le,ie=!0)}null!==de&&t.update(de,n.ELEMENT_ARRAY_BUFFER),(ie||u)&&(u=!1,function R(k,H,X,K){if(!1===i.isWebGL2&&(k.isInstancedMesh||K.isInstancedBufferGeometry)&&null===e.get("ANGLE_instanced_arrays"))return;y();const de=K.attributes,ie=X.getAttributes(),le=H.defaultAttributeValues;for(const B in ie){const J=ie[B];if(J.location>=0){let xe=de[B];if(void 0===xe&&("instanceMatrix"===B&&k.instanceMatrix&&(xe=k.instanceMatrix),"instanceColor"===B&&k.instanceColor&&(xe=k.instanceColor)),void 0!==xe){const we=xe.normalized,Ee=xe.itemSize,ke=t.get(xe);if(void 0===ke)continue;const qe=ke.buffer,He=ke.type,ut=ke.bytesPerElement,Mt=!0===i.isWebGL2&&(He===n.INT||He===n.UNSIGNED_INT||1013===xe.gpuType);if(xe.isInterleavedBufferAttribute){const je=xe.data,L=je.stride,be=xe.offset;if(je.isInstancedInterleavedBuffer){for(let te=0;te<J.locationSize;te++)C(J.location+te,je.meshPerAttribute);!0!==k.isInstancedMesh&&void 0===K._maxInstanceCount&&(K._maxInstanceCount=je.meshPerAttribute*je.count)}else for(let te=0;te<J.locationSize;te++)x(J.location+te);n.bindBuffer(n.ARRAY_BUFFER,qe);for(let te=0;te<J.locationSize;te++)T(J.location+te,Ee/J.locationSize,He,we,L*ut,(be+Ee/J.locationSize*te)*ut,Mt)}else{if(xe.isInstancedBufferAttribute){for(let je=0;je<J.locationSize;je++)C(J.location+je,xe.meshPerAttribute);!0!==k.isInstancedMesh&&void 0===K._maxInstanceCount&&(K._maxInstanceCount=xe.meshPerAttribute*xe.count)}else for(let je=0;je<J.locationSize;je++)x(J.location+je);n.bindBuffer(n.ARRAY_BUFFER,qe);for(let je=0;je<J.locationSize;je++)T(J.location+je,Ee/J.locationSize,He,we,Ee*ut,Ee/J.locationSize*je*ut,Mt)}}else if(void 0!==le){const we=le[B];if(void 0!==we)switch(we.length){case 2:n.vertexAttrib2fv(J.location,we);break;case 3:n.vertexAttrib3fv(J.location,we);break;case 4:n.vertexAttrib4fv(J.location,we);break;default:n.vertexAttrib1fv(J.location,we)}}}}S()}(k,H,X,K),null!==de&&n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,t.get(de).buffer))},reset:Y,resetDefaultState:ne,dispose:function w(){Y();for(const k in a){const H=a[k];for(const X in H){const K=H[X];for(const de in K)p(K[de].object),delete K[de];delete H[X]}delete a[k]}},releaseStatesOfGeometry:function A(k){if(void 0===a[k.id])return;const H=a[k.id];for(const X in H){const K=H[X];for(const de in K)p(K[de].object),delete K[de];delete H[X]}delete a[k.id]},releaseStatesOfProgram:function z(k){for(const H in a){const X=a[H];if(void 0===X[k.id])continue;const K=X[k.id];for(const de in K)p(K[de].object),delete K[de];delete X[k.id]}},initAttributes:y,enableAttribute:x,disableUnusedAttributes:S}}function J7(n,e,t,i){const r=i.isWebGL2;let o;this.setMode=function s(l){o=l},this.render=function a(l,u){n.drawArrays(o,l,u),t.update(u,o,1)},this.renderInstances=function c(l,u,d){if(0===d)return;let f,h;if(r)f=n,h="drawArraysInstanced";else if(f=e.get("ANGLE_instanced_arrays"),h="drawArraysInstancedANGLE",null===f)return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");f[h](o,l,u,d),t.update(u,o,d)}}function Q7(n,e,t){let i;function o(T){if("highp"===T){if(n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.HIGH_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT).precision>0)return"highp";T="mediump"}return"mediump"===T&&n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.MEDIUM_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}const s=typeof WebGL2RenderingContext<"u"&&"WebGL2RenderingContext"===n.constructor.name;let a=void 0!==t.precision?t.precision:"highp";const c=o(a);c!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",c,"instead."),a=c);const l=s||e.has("WEBGL_draw_buffers"),u=!0===t.logarithmicDepthBuffer,d=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS),f=n.getParameter(n.MAX_VERTEX_TEXTURE_IMAGE_UNITS),h=n.getParameter(n.MAX_TEXTURE_SIZE),p=n.getParameter(n.MAX_CUBE_MAP_TEXTURE_SIZE),_=n.getParameter(n.MAX_VERTEX_ATTRIBS),m=n.getParameter(n.MAX_VERTEX_UNIFORM_VECTORS),g=n.getParameter(n.MAX_VARYING_VECTORS),v=n.getParameter(n.MAX_FRAGMENT_UNIFORM_VECTORS),y=f>0,x=s||e.has("OES_texture_float");return{isWebGL2:s,drawBuffers:l,getMaxAnisotropy:function r(){if(void 0!==i)return i;if(!0===e.has("EXT_texture_filter_anisotropic")){const T=e.get("EXT_texture_filter_anisotropic");i=n.getParameter(T.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else i=0;return i},getMaxPrecision:o,precision:a,logarithmicDepthBuffer:u,maxTextures:d,maxVertexTextures:f,maxTextureSize:h,maxCubemapSize:p,maxAttributes:_,maxVertexUniforms:m,maxVaryings:g,maxFragmentUniforms:v,vertexTextures:y,floatFragmentTextures:x,floatVertexTextures:y&&x,maxSamples:s?n.getParameter(n.MAX_SAMPLES):0}}function e$(n){const e=this;let t=null,i=0,r=!1,o=!1;const s=new ca,a=new bt,c={value:null,needsUpdate:!1};function u(d,f,h,p){const _=null!==d?d.length:0;let m=null;if(0!==_){if(m=c.value,!0!==p||null===m){const g=h+4*_,v=f.matrixWorldInverse;a.getNormalMatrix(v),(null===m||m.length<g)&&(m=new Float32Array(g));for(let y=0,x=h;y!==_;++y,x+=4)s.copy(d[y]).applyMatrix4(v,a),s.normal.toArray(m,x),m[x+3]=s.constant}c.value=m,c.needsUpdate=!0}return e.numPlanes=_,e.numIntersection=0,m}this.uniform=c,this.numPlanes=0,this.numIntersection=0,this.init=function(d,f){const h=0!==d.length||f||0!==i||r;return r=f,i=d.length,h},this.beginShadows=function(){o=!0,u(null)},this.endShadows=function(){o=!1},this.setGlobalState=function(d,f){t=u(d,f,0)},this.setState=function(d,f,h){const p=d.clippingPlanes,_=d.clipIntersection,m=d.clipShadows,g=n.get(d);if(!r||null===p||0===p.length||o&&!m)o?u(null):function l(){c.value!==t&&(c.value=t,c.needsUpdate=i>0),e.numPlanes=i,e.numIntersection=0}();else{const v=o?0:i,y=4*v;let x=g.clippingState||null;c.value=x,x=u(p,f,y,h);for(let C=0;C!==y;++C)x[C]=t[C];g.clippingState=x,this.numIntersection=_?this.numPlanes:0,this.numPlanes+=v}}}function t$(n){let e=new WeakMap;function t(s,a){return 303===a?s.mapping=us:304===a&&(s.mapping=Qs),s}function r(s){const a=s.target;a.removeEventListener("dispose",r);const c=e.get(a);void 0!==c&&(e.delete(a),c.dispose())}return{get:function i(s){if(s&&s.isTexture&&!1===s.isRenderTargetTexture){const a=s.mapping;if(303===a||304===a){if(e.has(s))return t(e.get(s).texture,s.mapping);{const c=s.image;if(c&&c.height>0){const l=new YW(c.height/2);return l.fromEquirectangularTexture(n,s),e.set(s,l),s.addEventListener("dispose",r),t(l.texture,s.mapping)}return null}}}return s},dispose:function o(){e=new WeakMap}}}class Wp extends Oy{constructor(e=-1,t=1,i=1,r=-1,o=.1,s=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=i,this.bottom=r,this.near=o,this.far=s,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this}setViewOffset(e,t,i,r,o,s){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=o,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let o=i-e,s=i+e,a=r+t,c=r-t;if(null!==this.view&&this.view.enabled){const l=(this.right-this.left)/this.view.fullWidth/this.zoom,u=(this.top-this.bottom)/this.view.fullHeight/this.zoom;o+=l*this.view.offsetX,s=o+l*this.view.width,a-=u*this.view.offsetY,c=a-u*this.view.height}this.projectionMatrix.makeOrthographic(o,s,a,c,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}const $O=[.125,.215,.35,.446,.526,.582],Ry=new Wp,qO=new ye;let Ny=null,Ly=0,ky=0;const da=(1+Math.sqrt(5))/2,hl=1/da,XO=[new D(1,1,1),new D(-1,1,1),new D(1,1,-1),new D(-1,1,-1),new D(0,da,hl),new D(0,da,-hl),new D(hl,0,da),new D(-hl,0,da),new D(da,hl,0),new D(-da,hl,0)];class YO{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,i=.1,r=100){Ny=this._renderer.getRenderTarget(),Ly=this._renderer.getActiveCubeFace(),ky=this._renderer.getActiveMipmapLevel(),this._setSize(256);const o=this._allocateTargets();return o.depthBuffer=!0,this._sceneToCubeUV(e,i,r,o),t>0&&this._blur(o,0,0,t),this._applyPMREM(o),this._cleanup(o),o}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){null===this._cubemapMaterial&&(this._cubemapMaterial=JO(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){null===this._equirectMaterial&&(this._equirectMaterial=KO(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),null!==this._cubemapMaterial&&this._cubemapMaterial.dispose(),null!==this._equirectMaterial&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){null!==this._blurMaterial&&this._blurMaterial.dispose(),null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(Ny,Ly,ky),e.scissorTest=!1,jp(e,0,0,e.width,e.height)}_fromTexture(e,t){this._setSize(e.mapping===us||e.mapping===Qs?0===e.image.length?16:e.image[0].width||e.image[0].image.width:e.image.width/4),Ny=this._renderer.getRenderTarget(),Ly=this._renderer.getActiveCubeFace(),ky=this._renderer.getActiveMipmapLevel();const i=t||this._allocateTargets();return this._textureToCubeUV(e,i),this._applyPMREM(i),this._cleanup(i),i}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,i={magFilter:gn,minFilter:gn,generateMipmaps:!1,type:ud,format:lr,colorSpace:Jn,depthBuffer:!1},r=ZO(e,t,i);if(null===this._pingPongRenderTarget||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){null!==this._pingPongRenderTarget&&this._dispose(),this._pingPongRenderTarget=ZO(e,t,i);const{_lodMax:o}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=function n$(n){const e=[],t=[],i=[];let r=n;const o=n-4+1+$O.length;for(let s=0;s<o;s++){const a=Math.pow(2,r);t.push(a);let c=1/a;s>n-4?c=$O[s-n+4-1]:0===s&&(c=0),i.push(c);const l=1/(a-2),u=-l,d=1+l,f=[u,u,d,u,d,d,u,u,d,d,u,d],h=6,p=6,_=3,m=2,g=1,v=new Float32Array(_*p*h),y=new Float32Array(m*p*h),x=new Float32Array(g*p*h);for(let S=0;S<h;S++){const T=S%3*2/3-1,R=S>2?0:-1;v.set([T,R,0,T+2/3,R,0,T+2/3,R+1,0,T,R,0,T+2/3,R+1,0,T,R+1,0],_*p*S),y.set(f,m*p*S),x.set([S,S,S,S,S,S],g*p*S)}const C=new vt;C.setAttribute("position",new Gt(v,_)),C.setAttribute("uv",new Gt(y,m)),C.setAttribute("faceIndex",new Gt(x,g)),e.push(C),r>4&&r--}return{lodPlanes:e,sizeLods:t,sigmas:i}}(o)),this._blurMaterial=function i$(n,e,t){const i=new Float32Array(20),r=new D(0,1,0);return new Bo({name:"SphericalGaussianBlur",defines:{n:20,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}(o,e,t)}return r}_compileMaterial(e){const t=new Dt(this._lodPlanes[0],e);this._renderer.compile(t,Ry)}_sceneToCubeUV(e,t,i,r){const a=new Un(90,1,t,i),c=[1,-1,1,1,1,1],l=[1,1,1,-1,-1,-1],u=this._renderer,d=u.autoClear,f=u.toneMapping;u.getClearColor(qO),u.toneMapping=ls,u.autoClear=!1;const h=new fr({name:"PMREM.Background",side:1,depthWrite:!1,depthTest:!1}),p=new Dt(new Uo,h);let _=!1;const m=e.background;m?m.isColor&&(h.color.copy(m),e.background=null,_=!0):(h.color.copy(qO),_=!0);for(let g=0;g<6;g++){const v=g%3;0===v?(a.up.set(0,c[g],0),a.lookAt(l[g],0,0)):1===v?(a.up.set(0,0,c[g]),a.lookAt(0,l[g],0)):(a.up.set(0,c[g],0),a.lookAt(0,0,l[g]));const y=this._cubeSize;jp(r,v*y,g>2?y:0,y,y),u.setRenderTarget(r),_&&u.render(p,a),u.render(e,a)}p.geometry.dispose(),p.material.dispose(),u.toneMapping=f,u.autoClear=d,e.background=m}_textureToCubeUV(e,t){const i=this._renderer,r=e.mapping===us||e.mapping===Qs;r?(null===this._cubemapMaterial&&(this._cubemapMaterial=JO()),this._cubemapMaterial.uniforms.flipEnvMap.value=!1===e.isRenderTargetTexture?-1:1):null===this._equirectMaterial&&(this._equirectMaterial=KO());const o=r?this._cubemapMaterial:this._equirectMaterial,s=new Dt(this._lodPlanes[0],o);o.uniforms.envMap.value=e;const c=this._cubeSize;jp(t,0,0,3*c,2*c),i.setRenderTarget(t),i.render(s,Ry)}_applyPMREM(e){const t=this._renderer,i=t.autoClear;t.autoClear=!1;for(let r=1;r<this._lodPlanes.length;r++){const o=Math.sqrt(this._sigmas[r]*this._sigmas[r]-this._sigmas[r-1]*this._sigmas[r-1]);this._blur(e,r-1,r,o,XO[(r-1)%XO.length])}t.autoClear=i}_blur(e,t,i,r,o){const s=this._pingPongRenderTarget;this._halfBlur(e,s,t,i,r,"latitudinal",o),this._halfBlur(s,e,i,i,r,"longitudinal",o)}_halfBlur(e,t,i,r,o,s,a){const c=this._renderer,l=this._blurMaterial;"latitudinal"!==s&&"longitudinal"!==s&&console.error("blur direction must be either latitudinal or longitudinal!");const d=new Dt(this._lodPlanes[r],l),f=l.uniforms,h=this._sizeLods[i]-1,p=isFinite(o)?Math.PI/(2*h):2*Math.PI/39,_=o/p,m=isFinite(o)?1+Math.floor(3*_):20;m>20&&console.warn(`sigmaRadians, ${o}, is too large and will clip, as it requested ${m} samples when the maximum is set to 20`);const g=[];let v=0;for(let T=0;T<20;++T){const R=T/_,w=Math.exp(-R*R/2);g.push(w),0===T?v+=w:T<m&&(v+=2*w)}for(let T=0;T<g.length;T++)g[T]=g[T]/v;f.envMap.value=e.texture,f.samples.value=m,f.weights.value=g,f.latitudinal.value="latitudinal"===s,a&&(f.poleAxis.value=a);const{_lodMax:y}=this;f.dTheta.value=p,f.mipInt.value=y-i;const x=this._sizeLods[r];jp(t,3*x*(r>y-4?r-y+4:0),4*(this._cubeSize-x),3*x,2*x),c.setRenderTarget(t),c.render(d,Ry)}}function ZO(n,e,t){const i=new no(n,e,t);return i.texture.mapping=ad,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function jp(n,e,t,i,r){n.viewport.set(e,t,i,r),n.scissor.set(e,t,i,r)}function KO(){return new Bo({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tgl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function JO(){return new Bo({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tuniform float flipEnvMap;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function r$(n){let e=new WeakMap,t=null;function o(a){const c=a.target;c.removeEventListener("dispose",o);const l=e.get(c);void 0!==l&&(e.delete(c),l.dispose())}return{get:function i(a){if(a&&a.isTexture){const c=a.mapping,l=303===c||304===c,u=c===us||c===Qs;if(l||u){if(a.isRenderTargetTexture&&!0===a.needsPMREMUpdate){a.needsPMREMUpdate=!1;let d=e.get(a);return null===t&&(t=new YO(n)),d=l?t.fromEquirectangular(a,d):t.fromCubemap(a,d),e.set(a,d),d.texture}if(e.has(a))return e.get(a).texture;{const d=a.image;if(l&&d&&d.height>0||u&&d&&function r(a){let c=0;for(let u=0;u<6;u++)void 0!==a[u]&&c++;return 6===c}(d)){null===t&&(t=new YO(n));const f=l?t.fromEquirectangular(a):t.fromCubemap(a);return e.set(a,f),a.addEventListener("dispose",o),f.texture}return null}}}return a},dispose:function s(){e=new WeakMap,null!==t&&(t.dispose(),t=null)}}}function o$(n){const e={};function t(i){if(void 0!==e[i])return e[i];let r;switch(i){case"WEBGL_depth_texture":r=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=n.getExtension(i)}return e[i]=r,r}return{has:function(i){return null!==t(i)},init:function(i){i.isWebGL2?t("EXT_color_buffer_float"):(t("WEBGL_depth_texture"),t("OES_texture_float"),t("OES_texture_half_float"),t("OES_texture_half_float_linear"),t("OES_standard_derivatives"),t("OES_element_index_uint"),t("OES_vertex_array_object"),t("ANGLE_instanced_arrays")),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture")},get:function(i){const r=t(i);return null===r&&console.warn("THREE.WebGLRenderer: "+i+" extension not supported."),r}}}function s$(n,e,t,i){const r={},o=new WeakMap;function s(d){const f=d.target;null!==f.index&&e.remove(f.index);for(const p in f.attributes)e.remove(f.attributes[p]);for(const p in f.morphAttributes){const _=f.morphAttributes[p];for(let m=0,g=_.length;m<g;m++)e.remove(_[m])}f.removeEventListener("dispose",s),delete r[f.id];const h=o.get(f);h&&(e.remove(h),o.delete(f)),i.releaseStatesOfGeometry(f),!0===f.isInstancedBufferGeometry&&delete f._maxInstanceCount,t.memory.geometries--}function l(d){const f=[],h=d.index,p=d.attributes.position;let _=0;if(null!==h){const v=h.array;_=h.version;for(let y=0,x=v.length;y<x;y+=3){const C=v[y+0],S=v[y+1],T=v[y+2];f.push(C,S,S,T,T,C)}}else{if(void 0===p)return;_=p.version;for(let y=0,x=p.array.length/3-1;y<x;y+=3){const C=y+0,S=y+1,T=y+2;f.push(C,S,S,T,T,C)}}const m=new(bO(f)?UO:FO)(f,1);m.version=_;const g=o.get(d);g&&e.remove(g),o.set(d,m)}return{get:function a(d,f){return!0===r[f.id]||(f.addEventListener("dispose",s),r[f.id]=!0,t.memory.geometries++),f},update:function c(d){const f=d.attributes;for(const p in f)e.update(f[p],n.ARRAY_BUFFER);const h=d.morphAttributes;for(const p in h){const _=h[p];for(let m=0,g=_.length;m<g;m++)e.update(_[m],n.ARRAY_BUFFER)}},getWireframeAttribute:function u(d){const f=o.get(d);if(f){const h=d.index;null!==h&&f.version<h.version&&l(d)}else l(d);return o.get(d)}}}function a$(n,e,t,i){const r=i.isWebGL2;let o,a,c;this.setMode=function s(f){o=f},this.setIndex=function l(f){a=f.type,c=f.bytesPerElement},this.render=function u(f,h){n.drawElements(o,h,a,f*c),t.update(h,o,1)},this.renderInstances=function d(f,h,p){if(0===p)return;let _,m;if(r)_=n,m="drawElementsInstanced";else if(_=e.get("ANGLE_instanced_arrays"),m="drawElementsInstancedANGLE",null===_)return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");_[m](o,h,a,f*c,p),t.update(h,o,p)}}function c$(n){const t={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:t,programs:null,autoReset:!0,reset:function r(){t.calls=0,t.triangles=0,t.points=0,t.lines=0},update:function i(o,s,a){switch(t.calls++,s){case n.TRIANGLES:t.triangles+=a*(o/3);break;case n.LINES:t.lines+=a*(o/2);break;case n.LINE_STRIP:t.lines+=a*(o-1);break;case n.LINE_LOOP:t.lines+=a*o;break;case n.POINTS:t.points+=a*o;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",s)}}}}function l$(n,e){return n[0]-e[0]}function u$(n,e){return Math.abs(e[1])-Math.abs(n[1])}function d$(n,e,t){const i={},r=new Float32Array(8),o=new WeakMap,s=new $t,a=[];for(let l=0;l<8;l++)a[l]=[l,0];return{update:function c(l,u,d){const f=l.morphTargetInfluences;if(!0===e.isWebGL2){const h=u.morphAttributes.position||u.morphAttributes.normal||u.morphAttributes.color,p=void 0!==h?h.length:0;let _=o.get(u);if(void 0===_||_.count!==p){let k=function(){Y.dispose(),o.delete(u),u.removeEventListener("dispose",k)};void 0!==_&&_.texture.dispose();const v=void 0!==u.morphAttributes.position,y=void 0!==u.morphAttributes.normal,x=void 0!==u.morphAttributes.color,C=u.morphAttributes.position||[],S=u.morphAttributes.normal||[],T=u.morphAttributes.color||[];let R=0;!0===v&&(R=1),!0===y&&(R=2),!0===x&&(R=3);let w=u.attributes.position.count*R,A=1;w>e.maxTextureSize&&(A=Math.ceil(w/e.maxTextureSize),w=e.maxTextureSize);const z=new Float32Array(w*A*4*p),Y=new gy(z,w,A,p);Y.type=Oo,Y.needsUpdate=!0;const ne=4*R;for(let H=0;H<p;H++){const X=C[H],K=S[H],de=T[H],ie=w*A*4*H;for(let le=0;le<X.count;le++){const B=le*ne;!0===v&&(s.fromBufferAttribute(X,le),z[ie+B+0]=s.x,z[ie+B+1]=s.y,z[ie+B+2]=s.z,z[ie+B+3]=0),!0===y&&(s.fromBufferAttribute(K,le),z[ie+B+4]=s.x,z[ie+B+5]=s.y,z[ie+B+6]=s.z,z[ie+B+7]=0),!0===x&&(s.fromBufferAttribute(de,le),z[ie+B+8]=s.x,z[ie+B+9]=s.y,z[ie+B+10]=s.z,z[ie+B+11]=4===de.itemSize?s.w:1)}}_={count:p,texture:Y,size:new oe(w,A)},o.set(u,_),u.addEventListener("dispose",k)}let m=0;for(let v=0;v<f.length;v++)m+=f[v];const g=u.morphTargetsRelative?1:1-m;d.getUniforms().setValue(n,"morphTargetBaseInfluence",g),d.getUniforms().setValue(n,"morphTargetInfluences",f),d.getUniforms().setValue(n,"morphTargetsTexture",_.texture,t),d.getUniforms().setValue(n,"morphTargetsTextureSize",_.size)}else{const h=void 0===f?0:f.length;let p=i[u.id];if(void 0===p||p.length!==h){p=[];for(let y=0;y<h;y++)p[y]=[y,0];i[u.id]=p}for(let y=0;y<h;y++){const x=p[y];x[0]=y,x[1]=f[y]}p.sort(u$);for(let y=0;y<8;y++)y<h&&p[y][1]?(a[y][0]=p[y][0],a[y][1]=p[y][1]):(a[y][0]=Number.MAX_SAFE_INTEGER,a[y][1]=0);a.sort(l$);const _=u.morphAttributes.position,m=u.morphAttributes.normal;let g=0;for(let y=0;y<8;y++){const x=a[y],C=x[0],S=x[1];C!==Number.MAX_SAFE_INTEGER&&S?(_&&u.getAttribute("morphTarget"+y)!==_[C]&&u.setAttribute("morphTarget"+y,_[C]),m&&u.getAttribute("morphNormal"+y)!==m[C]&&u.setAttribute("morphNormal"+y,m[C]),r[y]=S,g+=S):(_&&!0===u.hasAttribute("morphTarget"+y)&&u.deleteAttribute("morphTarget"+y),m&&!0===u.hasAttribute("morphNormal"+y)&&u.deleteAttribute("morphNormal"+y),r[y]=0)}const v=u.morphTargetsRelative?1:1-g;d.getUniforms().setValue(n,"morphTargetBaseInfluence",v),d.getUniforms().setValue(n,"morphTargetInfluences",r)}}}}function f$(n,e,t,i){let r=new WeakMap;function a(c){const l=c.target;l.removeEventListener("dispose",a),t.remove(l.instanceMatrix),null!==l.instanceColor&&t.remove(l.instanceColor)}return{update:function o(c){const l=i.render.frame,d=e.get(c,c.geometry);if(r.get(d)!==l&&(e.update(d),r.set(d,l)),c.isInstancedMesh&&(!1===c.hasEventListener("dispose",a)&&c.addEventListener("dispose",a),r.get(c)!==l&&(t.update(c.instanceMatrix,n.ARRAY_BUFFER),null!==c.instanceColor&&t.update(c.instanceColor,n.ARRAY_BUFFER),r.set(c,l))),c.isSkinnedMesh){const f=c.skeleton;r.get(f)!==l&&(f.update(),r.set(f,l))}return d},dispose:function s(){r=new WeakMap}}}const QO=new mi,eD=new gy,tD=new PO,nD=new zp,iD=[],rD=[],oD=new Float32Array(16),sD=new Float32Array(9),aD=new Float32Array(4);function pl(n,e,t){const i=n[0];if(i<=0||i>0)return n;const r=e*t;let o=iD[r];if(void 0===o&&(o=new Float32Array(r),iD[r]=o),0!==e){i.toArray(o,0);for(let s=1,a=0;s!==e;++s)a+=t,n[s].toArray(o,a)}return o}function Bn(n,e){if(n.length!==e.length)return!1;for(let t=0,i=n.length;t<i;t++)if(n[t]!==e[t])return!1;return!0}function Vn(n,e){for(let t=0,i=e.length;t<i;t++)n[t]=e[t]}function $p(n,e){let t=rD[e];void 0===t&&(t=new Int32Array(e),rD[e]=t);for(let i=0;i!==e;++i)t[i]=n.allocateTextureUnit();return t}function h$(n,e){const t=this.cache;t[0]!==e&&(n.uniform1f(this.addr,e),t[0]=e)}function p$(n,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Bn(t,e))return;n.uniform2fv(this.addr,e),Vn(t,e)}}function g$(n,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(void 0!==e.r)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(n.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(Bn(t,e))return;n.uniform3fv(this.addr,e),Vn(t,e)}}function m$(n,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Bn(t,e))return;n.uniform4fv(this.addr,e),Vn(t,e)}}function _$(n,e){const t=this.cache,i=e.elements;if(void 0===i){if(Bn(t,e))return;n.uniformMatrix2fv(this.addr,!1,e),Vn(t,e)}else{if(Bn(t,i))return;aD.set(i),n.uniformMatrix2fv(this.addr,!1,aD),Vn(t,i)}}function v$(n,e){const t=this.cache,i=e.elements;if(void 0===i){if(Bn(t,e))return;n.uniformMatrix3fv(this.addr,!1,e),Vn(t,e)}else{if(Bn(t,i))return;sD.set(i),n.uniformMatrix3fv(this.addr,!1,sD),Vn(t,i)}}function y$(n,e){const t=this.cache,i=e.elements;if(void 0===i){if(Bn(t,e))return;n.uniformMatrix4fv(this.addr,!1,e),Vn(t,e)}else{if(Bn(t,i))return;oD.set(i),n.uniformMatrix4fv(this.addr,!1,oD),Vn(t,i)}}function x$(n,e){const t=this.cache;t[0]!==e&&(n.uniform1i(this.addr,e),t[0]=e)}function M$(n,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Bn(t,e))return;n.uniform2iv(this.addr,e),Vn(t,e)}}function b$(n,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Bn(t,e))return;n.uniform3iv(this.addr,e),Vn(t,e)}}function C$(n,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Bn(t,e))return;n.uniform4iv(this.addr,e),Vn(t,e)}}function w$(n,e){const t=this.cache;t[0]!==e&&(n.uniform1ui(this.addr,e),t[0]=e)}function S$(n,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Bn(t,e))return;n.uniform2uiv(this.addr,e),Vn(t,e)}}function E$(n,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Bn(t,e))return;n.uniform3uiv(this.addr,e),Vn(t,e)}}function P$(n,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Bn(t,e))return;n.uniform4uiv(this.addr,e),Vn(t,e)}}function T$(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture2D(e||QO,r)}function A$(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture3D(e||tD,r)}function O$(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTextureCube(e||nD,r)}function D$(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture2DArray(e||eD,r)}function R$(n,e){n.uniform1fv(this.addr,e)}function N$(n,e){const t=pl(e,this.size,2);n.uniform2fv(this.addr,t)}function L$(n,e){const t=pl(e,this.size,3);n.uniform3fv(this.addr,t)}function k$(n,e){const t=pl(e,this.size,4);n.uniform4fv(this.addr,t)}function F$(n,e){const t=pl(e,this.size,4);n.uniformMatrix2fv(this.addr,!1,t)}function U$(n,e){const t=pl(e,this.size,9);n.uniformMatrix3fv(this.addr,!1,t)}function B$(n,e){const t=pl(e,this.size,16);n.uniformMatrix4fv(this.addr,!1,t)}function V$(n,e){n.uniform1iv(this.addr,e)}function z$(n,e){n.uniform2iv(this.addr,e)}function H$(n,e){n.uniform3iv(this.addr,e)}function G$(n,e){n.uniform4iv(this.addr,e)}function W$(n,e){n.uniform1uiv(this.addr,e)}function j$(n,e){n.uniform2uiv(this.addr,e)}function $$(n,e){n.uniform3uiv(this.addr,e)}function q$(n,e){n.uniform4uiv(this.addr,e)}function X$(n,e,t){const i=this.cache,r=e.length,o=$p(t,r);Bn(i,o)||(n.uniform1iv(this.addr,o),Vn(i,o));for(let s=0;s!==r;++s)t.setTexture2D(e[s]||QO,o[s])}function Y$(n,e,t){const i=this.cache,r=e.length,o=$p(t,r);Bn(i,o)||(n.uniform1iv(this.addr,o),Vn(i,o));for(let s=0;s!==r;++s)t.setTexture3D(e[s]||tD,o[s])}function Z$(n,e,t){const i=this.cache,r=e.length,o=$p(t,r);Bn(i,o)||(n.uniform1iv(this.addr,o),Vn(i,o));for(let s=0;s!==r;++s)t.setTextureCube(e[s]||nD,o[s])}function K$(n,e,t){const i=this.cache,r=e.length,o=$p(t,r);Bn(i,o)||(n.uniform1iv(this.addr,o),Vn(i,o));for(let s=0;s!==r;++s)t.setTexture2DArray(e[s]||eD,o[s])}class Q${constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.setValue=function I$(n){switch(n){case 5126:return h$;case 35664:return p$;case 35665:return g$;case 35666:return m$;case 35674:return _$;case 35675:return v$;case 35676:return y$;case 5124:case 35670:return x$;case 35667:case 35671:return M$;case 35668:case 35672:return b$;case 35669:case 35673:return C$;case 5125:return w$;case 36294:return S$;case 36295:return E$;case 36296:return P$;case 35678:case 36198:case 36298:case 36306:case 35682:return T$;case 35679:case 36299:case 36307:return A$;case 35680:case 36300:case 36308:case 36293:return O$;case 36289:case 36303:case 36311:case 36292:return D$}}(t.type)}}class eq{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.size=t.size,this.setValue=function J$(n){switch(n){case 5126:return R$;case 35664:return N$;case 35665:return L$;case 35666:return k$;case 35674:return F$;case 35675:return U$;case 35676:return B$;case 5124:case 35670:return V$;case 35667:case 35671:return z$;case 35668:case 35672:return H$;case 35669:case 35673:return G$;case 5125:return W$;case 36294:return j$;case 36295:return $$;case 36296:return q$;case 35678:case 36198:case 36298:case 36306:case 35682:return X$;case 35679:case 36299:case 36307:return Y$;case 35680:case 36300:case 36308:case 36293:return Z$;case 36289:case 36303:case 36311:case 36292:return K$}}(t.type)}}class tq{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,i){const r=this.seq;for(let o=0,s=r.length;o!==s;++o){const a=r[o];a.setValue(e,t[a.id],i)}}}const Uy=/(\w+)(\])?(\[|\.)?/g;function cD(n,e){n.seq.push(e),n.map[e.id]=e}function nq(n,e,t){const i=n.name,r=i.length;for(Uy.lastIndex=0;;){const o=Uy.exec(i);let a=o[1];const l=o[3];if("]"===o[2]&&(a|=0),void 0===l||"["===l&&Uy.lastIndex+2===r){cD(t,void 0===l?new Q$(a,n,e):new eq(a,n,e));break}{let d=t.map[a];void 0===d&&(d=new tq(a),cD(t,d)),t=d}}}class qp{constructor(e,t){this.seq=[],this.map={};const i=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let r=0;r<i;++r){const o=e.getActiveUniform(t,r);nq(o,e.getUniformLocation(t,o.name),this)}}setValue(e,t,i,r){const o=this.map[t];void 0!==o&&o.setValue(e,i,r)}setOptional(e,t,i){const r=t[i];void 0!==r&&this.setValue(e,i,r)}static upload(e,t,i,r){for(let o=0,s=t.length;o!==s;++o){const a=t[o],c=i[a.id];!1!==c.needsUpdate&&a.setValue(e,c.value,r)}}static seqWithValue(e,t){const i=[];for(let r=0,o=e.length;r!==o;++r){const s=e[r];s.id in t&&i.push(s)}return i}}function lD(n,e,t){const i=n.createShader(e);return n.shaderSource(i,t),n.compileShader(i),i}const iq=37297;let rq=0;function uD(n,e,t){const i=n.getShaderParameter(e,n.COMPILE_STATUS),r=n.getShaderInfoLog(e).trim();if(i&&""===r)return"";const o=/ERROR: 0:(\d+)/.exec(r);if(o){const s=parseInt(o[1]);return t.toUpperCase()+"\n\n"+r+"\n\n"+function oq(n,e){const t=n.split("\n"),i=[],r=Math.max(e-6,0),o=Math.min(e+6,t.length);for(let s=r;s<o;s++){const a=s+1;i.push(`${a===e?">":" "} ${a}: ${t[s]}`)}return i.join("\n")}(n.getShaderSource(e),s)}return r}function aq(n,e){const t=function sq(n){const e=Bt.getPrimaries(Bt.workingColorSpace),t=Bt.getPrimaries(n);let i;switch(e===t?i="":e===vp&&t===_p?i="LinearDisplayP3ToLinearSRGB":e===_p&&t===vp&&(i="LinearSRGBToLinearDisplayP3"),n){case Jn:case gp:return[i,"LinearTransferOETF"];case nn:case cy:return[i,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space:",n),[i,"LinearTransferOETF"]}}(e);return`vec4 ${n}( vec4 value ) { return ${t[0]}( ${t[1]}( value ) ); }`}function cq(n,e){let t;switch(e){case L9:t="Linear";break;case k9:t="Reinhard";break;case F9:t="OptimizedCineon";break;case U9:t="ACESFilmic";break;case B9:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+n+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}function Md(n){return""!==n}function dD(n,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return n.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function fD(n,e){return n.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const fq=/^[ \t]*#include +<([\w\d./]+)>/gm;function By(n){return n.replace(fq,pq)}const hq=new Map([["encodings_fragment","colorspace_fragment"],["encodings_pars_fragment","colorspace_pars_fragment"],["output_fragment","opaque_fragment"]]);function pq(n,e){let t=xt[e];if(void 0===t){const i=hq.get(e);if(void 0===i)throw new Error("Can not resolve #include <"+e+">");t=xt[i],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,i)}return By(t)}const gq=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function hD(n){return n.replace(gq,mq)}function mq(n,e,t,i){let r="";for(let o=parseInt(e);o<parseInt(t);o++)r+=i.replace(/\[\s*i\s*\]/g,"[ "+o+" ]").replace(/UNROLLED_LOOP_INDEX/g,o);return r}function pD(n){let e="precision "+n.precision+" float;\nprecision "+n.precision+" int;";return"highp"===n.precision?e+="\n#define HIGH_PRECISION":"mediump"===n.precision?e+="\n#define MEDIUM_PRECISION":"lowp"===n.precision&&(e+="\n#define LOW_PRECISION"),e}function bq(n,e,t,i){const r=n.getContext(),o=t.defines;let s=t.vertexShader,a=t.fragmentShader;const c=function _q(n){let e="SHADOWMAP_TYPE_BASIC";return n.shadowMapType===DA?e="SHADOWMAP_TYPE_PCF":n.shadowMapType===Xv?e="SHADOWMAP_TYPE_PCF_SOFT":n.shadowMapType===To&&(e="SHADOWMAP_TYPE_VSM"),e}(t),l=function vq(n){let e="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case us:case Qs:e="ENVMAP_TYPE_CUBE";break;case ad:e="ENVMAP_TYPE_CUBE_UV"}return e}(t),u=function yq(n){let e="ENVMAP_MODE_REFLECTION";return n.envMap&&n.envMapMode===Qs&&(e="ENVMAP_MODE_REFRACTION"),e}(t),d=function xq(n){let e="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case up:e="ENVMAP_BLENDING_MULTIPLY";break;case R9:e="ENVMAP_BLENDING_MIX";break;case N9:e="ENVMAP_BLENDING_ADD"}return e}(t),f=function Mq(n){const e=n.envMapCubeUVHeight;if(null===e)return null;const t=Math.log2(e)-2,i=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),112)),texelHeight:i,maxMip:t}}(t),h=t.isWebGL2?"":function lq(n){return[n.extensionDerivatives||n.envMapCubeUVHeight||n.bumpMap||n.normalMapTangentSpace||n.clearcoatNormalMap||n.flatShading||"physical"===n.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(n.extensionFragDepth||n.logarithmicDepthBuffer)&&n.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",n.extensionDrawBuffers&&n.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(n.extensionShaderTextureLOD||n.envMap||n.transmission)&&n.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(Md).join("\n")}(t),p=function uq(n){const e=[];for(const t in n){const i=n[t];!1!==i&&e.push("#define "+t+" "+i)}return e.join("\n")}(o),_=r.createProgram();let m,g,v=t.glslVersion?"#version "+t.glslVersion+"\n":"";t.isRawShaderMaterial?(m=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,p].filter(Md).join("\n"),m.length>0&&(m+="\n"),g=[h,"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,p].filter(Md).join("\n"),g.length>0&&(g+="\n")):(m=[pD(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,p,t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+u:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+t.anisotropyMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents&&!1===t.flatShading?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&!1===t.flatShading?"#define USE_MORPHNORMALS":"",t.morphColors&&t.isWebGL2?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+c:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.useLegacyLights?"#define LEGACY_LIGHTS":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","\tattribute vec2 uv1;","#endif","#ifdef USE_UV2","\tattribute vec2 uv2;","#endif","#ifdef USE_UV3","\tattribute vec2 uv3;","#endif","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(Md).join("\n"),g=[h,pD(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,p,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+l:"",t.envMap?"#define "+u:"",t.envMap?"#define "+d:"",f?"#define CUBEUV_TEXEL_WIDTH "+f.texelWidth:"",f?"#define CUBEUV_TEXEL_HEIGHT "+f.texelHeight:"",f?"#define CUBEUV_MAX_MIP "+f.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents&&!1===t.flatShading?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+c:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.useLegacyLights?"#define LEGACY_LIGHTS":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==ls?"#define TONE_MAPPING":"",t.toneMapping!==ls?xt.tonemapping_pars_fragment:"",t.toneMapping!==ls?cq("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",xt.colorspace_pars_fragment,aq("linearToOutputTexel",t.outputColorSpace),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"","\n"].filter(Md).join("\n")),s=By(s),s=dD(s,t),s=fD(s,t),a=By(a),a=dD(a,t),a=fD(a,t),s=hD(s),a=hD(a),t.isWebGL2&&!0!==t.isRawShaderMaterial&&(v="#version 300 es\n",m=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+m,g=["precision mediump sampler2DArray;","#define varying in",t.glslVersion===yO?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===yO?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+g);const x=v+g+a,C=lD(r,r.VERTEX_SHADER,v+m+s),S=lD(r,r.FRAGMENT_SHADER,x);function T(z){if(n.debug.checkShaderErrors){const Y=r.getProgramInfoLog(_).trim(),ne=r.getShaderInfoLog(C).trim(),k=r.getShaderInfoLog(S).trim();let H=!0,X=!0;if(!1===r.getProgramParameter(_,r.LINK_STATUS))if(H=!1,"function"==typeof n.debug.onShaderError)n.debug.onShaderError(r,_,C,S);else{const K=uD(r,C,"vertex"),de=uD(r,S,"fragment");console.error("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(_,r.VALIDATE_STATUS)+"\n\nProgram Info Log: "+Y+"\n"+K+"\n"+de)}else""!==Y?console.warn("THREE.WebGLProgram: Program Info Log:",Y):(""===ne||""===k)&&(X=!1);X&&(z.diagnostics={runnable:H,programLog:Y,vertexShader:{log:ne,prefix:m},fragmentShader:{log:k,prefix:g}})}r.deleteShader(C),r.deleteShader(S),R=new qp(r,_),w=function dq(n,e){const t={},i=n.getProgramParameter(e,n.ACTIVE_ATTRIBUTES);for(let r=0;r<i;r++){const o=n.getActiveAttrib(e,r),s=o.name;let a=1;o.type===n.FLOAT_MAT2&&(a=2),o.type===n.FLOAT_MAT3&&(a=3),o.type===n.FLOAT_MAT4&&(a=4),t[s]={type:o.type,location:n.getAttribLocation(e,s),locationSize:a}}return t}(r,_)}let R,w;r.attachShader(_,C),r.attachShader(_,S),void 0!==t.index0AttributeName?r.bindAttribLocation(_,0,t.index0AttributeName):!0===t.morphTargets&&r.bindAttribLocation(_,0,"position"),r.linkProgram(_),this.getUniforms=function(){return void 0===R&&T(this),R},this.getAttributes=function(){return void 0===w&&T(this),w};let A=!1===t.rendererExtensionParallelShaderCompile;return this.isReady=function(){return!1===A&&(A=r.getProgramParameter(_,iq)),A},this.destroy=function(){i.releaseStatesOfProgram(this),r.deleteProgram(_),this.program=void 0},this.type=t.shaderType,this.name=t.shaderName,this.id=rq++,this.cacheKey=e,this.usedTimes=1,this.program=_,this.vertexShader=C,this.fragmentShader=S,this}let Cq=0;class wq{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const i=e.fragmentShader,r=this._getShaderStage(e.vertexShader),o=this._getShaderStage(i),s=this._getShaderCacheForMaterial(e);return!1===s.has(r)&&(s.add(r),r.usedTimes++),!1===s.has(o)&&(s.add(o),o.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const i of t)i.usedTimes--,0===i.usedTimes&&this.shaderCache.delete(i.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let i=t.get(e);return void 0===i&&(i=new Set,t.set(e,i)),i}_getShaderStage(e){const t=this.shaderCache;let i=t.get(e);return void 0===i&&(i=new Sq(e),t.set(e,i)),i}}class Sq{constructor(e){this.id=Cq++,this.code=e,this.usedTimes=0}}function Eq(n,e,t,i,r,o,s){const a=new by,c=new wq,l=[],u=r.isWebGL2,d=r.logarithmicDepthBuffer,f=r.vertexTextures;let h=r.precision;const p={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function _(w){return 0===w?"uv":`uv${w}`}return{getParameters:function m(w,A,z,Y,ne){const k=Y.fog,H=ne.geometry,K=(w.isMeshStandardMaterial?t:e).get(w.envMap||(w.isMeshStandardMaterial?Y.environment:null)),de=K&&K.mapping===ad?K.image.height:null,ie=p[w.type];null!==w.precision&&(h=r.getMaxPrecision(w.precision),h!==w.precision&&console.warn("THREE.WebGLProgram.getParameters:",w.precision,"not supported, using",h,"instead."));const le=H.morphAttributes.position||H.morphAttributes.normal||H.morphAttributes.color,B=void 0!==le?le.length:0;let xe,we,Ee,ke,J=0;if(void 0!==H.morphAttributes.position&&(J=1),void 0!==H.morphAttributes.normal&&(J=2),void 0!==H.morphAttributes.color&&(J=3),ie){const In=io[ie];xe=In.vertexShader,we=In.fragmentShader}else xe=w.vertexShader,we=w.fragmentShader,c.update(w),Ee=c.getVertexShaderID(w),ke=c.getFragmentShaderID(w);const qe=n.getRenderTarget(),He=!0===ne.isInstancedMesh,ut=!!w.map,je=!!K,L=!!w.aoMap,be=!!w.lightMap,te=!!w.bumpMap,fe=!!w.normalMap,ae=!!w.displacementMap,Ge=!!w.emissiveMap,Ae=!!w.metalnessMap,Le=!!w.roughnessMap,ft=w.anisotropy>0,Et=w.clearcoat>0,vn=w.iridescence>0,N=w.sheen>0,E=w.transmission>0,G=ft&&!!w.anisotropyMap,he=Et&&!!w.clearcoatMap,ue=Et&&!!w.clearcoatNormalMap,pe=Et&&!!w.clearcoatRoughnessMap,Fe=vn&&!!w.iridescenceMap,ve=vn&&!!w.iridescenceThicknessMap,Pe=N&&!!w.sheenColorMap,st=N&&!!w.sheenRoughnessMap,kt=!!w.specularMap,me=!!w.specularColorMap,qt=!!w.specularIntensityMap,pt=E&&!!w.transmissionMap,at=E&&!!w.thicknessMap,Re=!!w.alphaMap,Te=!!w.extensions,_e=!!H.attributes.uv1,Q=!!H.attributes.uv2,Me=!!H.attributes.uv3;let Ke=ls;return w.toneMapped&&(null===qe||!0===qe.isXRRenderTarget)&&(Ke=n.toneMapping),{isWebGL2:u,shaderID:ie,shaderType:w.type,shaderName:w.name,vertexShader:xe,fragmentShader:we,defines:w.defines,customVertexShaderID:Ee,customFragmentShaderID:ke,isRawShaderMaterial:!0===w.isRawShaderMaterial,glslVersion:w.glslVersion,precision:h,instancing:He,instancingColor:He&&null!==ne.instanceColor,supportsVertexTextures:f,outputColorSpace:null===qe?n.outputColorSpace:!0===qe.isXRRenderTarget?qe.texture.colorSpace:Jn,map:ut,matcap:!!w.matcap,envMap:je,envMapMode:je&&K.mapping,envMapCubeUVHeight:de,aoMap:L,lightMap:be,bumpMap:te,normalMap:fe,displacementMap:f&&ae,emissiveMap:Ge,normalMapObjectSpace:fe&&1===w.normalMapType,normalMapTangentSpace:fe&&0===w.normalMapType,metalnessMap:Ae,roughnessMap:Le,anisotropy:ft,anisotropyMap:G,clearcoat:Et,clearcoatMap:he,clearcoatNormalMap:ue,clearcoatRoughnessMap:pe,iridescence:vn,iridescenceMap:Fe,iridescenceThicknessMap:ve,sheen:N,sheenColorMap:Pe,sheenRoughnessMap:st,specularMap:kt,specularColorMap:me,specularIntensityMap:qt,transmission:E,transmissionMap:pt,thicknessMap:at,gradientMap:!!w.gradientMap,opaque:!1===w.transparent&&1===w.blending,alphaMap:Re,alphaTest:w.alphaTest>0,alphaHash:!!w.alphaHash,combine:w.combine,mapUv:ut&&_(w.map.channel),aoMapUv:L&&_(w.aoMap.channel),lightMapUv:be&&_(w.lightMap.channel),bumpMapUv:te&&_(w.bumpMap.channel),normalMapUv:fe&&_(w.normalMap.channel),displacementMapUv:ae&&_(w.displacementMap.channel),emissiveMapUv:Ge&&_(w.emissiveMap.channel),metalnessMapUv:Ae&&_(w.metalnessMap.channel),roughnessMapUv:Le&&_(w.roughnessMap.channel),anisotropyMapUv:G&&_(w.anisotropyMap.channel),clearcoatMapUv:he&&_(w.clearcoatMap.channel),clearcoatNormalMapUv:ue&&_(w.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:pe&&_(w.clearcoatRoughnessMap.channel),iridescenceMapUv:Fe&&_(w.iridescenceMap.channel),iridescenceThicknessMapUv:ve&&_(w.iridescenceThicknessMap.channel),sheenColorMapUv:Pe&&_(w.sheenColorMap.channel),sheenRoughnessMapUv:st&&_(w.sheenRoughnessMap.channel),specularMapUv:kt&&_(w.specularMap.channel),specularColorMapUv:me&&_(w.specularColorMap.channel),specularIntensityMapUv:qt&&_(w.specularIntensityMap.channel),transmissionMapUv:pt&&_(w.transmissionMap.channel),thicknessMapUv:at&&_(w.thicknessMap.channel),alphaMapUv:Re&&_(w.alphaMap.channel),vertexTangents:!!H.attributes.tangent&&(fe||ft),vertexColors:w.vertexColors,vertexAlphas:!0===w.vertexColors&&!!H.attributes.color&&4===H.attributes.color.itemSize,vertexUv1s:_e,vertexUv2s:Q,vertexUv3s:Me,pointsUvs:!0===ne.isPoints&&!!H.attributes.uv&&(ut||Re),fog:!!k,useFog:!0===w.fog,fogExp2:k&&k.isFogExp2,flatShading:!0===w.flatShading,sizeAttenuation:!0===w.sizeAttenuation,logarithmicDepthBuffer:d,skinning:!0===ne.isSkinnedMesh,morphTargets:void 0!==H.morphAttributes.position,morphNormals:void 0!==H.morphAttributes.normal,morphColors:void 0!==H.morphAttributes.color,morphTargetsCount:B,morphTextureStride:J,numDirLights:A.directional.length,numPointLights:A.point.length,numSpotLights:A.spot.length,numSpotLightMaps:A.spotLightMap.length,numRectAreaLights:A.rectArea.length,numHemiLights:A.hemi.length,numDirLightShadows:A.directionalShadowMap.length,numPointLightShadows:A.pointShadowMap.length,numSpotLightShadows:A.spotShadowMap.length,numSpotLightShadowsWithMaps:A.numSpotLightShadowsWithMaps,numLightProbes:A.numLightProbes,numClippingPlanes:s.numPlanes,numClipIntersection:s.numIntersection,dithering:w.dithering,shadowMapEnabled:n.shadowMap.enabled&&z.length>0,shadowMapType:n.shadowMap.type,toneMapping:Ke,useLegacyLights:n._useLegacyLights,decodeVideoTexture:ut&&!0===w.map.isVideoTexture&&Bt.getTransfer(w.map.colorSpace)===an,premultipliedAlpha:w.premultipliedAlpha,doubleSided:2===w.side,flipSided:1===w.side,useDepthPacking:w.depthPacking>=0,depthPacking:w.depthPacking||0,index0AttributeName:w.index0AttributeName,extensionDerivatives:Te&&!0===w.extensions.derivatives,extensionFragDepth:Te&&!0===w.extensions.fragDepth,extensionDrawBuffers:Te&&!0===w.extensions.drawBuffers,extensionShaderTextureLOD:Te&&!0===w.extensions.shaderTextureLOD,rendererExtensionFragDepth:u||i.has("EXT_frag_depth"),rendererExtensionDrawBuffers:u||i.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:u||i.has("EXT_shader_texture_lod"),rendererExtensionParallelShaderCompile:i.has("KHR_parallel_shader_compile"),customProgramCacheKey:w.customProgramCacheKey()}},getProgramCacheKey:function g(w){const A=[];if(w.shaderID?A.push(w.shaderID):(A.push(w.customVertexShaderID),A.push(w.customFragmentShaderID)),void 0!==w.defines)for(const z in w.defines)A.push(z),A.push(w.defines[z]);return!1===w.isRawShaderMaterial&&(function v(w,A){w.push(A.precision),w.push(A.outputColorSpace),w.push(A.envMapMode),w.push(A.envMapCubeUVHeight),w.push(A.mapUv),w.push(A.alphaMapUv),w.push(A.lightMapUv),w.push(A.aoMapUv),w.push(A.bumpMapUv),w.push(A.normalMapUv),w.push(A.displacementMapUv),w.push(A.emissiveMapUv),w.push(A.metalnessMapUv),w.push(A.roughnessMapUv),w.push(A.anisotropyMapUv),w.push(A.clearcoatMapUv),w.push(A.clearcoatNormalMapUv),w.push(A.clearcoatRoughnessMapUv),w.push(A.iridescenceMapUv),w.push(A.iridescenceThicknessMapUv),w.push(A.sheenColorMapUv),w.push(A.sheenRoughnessMapUv),w.push(A.specularMapUv),w.push(A.specularColorMapUv),w.push(A.specularIntensityMapUv),w.push(A.transmissionMapUv),w.push(A.thicknessMapUv),w.push(A.combine),w.push(A.fogExp2),w.push(A.sizeAttenuation),w.push(A.morphTargetsCount),w.push(A.morphAttributeCount),w.push(A.numDirLights),w.push(A.numPointLights),w.push(A.numSpotLights),w.push(A.numSpotLightMaps),w.push(A.numHemiLights),w.push(A.numRectAreaLights),w.push(A.numDirLightShadows),w.push(A.numPointLightShadows),w.push(A.numSpotLightShadows),w.push(A.numSpotLightShadowsWithMaps),w.push(A.numLightProbes),w.push(A.shadowMapType),w.push(A.toneMapping),w.push(A.numClippingPlanes),w.push(A.numClipIntersection),w.push(A.depthPacking)}(A,w),function y(w,A){a.disableAll(),A.isWebGL2&&a.enable(0),A.supportsVertexTextures&&a.enable(1),A.instancing&&a.enable(2),A.instancingColor&&a.enable(3),A.matcap&&a.enable(4),A.envMap&&a.enable(5),A.normalMapObjectSpace&&a.enable(6),A.normalMapTangentSpace&&a.enable(7),A.clearcoat&&a.enable(8),A.iridescence&&a.enable(9),A.alphaTest&&a.enable(10),A.vertexColors&&a.enable(11),A.vertexAlphas&&a.enable(12),A.vertexUv1s&&a.enable(13),A.vertexUv2s&&a.enable(14),A.vertexUv3s&&a.enable(15),A.vertexTangents&&a.enable(16),A.anisotropy&&a.enable(17),A.alphaHash&&a.enable(18),w.push(a.mask),a.disableAll(),A.fog&&a.enable(0),A.useFog&&a.enable(1),A.flatShading&&a.enable(2),A.logarithmicDepthBuffer&&a.enable(3),A.skinning&&a.enable(4),A.morphTargets&&a.enable(5),A.morphNormals&&a.enable(6),A.morphColors&&a.enable(7),A.premultipliedAlpha&&a.enable(8),A.shadowMapEnabled&&a.enable(9),A.useLegacyLights&&a.enable(10),A.doubleSided&&a.enable(11),A.flipSided&&a.enable(12),A.useDepthPacking&&a.enable(13),A.dithering&&a.enable(14),A.transmission&&a.enable(15),A.sheen&&a.enable(16),A.opaque&&a.enable(17),A.pointsUvs&&a.enable(18),A.decodeVideoTexture&&a.enable(19),w.push(a.mask)}(A,w),A.push(n.outputColorSpace)),A.push(w.customProgramCacheKey),A.join()},getUniforms:function x(w){const A=p[w.type];let z;return z=A?jW.clone(io[A].uniforms):w.uniforms,z},acquireProgram:function C(w,A){let z;for(let Y=0,ne=l.length;Y<ne;Y++){const k=l[Y];if(k.cacheKey===A){z=k,++z.usedTimes;break}}return void 0===z&&(z=new bq(n,A,w,o),l.push(z)),z},releaseProgram:function S(w){if(0==--w.usedTimes){const A=l.indexOf(w);l[A]=l[l.length-1],l.pop(),w.destroy()}},releaseShaderCache:function T(w){c.remove(w)},programs:l,dispose:function R(){c.dispose()}}}function Pq(){let n=new WeakMap;return{get:function e(o){let s=n.get(o);return void 0===s&&(s={},n.set(o,s)),s},remove:function t(o){n.delete(o)},update:function i(o,s,a){n.get(o)[s]=a},dispose:function r(){n=new WeakMap}}}function Tq(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function gD(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function mD(){const n=[];let e=0;const t=[],i=[],r=[];function s(d,f,h,p,_,m){let g=n[e];return void 0===g?(g={id:d.id,object:d,geometry:f,material:h,groupOrder:p,renderOrder:d.renderOrder,z:_,group:m},n[e]=g):(g.id=d.id,g.object=d,g.geometry=f,g.material=h,g.groupOrder=p,g.renderOrder=d.renderOrder,g.z=_,g.group=m),e++,g}return{opaque:t,transmissive:i,transparent:r,init:function o(){e=0,t.length=0,i.length=0,r.length=0},push:function a(d,f,h,p,_,m){const g=s(d,f,h,p,_,m);h.transmission>0?i.push(g):!0===h.transparent?r.push(g):t.push(g)},unshift:function c(d,f,h,p,_,m){const g=s(d,f,h,p,_,m);h.transmission>0?i.unshift(g):!0===h.transparent?r.unshift(g):t.unshift(g)},finish:function u(){for(let d=e,f=n.length;d<f;d++){const h=n[d];if(null===h.id)break;h.id=null,h.object=null,h.geometry=null,h.material=null,h.group=null}},sort:function l(d,f){t.length>1&&t.sort(d||Tq),i.length>1&&i.sort(f||gD),r.length>1&&r.sort(f||gD)}}}function Aq(){let n=new WeakMap;return{get:function e(i,r){const o=n.get(i);let s;return void 0===o?(s=new mD,n.set(i,[s])):r>=o.length?(s=new mD,o.push(s)):s=o[r],s},dispose:function t(){n=new WeakMap}}}function Oq(){const n={};return{get:function(e){if(void 0!==n[e.id])return n[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new D,color:new ye};break;case"SpotLight":t={position:new D,direction:new D,color:new ye,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new D,color:new ye,distance:0,decay:0};break;case"HemisphereLight":t={direction:new D,skyColor:new ye,groundColor:new ye};break;case"RectAreaLight":t={color:new ye,position:new D,halfWidth:new D,halfHeight:new D}}return n[e.id]=t,t}}}let Iq=0;function Rq(n,e){return(e.castShadow?2:0)-(n.castShadow?2:0)+(e.map?1:0)-(n.map?1:0)}function Nq(n,e){const t=new Oq,i=function Dq(){const n={};return{get:function(e){if(void 0!==n[e.id])return n[e.id];let t;switch(e.type){case"DirectionalLight":case"SpotLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new oe};break;case"PointLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new oe,shadowCameraNear:1,shadowCameraFar:1e3}}return n[e.id]=t,t}}}(),r={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let u=0;u<9;u++)r.probe.push(new D);const o=new D,s=new nt,a=new nt;return{setup:function c(u,d){let f=0,h=0,p=0;for(let Y=0;Y<9;Y++)r.probe[Y].set(0,0,0);let _=0,m=0,g=0,v=0,y=0,x=0,C=0,S=0,T=0,R=0,w=0;u.sort(Rq);const A=!0===d?Math.PI:1;for(let Y=0,ne=u.length;Y<ne;Y++){const k=u[Y],H=k.color,X=k.intensity,K=k.distance,de=k.shadow&&k.shadow.map?k.shadow.map.texture:null;if(k.isAmbientLight)f+=H.r*X*A,h+=H.g*X*A,p+=H.b*X*A;else if(k.isLightProbe){for(let ie=0;ie<9;ie++)r.probe[ie].addScaledVector(k.sh.coefficients[ie],X);w++}else if(k.isDirectionalLight){const ie=t.get(k);if(ie.color.copy(k.color).multiplyScalar(k.intensity*A),k.castShadow){const le=k.shadow,B=i.get(k);B.shadowBias=le.bias,B.shadowNormalBias=le.normalBias,B.shadowRadius=le.radius,B.shadowMapSize=le.mapSize,r.directionalShadow[_]=B,r.directionalShadowMap[_]=de,r.directionalShadowMatrix[_]=k.shadow.matrix,x++}r.directional[_]=ie,_++}else if(k.isSpotLight){const ie=t.get(k);ie.position.setFromMatrixPosition(k.matrixWorld),ie.color.copy(H).multiplyScalar(X*A),ie.distance=K,ie.coneCos=Math.cos(k.angle),ie.penumbraCos=Math.cos(k.angle*(1-k.penumbra)),ie.decay=k.decay,r.spot[g]=ie;const le=k.shadow;if(k.map&&(r.spotLightMap[T]=k.map,T++,le.updateMatrices(k),k.castShadow&&R++),r.spotLightMatrix[g]=le.matrix,k.castShadow){const B=i.get(k);B.shadowBias=le.bias,B.shadowNormalBias=le.normalBias,B.shadowRadius=le.radius,B.shadowMapSize=le.mapSize,r.spotShadow[g]=B,r.spotShadowMap[g]=de,S++}g++}else if(k.isRectAreaLight){const ie=t.get(k);ie.color.copy(H).multiplyScalar(X),ie.halfWidth.set(.5*k.width,0,0),ie.halfHeight.set(0,.5*k.height,0),r.rectArea[v]=ie,v++}else if(k.isPointLight){const ie=t.get(k);if(ie.color.copy(k.color).multiplyScalar(k.intensity*A),ie.distance=k.distance,ie.decay=k.decay,k.castShadow){const le=k.shadow,B=i.get(k);B.shadowBias=le.bias,B.shadowNormalBias=le.normalBias,B.shadowRadius=le.radius,B.shadowMapSize=le.mapSize,B.shadowCameraNear=le.camera.near,B.shadowCameraFar=le.camera.far,r.pointShadow[m]=B,r.pointShadowMap[m]=de,r.pointShadowMatrix[m]=k.shadow.matrix,C++}r.point[m]=ie,m++}else if(k.isHemisphereLight){const ie=t.get(k);ie.skyColor.copy(k.color).multiplyScalar(X*A),ie.groundColor.copy(k.groundColor).multiplyScalar(X*A),r.hemi[y]=ie,y++}}v>0&&(e.isWebGL2||!0===n.has("OES_texture_float_linear")?(r.rectAreaLTC1=Ce.LTC_FLOAT_1,r.rectAreaLTC2=Ce.LTC_FLOAT_2):!0===n.has("OES_texture_half_float_linear")?(r.rectAreaLTC1=Ce.LTC_HALF_1,r.rectAreaLTC2=Ce.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),r.ambient[0]=f,r.ambient[1]=h,r.ambient[2]=p;const z=r.hash;(z.directionalLength!==_||z.pointLength!==m||z.spotLength!==g||z.rectAreaLength!==v||z.hemiLength!==y||z.numDirectionalShadows!==x||z.numPointShadows!==C||z.numSpotShadows!==S||z.numSpotMaps!==T||z.numLightProbes!==w)&&(r.directional.length=_,r.spot.length=g,r.rectArea.length=v,r.point.length=m,r.hemi.length=y,r.directionalShadow.length=x,r.directionalShadowMap.length=x,r.pointShadow.length=C,r.pointShadowMap.length=C,r.spotShadow.length=S,r.spotShadowMap.length=S,r.directionalShadowMatrix.length=x,r.pointShadowMatrix.length=C,r.spotLightMatrix.length=S+T-R,r.spotLightMap.length=T,r.numSpotLightShadowsWithMaps=R,r.numLightProbes=w,z.directionalLength=_,z.pointLength=m,z.spotLength=g,z.rectAreaLength=v,z.hemiLength=y,z.numDirectionalShadows=x,z.numPointShadows=C,z.numSpotShadows=S,z.numSpotMaps=T,z.numLightProbes=w,r.version=Iq++)},setupView:function l(u,d){let f=0,h=0,p=0,_=0,m=0;const g=d.matrixWorldInverse;for(let v=0,y=u.length;v<y;v++){const x=u[v];if(x.isDirectionalLight){const C=r.directional[f];C.direction.setFromMatrixPosition(x.matrixWorld),o.setFromMatrixPosition(x.target.matrixWorld),C.direction.sub(o),C.direction.transformDirection(g),f++}else if(x.isSpotLight){const C=r.spot[p];C.position.setFromMatrixPosition(x.matrixWorld),C.position.applyMatrix4(g),C.direction.setFromMatrixPosition(x.matrixWorld),o.setFromMatrixPosition(x.target.matrixWorld),C.direction.sub(o),C.direction.transformDirection(g),p++}else if(x.isRectAreaLight){const C=r.rectArea[_];C.position.setFromMatrixPosition(x.matrixWorld),C.position.applyMatrix4(g),a.identity(),s.copy(x.matrixWorld),s.premultiply(g),a.extractRotation(s),C.halfWidth.set(.5*x.width,0,0),C.halfHeight.set(0,.5*x.height,0),C.halfWidth.applyMatrix4(a),C.halfHeight.applyMatrix4(a),_++}else if(x.isPointLight){const C=r.point[h];C.position.setFromMatrixPosition(x.matrixWorld),C.position.applyMatrix4(g),h++}else if(x.isHemisphereLight){const C=r.hemi[m];C.direction.setFromMatrixPosition(x.matrixWorld),C.direction.transformDirection(g),m++}}},state:r}}function _D(n,e){const t=new Nq(n,e),i=[],r=[];return{init:function o(){i.length=0,r.length=0},state:{lightsArray:i,shadowsArray:r,lights:t},setupLights:function c(d){t.setup(i,d)},setupLightsView:function l(d){t.setupView(i,d)},pushLight:function s(d){i.push(d)},pushShadow:function a(d){r.push(d)}}}function Lq(n,e){let t=new WeakMap;return{get:function i(o,s=0){const a=t.get(o);let c;return void 0===a?(c=new _D(n,e),t.set(o,[c])):s>=a.length?(c=new _D(n,e),a.push(c)):c=a[s],c},dispose:function r(){t=new WeakMap}}}class vD extends On{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=3200,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class yD extends On{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}function Uq(n,e,t){let i=new Iy;const r=new oe,o=new oe,s=new $t,a=new vD({depthPacking:3201}),c=new yD,l={},u=t.maxTextureSize,d={0:1,1:0,2:2},f=new Bo({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new oe},radius:{value:4}},vertexShader:"void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),h=f.clone();h.defines.HORIZONTAL_PASS=1;const p=new vt;p.setAttribute("position",new Gt(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const _=new Dt(p,f),m=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=DA;let g=this.type;function v(C,S){const T=e.update(_);f.defines.VSM_SAMPLES!==C.blurSamples&&(f.defines.VSM_SAMPLES=C.blurSamples,h.defines.VSM_SAMPLES=C.blurSamples,f.needsUpdate=!0,h.needsUpdate=!0),null===C.mapPass&&(C.mapPass=new no(r.x,r.y)),f.uniforms.shadow_pass.value=C.map.texture,f.uniforms.resolution.value=C.mapSize,f.uniforms.radius.value=C.radius,n.setRenderTarget(C.mapPass),n.clear(),n.renderBufferDirect(S,null,T,f,_,null),h.uniforms.shadow_pass.value=C.mapPass.texture,h.uniforms.resolution.value=C.mapSize,h.uniforms.radius.value=C.radius,n.setRenderTarget(C.map),n.clear(),n.renderBufferDirect(S,null,T,h,_,null)}function y(C,S,T,R){let w=null;const A=!0===T.isPointLight?C.customDistanceMaterial:C.customDepthMaterial;if(void 0!==A)w=A;else if(w=!0===T.isPointLight?c:a,n.localClippingEnabled&&!0===S.clipShadows&&Array.isArray(S.clippingPlanes)&&0!==S.clippingPlanes.length||S.displacementMap&&0!==S.displacementScale||S.alphaMap&&S.alphaTest>0||S.map&&S.alphaTest>0){const z=w.uuid,Y=S.uuid;let ne=l[z];void 0===ne&&(ne={},l[z]=ne);let k=ne[Y];void 0===k&&(k=w.clone(),ne[Y]=k),w=k}return w.visible=S.visible,w.wireframe=S.wireframe,w.side=R===To?null!==S.shadowSide?S.shadowSide:S.side:null!==S.shadowSide?S.shadowSide:d[S.side],w.alphaMap=S.alphaMap,w.alphaTest=S.alphaTest,w.map=S.map,w.clipShadows=S.clipShadows,w.clippingPlanes=S.clippingPlanes,w.clipIntersection=S.clipIntersection,w.displacementMap=S.displacementMap,w.displacementScale=S.displacementScale,w.displacementBias=S.displacementBias,w.wireframeLinewidth=S.wireframeLinewidth,w.linewidth=S.linewidth,!0===T.isPointLight&&!0===w.isMeshDistanceMaterial&&(n.properties.get(w).light=T),w}function x(C,S,T,R,w){if(!1===C.visible)return;if(C.layers.test(S.layers)&&(C.isMesh||C.isLine||C.isPoints)&&(C.castShadow||C.receiveShadow&&w===To)&&(!C.frustumCulled||i.intersectsObject(C))){C.modelViewMatrix.multiplyMatrices(T.matrixWorldInverse,C.matrixWorld);const Y=e.update(C),ne=C.material;if(Array.isArray(ne)){const k=Y.groups;for(let H=0,X=k.length;H<X;H++){const K=k[H],de=ne[K.materialIndex];if(de&&de.visible){const ie=y(C,de,R,w);n.renderBufferDirect(T,null,Y,ie,C,K)}}}else if(ne.visible){const k=y(C,ne,R,w);n.renderBufferDirect(T,null,Y,k,C,null)}}const z=C.children;for(let Y=0,ne=z.length;Y<ne;Y++)x(z[Y],S,T,R,w)}this.render=function(C,S,T){if(!1===m.enabled||!1===m.autoUpdate&&!1===m.needsUpdate||0===C.length)return;const R=n.getRenderTarget(),w=n.getActiveCubeFace(),A=n.getActiveMipmapLevel(),z=n.state;z.setBlending(0),z.buffers.color.setClear(1,1,1,1),z.buffers.depth.setTest(!0),z.setScissorTest(!1);const Y=g!==To&&this.type===To,ne=g===To&&this.type!==To;for(let k=0,H=C.length;k<H;k++){const X=C[k],K=X.shadow;if(void 0===K){console.warn("THREE.WebGLShadowMap:",X,"has no shadow.");continue}if(!1===K.autoUpdate&&!1===K.needsUpdate)continue;r.copy(K.mapSize);const de=K.getFrameExtents();if(r.multiply(de),o.copy(K.mapSize),(r.x>u||r.y>u)&&(r.x>u&&(o.x=Math.floor(u/de.x),r.x=o.x*de.x,K.mapSize.x=o.x),r.y>u&&(o.y=Math.floor(u/de.y),r.y=o.y*de.y,K.mapSize.y=o.y)),null===K.map||!0===Y||!0===ne){const le=this.type!==To?{minFilter:Cn,magFilter:Cn}:{};null!==K.map&&K.map.dispose(),K.map=new no(r.x,r.y,le),K.map.texture.name=X.name+".shadowMap",K.camera.updateProjectionMatrix()}n.setRenderTarget(K.map),n.clear();const ie=K.getViewportCount();for(let le=0;le<ie;le++){const B=K.getViewport(le);s.set(o.x*B.x,o.y*B.y,o.x*B.z,o.y*B.w),z.viewport(s),K.updateMatrices(X,le),i=K.getFrustum(),x(S,T,K.camera,X,this.type)}!0!==K.isPointLightShadow&&this.type===To&&v(K,T),K.needsUpdate=!1}g=this.type,m.needsUpdate=!1,n.setRenderTarget(R,w,A)}}function Bq(n,e,t){const i=t.isWebGL2,a=new function r(){let F=!1;const Te=new $t;let _e=null;const Q=new $t(0,0,0,0);return{setMask:function(Me){_e!==Me&&!F&&(n.colorMask(Me,Me,Me,Me),_e=Me)},setLocked:function(Me){F=Me},setClear:function(Me,Ke,Ft,In,vr){!0===vr&&(Me*=In,Ke*=In,Ft*=In),Te.set(Me,Ke,Ft,In),!1===Q.equals(Te)&&(n.clearColor(Me,Ke,Ft,In),Q.copy(Te))},reset:function(){F=!1,_e=null,Q.set(-1,0,0,0)}}},c=new function o(){let F=!1,Te=null,_e=null,Q=null;return{setTest:function(Me){Me?ut(n.DEPTH_TEST):Mt(n.DEPTH_TEST)},setMask:function(Me){Te!==Me&&!F&&(n.depthMask(Me),Te=Me)},setFunc:function(Me){if(_e!==Me){switch(Me){case 0:n.depthFunc(n.NEVER);break;case 1:n.depthFunc(n.ALWAYS);break;case 2:n.depthFunc(n.LESS);break;case 3:default:n.depthFunc(n.LEQUAL);break;case 4:n.depthFunc(n.EQUAL);break;case 5:n.depthFunc(n.GEQUAL);break;case 6:n.depthFunc(n.GREATER);break;case 7:n.depthFunc(n.NOTEQUAL)}_e=Me}},setLocked:function(Me){F=Me},setClear:function(Me){Q!==Me&&(n.clearDepth(Me),Q=Me)},reset:function(){F=!1,Te=null,_e=null,Q=null}}},l=new function s(){let F=!1,Te=null,_e=null,Q=null,Me=null,Ke=null,Ft=null,In=null,vr=null;return{setTest:function(sn){F||(sn?ut(n.STENCIL_TEST):Mt(n.STENCIL_TEST))},setMask:function(sn){Te!==sn&&!F&&(n.stencilMask(sn),Te=sn)},setFunc:function(sn,bi,co){(_e!==sn||Q!==bi||Me!==co)&&(n.stencilFunc(sn,bi,co),_e=sn,Q=bi,Me=co)},setOp:function(sn,bi,co){(Ke!==sn||Ft!==bi||In!==co)&&(n.stencilOp(sn,bi,co),Ke=sn,Ft=bi,In=co)},setLocked:function(sn){F=sn},setClear:function(sn){vr!==sn&&(n.clearStencil(sn),vr=sn)},reset:function(){F=!1,Te=null,_e=null,Q=null,Me=null,Ke=null,Ft=null,In=null,vr=null}}},u=new WeakMap,d=new WeakMap;let f={},h={},p=new WeakMap,_=[],m=null,g=!1,v=null,y=null,x=null,C=null,S=null,T=null,R=null,w=new ye(0,0,0),A=0,z=!1,Y=null,ne=null,k=null,H=null,X=null;const K=n.getParameter(n.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let de=!1,ie=0;const le=n.getParameter(n.VERSION);-1!==le.indexOf("WebGL")?(ie=parseFloat(/^WebGL (\d)/.exec(le)[1]),de=ie>=1):-1!==le.indexOf("OpenGL ES")&&(ie=parseFloat(/^OpenGL ES (\d)/.exec(le)[1]),de=ie>=2);let B=null,J={};const xe=n.getParameter(n.SCISSOR_BOX),we=n.getParameter(n.VIEWPORT),Ee=(new $t).fromArray(xe),ke=(new $t).fromArray(we);function qe(F,Te,_e,Q){const Me=new Uint8Array(4),Ke=n.createTexture();n.bindTexture(F,Ke),n.texParameteri(F,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(F,n.TEXTURE_MAG_FILTER,n.NEAREST);for(let Ft=0;Ft<_e;Ft++)!i||F!==n.TEXTURE_3D&&F!==n.TEXTURE_2D_ARRAY?n.texImage2D(Te+Ft,0,n.RGBA,1,1,0,n.RGBA,n.UNSIGNED_BYTE,Me):n.texImage3D(Te,0,n.RGBA,1,1,Q,0,n.RGBA,n.UNSIGNED_BYTE,Me);return Ke}const He={};function ut(F){!0!==f[F]&&(n.enable(F),f[F]=!0)}function Mt(F){!1!==f[F]&&(n.disable(F),f[F]=!1)}He[n.TEXTURE_2D]=qe(n.TEXTURE_2D,n.TEXTURE_2D,1),He[n.TEXTURE_CUBE_MAP]=qe(n.TEXTURE_CUBE_MAP,n.TEXTURE_CUBE_MAP_POSITIVE_X,6),i&&(He[n.TEXTURE_2D_ARRAY]=qe(n.TEXTURE_2D_ARRAY,n.TEXTURE_2D_ARRAY,1,1),He[n.TEXTURE_3D]=qe(n.TEXTURE_3D,n.TEXTURE_3D,1,1)),a.setClear(0,0,0,1),c.setClear(1),l.setClear(0),ut(n.DEPTH_TEST),c.setFunc(3),Ae(!1),Le(1),ut(n.CULL_FACE),ae(0);const te={100:n.FUNC_ADD,101:n.FUNC_SUBTRACT,102:n.FUNC_REVERSE_SUBTRACT};if(i)te[103]=n.MIN,te[104]=n.MAX;else{const F=e.get("EXT_blend_minmax");null!==F&&(te[103]=F.MIN_EXT,te[104]=F.MAX_EXT)}const fe={200:n.ZERO,201:n.ONE,202:n.SRC_COLOR,204:n.SRC_ALPHA,210:n.SRC_ALPHA_SATURATE,208:n.DST_COLOR,206:n.DST_ALPHA,203:n.ONE_MINUS_SRC_COLOR,205:n.ONE_MINUS_SRC_ALPHA,209:n.ONE_MINUS_DST_COLOR,207:n.ONE_MINUS_DST_ALPHA,211:n.CONSTANT_COLOR,212:n.ONE_MINUS_CONSTANT_COLOR,213:n.CONSTANT_ALPHA,214:n.ONE_MINUS_CONSTANT_ALPHA};function ae(F,Te,_e,Q,Me,Ke,Ft,In,vr,sn){if(0!==F){if(!1===g&&(ut(n.BLEND),g=!0),5===F)Me=Me||Te,Ke=Ke||_e,Ft=Ft||Q,(Te!==y||Me!==S)&&(n.blendEquationSeparate(te[Te],te[Me]),y=Te,S=Me),(_e!==x||Q!==C||Ke!==T||Ft!==R)&&(n.blendFuncSeparate(fe[_e],fe[Q],fe[Ke],fe[Ft]),x=_e,C=Q,T=Ke,R=Ft),(!1===In.equals(w)||vr!==A)&&(n.blendColor(In.r,In.g,In.b,vr),w.copy(In),A=vr),v=F,z=!1;else if(F!==v||sn!==z){if((100!==y||100!==S)&&(n.blendEquation(n.FUNC_ADD),y=100,S=100),sn)switch(F){case 1:n.blendFuncSeparate(n.ONE,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case 2:n.blendFunc(n.ONE,n.ONE);break;case 3:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case 4:n.blendFuncSeparate(n.ZERO,n.SRC_COLOR,n.ZERO,n.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",F)}else switch(F){case 1:n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case 2:n.blendFunc(n.SRC_ALPHA,n.ONE);break;case 3:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case 4:n.blendFunc(n.ZERO,n.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",F)}x=null,C=null,T=null,R=null,w.set(0,0,0),A=0,v=F,z=sn}}else!0===g&&(Mt(n.BLEND),g=!1)}function Ae(F){Y!==F&&(n.frontFace(F?n.CW:n.CCW),Y=F)}function Le(F){0!==F?(ut(n.CULL_FACE),F!==ne&&n.cullFace(1===F?n.BACK:2===F?n.FRONT:n.FRONT_AND_BACK)):Mt(n.CULL_FACE),ne=F}function Et(F,Te,_e){F?(ut(n.POLYGON_OFFSET_FILL),(H!==Te||X!==_e)&&(n.polygonOffset(Te,_e),H=Te,X=_e)):Mt(n.POLYGON_OFFSET_FILL)}return{buffers:{color:a,depth:c,stencil:l},enable:ut,disable:Mt,bindFramebuffer:function je(F,Te){return h[F]!==Te&&(n.bindFramebuffer(F,Te),h[F]=Te,i&&(F===n.DRAW_FRAMEBUFFER&&(h[n.FRAMEBUFFER]=Te),F===n.FRAMEBUFFER&&(h[n.DRAW_FRAMEBUFFER]=Te)),!0)},drawBuffers:function L(F,Te){let _e=_,Q=!1;if(F)if(_e=p.get(Te),void 0===_e&&(_e=[],p.set(Te,_e)),F.isWebGLMultipleRenderTargets){const Me=F.texture;if(_e.length!==Me.length||_e[0]!==n.COLOR_ATTACHMENT0){for(let Ke=0,Ft=Me.length;Ke<Ft;Ke++)_e[Ke]=n.COLOR_ATTACHMENT0+Ke;_e.length=Me.length,Q=!0}}else _e[0]!==n.COLOR_ATTACHMENT0&&(_e[0]=n.COLOR_ATTACHMENT0,Q=!0);else _e[0]!==n.BACK&&(_e[0]=n.BACK,Q=!0);Q&&(t.isWebGL2?n.drawBuffers(_e):e.get("WEBGL_draw_buffers").drawBuffersWEBGL(_e))},useProgram:function be(F){return m!==F&&(n.useProgram(F),m=F,!0)},setBlending:ae,setMaterial:function Ge(F,Te){2===F.side?Mt(n.CULL_FACE):ut(n.CULL_FACE);let _e=1===F.side;Te&&(_e=!_e),Ae(_e),1===F.blending&&!1===F.transparent?ae(0):ae(F.blending,F.blendEquation,F.blendSrc,F.blendDst,F.blendEquationAlpha,F.blendSrcAlpha,F.blendDstAlpha,F.blendColor,F.blendAlpha,F.premultipliedAlpha),c.setFunc(F.depthFunc),c.setTest(F.depthTest),c.setMask(F.depthWrite),a.setMask(F.colorWrite);const Q=F.stencilWrite;l.setTest(Q),Q&&(l.setMask(F.stencilWriteMask),l.setFunc(F.stencilFunc,F.stencilRef,F.stencilFuncMask),l.setOp(F.stencilFail,F.stencilZFail,F.stencilZPass)),Et(F.polygonOffset,F.polygonOffsetFactor,F.polygonOffsetUnits),!0===F.alphaToCoverage?ut(n.SAMPLE_ALPHA_TO_COVERAGE):Mt(n.SAMPLE_ALPHA_TO_COVERAGE)},setFlipSided:Ae,setCullFace:Le,setLineWidth:function ft(F){F!==k&&(de&&n.lineWidth(F),k=F)},setPolygonOffset:Et,setScissorTest:function vn(F){F?ut(n.SCISSOR_TEST):Mt(n.SCISSOR_TEST)},activeTexture:function N(F){void 0===F&&(F=n.TEXTURE0+K-1),B!==F&&(n.activeTexture(F),B=F)},bindTexture:function E(F,Te,_e){void 0===_e&&(_e=null===B?n.TEXTURE0+K-1:B);let Q=J[_e];void 0===Q&&(Q={type:void 0,texture:void 0},J[_e]=Q),(Q.type!==F||Q.texture!==Te)&&(B!==_e&&(n.activeTexture(_e),B=_e),n.bindTexture(F,Te||He[F]),Q.type=F,Q.texture=Te)},unbindTexture:function G(){const F=J[B];void 0!==F&&void 0!==F.type&&(n.bindTexture(F.type,null),F.type=void 0,F.texture=void 0)},compressedTexImage2D:function he(){try{n.compressedTexImage2D.apply(n,arguments)}catch(F){console.error("THREE.WebGLState:",F)}},compressedTexImage3D:function ue(){try{n.compressedTexImage3D.apply(n,arguments)}catch(F){console.error("THREE.WebGLState:",F)}},texImage2D:function me(){try{n.texImage2D.apply(n,arguments)}catch(F){console.error("THREE.WebGLState:",F)}},texImage3D:function qt(){try{n.texImage3D.apply(n,arguments)}catch(F){console.error("THREE.WebGLState:",F)}},updateUBOMapping:function Xe(F,Te){let _e=d.get(Te);void 0===_e&&(_e=new WeakMap,d.set(Te,_e));let Q=_e.get(F);void 0===Q&&(Q=n.getUniformBlockIndex(Te,F.name),_e.set(F,Q))},uniformBlockBinding:function Re(F,Te){const Q=d.get(Te).get(F);u.get(Te)!==Q&&(n.uniformBlockBinding(Te,Q,F.__bindingPointIndex),u.set(Te,Q))},texStorage2D:function st(){try{n.texStorage2D.apply(n,arguments)}catch(F){console.error("THREE.WebGLState:",F)}},texStorage3D:function kt(){try{n.texStorage3D.apply(n,arguments)}catch(F){console.error("THREE.WebGLState:",F)}},texSubImage2D:function pe(){try{n.texSubImage2D.apply(n,arguments)}catch(F){console.error("THREE.WebGLState:",F)}},texSubImage3D:function Fe(){try{n.texSubImage3D.apply(n,arguments)}catch(F){console.error("THREE.WebGLState:",F)}},compressedTexSubImage2D:function ve(){try{n.compressedTexSubImage2D.apply(n,arguments)}catch(F){console.error("THREE.WebGLState:",F)}},compressedTexSubImage3D:function Pe(){try{n.compressedTexSubImage3D.apply(n,arguments)}catch(F){console.error("THREE.WebGLState:",F)}},scissor:function pt(F){!1===Ee.equals(F)&&(n.scissor(F.x,F.y,F.z,F.w),Ee.copy(F))},viewport:function at(F){!1===ke.equals(F)&&(n.viewport(F.x,F.y,F.z,F.w),ke.copy(F))},reset:function It(){n.disable(n.BLEND),n.disable(n.CULL_FACE),n.disable(n.DEPTH_TEST),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SCISSOR_TEST),n.disable(n.STENCIL_TEST),n.disable(n.SAMPLE_ALPHA_TO_COVERAGE),n.blendEquation(n.FUNC_ADD),n.blendFunc(n.ONE,n.ZERO),n.blendFuncSeparate(n.ONE,n.ZERO,n.ONE,n.ZERO),n.blendColor(0,0,0,0),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(n.LESS),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(n.ALWAYS,0,4294967295),n.stencilOp(n.KEEP,n.KEEP,n.KEEP),n.clearStencil(0),n.cullFace(n.BACK),n.frontFace(n.CCW),n.polygonOffset(0,0),n.activeTexture(n.TEXTURE0),n.bindFramebuffer(n.FRAMEBUFFER,null),!0===i&&(n.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),n.bindFramebuffer(n.READ_FRAMEBUFFER,null)),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),f={},B=null,J={},h={},p=new WeakMap,_=[],m=null,g=!1,v=null,y=null,x=null,C=null,S=null,T=null,R=null,w=new ye(0,0,0),A=0,z=!1,Y=null,ne=null,k=null,H=null,X=null,Ee.set(0,0,n.canvas.width,n.canvas.height),ke.set(0,0,n.canvas.width,n.canvas.height),a.reset(),c.reset(),l.reset()}}}function Vq(n,e,t,i,r,o,s){const a=r.isWebGL2,c=r.maxTextures,l=r.maxCubemapSize,u=r.maxTextureSize,d=r.maxSamples,f=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,h=!(typeof navigator>"u")&&/OculusBrowser/g.test(navigator.userAgent),p=new WeakMap;let _;const m=new WeakMap;let g=!1;try{g=typeof OffscreenCanvas<"u"&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch{}function v(N,E){return g?new OffscreenCanvas(N,E):hd("canvas")}function y(N,E,G,he){let ue=1;if((N.width>he||N.height>he)&&(ue=he/Math.max(N.width,N.height)),ue<1||!0===E){if(typeof HTMLImageElement<"u"&&N instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&N instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&N instanceof ImageBitmap){const pe=E?Mp:Math.floor,Fe=pe(ue*N.width),ve=pe(ue*N.height);void 0===_&&(_=v(Fe,ve));const Pe=G?v(Fe,ve):_;return Pe.width=Fe,Pe.height=ve,Pe.getContext("2d").drawImage(N,0,0,Fe,ve),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+N.width+"x"+N.height+") to ("+Fe+"x"+ve+")."),Pe}return"data"in N&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+N.width+"x"+N.height+")."),N}return N}function x(N){return dy(N.width)&&dy(N.height)}function S(N,E){return N.generateMipmaps&&E&&N.minFilter!==Cn&&N.minFilter!==gn}function T(N){n.generateMipmap(N)}function R(N,E,G,he,ue=!1){if(!1===a)return E;if(null!==N){if(void 0!==n[N])return n[N];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+N+"'")}let pe=E;if(E===n.RED&&(G===n.FLOAT&&(pe=n.R32F),G===n.HALF_FLOAT&&(pe=n.R16F),G===n.UNSIGNED_BYTE&&(pe=n.R8)),E===n.RED_INTEGER&&(G===n.UNSIGNED_BYTE&&(pe=n.R8UI),G===n.UNSIGNED_SHORT&&(pe=n.R16UI),G===n.UNSIGNED_INT&&(pe=n.R32UI),G===n.BYTE&&(pe=n.R8I),G===n.SHORT&&(pe=n.R16I),G===n.INT&&(pe=n.R32I)),E===n.RG&&(G===n.FLOAT&&(pe=n.RG32F),G===n.HALF_FLOAT&&(pe=n.RG16F),G===n.UNSIGNED_BYTE&&(pe=n.RG8)),E===n.RGBA){const Fe=ue?mp:Bt.getTransfer(he);G===n.FLOAT&&(pe=n.RGBA32F),G===n.HALF_FLOAT&&(pe=n.RGBA16F),G===n.UNSIGNED_BYTE&&(pe=Fe===an?n.SRGB8_ALPHA8:n.RGBA8),G===n.UNSIGNED_SHORT_4_4_4_4&&(pe=n.RGBA4),G===n.UNSIGNED_SHORT_5_5_5_1&&(pe=n.RGB5_A1)}return(pe===n.R16F||pe===n.R32F||pe===n.RG16F||pe===n.RG32F||pe===n.RGBA16F||pe===n.RGBA32F)&&e.get("EXT_color_buffer_float"),pe}function w(N,E,G){return!0===S(N,G)||N.isFramebufferTexture&&N.minFilter!==Cn&&N.minFilter!==gn?Math.log2(Math.max(E.width,E.height))+1:void 0!==N.mipmaps&&N.mipmaps.length>0?N.mipmaps.length:N.isCompressedTexture&&Array.isArray(N.image)?E.mipmaps.length:1}function A(N){return N===Cn||1004===N||1005===N?n.NEAREST:n.LINEAR}function z(N){const E=N.target;E.removeEventListener("dispose",z),function ne(N){const E=i.get(N);if(void 0===E.__webglInit)return;const G=N.source,he=m.get(G);if(he){const ue=he[E.__cacheKey];ue.usedTimes--,0===ue.usedTimes&&k(N),0===Object.keys(he).length&&m.delete(G)}i.remove(N)}(E),E.isVideoTexture&&p.delete(E)}function Y(N){const E=N.target;E.removeEventListener("dispose",Y),function H(N){const E=N.texture,G=i.get(N),he=i.get(E);if(void 0!==he.__webglTexture&&(n.deleteTexture(he.__webglTexture),s.memory.textures--),N.depthTexture&&N.depthTexture.dispose(),N.isWebGLCubeRenderTarget)for(let ue=0;ue<6;ue++){if(Array.isArray(G.__webglFramebuffer[ue]))for(let pe=0;pe<G.__webglFramebuffer[ue].length;pe++)n.deleteFramebuffer(G.__webglFramebuffer[ue][pe]);else n.deleteFramebuffer(G.__webglFramebuffer[ue]);G.__webglDepthbuffer&&n.deleteRenderbuffer(G.__webglDepthbuffer[ue])}else{if(Array.isArray(G.__webglFramebuffer))for(let ue=0;ue<G.__webglFramebuffer.length;ue++)n.deleteFramebuffer(G.__webglFramebuffer[ue]);else n.deleteFramebuffer(G.__webglFramebuffer);if(G.__webglDepthbuffer&&n.deleteRenderbuffer(G.__webglDepthbuffer),G.__webglMultisampledFramebuffer&&n.deleteFramebuffer(G.__webglMultisampledFramebuffer),G.__webglColorRenderbuffer)for(let ue=0;ue<G.__webglColorRenderbuffer.length;ue++)G.__webglColorRenderbuffer[ue]&&n.deleteRenderbuffer(G.__webglColorRenderbuffer[ue]);G.__webglDepthRenderbuffer&&n.deleteRenderbuffer(G.__webglDepthRenderbuffer)}if(N.isWebGLMultipleRenderTargets)for(let ue=0,pe=E.length;ue<pe;ue++){const Fe=i.get(E[ue]);Fe.__webglTexture&&(n.deleteTexture(Fe.__webglTexture),s.memory.textures--),i.remove(E[ue])}i.remove(E),i.remove(N)}(E)}function k(N){const E=i.get(N);n.deleteTexture(E.__webglTexture),delete m.get(N.source)[E.__cacheKey],s.memory.textures--}let X=0;function le(N,E){const G=i.get(N);if(N.isVideoTexture&&function Et(N){const E=s.render.frame;p.get(N)!==E&&(p.set(N,E),N.update())}(N),!1===N.isRenderTargetTexture&&N.version>0&&G.__version!==N.version){const he=N.image;if(null===he)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else{if(!1!==he.complete)return void ut(G,N,E);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}t.bindTexture(n.TEXTURE_2D,G.__webglTexture,n.TEXTURE0+E)}const we={[ds]:n.REPEAT,[ii]:n.CLAMP_TO_EDGE,1002:n.MIRRORED_REPEAT},Ee={[Cn]:n.NEAREST,1004:n.NEAREST_MIPMAP_NEAREST,1005:n.NEAREST_MIPMAP_LINEAR,[gn]:n.LINEAR,1007:n.LINEAR_MIPMAP_NEAREST,[Ao]:n.LINEAR_MIPMAP_LINEAR},ke={512:n.NEVER,519:n.ALWAYS,513:n.LESS,515:n.LEQUAL,514:n.EQUAL,518:n.GEQUAL,516:n.GREATER,517:n.NOTEQUAL};function qe(N,E,G){if(G?(n.texParameteri(N,n.TEXTURE_WRAP_S,we[E.wrapS]),n.texParameteri(N,n.TEXTURE_WRAP_T,we[E.wrapT]),(N===n.TEXTURE_3D||N===n.TEXTURE_2D_ARRAY)&&n.texParameteri(N,n.TEXTURE_WRAP_R,we[E.wrapR]),n.texParameteri(N,n.TEXTURE_MAG_FILTER,Ee[E.magFilter]),n.texParameteri(N,n.TEXTURE_MIN_FILTER,Ee[E.minFilter])):(n.texParameteri(N,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(N,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),(N===n.TEXTURE_3D||N===n.TEXTURE_2D_ARRAY)&&n.texParameteri(N,n.TEXTURE_WRAP_R,n.CLAMP_TO_EDGE),(E.wrapS!==ii||E.wrapT!==ii)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),n.texParameteri(N,n.TEXTURE_MAG_FILTER,A(E.magFilter)),n.texParameteri(N,n.TEXTURE_MIN_FILTER,A(E.minFilter)),E.minFilter!==Cn&&E.minFilter!==gn&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),E.compareFunction&&(n.texParameteri(N,n.TEXTURE_COMPARE_MODE,n.COMPARE_REF_TO_TEXTURE),n.texParameteri(N,n.TEXTURE_COMPARE_FUNC,ke[E.compareFunction])),!0===e.has("EXT_texture_filter_anisotropic")){const he=e.get("EXT_texture_filter_anisotropic");if(E.magFilter===Cn||1005!==E.minFilter&&E.minFilter!==Ao||E.type===Oo&&!1===e.has("OES_texture_float_linear")||!1===a&&E.type===ud&&!1===e.has("OES_texture_half_float_linear"))return;(E.anisotropy>1||i.get(E).__currentAnisotropy)&&(n.texParameterf(N,he.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(E.anisotropy,r.getMaxAnisotropy())),i.get(E).__currentAnisotropy=E.anisotropy)}}function He(N,E){let G=!1;void 0===N.__webglInit&&(N.__webglInit=!0,E.addEventListener("dispose",z));const he=E.source;let ue=m.get(he);void 0===ue&&(ue={},m.set(he,ue));const pe=function ie(N){const E=[];return E.push(N.wrapS),E.push(N.wrapT),E.push(N.wrapR||0),E.push(N.magFilter),E.push(N.minFilter),E.push(N.anisotropy),E.push(N.internalFormat),E.push(N.format),E.push(N.type),E.push(N.generateMipmaps),E.push(N.premultiplyAlpha),E.push(N.flipY),E.push(N.unpackAlignment),E.push(N.colorSpace),E.join()}(E);if(pe!==N.__cacheKey){void 0===ue[pe]&&(ue[pe]={texture:n.createTexture(),usedTimes:0},s.memory.textures++,G=!0),ue[pe].usedTimes++;const Fe=ue[N.__cacheKey];void 0!==Fe&&(ue[N.__cacheKey].usedTimes--,0===Fe.usedTimes&&k(E)),N.__cacheKey=pe,N.__webglTexture=ue[pe].texture}return G}function ut(N,E,G){let he=n.TEXTURE_2D;(E.isDataArrayTexture||E.isCompressedArrayTexture)&&(he=n.TEXTURE_2D_ARRAY),E.isData3DTexture&&(he=n.TEXTURE_3D);const ue=He(N,E),pe=E.source;t.bindTexture(he,N.__webglTexture,n.TEXTURE0+G);const Fe=i.get(pe);if(pe.version!==Fe.__version||!0===ue){t.activeTexture(n.TEXTURE0+G);const ve=Bt.getPrimaries(Bt.workingColorSpace),Pe=""===E.colorSpace?null:Bt.getPrimaries(E.colorSpace),st=""===E.colorSpace||ve===Pe?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,E.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,E.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,E.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,st);const kt=function C(N){return!a&&(N.wrapS!==ii||N.wrapT!==ii||N.minFilter!==Cn&&N.minFilter!==gn)}(E)&&!1===x(E.image);let me=y(E.image,kt,!1,u);me=vn(E,me);const qt=x(me)||a,pt=o.convert(E.format,E.colorSpace);let Re,at=o.convert(E.type),Xe=R(E.internalFormat,pt,at,E.colorSpace,E.isVideoTexture);qe(he,E,qt);const It=E.mipmaps,F=a&&!0!==E.isVideoTexture,Te=void 0===Fe.__version||!0===ue,_e=w(E,me,qt);if(E.isDepthTexture)Xe=n.DEPTH_COMPONENT,a?Xe=E.type===Oo?n.DEPTH_COMPONENT32F:E.type===hs?n.DEPTH_COMPONENT24:E.type===ea?n.DEPTH24_STENCIL8:n.DEPTH_COMPONENT16:E.type===Oo&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),E.format===ta&&Xe===n.DEPTH_COMPONENT&&1012!==E.type&&E.type!==hs&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),E.type=hs,at=o.convert(E.type)),E.format===Hc&&Xe===n.DEPTH_COMPONENT&&(Xe=n.DEPTH_STENCIL,E.type!==ea&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),E.type=ea,at=o.convert(E.type))),Te&&(F?t.texStorage2D(n.TEXTURE_2D,1,Xe,me.width,me.height):t.texImage2D(n.TEXTURE_2D,0,Xe,me.width,me.height,0,pt,at,null));else if(E.isDataTexture)if(It.length>0&&qt){F&&Te&&t.texStorage2D(n.TEXTURE_2D,_e,Xe,It[0].width,It[0].height);for(let Q=0,Me=It.length;Q<Me;Q++)Re=It[Q],F?t.texSubImage2D(n.TEXTURE_2D,Q,0,0,Re.width,Re.height,pt,at,Re.data):t.texImage2D(n.TEXTURE_2D,Q,Xe,Re.width,Re.height,0,pt,at,Re.data);E.generateMipmaps=!1}else F?(Te&&t.texStorage2D(n.TEXTURE_2D,_e,Xe,me.width,me.height),t.texSubImage2D(n.TEXTURE_2D,0,0,0,me.width,me.height,pt,at,me.data)):t.texImage2D(n.TEXTURE_2D,0,Xe,me.width,me.height,0,pt,at,me.data);else if(E.isCompressedTexture)if(E.isCompressedArrayTexture){F&&Te&&t.texStorage3D(n.TEXTURE_2D_ARRAY,_e,Xe,It[0].width,It[0].height,me.depth);for(let Q=0,Me=It.length;Q<Me;Q++)Re=It[Q],E.format!==lr?null!==pt?F?t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,Q,0,0,0,Re.width,Re.height,me.depth,pt,Re.data,0,0):t.compressedTexImage3D(n.TEXTURE_2D_ARRAY,Q,Xe,Re.width,Re.height,me.depth,0,Re.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):F?t.texSubImage3D(n.TEXTURE_2D_ARRAY,Q,0,0,0,Re.width,Re.height,me.depth,pt,at,Re.data):t.texImage3D(n.TEXTURE_2D_ARRAY,Q,Xe,Re.width,Re.height,me.depth,0,pt,at,Re.data)}else{F&&Te&&t.texStorage2D(n.TEXTURE_2D,_e,Xe,It[0].width,It[0].height);for(let Q=0,Me=It.length;Q<Me;Q++)Re=It[Q],E.format!==lr?null!==pt?F?t.compressedTexSubImage2D(n.TEXTURE_2D,Q,0,0,Re.width,Re.height,pt,Re.data):t.compressedTexImage2D(n.TEXTURE_2D,Q,Xe,Re.width,Re.height,0,Re.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):F?t.texSubImage2D(n.TEXTURE_2D,Q,0,0,Re.width,Re.height,pt,at,Re.data):t.texImage2D(n.TEXTURE_2D,Q,Xe,Re.width,Re.height,0,pt,at,Re.data)}else if(E.isDataArrayTexture)F?(Te&&t.texStorage3D(n.TEXTURE_2D_ARRAY,_e,Xe,me.width,me.height,me.depth),t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,0,me.width,me.height,me.depth,pt,at,me.data)):t.texImage3D(n.TEXTURE_2D_ARRAY,0,Xe,me.width,me.height,me.depth,0,pt,at,me.data);else if(E.isData3DTexture)F?(Te&&t.texStorage3D(n.TEXTURE_3D,_e,Xe,me.width,me.height,me.depth),t.texSubImage3D(n.TEXTURE_3D,0,0,0,0,me.width,me.height,me.depth,pt,at,me.data)):t.texImage3D(n.TEXTURE_3D,0,Xe,me.width,me.height,me.depth,0,pt,at,me.data);else if(E.isFramebufferTexture){if(Te)if(F)t.texStorage2D(n.TEXTURE_2D,_e,Xe,me.width,me.height);else{let Q=me.width,Me=me.height;for(let Ke=0;Ke<_e;Ke++)t.texImage2D(n.TEXTURE_2D,Ke,Xe,Q,Me,0,pt,at,null),Q>>=1,Me>>=1}}else if(It.length>0&&qt){F&&Te&&t.texStorage2D(n.TEXTURE_2D,_e,Xe,It[0].width,It[0].height);for(let Q=0,Me=It.length;Q<Me;Q++)Re=It[Q],F?t.texSubImage2D(n.TEXTURE_2D,Q,0,0,pt,at,Re):t.texImage2D(n.TEXTURE_2D,Q,Xe,pt,at,Re);E.generateMipmaps=!1}else F?(Te&&t.texStorage2D(n.TEXTURE_2D,_e,Xe,me.width,me.height),t.texSubImage2D(n.TEXTURE_2D,0,0,0,pt,at,me)):t.texImage2D(n.TEXTURE_2D,0,Xe,pt,at,me);S(E,qt)&&T(he),Fe.__version=pe.version,E.onUpdate&&E.onUpdate(E)}N.__version=E.version}function je(N,E,G,he,ue,pe){const Fe=o.convert(G.format,G.colorSpace),ve=o.convert(G.type),Pe=R(G.internalFormat,Fe,ve,G.colorSpace);if(!i.get(E).__hasExternalTextures){const kt=Math.max(1,E.width>>pe),me=Math.max(1,E.height>>pe);ue===n.TEXTURE_3D||ue===n.TEXTURE_2D_ARRAY?t.texImage3D(ue,pe,Pe,kt,me,E.depth,0,Fe,ve,null):t.texImage2D(ue,pe,Pe,kt,me,0,Fe,ve,null)}t.bindFramebuffer(n.FRAMEBUFFER,N),ft(E)?f.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,he,ue,i.get(G).__webglTexture,0,Le(E)):(ue===n.TEXTURE_2D||ue>=n.TEXTURE_CUBE_MAP_POSITIVE_X&&ue<=n.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&n.framebufferTexture2D(n.FRAMEBUFFER,he,ue,i.get(G).__webglTexture,pe),t.bindFramebuffer(n.FRAMEBUFFER,null)}function L(N,E,G){if(n.bindRenderbuffer(n.RENDERBUFFER,N),E.depthBuffer&&!E.stencilBuffer){let he=!0===a?n.DEPTH_COMPONENT24:n.DEPTH_COMPONENT16;if(G||ft(E)){const ue=E.depthTexture;ue&&ue.isDepthTexture&&(ue.type===Oo?he=n.DEPTH_COMPONENT32F:ue.type===hs&&(he=n.DEPTH_COMPONENT24));const pe=Le(E);ft(E)?f.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,pe,he,E.width,E.height):n.renderbufferStorageMultisample(n.RENDERBUFFER,pe,he,E.width,E.height)}else n.renderbufferStorage(n.RENDERBUFFER,he,E.width,E.height);n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.RENDERBUFFER,N)}else if(E.depthBuffer&&E.stencilBuffer){const he=Le(E);G&&!1===ft(E)?n.renderbufferStorageMultisample(n.RENDERBUFFER,he,n.DEPTH24_STENCIL8,E.width,E.height):ft(E)?f.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,he,n.DEPTH24_STENCIL8,E.width,E.height):n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_STENCIL,E.width,E.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.RENDERBUFFER,N)}else{const he=!0===E.isWebGLMultipleRenderTargets?E.texture:[E.texture];for(let ue=0;ue<he.length;ue++){const pe=he[ue],Fe=o.convert(pe.format,pe.colorSpace),ve=o.convert(pe.type),Pe=R(pe.internalFormat,Fe,ve,pe.colorSpace),st=Le(E);G&&!1===ft(E)?n.renderbufferStorageMultisample(n.RENDERBUFFER,st,Pe,E.width,E.height):ft(E)?f.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,st,Pe,E.width,E.height):n.renderbufferStorage(n.RENDERBUFFER,Pe,E.width,E.height)}}n.bindRenderbuffer(n.RENDERBUFFER,null)}function te(N){const E=i.get(N),G=!0===N.isWebGLCubeRenderTarget;if(N.depthTexture&&!E.__autoAllocateDepthBuffer){if(G)throw new Error("target.depthTexture not supported in Cube render targets");!function be(N,E){if(E&&E.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(n.FRAMEBUFFER,N),!E.depthTexture||!E.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!i.get(E.depthTexture).__webglTexture||E.depthTexture.image.width!==E.width||E.depthTexture.image.height!==E.height)&&(E.depthTexture.image.width=E.width,E.depthTexture.image.height=E.height,E.depthTexture.needsUpdate=!0),le(E.depthTexture,0);const he=i.get(E.depthTexture).__webglTexture,ue=Le(E);if(E.depthTexture.format===ta)ft(E)?f.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,he,0,ue):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,he,0);else{if(E.depthTexture.format!==Hc)throw new Error("Unknown depthTexture format");ft(E)?f.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,he,0,ue):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,he,0)}}(E.__webglFramebuffer,N)}else if(G){E.__webglDepthbuffer=[];for(let he=0;he<6;he++)t.bindFramebuffer(n.FRAMEBUFFER,E.__webglFramebuffer[he]),E.__webglDepthbuffer[he]=n.createRenderbuffer(),L(E.__webglDepthbuffer[he],N,!1)}else t.bindFramebuffer(n.FRAMEBUFFER,E.__webglFramebuffer),E.__webglDepthbuffer=n.createRenderbuffer(),L(E.__webglDepthbuffer,N,!1);t.bindFramebuffer(n.FRAMEBUFFER,null)}function Le(N){return Math.min(d,N.samples)}function ft(N){const E=i.get(N);return a&&N.samples>0&&!0===e.has("WEBGL_multisampled_render_to_texture")&&!1!==E.__useRenderToTexture}function vn(N,E){const G=N.colorSpace,he=N.format,ue=N.type;return!0===N.isCompressedTexture||!0===N.isVideoTexture||1035===N.format||G!==Jn&&""!==G&&(Bt.getTransfer(G)===an?!1===a?!0===e.has("EXT_sRGB")&&he===lr?(N.format=1035,N.minFilter=gn,N.generateMipmaps=!1):E=EO.sRGBToLinear(E):(he!==lr||ue!==fs)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",G)),E}this.allocateTextureUnit=function de(){const N=X;return N>=c&&console.warn("THREE.WebGLTextures: Trying to use "+N+" texture units while this GPU supports only "+c),X+=1,N},this.resetTextureUnits=function K(){X=0},this.setTexture2D=le,this.setTexture2DArray=function B(N,E){const G=i.get(N);N.version>0&&G.__version!==N.version?ut(G,N,E):t.bindTexture(n.TEXTURE_2D_ARRAY,G.__webglTexture,n.TEXTURE0+E)},this.setTexture3D=function J(N,E){const G=i.get(N);N.version>0&&G.__version!==N.version?ut(G,N,E):t.bindTexture(n.TEXTURE_3D,G.__webglTexture,n.TEXTURE0+E)},this.setTextureCube=function xe(N,E){const G=i.get(N);N.version>0&&G.__version!==N.version?function Mt(N,E,G){if(6!==E.image.length)return;const he=He(N,E),ue=E.source;t.bindTexture(n.TEXTURE_CUBE_MAP,N.__webglTexture,n.TEXTURE0+G);const pe=i.get(ue);if(ue.version!==pe.__version||!0===he){t.activeTexture(n.TEXTURE0+G);const Fe=Bt.getPrimaries(Bt.workingColorSpace),ve=""===E.colorSpace?null:Bt.getPrimaries(E.colorSpace),Pe=""===E.colorSpace||Fe===ve?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,E.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,E.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,E.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,Pe);const st=E.isCompressedTexture||E.image[0].isCompressedTexture,kt=E.image[0]&&E.image[0].isDataTexture,me=[];for(let Q=0;Q<6;Q++)me[Q]=st||kt?kt?E.image[Q].image:E.image[Q]:y(E.image[Q],!1,!0,l),me[Q]=vn(E,me[Q]);const qt=me[0],pt=x(qt)||a,at=o.convert(E.format,E.colorSpace),Xe=o.convert(E.type),Re=R(E.internalFormat,at,Xe,E.colorSpace),It=a&&!0!==E.isVideoTexture,F=void 0===pe.__version||!0===he;let _e,Te=w(E,qt,pt);if(qe(n.TEXTURE_CUBE_MAP,E,pt),st){It&&F&&t.texStorage2D(n.TEXTURE_CUBE_MAP,Te,Re,qt.width,qt.height);for(let Q=0;Q<6;Q++){_e=me[Q].mipmaps;for(let Me=0;Me<_e.length;Me++){const Ke=_e[Me];E.format!==lr?null!==at?It?t.compressedTexSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Q,Me,0,0,Ke.width,Ke.height,at,Ke.data):t.compressedTexImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Q,Me,Re,Ke.width,Ke.height,0,Ke.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):It?t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Q,Me,0,0,Ke.width,Ke.height,at,Xe,Ke.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Q,Me,Re,Ke.width,Ke.height,0,at,Xe,Ke.data)}}}else{_e=E.mipmaps,It&&F&&(_e.length>0&&Te++,t.texStorage2D(n.TEXTURE_CUBE_MAP,Te,Re,me[0].width,me[0].height));for(let Q=0;Q<6;Q++)if(kt){It?t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Q,0,0,0,me[Q].width,me[Q].height,at,Xe,me[Q].data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Q,0,Re,me[Q].width,me[Q].height,0,at,Xe,me[Q].data);for(let Me=0;Me<_e.length;Me++){const Ft=_e[Me].image[Q].image;It?t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Q,Me+1,0,0,Ft.width,Ft.height,at,Xe,Ft.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Q,Me+1,Re,Ft.width,Ft.height,0,at,Xe,Ft.data)}}else{It?t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Q,0,0,0,at,Xe,me[Q]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Q,0,Re,at,Xe,me[Q]);for(let Me=0;Me<_e.length;Me++){const Ke=_e[Me];It?t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Q,Me+1,0,0,at,Xe,Ke.image[Q]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Q,Me+1,Re,at,Xe,Ke.image[Q])}}}S(E,pt)&&T(n.TEXTURE_CUBE_MAP),pe.__version=ue.version,E.onUpdate&&E.onUpdate(E)}N.__version=E.version}(G,N,E):t.bindTexture(n.TEXTURE_CUBE_MAP,G.__webglTexture,n.TEXTURE0+E)},this.rebindTextures=function fe(N,E,G){const he=i.get(N);void 0!==E&&je(he.__webglFramebuffer,N,N.texture,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,0),void 0!==G&&te(N)},this.setupRenderTarget=function ae(N){const E=N.texture,G=i.get(N),he=i.get(E);N.addEventListener("dispose",Y),!0!==N.isWebGLMultipleRenderTargets&&(void 0===he.__webglTexture&&(he.__webglTexture=n.createTexture()),he.__version=E.version,s.memory.textures++);const ue=!0===N.isWebGLCubeRenderTarget,pe=!0===N.isWebGLMultipleRenderTargets,Fe=x(N)||a;if(ue){G.__webglFramebuffer=[];for(let ve=0;ve<6;ve++)if(a&&E.mipmaps&&E.mipmaps.length>0){G.__webglFramebuffer[ve]=[];for(let Pe=0;Pe<E.mipmaps.length;Pe++)G.__webglFramebuffer[ve][Pe]=n.createFramebuffer()}else G.__webglFramebuffer[ve]=n.createFramebuffer()}else{if(a&&E.mipmaps&&E.mipmaps.length>0){G.__webglFramebuffer=[];for(let ve=0;ve<E.mipmaps.length;ve++)G.__webglFramebuffer[ve]=n.createFramebuffer()}else G.__webglFramebuffer=n.createFramebuffer();if(pe)if(r.drawBuffers){const ve=N.texture;for(let Pe=0,st=ve.length;Pe<st;Pe++){const kt=i.get(ve[Pe]);void 0===kt.__webglTexture&&(kt.__webglTexture=n.createTexture(),s.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(a&&N.samples>0&&!1===ft(N)){const ve=pe?E:[E];G.__webglMultisampledFramebuffer=n.createFramebuffer(),G.__webglColorRenderbuffer=[],t.bindFramebuffer(n.FRAMEBUFFER,G.__webglMultisampledFramebuffer);for(let Pe=0;Pe<ve.length;Pe++){const st=ve[Pe];G.__webglColorRenderbuffer[Pe]=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,G.__webglColorRenderbuffer[Pe]);const kt=o.convert(st.format,st.colorSpace),me=o.convert(st.type),qt=R(st.internalFormat,kt,me,st.colorSpace,!0===N.isXRRenderTarget),pt=Le(N);n.renderbufferStorageMultisample(n.RENDERBUFFER,pt,qt,N.width,N.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Pe,n.RENDERBUFFER,G.__webglColorRenderbuffer[Pe])}n.bindRenderbuffer(n.RENDERBUFFER,null),N.depthBuffer&&(G.__webglDepthRenderbuffer=n.createRenderbuffer(),L(G.__webglDepthRenderbuffer,N,!0)),t.bindFramebuffer(n.FRAMEBUFFER,null)}}if(ue){t.bindTexture(n.TEXTURE_CUBE_MAP,he.__webglTexture),qe(n.TEXTURE_CUBE_MAP,E,Fe);for(let ve=0;ve<6;ve++)if(a&&E.mipmaps&&E.mipmaps.length>0)for(let Pe=0;Pe<E.mipmaps.length;Pe++)je(G.__webglFramebuffer[ve][Pe],N,E,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+ve,Pe);else je(G.__webglFramebuffer[ve],N,E,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+ve,0);S(E,Fe)&&T(n.TEXTURE_CUBE_MAP),t.unbindTexture()}else if(pe){const ve=N.texture;for(let Pe=0,st=ve.length;Pe<st;Pe++){const kt=ve[Pe],me=i.get(kt);t.bindTexture(n.TEXTURE_2D,me.__webglTexture),qe(n.TEXTURE_2D,kt,Fe),je(G.__webglFramebuffer,N,kt,n.COLOR_ATTACHMENT0+Pe,n.TEXTURE_2D,0),S(kt,Fe)&&T(n.TEXTURE_2D)}t.unbindTexture()}else{let ve=n.TEXTURE_2D;if((N.isWebGL3DRenderTarget||N.isWebGLArrayRenderTarget)&&(a?ve=N.isWebGL3DRenderTarget?n.TEXTURE_3D:n.TEXTURE_2D_ARRAY:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),t.bindTexture(ve,he.__webglTexture),qe(ve,E,Fe),a&&E.mipmaps&&E.mipmaps.length>0)for(let Pe=0;Pe<E.mipmaps.length;Pe++)je(G.__webglFramebuffer[Pe],N,E,n.COLOR_ATTACHMENT0,ve,Pe);else je(G.__webglFramebuffer,N,E,n.COLOR_ATTACHMENT0,ve,0);S(E,Fe)&&T(ve),t.unbindTexture()}N.depthBuffer&&te(N)},this.updateRenderTargetMipmap=function Ge(N){const E=x(N)||a,G=!0===N.isWebGLMultipleRenderTargets?N.texture:[N.texture];for(let he=0,ue=G.length;he<ue;he++){const pe=G[he];if(S(pe,E)){const Fe=N.isWebGLCubeRenderTarget?n.TEXTURE_CUBE_MAP:n.TEXTURE_2D,ve=i.get(pe).__webglTexture;t.bindTexture(Fe,ve),T(Fe),t.unbindTexture()}}},this.updateMultisampleRenderTarget=function Ae(N){if(a&&N.samples>0&&!1===ft(N)){const E=N.isWebGLMultipleRenderTargets?N.texture:[N.texture],G=N.width,he=N.height;let ue=n.COLOR_BUFFER_BIT;const pe=[],Fe=N.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,ve=i.get(N),Pe=!0===N.isWebGLMultipleRenderTargets;if(Pe)for(let st=0;st<E.length;st++)t.bindFramebuffer(n.FRAMEBUFFER,ve.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+st,n.RENDERBUFFER,null),t.bindFramebuffer(n.FRAMEBUFFER,ve.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+st,n.TEXTURE_2D,null,0);t.bindFramebuffer(n.READ_FRAMEBUFFER,ve.__webglMultisampledFramebuffer),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,ve.__webglFramebuffer);for(let st=0;st<E.length;st++){pe.push(n.COLOR_ATTACHMENT0+st),N.depthBuffer&&pe.push(Fe);const kt=void 0!==ve.__ignoreDepthValues&&ve.__ignoreDepthValues;if(!1===kt&&(N.depthBuffer&&(ue|=n.DEPTH_BUFFER_BIT),N.stencilBuffer&&(ue|=n.STENCIL_BUFFER_BIT)),Pe&&n.framebufferRenderbuffer(n.READ_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,ve.__webglColorRenderbuffer[st]),!0===kt&&(n.invalidateFramebuffer(n.READ_FRAMEBUFFER,[Fe]),n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,[Fe])),Pe){const me=i.get(E[st]).__webglTexture;n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,me,0)}n.blitFramebuffer(0,0,G,he,0,0,G,he,ue,n.NEAREST),h&&n.invalidateFramebuffer(n.READ_FRAMEBUFFER,pe)}if(t.bindFramebuffer(n.READ_FRAMEBUFFER,null),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),Pe)for(let st=0;st<E.length;st++){t.bindFramebuffer(n.FRAMEBUFFER,ve.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+st,n.RENDERBUFFER,ve.__webglColorRenderbuffer[st]);const kt=i.get(E[st]).__webglTexture;t.bindFramebuffer(n.FRAMEBUFFER,ve.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+st,n.TEXTURE_2D,kt,0)}t.bindFramebuffer(n.DRAW_FRAMEBUFFER,ve.__webglMultisampledFramebuffer)}},this.setupDepthRenderbuffer=te,this.setupFrameBufferTexture=je,this.useMultisampledRTT=ft}function zq(n,e,t){const i=t.isWebGL2;return{convert:function r(o,s=""){let a;const c=Bt.getTransfer(s);if(o===fs)return n.UNSIGNED_BYTE;if(1017===o)return n.UNSIGNED_SHORT_4_4_4_4;if(1018===o)return n.UNSIGNED_SHORT_5_5_5_1;if(1010===o)return n.BYTE;if(1011===o)return n.SHORT;if(1012===o)return n.UNSIGNED_SHORT;if(1013===o)return n.INT;if(o===hs)return n.UNSIGNED_INT;if(o===Oo)return n.FLOAT;if(o===ud)return i?n.HALF_FLOAT:(a=e.get("OES_texture_half_float"),null!==a?a.HALF_FLOAT_OES:null);if(1021===o)return n.ALPHA;if(o===lr)return n.RGBA;if(1024===o)return n.LUMINANCE;if(1025===o)return n.LUMINANCE_ALPHA;if(o===ta)return n.DEPTH_COMPONENT;if(o===Hc)return n.DEPTH_STENCIL;if(1035===o)return a=e.get("EXT_sRGB"),null!==a?a.SRGB_ALPHA_EXT:null;if(1028===o)return n.RED;if(1029===o)return n.RED_INTEGER;if(1030===o)return n.RG;if(1031===o)return n.RG_INTEGER;if(1033===o)return n.RGBA_INTEGER;if(33776===o||33777===o||33778===o||33779===o)if(c===an){if(a=e.get("WEBGL_compressed_texture_s3tc_srgb"),null===a)return null;if(33776===o)return a.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(33777===o)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(33778===o)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(33779===o)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(a=e.get("WEBGL_compressed_texture_s3tc"),null===a)return null;if(33776===o)return a.COMPRESSED_RGB_S3TC_DXT1_EXT;if(33777===o)return a.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(33778===o)return a.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(33779===o)return a.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(35840===o||35841===o||35842===o||35843===o){if(a=e.get("WEBGL_compressed_texture_pvrtc"),null===a)return null;if(35840===o)return a.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(35841===o)return a.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(35842===o)return a.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(35843===o)return a.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(36196===o)return a=e.get("WEBGL_compressed_texture_etc1"),null!==a?a.COMPRESSED_RGB_ETC1_WEBGL:null;if(37492===o||37496===o){if(a=e.get("WEBGL_compressed_texture_etc"),null===a)return null;if(37492===o)return c===an?a.COMPRESSED_SRGB8_ETC2:a.COMPRESSED_RGB8_ETC2;if(37496===o)return c===an?a.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:a.COMPRESSED_RGBA8_ETC2_EAC}if(37808===o||37809===o||37810===o||37811===o||37812===o||37813===o||37814===o||37815===o||37816===o||37817===o||37818===o||37819===o||37820===o||37821===o){if(a=e.get("WEBGL_compressed_texture_astc"),null===a)return null;if(37808===o)return c===an?a.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:a.COMPRESSED_RGBA_ASTC_4x4_KHR;if(37809===o)return c===an?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:a.COMPRESSED_RGBA_ASTC_5x4_KHR;if(37810===o)return c===an?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:a.COMPRESSED_RGBA_ASTC_5x5_KHR;if(37811===o)return c===an?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:a.COMPRESSED_RGBA_ASTC_6x5_KHR;if(37812===o)return c===an?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:a.COMPRESSED_RGBA_ASTC_6x6_KHR;if(37813===o)return c===an?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:a.COMPRESSED_RGBA_ASTC_8x5_KHR;if(37814===o)return c===an?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:a.COMPRESSED_RGBA_ASTC_8x6_KHR;if(37815===o)return c===an?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:a.COMPRESSED_RGBA_ASTC_8x8_KHR;if(37816===o)return c===an?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:a.COMPRESSED_RGBA_ASTC_10x5_KHR;if(37817===o)return c===an?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:a.COMPRESSED_RGBA_ASTC_10x6_KHR;if(37818===o)return c===an?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:a.COMPRESSED_RGBA_ASTC_10x8_KHR;if(37819===o)return c===an?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:a.COMPRESSED_RGBA_ASTC_10x10_KHR;if(37820===o)return c===an?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:a.COMPRESSED_RGBA_ASTC_12x10_KHR;if(37821===o)return c===an?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:a.COMPRESSED_RGBA_ASTC_12x12_KHR}if(36492===o||36494===o||36495===o){if(a=e.get("EXT_texture_compression_bptc"),null===a)return null;if(36492===o)return c===an?a.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:a.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(36494===o)return a.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(36495===o)return a.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}if(36283===o||36284===o||36285===o||36286===o){if(a=e.get("EXT_texture_compression_rgtc"),null===a)return null;if(36492===o)return a.COMPRESSED_RED_RGTC1_EXT;if(36284===o)return a.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(36285===o)return a.COMPRESSED_RED_GREEN_RGTC2_EXT;if(36286===o)return a.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}return o===ea?i?n.UNSIGNED_INT_24_8:(a=e.get("WEBGL_depth_texture"),null!==a?a.UNSIGNED_INT_24_8_WEBGL:null):void 0!==n[o]?n[o]:null}}}class Hq extends Un{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class ro extends rn{constructor(){super(),this.isGroup=!0,this.type="Group"}}const Gq={type:"move"};class Vy{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return null===this._hand&&(this._hand=new ro,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return null===this._targetRay&&(this._targetRay=new ro,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new D,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new D),this._targetRay}getGripSpace(){return null===this._grip&&(this._grip=new ro,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new D,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new D),this._grip}dispatchEvent(e){return null!==this._targetRay&&this._targetRay.dispatchEvent(e),null!==this._grip&&this._grip.dispatchEvent(e),null!==this._hand&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const i of e.hand.values())this._getHandJoint(t,i)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}update(e,t,i){let r=null,o=null,s=null;const a=this._targetRay,c=this._grip,l=this._hand;if(e&&"visible-blurred"!==t.session.visibilityState){if(l&&e.hand){s=!0;for(const _ of e.hand.values()){const m=t.getJointPose(_,i),g=this._getHandJoint(l,_);null!==m&&(g.matrix.fromArray(m.transform.matrix),g.matrix.decompose(g.position,g.rotation,g.scale),g.matrixWorldNeedsUpdate=!0,g.jointRadius=m.radius),g.visible=null!==m}const f=l.joints["index-finger-tip"].position.distanceTo(l.joints["thumb-tip"].position),h=.02,p=.005;l.inputState.pinching&&f>h+p?(l.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!l.inputState.pinching&&f<=h-p&&(l.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else null!==c&&e.gripSpace&&(o=t.getPose(e.gripSpace,i),null!==o&&(c.matrix.fromArray(o.transform.matrix),c.matrix.decompose(c.position,c.rotation,c.scale),c.matrixWorldNeedsUpdate=!0,o.linearVelocity?(c.hasLinearVelocity=!0,c.linearVelocity.copy(o.linearVelocity)):c.hasLinearVelocity=!1,o.angularVelocity?(c.hasAngularVelocity=!0,c.angularVelocity.copy(o.angularVelocity)):c.hasAngularVelocity=!1));null!==a&&(r=t.getPose(e.targetRaySpace,i),null===r&&null!==o&&(r=o),null!==r&&(a.matrix.fromArray(r.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),a.matrixWorldNeedsUpdate=!0,r.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(r.linearVelocity)):a.hasLinearVelocity=!1,r.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(r.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(Gq)))}return null!==a&&(a.visible=null!==r),null!==c&&(c.visible=null!==o),null!==l&&(l.visible=null!==s),this}_getHandJoint(e,t){if(void 0===e.joints[t.jointName]){const i=new ro;i.matrixAutoUpdate=!1,i.visible=!1,e.joints[t.jointName]=i,e.add(i)}return e.joints[t.jointName]}}class Wq extends mi{constructor(e,t,i,r,o,s,a,c,l,u){if((u=void 0!==u?u:ta)!==ta&&u!==Hc)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===i&&u===ta&&(i=hs),void 0===i&&u===Hc&&(i=ea),super(null,r,o,s,a,c,u,i,l),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=void 0!==a?a:Cn,this.minFilter=void 0!==c?c:Cn,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return null!==this.compareFunction&&(t.compareFunction=this.compareFunction),t}}class jq extends ps{constructor(e,t){super();const i=this;let r=null,o=1,s=null,a="local-floor",c=1,l=null,u=null,d=null,f=null,h=null,p=null;const _=t.getContextAttributes();let m=null,g=null;const v=[],y=[],x=new Un;x.layers.enable(1),x.viewport=new $t;const C=new Un;C.layers.enable(2),C.viewport=new $t;const S=[x,C],T=new Hq;T.layers.enable(1),T.layers.enable(2);let R=null,w=null;function A(B){const J=y.indexOf(B.inputSource);if(-1===J)return;const xe=v[J];void 0!==xe&&(xe.update(B.inputSource,B.frame,l||s),xe.dispatchEvent({type:B.type,data:B.inputSource}))}function z(){r.removeEventListener("select",A),r.removeEventListener("selectstart",A),r.removeEventListener("selectend",A),r.removeEventListener("squeeze",A),r.removeEventListener("squeezestart",A),r.removeEventListener("squeezeend",A),r.removeEventListener("end",z),r.removeEventListener("inputsourceschange",Y);for(let B=0;B<v.length;B++){const J=y[B];null!==J&&(y[B]=null,v[B].disconnect(J))}R=null,w=null,e.setRenderTarget(m),h=null,f=null,d=null,r=null,g=null,le.stop(),i.isPresenting=!1,i.dispatchEvent({type:"sessionend"})}function Y(B){for(let J=0;J<B.removed.length;J++){const xe=B.removed[J],we=y.indexOf(xe);we>=0&&(y[we]=null,v[we].disconnect(xe))}for(let J=0;J<B.added.length;J++){const xe=B.added[J];let we=y.indexOf(xe);if(-1===we){for(let ke=0;ke<v.length;ke++){if(ke>=y.length){y.push(xe),we=ke;break}if(null===y[ke]){y[ke]=xe,we=ke;break}}if(-1===we)break}const Ee=v[we];Ee&&Ee.connect(xe)}}this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(B){let J=v[B];return void 0===J&&(J=new Vy,v[B]=J),J.getTargetRaySpace()},this.getControllerGrip=function(B){let J=v[B];return void 0===J&&(J=new Vy,v[B]=J),J.getGripSpace()},this.getHand=function(B){let J=v[B];return void 0===J&&(J=new Vy,v[B]=J),J.getHandSpace()},this.setFramebufferScaleFactor=function(B){o=B,!0===i.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(B){a=B,!0===i.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return l||s},this.setReferenceSpace=function(B){l=B},this.getBaseLayer=function(){return null!==f?f:h},this.getBinding=function(){return d},this.getFrame=function(){return p},this.getSession=function(){return r},this.setSession=function(){var B=$i(function*(J){if(r=J,null!==r){if(m=e.getRenderTarget(),r.addEventListener("select",A),r.addEventListener("selectstart",A),r.addEventListener("selectend",A),r.addEventListener("squeeze",A),r.addEventListener("squeezestart",A),r.addEventListener("squeezeend",A),r.addEventListener("end",z),r.addEventListener("inputsourceschange",Y),!0!==_.xrCompatible&&(yield t.makeXRCompatible()),void 0===r.renderState.layers||!1===e.capabilities.isWebGL2)h=new XRWebGLLayer(r,t,{antialias:void 0!==r.renderState.layers||_.antialias,alpha:!0,depth:_.depth,stencil:_.stencil,framebufferScaleFactor:o}),r.updateRenderState({baseLayer:h}),g=new no(h.framebufferWidth,h.framebufferHeight,{format:lr,type:fs,colorSpace:e.outputColorSpace,stencilBuffer:_.stencil});else{let xe=null,we=null,Ee=null;_.depth&&(Ee=_.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,xe=_.stencil?Hc:ta,we=_.stencil?ea:hs);const ke={colorFormat:t.RGBA8,depthFormat:Ee,scaleFactor:o};d=new XRWebGLBinding(r,t),f=d.createProjectionLayer(ke),r.updateRenderState({layers:[f]}),g=new no(f.textureWidth,f.textureHeight,{format:lr,type:fs,depthTexture:new Wq(f.textureWidth,f.textureHeight,we,void 0,void 0,void 0,void 0,void 0,void 0,xe),stencilBuffer:_.stencil,colorSpace:e.outputColorSpace,samples:_.antialias?4:0}),e.properties.get(g).__ignoreDepthValues=f.ignoreDepthValues}g.isXRRenderTarget=!0,this.setFoveation(c),l=null,s=yield r.requestReferenceSpace(a),le.setContext(r),le.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}});return function(J){return B.apply(this,arguments)}}(),this.getEnvironmentBlendMode=function(){if(null!==r)return r.environmentBlendMode};const ne=new D,k=new D;function X(B,J){null===J?B.matrixWorld.copy(B.matrix):B.matrixWorld.multiplyMatrices(J.matrixWorld,B.matrix),B.matrixWorldInverse.copy(B.matrixWorld).invert()}this.updateCamera=function(B){if(null===r)return;T.near=C.near=x.near=B.near,T.far=C.far=x.far=B.far,(R!==T.near||w!==T.far)&&(r.updateRenderState({depthNear:T.near,depthFar:T.far}),R=T.near,w=T.far);const J=B.parent,xe=T.cameras;X(T,J);for(let we=0;we<xe.length;we++)X(xe[we],J);2===xe.length?function H(B,J,xe){ne.setFromMatrixPosition(J.matrixWorld),k.setFromMatrixPosition(xe.matrixWorld);const we=ne.distanceTo(k),Ee=J.projectionMatrix.elements,ke=xe.projectionMatrix.elements,qe=Ee[14]/(Ee[10]-1),He=Ee[14]/(Ee[10]+1),ut=(Ee[9]+1)/Ee[5],Mt=(Ee[9]-1)/Ee[5],je=(Ee[8]-1)/Ee[0],L=(ke[8]+1)/ke[0],be=qe*je,te=qe*L,fe=we/(-je+L),ae=fe*-je;J.matrixWorld.decompose(B.position,B.quaternion,B.scale),B.translateX(ae),B.translateZ(fe),B.matrixWorld.compose(B.position,B.quaternion,B.scale),B.matrixWorldInverse.copy(B.matrixWorld).invert();const Ge=qe+fe,Ae=He+fe;B.projectionMatrix.makePerspective(be-ae,te+(we-ae),ut*He/Ae*Ge,Mt*He/Ae*Ge,Ge,Ae),B.projectionMatrixInverse.copy(B.projectionMatrix).invert()}(T,x,C):T.projectionMatrix.copy(x.projectionMatrix),function K(B,J,xe){null===xe?B.matrix.copy(J.matrixWorld):(B.matrix.copy(xe.matrixWorld),B.matrix.invert(),B.matrix.multiply(J.matrixWorld)),B.matrix.decompose(B.position,B.quaternion,B.scale),B.updateMatrixWorld(!0),B.projectionMatrix.copy(J.projectionMatrix),B.projectionMatrixInverse.copy(J.projectionMatrixInverse),B.isPerspectiveCamera&&(B.fov=2*qc*Math.atan(1/B.projectionMatrix.elements[5]),B.zoom=1)}(B,T,J)},this.getCamera=function(){return T},this.getFoveation=function(){if(null!==f||null!==h)return c},this.setFoveation=function(B){c=B,null!==f&&(f.fixedFoveation=B),null!==h&&void 0!==h.fixedFoveation&&(h.fixedFoveation=B)};let de=null;const le=new jO;le.setAnimationLoop(function ie(B,J){if(u=J.getViewerPose(l||s),p=J,null!==u){const xe=u.views;null!==h&&(e.setRenderTargetFramebuffer(g,h.framebuffer),e.setRenderTarget(g));let we=!1;xe.length!==T.cameras.length&&(T.cameras.length=0,we=!0);for(let Ee=0;Ee<xe.length;Ee++){const ke=xe[Ee];let qe=null;if(null!==h)qe=h.getViewport(ke);else{const ut=d.getViewSubImage(f,ke);qe=ut.viewport,0===Ee&&(e.setRenderTargetTextures(g,ut.colorTexture,f.ignoreDepthValues?void 0:ut.depthStencilTexture),e.setRenderTarget(g))}let He=S[Ee];void 0===He&&(He=new Un,He.layers.enable(Ee),He.viewport=new $t,S[Ee]=He),He.matrix.fromArray(ke.transform.matrix),He.matrix.decompose(He.position,He.quaternion,He.scale),He.projectionMatrix.fromArray(ke.projectionMatrix),He.projectionMatrixInverse.copy(He.projectionMatrix).invert(),He.viewport.set(qe.x,qe.y,qe.width,qe.height),0===Ee&&(T.matrix.copy(He.matrix),T.matrix.decompose(T.position,T.quaternion,T.scale)),!0===we&&T.cameras.push(He)}}for(let xe=0;xe<v.length;xe++){const we=y[xe],Ee=v[xe];null!==we&&void 0!==Ee&&Ee.update(we,J,l||s)}de&&de(B,J),J.detectedPlanes&&i.dispatchEvent({type:"planesdetected",data:J}),p=null}),this.setAnimationLoop=function(B){de=B},this.dispose=function(){}}}function $q(n,e){function t(m,g){!0===m.matrixAutoUpdate&&m.updateMatrix(),g.value.copy(m.matrix)}function o(m,g){m.opacity.value=g.opacity,g.color&&m.diffuse.value.copy(g.color),g.emissive&&m.emissive.value.copy(g.emissive).multiplyScalar(g.emissiveIntensity),g.map&&(m.map.value=g.map,t(g.map,m.mapTransform)),g.alphaMap&&(m.alphaMap.value=g.alphaMap,t(g.alphaMap,m.alphaMapTransform)),g.bumpMap&&(m.bumpMap.value=g.bumpMap,t(g.bumpMap,m.bumpMapTransform),m.bumpScale.value=g.bumpScale,1===g.side&&(m.bumpScale.value*=-1)),g.normalMap&&(m.normalMap.value=g.normalMap,t(g.normalMap,m.normalMapTransform),m.normalScale.value.copy(g.normalScale),1===g.side&&m.normalScale.value.negate()),g.displacementMap&&(m.displacementMap.value=g.displacementMap,t(g.displacementMap,m.displacementMapTransform),m.displacementScale.value=g.displacementScale,m.displacementBias.value=g.displacementBias),g.emissiveMap&&(m.emissiveMap.value=g.emissiveMap,t(g.emissiveMap,m.emissiveMapTransform)),g.specularMap&&(m.specularMap.value=g.specularMap,t(g.specularMap,m.specularMapTransform)),g.alphaTest>0&&(m.alphaTest.value=g.alphaTest);const v=e.get(g).envMap;if(v&&(m.envMap.value=v,m.flipEnvMap.value=v.isCubeTexture&&!1===v.isRenderTargetTexture?-1:1,m.reflectivity.value=g.reflectivity,m.ior.value=g.ior,m.refractionRatio.value=g.refractionRatio),g.lightMap){m.lightMap.value=g.lightMap;const y=!0===n._useLegacyLights?Math.PI:1;m.lightMapIntensity.value=g.lightMapIntensity*y,t(g.lightMap,m.lightMapTransform)}g.aoMap&&(m.aoMap.value=g.aoMap,m.aoMapIntensity.value=g.aoMapIntensity,t(g.aoMap,m.aoMapTransform))}return{refreshFogUniforms:function i(m,g){g.color.getRGB(m.fogColor.value,WO(n)),g.isFog?(m.fogNear.value=g.near,m.fogFar.value=g.far):g.isFogExp2&&(m.fogDensity.value=g.density)},refreshMaterialUniforms:function r(m,g,v,y,x){g.isMeshBasicMaterial||g.isMeshLambertMaterial?o(m,g):g.isMeshToonMaterial?(o(m,g),function d(m,g){g.gradientMap&&(m.gradientMap.value=g.gradientMap)}(m,g)):g.isMeshPhongMaterial?(o(m,g),function u(m,g){m.specular.value.copy(g.specular),m.shininess.value=Math.max(g.shininess,1e-4)}(m,g)):g.isMeshStandardMaterial?(o(m,g),function f(m,g){m.metalness.value=g.metalness,g.metalnessMap&&(m.metalnessMap.value=g.metalnessMap,t(g.metalnessMap,m.metalnessMapTransform)),m.roughness.value=g.roughness,g.roughnessMap&&(m.roughnessMap.value=g.roughnessMap,t(g.roughnessMap,m.roughnessMapTransform)),e.get(g).envMap&&(m.envMapIntensity.value=g.envMapIntensity)}(m,g),g.isMeshPhysicalMaterial&&function h(m,g,v){m.ior.value=g.ior,g.sheen>0&&(m.sheenColor.value.copy(g.sheenColor).multiplyScalar(g.sheen),m.sheenRoughness.value=g.sheenRoughness,g.sheenColorMap&&(m.sheenColorMap.value=g.sheenColorMap,t(g.sheenColorMap,m.sheenColorMapTransform)),g.sheenRoughnessMap&&(m.sheenRoughnessMap.value=g.sheenRoughnessMap,t(g.sheenRoughnessMap,m.sheenRoughnessMapTransform))),g.clearcoat>0&&(m.clearcoat.value=g.clearcoat,m.clearcoatRoughness.value=g.clearcoatRoughness,g.clearcoatMap&&(m.clearcoatMap.value=g.clearcoatMap,t(g.clearcoatMap,m.clearcoatMapTransform)),g.clearcoatRoughnessMap&&(m.clearcoatRoughnessMap.value=g.clearcoatRoughnessMap,t(g.clearcoatRoughnessMap,m.clearcoatRoughnessMapTransform)),g.clearcoatNormalMap&&(m.clearcoatNormalMap.value=g.clearcoatNormalMap,t(g.clearcoatNormalMap,m.clearcoatNormalMapTransform),m.clearcoatNormalScale.value.copy(g.clearcoatNormalScale),1===g.side&&m.clearcoatNormalScale.value.negate())),g.iridescence>0&&(m.iridescence.value=g.iridescence,m.iridescenceIOR.value=g.iridescenceIOR,m.iridescenceThicknessMinimum.value=g.iridescenceThicknessRange[0],m.iridescenceThicknessMaximum.value=g.iridescenceThicknessRange[1],g.iridescenceMap&&(m.iridescenceMap.value=g.iridescenceMap,t(g.iridescenceMap,m.iridescenceMapTransform)),g.iridescenceThicknessMap&&(m.iridescenceThicknessMap.value=g.iridescenceThicknessMap,t(g.iridescenceThicknessMap,m.iridescenceThicknessMapTransform))),g.transmission>0&&(m.transmission.value=g.transmission,m.transmissionSamplerMap.value=v.texture,m.transmissionSamplerSize.value.set(v.width,v.height),g.transmissionMap&&(m.transmissionMap.value=g.transmissionMap,t(g.transmissionMap,m.transmissionMapTransform)),m.thickness.value=g.thickness,g.thicknessMap&&(m.thicknessMap.value=g.thicknessMap,t(g.thicknessMap,m.thicknessMapTransform)),m.attenuationDistance.value=g.attenuationDistance,m.attenuationColor.value.copy(g.attenuationColor)),g.anisotropy>0&&(m.anisotropyVector.value.set(g.anisotropy*Math.cos(g.anisotropyRotation),g.anisotropy*Math.sin(g.anisotropyRotation)),g.anisotropyMap&&(m.anisotropyMap.value=g.anisotropyMap,t(g.anisotropyMap,m.anisotropyMapTransform))),m.specularIntensity.value=g.specularIntensity,m.specularColor.value.copy(g.specularColor),g.specularColorMap&&(m.specularColorMap.value=g.specularColorMap,t(g.specularColorMap,m.specularColorMapTransform)),g.specularIntensityMap&&(m.specularIntensityMap.value=g.specularIntensityMap,t(g.specularIntensityMap,m.specularIntensityMapTransform))}(m,g,x)):g.isMeshMatcapMaterial?(o(m,g),function p(m,g){g.matcap&&(m.matcap.value=g.matcap)}(m,g)):g.isMeshDepthMaterial?o(m,g):g.isMeshDistanceMaterial?(o(m,g),function _(m,g){const v=e.get(g).light;m.referencePosition.value.setFromMatrixPosition(v.matrixWorld),m.nearDistance.value=v.shadow.camera.near,m.farDistance.value=v.shadow.camera.far}(m,g)):g.isMeshNormalMaterial?o(m,g):g.isLineBasicMaterial?(function s(m,g){m.diffuse.value.copy(g.color),m.opacity.value=g.opacity,g.map&&(m.map.value=g.map,t(g.map,m.mapTransform))}(m,g),g.isLineDashedMaterial&&function a(m,g){m.dashSize.value=g.dashSize,m.totalSize.value=g.dashSize+g.gapSize,m.scale.value=g.scale}(m,g)):g.isPointsMaterial?function c(m,g,v,y){m.diffuse.value.copy(g.color),m.opacity.value=g.opacity,m.size.value=g.size*v,m.scale.value=.5*y,g.map&&(m.map.value=g.map,t(g.map,m.uvTransform)),g.alphaMap&&(m.alphaMap.value=g.alphaMap,t(g.alphaMap,m.alphaMapTransform)),g.alphaTest>0&&(m.alphaTest.value=g.alphaTest)}(m,g,v,y):g.isSpriteMaterial?function l(m,g){m.diffuse.value.copy(g.color),m.opacity.value=g.opacity,m.rotation.value=g.rotation,g.map&&(m.map.value=g.map,t(g.map,m.mapTransform)),g.alphaMap&&(m.alphaMap.value=g.alphaMap,t(g.alphaMap,m.alphaMapTransform)),g.alphaTest>0&&(m.alphaTest.value=g.alphaTest)}(m,g):g.isShadowMaterial?(m.color.value.copy(g.color),m.opacity.value=g.opacity):g.isShaderMaterial&&(g.uniformsNeedUpdate=!1)}}}function qq(n,e,t,i){let r={},o={},s=[];const a=t.isWebGL2?n.getParameter(n.MAX_UNIFORM_BUFFER_BINDINGS):0;function h(v,y,x){const C=v.value;if(void 0===x[y]){if("number"==typeof C)x[y]=C;else{const S=Array.isArray(C)?C:[C],T=[];for(let R=0;R<S.length;R++)T.push(S[R].clone());x[y]=T}return!0}if("number"==typeof C){if(x[y]!==C)return x[y]=C,!0}else{const S=Array.isArray(x[y])?x[y]:[x[y]],T=Array.isArray(C)?C:[C];for(let R=0;R<S.length;R++){const w=S[R];if(!1===w.equals(T[R]))return w.copy(T[R]),!0}}return!1}function _(v){const y={boundary:0,storage:0};return"number"==typeof v?(y.boundary=4,y.storage=4):v.isVector2?(y.boundary=8,y.storage=8):v.isVector3||v.isColor?(y.boundary=16,y.storage=12):v.isVector4?(y.boundary=16,y.storage=16):v.isMatrix3?(y.boundary=48,y.storage=48):v.isMatrix4?(y.boundary=64,y.storage=64):v.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",v),y}function m(v){const y=v.target;y.removeEventListener("dispose",m);const x=s.indexOf(y.__bindingPointIndex);s.splice(x,1),n.deleteBuffer(r[y.id]),delete r[y.id],delete o[y.id]}return{bind:function c(v,y){i.uniformBlockBinding(v,y.program)},update:function l(v,y){let x=r[v.id];void 0===x&&(function p(v){const y=v.uniforms;let x=0;let S=0;for(let T=0,R=y.length;T<R;T++){const w=y[T],A={boundary:0,storage:0},z=Array.isArray(w.value)?w.value:[w.value];for(let Y=0,ne=z.length;Y<ne;Y++){const H=_(z[Y]);A.boundary+=H.boundary,A.storage+=H.storage}w.__data=new Float32Array(A.storage/Float32Array.BYTES_PER_ELEMENT),w.__offset=x,T>0&&(S=x%16,0!==S&&16-S-A.boundary<0&&(x+=16-S,w.__offset=x)),x+=A.storage}S=x%16,S>0&&(x+=16-S),v.__size=x,v.__cache={}}(v),x=function u(v){const y=function d(){for(let v=0;v<a;v++)if(-1===s.indexOf(v))return s.push(v),v;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}();v.__bindingPointIndex=y;const x=n.createBuffer(),C=v.__size,S=v.usage;return n.bindBuffer(n.UNIFORM_BUFFER,x),n.bufferData(n.UNIFORM_BUFFER,C,S),n.bindBuffer(n.UNIFORM_BUFFER,null),n.bindBufferBase(n.UNIFORM_BUFFER,y,x),x}(v),r[v.id]=x,v.addEventListener("dispose",m)),i.updateUBOMapping(v,y.program);const S=e.render.frame;o[v.id]!==S&&(function f(v){const x=v.uniforms,C=v.__cache;n.bindBuffer(n.UNIFORM_BUFFER,r[v.id]);for(let S=0,T=x.length;S<T;S++){const R=x[S];if(!0===h(R,S,C)){const w=R.__offset,A=Array.isArray(R.value)?R.value:[R.value];let z=0;for(let Y=0;Y<A.length;Y++){const ne=A[Y],k=_(ne);"number"==typeof ne?(R.__data[0]=ne,n.bufferSubData(n.UNIFORM_BUFFER,w+z,R.__data)):ne.isMatrix3?(R.__data[0]=ne.elements[0],R.__data[1]=ne.elements[1],R.__data[2]=ne.elements[2],R.__data[3]=ne.elements[0],R.__data[4]=ne.elements[3],R.__data[5]=ne.elements[4],R.__data[6]=ne.elements[5],R.__data[7]=ne.elements[0],R.__data[8]=ne.elements[6],R.__data[9]=ne.elements[7],R.__data[10]=ne.elements[8],R.__data[11]=ne.elements[0]):(ne.toArray(R.__data,z),z+=k.storage/Float32Array.BYTES_PER_ELEMENT)}n.bufferSubData(n.UNIFORM_BUFFER,w,R.__data)}}n.bindBuffer(n.UNIFORM_BUFFER,null)}(v),o[v.id]=S)},dispose:function g(){for(const v in r)n.deleteBuffer(r[v]);s=[],r={},o={}}}}class zy{constructor(e={}){const{canvas:t=EW(),context:i=null,depth:r=!0,stencil:o=!0,alpha:s=!1,antialias:a=!1,premultipliedAlpha:c=!0,preserveDrawingBuffer:l=!1,powerPreference:u="default",failIfMajorPerformanceCaveat:d=!1}=e;let f;this.isWebGLRenderer=!0,f=null!==i?i.getContextAttributes().alpha:s;const h=new Uint32Array(4),p=new Int32Array(4);let _=null,m=null;const g=[],v=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=nn,this._useLegacyLights=!1,this.toneMapping=ls,this.toneMappingExposure=1;const y=this;let x=!1,C=0,S=0,T=null,R=-1,w=null;const A=new $t,z=new $t;let Y=null;const ne=new ye(0);let k=0,H=t.width,X=t.height,K=1,de=null,ie=null;const le=new $t(0,0,H,X),B=new $t(0,0,H,X);let J=!1;const xe=new Iy;let we=!1,Ee=!1,ke=null;const qe=new nt,He=new oe,ut=new D,Mt={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function je(){return null===T?K:1}let te,fe,ae,Ge,Ae,Le,ft,Et,vn,N,E,G,he,ue,pe,Fe,ve,Pe,st,kt,me,qt,pt,at,L=i;function be(O,V){for(let W=0;W<O.length;W++){const $=t.getContext(O[W],V);if(null!==$)return $}return null}try{const O={alpha:!0,depth:r,stencil:o,antialias:a,premultipliedAlpha:c,preserveDrawingBuffer:l,powerPreference:u,failIfMajorPerformanceCaveat:d};if("setAttribute"in t&&t.setAttribute("data-engine","three.js r158"),t.addEventListener("webglcontextlost",It,!1),t.addEventListener("webglcontextrestored",F,!1),t.addEventListener("webglcontextcreationerror",Te,!1),null===L){const V=["webgl2","webgl","experimental-webgl"];if(!0===y.isWebGL1Renderer&&V.shift(),L=be(V,O),null===L)throw be(V)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}typeof WebGLRenderingContext<"u"&&L instanceof WebGLRenderingContext&&console.warn("THREE.WebGLRenderer: WebGL 1 support was deprecated in r153 and will be removed in r163."),void 0===L.getShaderPrecisionFormat&&(L.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(O){throw console.error("THREE.WebGLRenderer: "+O.message),O}function Xe(){te=new o$(L),fe=new Q7(L,te,e),te.init(fe),qt=new zq(L,te,fe),ae=new Bq(L,te,fe),Ge=new c$(L),Ae=new Pq,Le=new Vq(L,te,ae,Ae,fe,qt,Ge),ft=new t$(y),Et=new r$(y),vn=new JW(L,fe),pt=new K7(L,te,vn,fe),N=new s$(L,vn,Ge,pt),E=new f$(L,N,vn,Ge),st=new d$(L,fe,Le),Fe=new e$(Ae),G=new Eq(y,ft,Et,te,fe,pt,Fe),he=new $q(y,Ae),ue=new Aq,pe=new Lq(te,fe),Pe=new Z7(y,ft,Et,ae,E,f,c),ve=new Uq(y,E,fe),at=new qq(L,Ge,fe,ae),kt=new J7(L,te,Ge,fe),me=new a$(L,te,Ge,fe),Ge.programs=G.programs,y.capabilities=fe,y.extensions=te,y.properties=Ae,y.renderLists=ue,y.shadowMap=ve,y.state=ae,y.info=Ge}Xe();const Re=new jq(y,L);function It(O){O.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),x=!0}function F(){console.log("THREE.WebGLRenderer: Context Restored."),x=!1;const O=Ge.autoReset,V=ve.enabled,W=ve.autoUpdate,j=ve.needsUpdate,$=ve.type;Xe(),Ge.autoReset=O,ve.enabled=V,ve.autoUpdate=W,ve.needsUpdate=j,ve.type=$}function Te(O){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",O.statusMessage)}function _e(O){const V=O.target;V.removeEventListener("dispose",_e),function Q(O){(function Me(O){const V=Ae.get(O).programs;void 0!==V&&(V.forEach(function(W){G.releaseProgram(W)}),O.isShaderMaterial&&G.releaseShaderCache(O))})(O),Ae.remove(O)}(V)}function Ke(O,V,W){!0===O.transparent&&2===O.side&&!1===O.forceSinglePass?(O.side=1,O.needsUpdate=!0,Hg(O,V,W),O.side=0,O.needsUpdate=!0,Hg(O,V,W),O.side=2):Hg(O,V,W)}this.xr=Re,this.getContext=function(){return L},this.getContextAttributes=function(){return L.getContextAttributes()},this.forceContextLoss=function(){const O=te.get("WEBGL_lose_context");O&&O.loseContext()},this.forceContextRestore=function(){const O=te.get("WEBGL_lose_context");O&&O.restoreContext()},this.getPixelRatio=function(){return K},this.setPixelRatio=function(O){void 0!==O&&(K=O,this.setSize(H,X,!1))},this.getSize=function(O){return O.set(H,X)},this.setSize=function(O,V,W=!0){Re.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(H=O,X=V,t.width=Math.floor(O*K),t.height=Math.floor(V*K),!0===W&&(t.style.width=O+"px",t.style.height=V+"px"),this.setViewport(0,0,O,V))},this.getDrawingBufferSize=function(O){return O.set(H*K,X*K).floor()},this.setDrawingBufferSize=function(O,V,W){H=O,X=V,K=W,t.width=Math.floor(O*W),t.height=Math.floor(V*W),this.setViewport(0,0,O,V)},this.getCurrentViewport=function(O){return O.copy(A)},this.getViewport=function(O){return O.copy(le)},this.setViewport=function(O,V,W,j){O.isVector4?le.set(O.x,O.y,O.z,O.w):le.set(O,V,W,j),ae.viewport(A.copy(le).multiplyScalar(K).floor())},this.getScissor=function(O){return O.copy(B)},this.setScissor=function(O,V,W,j){O.isVector4?B.set(O.x,O.y,O.z,O.w):B.set(O,V,W,j),ae.scissor(z.copy(B).multiplyScalar(K).floor())},this.getScissorTest=function(){return J},this.setScissorTest=function(O){ae.setScissorTest(J=O)},this.setOpaqueSort=function(O){de=O},this.setTransparentSort=function(O){ie=O},this.getClearColor=function(O){return O.copy(Pe.getClearColor())},this.setClearColor=function(){Pe.setClearColor.apply(Pe,arguments)},this.getClearAlpha=function(){return Pe.getClearAlpha()},this.setClearAlpha=function(){Pe.setClearAlpha.apply(Pe,arguments)},this.clear=function(O=!0,V=!0,W=!0){let j=0;if(O){let $=!1;if(null!==T){const Oe=T.texture.format;$=1033===Oe||1031===Oe||1029===Oe}if($){const Oe=T.texture.type,ze=Oe===fs||Oe===hs||1012===Oe||Oe===ea||1017===Oe||1018===Oe,Je=Pe.getClearColor(),ct=Pe.getClearAlpha(),Ct=Je.r,gt=Je.g,yt=Je.b;ze?(h[0]=Ct,h[1]=gt,h[2]=yt,h[3]=ct,L.clearBufferuiv(L.COLOR,0,h)):(p[0]=Ct,p[1]=gt,p[2]=yt,p[3]=ct,L.clearBufferiv(L.COLOR,0,p))}else j|=L.COLOR_BUFFER_BIT}V&&(j|=L.DEPTH_BUFFER_BIT),W&&(j|=L.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),L.clear(j)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",It,!1),t.removeEventListener("webglcontextrestored",F,!1),t.removeEventListener("webglcontextcreationerror",Te,!1),ue.dispose(),pe.dispose(),Ae.dispose(),ft.dispose(),Et.dispose(),E.dispose(),pt.dispose(),at.dispose(),G.dispose(),Re.dispose(),Re.removeEventListener("sessionstart",vr),Re.removeEventListener("sessionend",sn),ke&&(ke.dispose(),ke=null),bi.stop()},this.renderBufferDirect=function(O,V,W,j,$,Oe){null===V&&(V=Mt);const ze=$.isMesh&&$.matrixWorld.determinant()<0,Je=function CQ(O,V,W,j,$){!0!==V.isScene&&(V=Mt),Le.resetTextureUnits();const Oe=V.fog,Je=null===T?y.outputColorSpace:!0===T.isXRRenderTarget?T.texture.colorSpace:Jn,ct=(j.isMeshStandardMaterial?Et:ft).get(j.envMap||(j.isMeshStandardMaterial?V.environment:null)),Ct=!0===j.vertexColors&&!!W.attributes.color&&4===W.attributes.color.itemSize,gt=!!W.attributes.tangent&&(!!j.normalMap||j.anisotropy>0),yt=!!W.morphAttributes.position,En=!!W.morphAttributes.normal,Ki=!!W.morphAttributes.color;let jn=ls;j.toneMapped&&(null===T||!0===T.isXRRenderTarget)&&(jn=y.toneMapping);const Go=W.morphAttributes.position||W.morphAttributes.normal||W.morphAttributes.color,yn=void 0!==Go?Go.length:0,Pt=Ae.get(j),cM=m.state.lights;!0!==we||!0!==Ee&&O===w||Fe.setState(j,O,O===w&&j.id===R);let Rn=!1;j.version===Pt.__version?(Pt.needsLights&&Pt.lightsStateVersion!==cM.state.version||Pt.outputColorSpace!==Je||$.isInstancedMesh&&!1===Pt.instancing||!$.isInstancedMesh&&!0===Pt.instancing||$.isSkinnedMesh&&!1===Pt.skinning||!$.isSkinnedMesh&&!0===Pt.skinning||$.isInstancedMesh&&!0===Pt.instancingColor&&null===$.instanceColor||$.isInstancedMesh&&!1===Pt.instancingColor&&null!==$.instanceColor||Pt.envMap!==ct||!0===j.fog&&Pt.fog!==Oe||void 0!==Pt.numClippingPlanes&&(Pt.numClippingPlanes!==Fe.numPlanes||Pt.numIntersection!==Fe.numIntersection)||Pt.vertexAlphas!==Ct||Pt.vertexTangents!==gt||Pt.morphTargets!==yt||Pt.morphNormals!==En||Pt.morphColors!==Ki||Pt.toneMapping!==jn||!0===fe.isWebGL2&&Pt.morphTargetsCount!==yn)&&(Rn=!0):(Rn=!0,Pt.__version=j.version);let Aa=Pt.currentProgram;!0===Rn&&(Aa=Hg(j,V,$));let sR=!1,qd=!1,lM=!1;const Ci=Aa.getUniforms(),Oa=Pt.uniforms;if(ae.useProgram(Aa.program)&&(sR=!0,qd=!0,lM=!0),j.id!==R&&(R=j.id,qd=!0),sR||w!==O){Ci.setValue(L,"projectionMatrix",O.projectionMatrix),Ci.setValue(L,"viewMatrix",O.matrixWorldInverse);const Ji=Ci.map.cameraPosition;void 0!==Ji&&Ji.setValue(L,ut.setFromMatrixPosition(O.matrixWorld)),fe.logarithmicDepthBuffer&&Ci.setValue(L,"logDepthBufFC",2/(Math.log(O.far+1)/Math.LN2)),(j.isMeshPhongMaterial||j.isMeshToonMaterial||j.isMeshLambertMaterial||j.isMeshBasicMaterial||j.isMeshStandardMaterial||j.isShaderMaterial)&&Ci.setValue(L,"isOrthographic",!0===O.isOrthographicCamera),w!==O&&(w=O,qd=!0,lM=!0)}if($.isSkinnedMesh){Ci.setOptional(L,$,"bindMatrix"),Ci.setOptional(L,$,"bindMatrixInverse");const Ji=$.skeleton;Ji&&(fe.floatVertexTextures?(null===Ji.boneTexture&&Ji.computeBoneTexture(),Ci.setValue(L,"boneTexture",Ji.boneTexture,Le),Ci.setValue(L,"boneTextureSize",Ji.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}const uM=W.morphAttributes;if((void 0!==uM.position||void 0!==uM.normal||void 0!==uM.color&&!0===fe.isWebGL2)&&st.update($,W,Aa),(qd||Pt.receiveShadow!==$.receiveShadow)&&(Pt.receiveShadow=$.receiveShadow,Ci.setValue(L,"receiveShadow",$.receiveShadow)),j.isMeshGouraudMaterial&&null!==j.envMap&&(Oa.envMap.value=ct,Oa.flipEnvMap.value=ct.isCubeTexture&&!1===ct.isRenderTargetTexture?-1:1),qd&&(Ci.setValue(L,"toneMappingExposure",y.toneMappingExposure),Pt.needsLights&&function wQ(O,V){O.ambientLightColor.needsUpdate=V,O.lightProbe.needsUpdate=V,O.directionalLights.needsUpdate=V,O.directionalLightShadows.needsUpdate=V,O.pointLights.needsUpdate=V,O.pointLightShadows.needsUpdate=V,O.spotLights.needsUpdate=V,O.spotLightShadows.needsUpdate=V,O.rectAreaLights.needsUpdate=V,O.hemisphereLights.needsUpdate=V}(Oa,lM),Oe&&!0===j.fog&&he.refreshFogUniforms(Oa,Oe),he.refreshMaterialUniforms(Oa,j,K,X,ke),qp.upload(L,rR(Pt),Oa,Le)),j.isShaderMaterial&&!0===j.uniformsNeedUpdate&&(qp.upload(L,rR(Pt),Oa,Le),j.uniformsNeedUpdate=!1),j.isSpriteMaterial&&Ci.setValue(L,"center",$.center),Ci.setValue(L,"modelViewMatrix",$.modelViewMatrix),Ci.setValue(L,"normalMatrix",$.normalMatrix),Ci.setValue(L,"modelMatrix",$.matrixWorld),j.isShaderMaterial||j.isRawShaderMaterial){const Ji=j.uniformsGroups;for(let dM=0,EQ=Ji.length;dM<EQ;dM++)if(fe.isWebGL2){const aR=Ji[dM];at.update(aR,Aa),at.bind(aR,Aa)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return Aa}(O,V,W,j,$);ae.setMaterial(j,ze);let ct=W.index,Ct=1;if(!0===j.wireframe){if(ct=N.getWireframeAttribute(W),void 0===ct)return;Ct=2}const gt=W.drawRange,yt=W.attributes.position;let En=gt.start*Ct,Ki=(gt.start+gt.count)*Ct;null!==Oe&&(En=Math.max(En,Oe.start*Ct),Ki=Math.min(Ki,(Oe.start+Oe.count)*Ct)),null!==ct?(En=Math.max(En,0),Ki=Math.min(Ki,ct.count)):null!=yt&&(En=Math.max(En,0),Ki=Math.min(Ki,yt.count));const jn=Ki-En;if(jn<0||jn===1/0)return;pt.setup($,j,Je,W,ct);let Go,yn=kt;if(null!==ct&&(Go=vn.get(ct),yn=me,yn.setIndex(Go)),$.isMesh)!0===j.wireframe?(ae.setLineWidth(j.wireframeLinewidth*je()),yn.setMode(L.LINES)):yn.setMode(L.TRIANGLES);else if($.isLine){let Pt=j.linewidth;void 0===Pt&&(Pt=1),ae.setLineWidth(Pt*je()),yn.setMode($.isLineSegments?L.LINES:$.isLineLoop?L.LINE_LOOP:L.LINE_STRIP)}else $.isPoints?yn.setMode(L.POINTS):$.isSprite&&yn.setMode(L.TRIANGLES);if($.isInstancedMesh)yn.renderInstances(En,jn,$.count);else if(W.isInstancedBufferGeometry){const cM=Math.min(W.instanceCount,void 0!==W._maxInstanceCount?W._maxInstanceCount:1/0);yn.renderInstances(En,jn,cM)}else yn.render(En,jn)},this.compile=function(O,V,W=null){null===W&&(W=O),m=pe.get(W),m.init(),v.push(m),W.traverseVisible(function($){$.isLight&&$.layers.test(V.layers)&&(m.pushLight($),$.castShadow&&m.pushShadow($))}),O!==W&&O.traverseVisible(function($){$.isLight&&$.layers.test(V.layers)&&(m.pushLight($),$.castShadow&&m.pushShadow($))}),m.setupLights(y._useLegacyLights);const j=new Set;return O.traverse(function($){const Oe=$.material;if(Oe)if(Array.isArray(Oe))for(let ze=0;ze<Oe.length;ze++){const Je=Oe[ze];Ke(Je,W,$),j.add(Je)}else Ke(Oe,W,$),j.add(Oe)}),v.pop(),m=null,j},this.compileAsync=function(O,V,W=null){const j=this.compile(O,V,W);return new Promise($=>{function Oe(){j.forEach(function(ze){Ae.get(ze).currentProgram.isReady()&&j.delete(ze)}),0!==j.size?setTimeout(Oe,10):$(O)}null!==te.get("KHR_parallel_shader_compile")?Oe():setTimeout(Oe,10)})};let Ft=null;function vr(){bi.stop()}function sn(){bi.start()}const bi=new jO;function co(O,V,W,j){if(!1===O.visible)return;if(O.layers.test(V.layers))if(O.isGroup)W=O.renderOrder;else if(O.isLOD)!0===O.autoUpdate&&O.update(V);else if(O.isLight)m.pushLight(O),O.castShadow&&m.pushShadow(O);else if(O.isSprite){if(!O.frustumCulled||xe.intersectsSprite(O)){j&&ut.setFromMatrixPosition(O.matrixWorld).applyMatrix4(qe);const ze=E.update(O),Je=O.material;Je.visible&&_.push(O,ze,Je,W,ut.z,null)}}else if((O.isMesh||O.isLine||O.isPoints)&&(!O.frustumCulled||xe.intersectsObject(O))){const ze=E.update(O),Je=O.material;if(j&&(void 0!==O.boundingSphere?(null===O.boundingSphere&&O.computeBoundingSphere(),ut.copy(O.boundingSphere.center)):(null===ze.boundingSphere&&ze.computeBoundingSphere(),ut.copy(ze.boundingSphere.center)),ut.applyMatrix4(O.matrixWorld).applyMatrix4(qe)),Array.isArray(Je)){const ct=ze.groups;for(let Ct=0,gt=ct.length;Ct<gt;Ct++){const yt=ct[Ct],En=Je[yt.materialIndex];En&&En.visible&&_.push(O,ze,En,W,ut.z,yt)}}else Je.visible&&_.push(O,ze,Je,W,ut.z,null)}const Oe=O.children;for(let ze=0,Je=Oe.length;ze<Je;ze++)co(Oe[ze],V,W,j)}function nR(O,V,W,j){const $=O.opaque,Oe=O.transmissive,ze=O.transparent;m.setupLightsView(W),!0===we&&Fe.setGlobalState(y.clippingPlanes,W),Oe.length>0&&function bQ(O,V,W,j){if(null!==(!0===W.isScene?W.overrideMaterial:null))return;const Oe=fe.isWebGL2;null===ke&&(ke=new no(1,1,{generateMipmaps:!0,type:te.has("EXT_color_buffer_half_float")?ud:fs,minFilter:Ao,samples:Oe?4:0})),y.getDrawingBufferSize(He),Oe?ke.setSize(He.x,He.y):ke.setSize(Mp(He.x),Mp(He.y));const ze=y.getRenderTarget();y.setRenderTarget(ke),y.getClearColor(ne),k=y.getClearAlpha(),k<1&&y.setClearColor(16777215,.5),y.clear();const Je=y.toneMapping;y.toneMapping=ls,zg(O,W,j),Le.updateMultisampleRenderTarget(ke),Le.updateRenderTargetMipmap(ke);let ct=!1;for(let Ct=0,gt=V.length;Ct<gt;Ct++){const yt=V[Ct],En=yt.object,Ki=yt.geometry,jn=yt.material,Go=yt.group;if(2===jn.side&&En.layers.test(j.layers)){const yn=jn.side;jn.side=1,jn.needsUpdate=!0,iR(En,W,j,Ki,jn,Go),jn.side=yn,jn.needsUpdate=!0,ct=!0}}!0===ct&&(Le.updateMultisampleRenderTarget(ke),Le.updateRenderTargetMipmap(ke)),y.setRenderTarget(ze),y.setClearColor(ne,k),y.toneMapping=Je}($,Oe,V,W),j&&ae.viewport(A.copy(j)),$.length>0&&zg($,V,W),Oe.length>0&&zg(Oe,V,W),ze.length>0&&zg(ze,V,W),ae.buffers.depth.setTest(!0),ae.buffers.depth.setMask(!0),ae.buffers.color.setMask(!0),ae.setPolygonOffset(!1)}function zg(O,V,W){const j=!0===V.isScene?V.overrideMaterial:null;for(let $=0,Oe=O.length;$<Oe;$++){const ze=O[$],Je=ze.object,ct=ze.geometry,Ct=null===j?ze.material:j,gt=ze.group;Je.layers.test(W.layers)&&iR(Je,V,W,ct,Ct,gt)}}function iR(O,V,W,j,$,Oe){O.onBeforeRender(y,V,W,j,$,Oe),O.modelViewMatrix.multiplyMatrices(W.matrixWorldInverse,O.matrixWorld),O.normalMatrix.getNormalMatrix(O.modelViewMatrix),$.onBeforeRender(y,V,W,j,O,Oe),!0===$.transparent&&2===$.side&&!1===$.forceSinglePass?($.side=1,$.needsUpdate=!0,y.renderBufferDirect(W,V,j,$,O,Oe),$.side=0,$.needsUpdate=!0,y.renderBufferDirect(W,V,j,$,O,Oe),$.side=2):y.renderBufferDirect(W,V,j,$,O,Oe),O.onAfterRender(y,V,W,j,$,Oe)}function Hg(O,V,W){!0!==V.isScene&&(V=Mt);const j=Ae.get(O),$=m.state.lights,ze=$.state.version,Je=G.getParameters(O,$.state,m.state.shadowsArray,V,W),ct=G.getProgramCacheKey(Je);let Ct=j.programs;j.environment=O.isMeshStandardMaterial?V.environment:null,j.fog=V.fog,j.envMap=(O.isMeshStandardMaterial?Et:ft).get(O.envMap||j.environment),void 0===Ct&&(O.addEventListener("dispose",_e),Ct=new Map,j.programs=Ct);let gt=Ct.get(ct);if(void 0!==gt){if(j.currentProgram===gt&&j.lightsStateVersion===ze)return oR(O,Je),gt}else Je.uniforms=G.getUniforms(O),O.onBuild(W,Je,y),O.onBeforeCompile(Je,y),gt=G.acquireProgram(Je,ct),Ct.set(ct,gt),j.uniforms=Je.uniforms;const yt=j.uniforms;return(!O.isShaderMaterial&&!O.isRawShaderMaterial||!0===O.clipping)&&(yt.clippingPlanes=Fe.uniform),oR(O,Je),j.needsLights=function SQ(O){return O.isMeshLambertMaterial||O.isMeshToonMaterial||O.isMeshPhongMaterial||O.isMeshStandardMaterial||O.isShadowMaterial||O.isShaderMaterial&&!0===O.lights}(O),j.lightsStateVersion=ze,j.needsLights&&(yt.ambientLightColor.value=$.state.ambient,yt.lightProbe.value=$.state.probe,yt.directionalLights.value=$.state.directional,yt.directionalLightShadows.value=$.state.directionalShadow,yt.spotLights.value=$.state.spot,yt.spotLightShadows.value=$.state.spotShadow,yt.rectAreaLights.value=$.state.rectArea,yt.ltc_1.value=$.state.rectAreaLTC1,yt.ltc_2.value=$.state.rectAreaLTC2,yt.pointLights.value=$.state.point,yt.pointLightShadows.value=$.state.pointShadow,yt.hemisphereLights.value=$.state.hemi,yt.directionalShadowMap.value=$.state.directionalShadowMap,yt.directionalShadowMatrix.value=$.state.directionalShadowMatrix,yt.spotShadowMap.value=$.state.spotShadowMap,yt.spotLightMatrix.value=$.state.spotLightMatrix,yt.spotLightMap.value=$.state.spotLightMap,yt.pointShadowMap.value=$.state.pointShadowMap,yt.pointShadowMatrix.value=$.state.pointShadowMatrix),j.currentProgram=gt,j.uniformsList=null,gt}function rR(O){if(null===O.uniformsList){const V=O.currentProgram.getUniforms();O.uniformsList=qp.seqWithValue(V.seq,O.uniforms)}return O.uniformsList}function oR(O,V){const W=Ae.get(O);W.outputColorSpace=V.outputColorSpace,W.instancing=V.instancing,W.instancingColor=V.instancingColor,W.skinning=V.skinning,W.morphTargets=V.morphTargets,W.morphNormals=V.morphNormals,W.morphColors=V.morphColors,W.morphTargetsCount=V.morphTargetsCount,W.numClippingPlanes=V.numClippingPlanes,W.numIntersection=V.numClipIntersection,W.vertexAlphas=V.vertexAlphas,W.vertexTangents=V.vertexTangents,W.toneMapping=V.toneMapping}bi.setAnimationLoop(function In(O){Ft&&Ft(O)}),typeof self<"u"&&bi.setContext(self),this.setAnimationLoop=function(O){Ft=O,Re.setAnimationLoop(O),null===O?bi.stop():bi.start()},Re.addEventListener("sessionstart",vr),Re.addEventListener("sessionend",sn),this.render=function(O,V){if(void 0===V||!0===V.isCamera){if(!0!==x){if(!0===O.matrixWorldAutoUpdate&&O.updateMatrixWorld(),null===V.parent&&!0===V.matrixWorldAutoUpdate&&V.updateMatrixWorld(),!0===Re.enabled&&!0===Re.isPresenting&&(!0===Re.cameraAutoUpdate&&Re.updateCamera(V),V=Re.getCamera()),!0===O.isScene&&O.onBeforeRender(y,O,V,T),m=pe.get(O,v.length),m.init(),v.push(m),qe.multiplyMatrices(V.projectionMatrix,V.matrixWorldInverse),xe.setFromProjectionMatrix(qe),Ee=this.localClippingEnabled,we=Fe.init(this.clippingPlanes,Ee),_=ue.get(O,g.length),_.init(),g.push(_),co(O,V,0,y.sortObjects),_.finish(),!0===y.sortObjects&&_.sort(de,ie),this.info.render.frame++,!0===we&&Fe.beginShadows(),ve.render(m.state.shadowsArray,O,V),!0===we&&Fe.endShadows(),!0===this.info.autoReset&&this.info.reset(),Pe.render(_,O),m.setupLights(y._useLegacyLights),V.isArrayCamera){const j=V.cameras;for(let $=0,Oe=j.length;$<Oe;$++){const ze=j[$];nR(_,O,ze,ze.viewport)}}else nR(_,O,V);null!==T&&(Le.updateMultisampleRenderTarget(T),Le.updateRenderTargetMipmap(T)),!0===O.isScene&&O.onAfterRender(y,O,V),pt.resetDefaultState(),R=-1,w=null,v.pop(),m=v.length>0?v[v.length-1]:null,g.pop(),_=g.length>0?g[g.length-1]:null}}else console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.")},this.getActiveCubeFace=function(){return C},this.getActiveMipmapLevel=function(){return S},this.getRenderTarget=function(){return T},this.setRenderTargetTextures=function(O,V,W){Ae.get(O.texture).__webglTexture=V,Ae.get(O.depthTexture).__webglTexture=W;const j=Ae.get(O);j.__hasExternalTextures=!0,j.__hasExternalTextures&&(j.__autoAllocateDepthBuffer=void 0===W,j.__autoAllocateDepthBuffer||!0===te.has("WEBGL_multisampled_render_to_texture")&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),j.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(O,V){const W=Ae.get(O);W.__webglFramebuffer=V,W.__useDefaultFramebuffer=void 0===V},this.setRenderTarget=function(O,V=0,W=0){T=O,C=V,S=W;let j=!0,$=null,Oe=!1,ze=!1;if(O){const ct=Ae.get(O);void 0!==ct.__useDefaultFramebuffer?(ae.bindFramebuffer(L.FRAMEBUFFER,null),j=!1):void 0===ct.__webglFramebuffer?Le.setupRenderTarget(O):ct.__hasExternalTextures&&Le.rebindTextures(O,Ae.get(O.texture).__webglTexture,Ae.get(O.depthTexture).__webglTexture);const Ct=O.texture;(Ct.isData3DTexture||Ct.isDataArrayTexture||Ct.isCompressedArrayTexture)&&(ze=!0);const gt=Ae.get(O).__webglFramebuffer;O.isWebGLCubeRenderTarget?($=Array.isArray(gt[V])?gt[V][W]:gt[V],Oe=!0):$=fe.isWebGL2&&O.samples>0&&!1===Le.useMultisampledRTT(O)?Ae.get(O).__webglMultisampledFramebuffer:Array.isArray(gt)?gt[W]:gt,A.copy(O.viewport),z.copy(O.scissor),Y=O.scissorTest}else A.copy(le).multiplyScalar(K).floor(),z.copy(B).multiplyScalar(K).floor(),Y=J;if(ae.bindFramebuffer(L.FRAMEBUFFER,$)&&fe.drawBuffers&&j&&ae.drawBuffers(O,$),ae.viewport(A),ae.scissor(z),ae.setScissorTest(Y),Oe){const ct=Ae.get(O.texture);L.framebufferTexture2D(L.FRAMEBUFFER,L.COLOR_ATTACHMENT0,L.TEXTURE_CUBE_MAP_POSITIVE_X+V,ct.__webglTexture,W)}else if(ze){const ct=Ae.get(O.texture);L.framebufferTextureLayer(L.FRAMEBUFFER,L.COLOR_ATTACHMENT0,ct.__webglTexture,W||0,V||0)}R=-1},this.readRenderTargetPixels=function(O,V,W,j,$,Oe,ze){if(!O||!O.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let Je=Ae.get(O).__webglFramebuffer;if(O.isWebGLCubeRenderTarget&&void 0!==ze&&(Je=Je[ze]),Je){ae.bindFramebuffer(L.FRAMEBUFFER,Je);try{const ct=O.texture,Ct=ct.format,gt=ct.type;if(Ct!==lr&&qt.convert(Ct)!==L.getParameter(L.IMPLEMENTATION_COLOR_READ_FORMAT))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");const yt=gt===ud&&(te.has("EXT_color_buffer_half_float")||fe.isWebGL2&&te.has("EXT_color_buffer_float"));if(!(gt===fs||qt.convert(gt)===L.getParameter(L.IMPLEMENTATION_COLOR_READ_TYPE)||gt===Oo&&(fe.isWebGL2||te.has("OES_texture_float")||te.has("WEBGL_color_buffer_float"))||yt))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");V>=0&&V<=O.width-j&&W>=0&&W<=O.height-$&&L.readPixels(V,W,j,$,qt.convert(Ct),qt.convert(gt),Oe)}finally{const ct=null!==T?Ae.get(T).__webglFramebuffer:null;ae.bindFramebuffer(L.FRAMEBUFFER,ct)}}},this.copyFramebufferToTexture=function(O,V,W=0){const j=Math.pow(2,-W),$=Math.floor(V.image.width*j),Oe=Math.floor(V.image.height*j);Le.setTexture2D(V,0),L.copyTexSubImage2D(L.TEXTURE_2D,W,0,0,O.x,O.y,$,Oe),ae.unbindTexture()},this.copyTextureToTexture=function(O,V,W,j=0){const $=V.image.width,Oe=V.image.height,ze=qt.convert(W.format),Je=qt.convert(W.type);Le.setTexture2D(W,0),L.pixelStorei(L.UNPACK_FLIP_Y_WEBGL,W.flipY),L.pixelStorei(L.UNPACK_PREMULTIPLY_ALPHA_WEBGL,W.premultiplyAlpha),L.pixelStorei(L.UNPACK_ALIGNMENT,W.unpackAlignment),V.isDataTexture?L.texSubImage2D(L.TEXTURE_2D,j,O.x,O.y,$,Oe,ze,Je,V.image.data):V.isCompressedTexture?L.compressedTexSubImage2D(L.TEXTURE_2D,j,O.x,O.y,V.mipmaps[0].width,V.mipmaps[0].height,ze,V.mipmaps[0].data):L.texSubImage2D(L.TEXTURE_2D,j,O.x,O.y,ze,Je,V.image),0===j&&W.generateMipmaps&&L.generateMipmap(L.TEXTURE_2D),ae.unbindTexture()},this.copyTextureToTexture3D=function(O,V,W,j,$=0){if(y.isWebGL1Renderer)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");const Oe=O.max.x-O.min.x+1,ze=O.max.y-O.min.y+1,Je=O.max.z-O.min.z+1,ct=qt.convert(j.format),Ct=qt.convert(j.type);let gt;if(j.isData3DTexture)Le.setTexture3D(j,0),gt=L.TEXTURE_3D;else{if(!j.isDataArrayTexture)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");Le.setTexture2DArray(j,0),gt=L.TEXTURE_2D_ARRAY}L.pixelStorei(L.UNPACK_FLIP_Y_WEBGL,j.flipY),L.pixelStorei(L.UNPACK_PREMULTIPLY_ALPHA_WEBGL,j.premultiplyAlpha),L.pixelStorei(L.UNPACK_ALIGNMENT,j.unpackAlignment);const yt=L.getParameter(L.UNPACK_ROW_LENGTH),En=L.getParameter(L.UNPACK_IMAGE_HEIGHT),Ki=L.getParameter(L.UNPACK_SKIP_PIXELS),jn=L.getParameter(L.UNPACK_SKIP_ROWS),Go=L.getParameter(L.UNPACK_SKIP_IMAGES),yn=W.isCompressedTexture?W.mipmaps[0]:W.image;L.pixelStorei(L.UNPACK_ROW_LENGTH,yn.width),L.pixelStorei(L.UNPACK_IMAGE_HEIGHT,yn.height),L.pixelStorei(L.UNPACK_SKIP_PIXELS,O.min.x),L.pixelStorei(L.UNPACK_SKIP_ROWS,O.min.y),L.pixelStorei(L.UNPACK_SKIP_IMAGES,O.min.z),W.isDataTexture||W.isData3DTexture?L.texSubImage3D(gt,$,V.x,V.y,V.z,Oe,ze,Je,ct,Ct,yn.data):W.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),L.compressedTexSubImage3D(gt,$,V.x,V.y,V.z,Oe,ze,Je,ct,yn.data)):L.texSubImage3D(gt,$,V.x,V.y,V.z,Oe,ze,Je,ct,Ct,yn),L.pixelStorei(L.UNPACK_ROW_LENGTH,yt),L.pixelStorei(L.UNPACK_IMAGE_HEIGHT,En),L.pixelStorei(L.UNPACK_SKIP_PIXELS,Ki),L.pixelStorei(L.UNPACK_SKIP_ROWS,jn),L.pixelStorei(L.UNPACK_SKIP_IMAGES,Go),0===$&&j.generateMipmaps&&L.generateMipmap(gt),ae.unbindTexture()},this.initTexture=function(O){O.isCubeTexture?Le.setTextureCube(O,0):O.isData3DTexture?Le.setTexture3D(O,0):O.isDataArrayTexture||O.isCompressedArrayTexture?Le.setTexture2DArray(O,0):Le.setTexture2D(O,0),ae.unbindTexture()},this.resetState=function(){C=0,S=0,T=null,ae.reset(),pt.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return Do}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const t=this.getContext();t.drawingBufferColorSpace=e===cy?"display-p3":"srgb",t.unpackColorSpace=Bt.workingColorSpace===gp?"display-p3":"srgb"}get physicallyCorrectLights(){return console.warn("THREE.WebGLRenderer: The property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),!this.useLegacyLights}set physicallyCorrectLights(e){console.warn("THREE.WebGLRenderer: The property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),this.useLegacyLights=!e}get outputEncoding(){return console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace===nn?na:3e3}set outputEncoding(e){console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace=e===na?nn:Jn}get useLegacyLights(){return console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights}set useLegacyLights(e){console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights=e}}(class Xq extends zy{}).prototype.isWebGL1Renderer=!0;class Wy extends rn{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.environment&&(this.environment=e.environment.clone()),null!==e.fog&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return null!==this.fog&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),1!==this.backgroundIntensity&&(t.object.backgroundIntensity=this.backgroundIntensity),t}}class Xp{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=void 0!==e?e.length/t:0,this.usage=35044,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=qi()}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,i){e*=this.stride,i*=t.stride;for(let r=0,o=this.stride;r<o;r++)this.array[e+r]=t.array[i+r];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=qi()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),i=new this.constructor(t,this.stride);return i.setUsage(this.usage),i}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=qi()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const yi=new D;class fa{constructor(e,t,i,r=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=i,this.normalized=r}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,i=this.data.count;t<i;t++)yi.fromBufferAttribute(this,t),yi.applyMatrix4(e),this.setXYZ(t,yi.x,yi.y,yi.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)yi.fromBufferAttribute(this,t),yi.applyNormalMatrix(e),this.setXYZ(t,yi.x,yi.y,yi.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)yi.fromBufferAttribute(this,t),yi.transformDirection(e),this.setXYZ(t,yi.x,yi.y,yi.z);return this}setX(e,t){return this.normalized&&(t=_t(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=_t(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=_t(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=_t(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=Ii(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=Ii(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=Ii(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=Ii(t,this.array)),t}setXY(e,t,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=_t(t,this.array),i=_t(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this}setXYZ(e,t,i,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=_t(t,this.array),i=_t(i,this.array),r=_t(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this}setXYZW(e,t,i,r,o){return e=e*this.data.stride+this.offset,this.normalized&&(t=_t(t,this.array),i=_t(i,this.array),r=_t(r,this.array),o=_t(o,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this.data.array[e+3]=o,this}clone(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let o=0;o<this.itemSize;o++)t.push(this.data.array[r+o])}return new Gt(new this.array.constructor(t),this.itemSize,this.normalized)}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new fa(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let o=0;o<this.itemSize;o++)t.push(this.data.array[r+o])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}const SD=new D,ED=new $t,PD=new $t,Kq=new D,TD=new nt,Qp=new D,$y=new Ir,AD=new nt,qy=new _d;class OD extends Dt{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=FA,this.bindMatrix=new nt,this.bindMatrixInverse=new nt,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;null===this.boundingBox&&(this.boundingBox=new dr),this.boundingBox.makeEmpty();const t=e.getAttribute("position");for(let i=0;i<t.count;i++)this.getVertexPosition(i,Qp),this.boundingBox.expandByPoint(Qp)}computeBoundingSphere(){const e=this.geometry;null===this.boundingSphere&&(this.boundingSphere=new Ir),this.boundingSphere.makeEmpty();const t=e.getAttribute("position");for(let i=0;i<t.count;i++)this.getVertexPosition(i,Qp),this.boundingSphere.expandByPoint(Qp)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,t){const r=this.matrixWorld;void 0!==this.material&&(null===this.boundingSphere&&this.computeBoundingSphere(),$y.copy(this.boundingSphere),$y.applyMatrix4(r),!1!==e.ray.intersectsSphere($y)&&(AD.copy(r).invert(),qy.copy(e.ray).applyMatrix4(AD),(null===this.boundingBox||!1!==qy.intersectsBox(this.boundingBox))&&this._computeIntersections(e,t,qy)))}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,void 0===t&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new $t,t=this.geometry.attributes.skinWeight;for(let i=0,r=t.count;i<r;i++){e.fromBufferAttribute(t,i);const o=1/e.manhattanLength();o!==1/0?e.multiplyScalar(o):e.set(1,0,0,0),t.setXYZW(i,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===FA?this.bindMatrixInverse.copy(this.matrixWorld).invert():"detached"===this.bindMode?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){const i=this.skeleton,r=this.geometry;ED.fromBufferAttribute(r.attributes.skinIndex,e),PD.fromBufferAttribute(r.attributes.skinWeight,e),SD.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let o=0;o<4;o++){const s=PD.getComponent(o);if(0!==s){const a=ED.getComponent(o);TD.multiplyMatrices(i.bones[a].matrixWorld,i.boneInverses[a]),t.addScaledVector(Kq.copy(SD).applyMatrix4(TD),s)}}return t.applyMatrix4(this.bindMatrixInverse)}boneTransform(e,t){return console.warn("THREE.SkinnedMesh: .boneTransform() was renamed to .applyBoneTransform() in r151."),this.applyBoneTransform(e,t)}}class Xy extends rn{constructor(){super(),this.isBone=!0,this.type="Bone"}}class Sd extends mi{constructor(e=null,t=1,i=1,r,o,s,a,c,l=Cn,u=Cn,d,f){super(null,s,a,c,l,u,r,o,d,f),this.isDataTexture=!0,this.image={data:e,width:t,height:i},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const DD=new nt,Jq=new nt;class eg{constructor(e=[],t=[]){this.uuid=qi(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(16*e.length),0===t.length)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let i=0,r=this.bones.length;i<r;i++)this.boneInverses.push(new nt)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const i=new nt;this.bones[e]&&i.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(i)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&i.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&(i.parent&&i.parent.isBone?(i.matrix.copy(i.parent.matrixWorld).invert(),i.matrix.multiply(i.matrixWorld)):i.matrix.copy(i.matrixWorld),i.matrix.decompose(i.position,i.quaternion,i.scale))}}update(){const e=this.bones,t=this.boneInverses,i=this.boneMatrices,r=this.boneTexture;for(let o=0,s=e.length;o<s;o++)DD.multiplyMatrices(e[o]?e[o].matrixWorld:Jq,t[o]),DD.toArray(i,16*o);null!==r&&(r.needsUpdate=!0)}clone(){return new eg(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(4*this.bones.length);e=MO(e),e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const i=new Sd(t,e,e,lr,Oo);return i.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=i,this.boneTextureSize=e,this}getBoneByName(e){for(let t=0,i=this.bones.length;t<i;t++){const r=this.bones[t];if(r.name===e)return r}}dispose(){null!==this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let i=0,r=e.bones.length;i<r;i++){const o=e.bones[i];let s=t[o];void 0===s&&(console.warn("THREE.Skeleton: No bone found with UUID:",o),s=new Xy),this.bones.push(s),this.boneInverses.push((new nt).fromArray(e.boneInverses[i]))}return this.init(),this}toJSON(){const e={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,i=this.boneInverses;for(let r=0,o=t.length;r<o;r++)e.bones.push(t[r].uuid),e.boneInverses.push(i[r].toArray());return e}}class yl extends Gt{constructor(e,t,i,r=1){super(e,t,i),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const xl=new nt,ID=new nt,tg=[],RD=new dr,Qq=new nt,Ed=new Dt,Pd=new Ir;class ND extends Dt{constructor(e,t,i){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new yl(new Float32Array(16*i),16),this.instanceColor=null,this.count=i,this.boundingBox=null,this.boundingSphere=null;for(let r=0;r<i;r++)this.setMatrixAt(r,Qq)}computeBoundingBox(){const e=this.geometry,t=this.count;null===this.boundingBox&&(this.boundingBox=new dr),null===e.boundingBox&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let i=0;i<t;i++)this.getMatrixAt(i,xl),RD.copy(e.boundingBox).applyMatrix4(xl),this.boundingBox.union(RD)}computeBoundingSphere(){const e=this.geometry,t=this.count;null===this.boundingSphere&&(this.boundingSphere=new Ir),null===e.boundingSphere&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let i=0;i<t;i++)this.getMatrixAt(i,xl),Pd.copy(e.boundingSphere).applyMatrix4(xl),this.boundingSphere.union(Pd)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),null!==e.instanceColor&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,t){t.fromArray(this.instanceColor.array,3*e)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,16*e)}raycast(e,t){const i=this.matrixWorld,r=this.count;if(Ed.geometry=this.geometry,Ed.material=this.material,void 0!==Ed.material&&(null===this.boundingSphere&&this.computeBoundingSphere(),Pd.copy(this.boundingSphere),Pd.applyMatrix4(i),!1!==e.ray.intersectsSphere(Pd)))for(let o=0;o<r;o++){this.getMatrixAt(o,xl),ID.multiplyMatrices(i,xl),Ed.matrixWorld=ID,Ed.raycast(e,tg);for(let s=0,a=tg.length;s<a;s++){const c=tg[s];c.instanceId=o,c.object=this,t.push(c)}tg.length=0}}setColorAt(e,t){null===this.instanceColor&&(this.instanceColor=new yl(new Float32Array(3*this.instanceMatrix.count),3)),t.toArray(this.instanceColor.array,3*e)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,16*e)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}class Wn extends On{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new ye(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const LD=new D,kD=new D,FD=new nt,Yy=new _d,ng=new Ir;class Ms extends rn{constructor(e=new vt,t=new Wn){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(null===e.index){const t=e.attributes.position,i=[0];for(let r=1,o=t.count;r<o;r++)LD.fromBufferAttribute(t,r-1),kD.fromBufferAttribute(t,r),i[r]=i[r-1],i[r]+=LD.distanceTo(kD);e.setAttribute("lineDistance",new De(i,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const i=this.geometry,r=this.matrixWorld,o=e.params.Line.threshold,s=i.drawRange;if(null===i.boundingSphere&&i.computeBoundingSphere(),ng.copy(i.boundingSphere),ng.applyMatrix4(r),ng.radius+=o,!1===e.ray.intersectsSphere(ng))return;FD.copy(r).invert(),Yy.copy(e.ray).applyMatrix4(FD);const a=o/((this.scale.x+this.scale.y+this.scale.z)/3),c=a*a,l=new D,u=new D,d=new D,f=new D,h=this.isLineSegments?2:1,p=i.index,m=i.attributes.position;if(null!==p)for(let y=Math.max(0,s.start),x=Math.min(p.count,s.start+s.count)-1;y<x;y+=h){const C=p.getX(y),S=p.getX(y+1);if(l.fromBufferAttribute(m,C),u.fromBufferAttribute(m,S),Yy.distanceSqToSegment(l,u,f,d)>c)continue;f.applyMatrix4(this.matrixWorld);const R=e.ray.origin.distanceTo(f);R<e.near||R>e.far||t.push({distance:R,point:d.clone().applyMatrix4(this.matrixWorld),index:y,face:null,faceIndex:null,object:this})}else for(let y=Math.max(0,s.start),x=Math.min(m.count,s.start+s.count)-1;y<x;y+=h){if(l.fromBufferAttribute(m,y),u.fromBufferAttribute(m,y+1),Yy.distanceSqToSegment(l,u,f,d)>c)continue;f.applyMatrix4(this.matrixWorld);const S=e.ray.origin.distanceTo(f);S<e.near||S>e.far||t.push({distance:S,point:d.clone().applyMatrix4(this.matrixWorld),index:y,face:null,faceIndex:null,object:this})}}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(void 0!==r){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let o=0,s=r.length;o<s;o++){const a=r[o].name||String(o);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=o}}}}}const UD=new D,BD=new D;class pr extends Ms{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(null===e.index){const t=e.attributes.position,i=[];for(let r=0,o=t.count;r<o;r+=2)UD.fromBufferAttribute(t,r),BD.fromBufferAttribute(t,r+1),i[r]=0===r?0:i[r-1],i[r+1]=i[r]+UD.distanceTo(BD);e.setAttribute("lineDistance",new De(i,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class VD extends Ms{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class ha extends On{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new ye(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const zD=new nt,Zy=new _d,ig=new Ir,rg=new D;class Td extends rn{constructor(e=new vt,t=new ha){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,t){const i=this.geometry,r=this.matrixWorld,o=e.params.Points.threshold,s=i.drawRange;if(null===i.boundingSphere&&i.computeBoundingSphere(),ig.copy(i.boundingSphere),ig.applyMatrix4(r),ig.radius+=o,!1===e.ray.intersectsSphere(ig))return;zD.copy(r).invert(),Zy.copy(e.ray).applyMatrix4(zD);const a=o/((this.scale.x+this.scale.y+this.scale.z)/3),c=a*a,l=i.index,d=i.attributes.position;if(null!==l)for(let p=Math.max(0,s.start),_=Math.min(l.count,s.start+s.count);p<_;p++){const m=l.getX(p);rg.fromBufferAttribute(d,m),HD(rg,m,c,r,e,t,this)}else for(let p=Math.max(0,s.start),_=Math.min(d.count,s.start+s.count);p<_;p++)rg.fromBufferAttribute(d,p),HD(rg,p,c,r,e,t,this)}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(void 0!==r){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let o=0,s=r.length;o<s;o++){const a=r[o].name||String(o);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=o}}}}}function HD(n,e,t,i,r,o,s){const a=Zy.distanceSqToPoint(n);if(a<t){const c=new D;Zy.closestPointToPoint(n,c),c.applyMatrix4(i);const l=r.ray.origin.distanceTo(c);if(l<r.near||l>r.far)return;o.push({distance:l,distanceToRay:Math.sqrt(a),point:c,index:e,face:null,object:s})}}class eX extends mi{constructor(e,t,i,r,o,s,a,c,l){super(e,t,i,r,o,s,a,c,l),this.isCanvasTexture=!0,this.needsUpdate=!0}}class Ml extends vt{constructor(e=1,t=1,i=1,r=32,o=1,s=!1,a=0,c=2*Math.PI){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:i,radialSegments:r,heightSegments:o,openEnded:s,thetaStart:a,thetaLength:c};const l=this;r=Math.floor(r),o=Math.floor(o);const u=[],d=[],f=[],h=[];let p=0;const _=[],m=i/2;let g=0;function y(x){const C=p,S=new oe,T=new D;let R=0;const w=!0===x?e:t,A=!0===x?1:-1;for(let Y=1;Y<=r;Y++)d.push(0,m*A,0),f.push(0,A,0),h.push(.5,.5),p++;const z=p;for(let Y=0;Y<=r;Y++){const k=Y/r*c+a,H=Math.cos(k),X=Math.sin(k);T.x=w*X,T.y=m*A,T.z=w*H,d.push(T.x,T.y,T.z),f.push(0,A,0),S.x=.5*H+.5,S.y=.5*X*A+.5,h.push(S.x,S.y),p++}for(let Y=0;Y<r;Y++){const ne=C+Y,k=z+Y;!0===x?u.push(k,k+1,ne):u.push(k+1,k,ne),R+=3}l.addGroup(g,R,!0===x?1:2),g+=R}(function v(){const x=new D,C=new D;let S=0;const T=(t-e)/i;for(let R=0;R<=o;R++){const w=[],A=R/o,z=A*(t-e)+e;for(let Y=0;Y<=r;Y++){const ne=Y/r,k=ne*c+a,H=Math.sin(k),X=Math.cos(k);C.x=z*H,C.y=-A*i+m,C.z=z*X,d.push(C.x,C.y,C.z),x.set(H,T,X).normalize(),f.push(x.x,x.y,x.z),h.push(ne,1-A),w.push(p++)}_.push(w)}for(let R=0;R<r;R++)for(let w=0;w<o;w++){const z=_[w+1][R],Y=_[w+1][R+1],ne=_[w][R+1];u.push(_[w][R],z,ne),u.push(z,Y,ne),S+=6}l.addGroup(g,S,0),g+=S})(),!1===s&&(e>0&&y(!0),t>0&&y(!1)),this.setIndex(u),this.setAttribute("position",new De(d,3)),this.setAttribute("normal",new De(f,3)),this.setAttribute("uv",new De(h,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Ml(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class lg extends Ml{constructor(e=1,t=1,i=32,r=1,o=!1,s=0,a=2*Math.PI){super(0,e,t,i,r,o,s,a),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:i,heightSegments:r,openEnded:o,thetaStart:s,thetaLength:a}}static fromJSON(e){return new lg(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class si extends On{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new ye(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ye(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new oe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class zo extends si{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new oe(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return mn(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new ye(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new ye(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new ye(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class _x extends On{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new ye(16777215),this.specular=new ye(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ye(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new oe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=up,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}function ma(n,e,t){return!n||!t&&n.constructor===e?n:"number"==typeof e.BYTES_PER_ELEMENT?new e(n):Array.prototype.slice.call(n)}function rI(n){const t=n.length,i=new Array(t);for(let r=0;r!==t;++r)i[r]=r;return i.sort(function e(r,o){return n[r]-n[o]}),i}function vx(n,e,t){const i=n.length,r=new n.constructor(i);for(let o=0,s=0;s!==i;++o){const a=t[o]*e;for(let c=0;c!==e;++c)r[s++]=n[a+c]}return r}function yx(n,e,t,i){let r=1,o=n[0];for(;void 0!==o&&void 0===o[i];)o=n[r++];if(void 0===o)return;let s=o[i];if(void 0!==s)if(Array.isArray(s))do{s=o[i],void 0!==s&&(e.push(o.time),t.push.apply(t,s)),o=n[r++]}while(void 0!==o);else if(void 0!==s.toArray)do{s=o[i],void 0!==s&&(e.push(o.time),s.toArray(t,t.length)),o=n[r++]}while(void 0!==o);else do{s=o[i],void 0!==s&&(e.push(o.time),t.push(s)),o=n[r++]}while(void 0!==o)}class Nd{constructor(e,t,i,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0!==r?r:new t.constructor(i),this.sampleValues=t,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let i=this._cachedIndex,r=t[i],o=t[i-1];e:{t:{let s;n:{i:if(!(e<r)){for(let a=i+2;;){if(void 0===r){if(e<o)break i;return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}if(i===a)break;if(o=r,r=t[++i],e<r)break t}s=t.length;break n}if(e>=o)break e;{const a=t[1];e<a&&(i=2,o=a);for(let c=i-2;;){if(void 0===o)return this._cachedIndex=0,this.copySampleValue_(0);if(i===c)break;if(r=o,o=t[--i-1],e>=o)break t}s=i,i=0}}for(;i<s;){const a=i+s>>>1;e<t[a]?s=a:i=a+1}if(r=t[i],o=t[i-1],void 0===o)return this._cachedIndex=0,this.copySampleValue_(0);if(void 0===r)return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}this._cachedIndex=i,this.intervalChanged_(i,o,r)}return this.interpolate_(i,o,e,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,i=this.sampleValues,r=this.valueSize,o=e*r;for(let s=0;s!==r;++s)t[s]=i[o+s];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class WX extends Nd{constructor(e,t,i,r){super(e,t,i,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:2400,endingEnd:2400}}intervalChanged_(e,t,i){const r=this.parameterPositions;let o=e-2,s=e+1,a=r[o],c=r[s];if(void 0===a)switch(this.getSettings_().endingStart){case 2401:o=e,a=2*t-i;break;case 2402:o=r.length-2,a=t+r[o]-r[o+1];break;default:o=e,a=i}if(void 0===c)switch(this.getSettings_().endingEnd){case 2401:s=e,c=2*i-t;break;case 2402:s=1,c=i+r[1]-r[0];break;default:s=e-1,c=t}const l=.5*(i-t),u=this.valueSize;this._weightPrev=l/(t-a),this._weightNext=l/(c-i),this._offsetPrev=o*u,this._offsetNext=s*u}interpolate_(e,t,i,r){const o=this.resultBuffer,s=this.sampleValues,a=this.valueSize,c=e*a,l=c-a,u=this._offsetPrev,d=this._offsetNext,f=this._weightPrev,h=this._weightNext,p=(i-t)/(r-t),_=p*p,m=_*p,g=-f*m+2*f*_-f*p,v=(1+f)*m+(-1.5-2*f)*_+(-.5+f)*p+1,y=(-1-h)*m+(1.5+h)*_+.5*p,x=h*m-h*_;for(let C=0;C!==a;++C)o[C]=g*s[u+C]+v*s[l+C]+y*s[c+C]+x*s[d+C];return o}}class oI extends Nd{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){const o=this.resultBuffer,s=this.sampleValues,a=this.valueSize,c=e*a,l=c-a,u=(i-t)/(r-t),d=1-u;for(let f=0;f!==a;++f)o[f]=s[l+f]*d+s[c+f]*u;return o}}class jX extends Nd{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e){return this.copySampleValue_(e-1)}}class so{constructor(e,t,i,r){if(void 0===e)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===t||0===t.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=ma(t,this.TimeBufferType),this.values=ma(i,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let i;if(t.toJSON!==this.toJSON)i=t.toJSON(e);else{i={name:e.name,times:ma(e.times,Array),values:ma(e.values,Array)};const r=e.getInterpolation();r!==e.DefaultInterpolation&&(i.interpolation=r)}return i.type=e.ValueTypeName,i}InterpolantFactoryMethodDiscrete(e){return new jX(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new oI(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new WX(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case dd:t=this.InterpolantFactoryMethodDiscrete;break;case Gc:t=this.InterpolantFactoryMethodLinear;break;case 2302:t=this.InterpolantFactoryMethodSmooth}if(void 0===t){const i="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(i);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",i),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return dd;case this.InterpolantFactoryMethodLinear:return Gc;case this.InterpolantFactoryMethodSmooth:return 2302}}getValueSize(){return this.values.length/this.times.length}shift(e){if(0!==e){const t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]+=e}return this}scale(e){if(1!==e){const t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]*=e}return this}trim(e,t){const i=this.times,r=i.length;let o=0,s=r-1;for(;o!==r&&i[o]<e;)++o;for(;-1!==s&&i[s]>t;)--s;if(++s,0!==o||s!==r){o>=s&&(s=Math.max(s,1),o=s-1);const a=this.getValueSize();this.times=i.slice(o,s),this.values=this.values.slice(o*a,s*a)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const i=this.times,r=this.values,o=i.length;0===o&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let s=null;for(let a=0;a!==o;a++){const c=i[a];if("number"==typeof c&&isNaN(c)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,c),e=!1;break}if(null!==s&&s>c){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,c,s),e=!1;break}s=c}if(void 0!==r&&function iI(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}(r))for(let a=0,c=r.length;a!==c;++a){const l=r[a];if(isNaN(l)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,l),e=!1;break}}return e}optimize(){const e=this.times.slice(),t=this.values.slice(),i=this.getValueSize(),r=2302===this.getInterpolation(),o=e.length-1;let s=1;for(let a=1;a<o;++a){let c=!1;const l=e[a];if(l!==e[a+1]&&(1!==a||l!==e[0]))if(r)c=!0;else{const d=a*i,f=d-i,h=d+i;for(let p=0;p!==i;++p){const _=t[d+p];if(_!==t[f+p]||_!==t[h+p]){c=!0;break}}}if(c){if(a!==s){e[s]=e[a];const d=a*i,f=s*i;for(let h=0;h!==i;++h)t[f+h]=t[d+h]}++s}}if(o>0){e[s]=e[o];for(let a=o*i,c=s*i,l=0;l!==i;++l)t[c+l]=t[a+l];++s}return s!==e.length?(this.times=e.slice(0,s),this.values=t.slice(0,s*i)):(this.times=e,this.values=t),this}clone(){const e=this.times.slice(),t=this.values.slice(),r=new(0,this.constructor)(this.name,e,t);return r.createInterpolant=this.createInterpolant,r}}so.prototype.TimeBufferType=Float32Array,so.prototype.ValueBufferType=Float32Array,so.prototype.DefaultInterpolation=Gc;class wl extends so{}wl.prototype.ValueTypeName="bool",wl.prototype.ValueBufferType=Array,wl.prototype.DefaultInterpolation=dd,wl.prototype.InterpolantFactoryMethodLinear=void 0,wl.prototype.InterpolantFactoryMethodSmooth=void 0;class sI extends so{}sI.prototype.ValueTypeName="color";class Sl extends so{}Sl.prototype.ValueTypeName="number";class $X extends Nd{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){const o=this.resultBuffer,s=this.sampleValues,a=this.valueSize,c=(i-t)/(r-t);let l=e*a;for(let u=l+a;l!==u;l+=4)_i.slerpFlat(o,0,s,l-a,s,l,c);return o}}class _a extends so{InterpolantFactoryMethodLinear(e){return new $X(this.times,this.values,this.getValueSize(),e)}}_a.prototype.ValueTypeName="quaternion",_a.prototype.DefaultInterpolation=Gc,_a.prototype.InterpolantFactoryMethodSmooth=void 0;class El extends so{}El.prototype.ValueTypeName="string",El.prototype.ValueBufferType=Array,El.prototype.DefaultInterpolation=dd,El.prototype.InterpolantFactoryMethodLinear=void 0,El.prototype.InterpolantFactoryMethodSmooth=void 0;class Pl extends so{}Pl.prototype.ValueTypeName="vector";class Ld{constructor(e,t=-1,i,r=2500){this.name=e,this.tracks=i,this.duration=t,this.blendMode=r,this.uuid=qi(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],i=e.tracks,r=1/(e.fps||1);for(let s=0,a=i.length;s!==a;++s)t.push(XX(i[s]).scale(r));const o=new this(e.name,e.duration,t,e.blendMode);return o.uuid=e.uuid,o}static toJSON(e){const t=[],i=e.tracks,r={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let o=0,s=i.length;o!==s;++o)t.push(so.toJSON(i[o]));return r}static CreateFromMorphTargetSequence(e,t,i,r){const o=t.length,s=[];for(let a=0;a<o;a++){let c=[],l=[];c.push((a+o-1)%o,a,(a+1)%o),l.push(0,1,0);const u=rI(c);c=vx(c,1,u),l=vx(l,1,u),!r&&0===c[0]&&(c.push(o),l.push(l[0])),s.push(new Sl(".morphTargetInfluences["+t[a].name+"]",c,l).scale(1/i))}return new this(e,-1,s)}static findByName(e,t){let i=e;Array.isArray(e)||(i=e.geometry&&e.geometry.animations||e.animations);for(let r=0;r<i.length;r++)if(i[r].name===t)return i[r];return null}static CreateClipsFromMorphTargetSequences(e,t,i){const r={},o=/^([\w-]*?)([\d]+)$/;for(let a=0,c=e.length;a<c;a++){const l=e[a],u=l.name.match(o);if(u&&u.length>1){const d=u[1];let f=r[d];f||(r[d]=f=[]),f.push(l)}}const s=[];for(const a in r)s.push(this.CreateFromMorphTargetSequence(a,r[a],t,i));return s}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const i=function(d,f,h,p,_){if(0!==h.length){const m=[],g=[];yx(h,m,g,p),0!==m.length&&_.push(new d(f,m,g))}},r=[],o=e.name||"default",s=e.fps||30,a=e.blendMode;let c=e.length||-1;const l=e.hierarchy||[];for(let d=0;d<l.length;d++){const f=l[d].keys;if(f&&0!==f.length)if(f[0].morphTargets){const h={};let p;for(p=0;p<f.length;p++)if(f[p].morphTargets)for(let _=0;_<f[p].morphTargets.length;_++)h[f[p].morphTargets[_]]=-1;for(const _ in h){const m=[],g=[];for(let v=0;v!==f[p].morphTargets.length;++v){const y=f[p];m.push(y.time),g.push(y.morphTarget===_?1:0)}r.push(new Sl(".morphTargetInfluence["+_+"]",m,g))}c=h.length*s}else{const h=".bones["+t[d].name+"]";i(Pl,h+".position",f,"pos",r),i(_a,h+".quaternion",f,"rot",r),i(Pl,h+".scale",f,"scl",r)}}return 0===r.length?null:new this(o,c,r,a)}resetDuration(){let t=0;for(let i=0,r=this.tracks.length;i!==r;++i){const o=this.tracks[i];t=Math.max(t,o.times[o.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function XX(n){if(void 0===n.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=function qX(n){switch(n.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Sl;case"vector":case"vector2":case"vector3":case"vector4":return Pl;case"color":return sI;case"quaternion":return _a;case"bool":case"boolean":return wl;case"string":return El}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+n)}(n.type);if(void 0===n.times){const t=[],i=[];yx(n.keys,t,i,"value"),n.times=t,n.values=i}return void 0!==e.parse?e.parse(n):new e(n.name,n.times,n.values,n.interpolation)}const Tl={enabled:!1,files:{},add:function(n,e){!1!==this.enabled&&(this.files[n]=e)},get:function(n){if(!1!==this.enabled)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}};class aI{constructor(e,t,i){const r=this;let c,o=!1,s=0,a=0;const l=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=i,this.itemStart=function(u){a++,!1===o&&void 0!==r.onStart&&r.onStart(u,s,a),o=!0},this.itemEnd=function(u){s++,void 0!==r.onProgress&&r.onProgress(u,s,a),s===a&&(o=!1,void 0!==r.onLoad&&r.onLoad())},this.itemError=function(u){void 0!==r.onError&&r.onError(u)},this.resolveURL=function(u){return c?c(u):u},this.setURLModifier=function(u){return c=u,this},this.addHandler=function(u,d){return l.push(u,d),this},this.removeHandler=function(u){const d=l.indexOf(u);return-1!==d&&l.splice(d,2),this},this.getHandler=function(u){for(let d=0,f=l.length;d<f;d+=2){const h=l[d],p=l[d+1];if(h.global&&(h.lastIndex=0),h.test(u))return p}return null}}}const cI=new aI;let xi=(()=>{class n{constructor(t){this.manager=void 0!==t?t:cI,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(t,i){const r=this;return new Promise(function(o,s){r.load(t,o,i,s)})}parse(){}setCrossOrigin(t){return this.crossOrigin=t,this}setWithCredentials(t){return this.withCredentials=t,this}setPath(t){return this.path=t,this}setResourcePath(t){return this.resourcePath=t,this}setRequestHeader(t){return this.requestHeader=t,this}}return n.DEFAULT_MATERIAL_NAME="__DEFAULT",n})();const Ho={};class YX extends Error{constructor(e,t){super(e),this.response=t}}class gr extends xi{constructor(e){super(e)}load(e,t,i,r){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const o=Tl.get(e);if(void 0!==o)return this.manager.itemStart(e),setTimeout(()=>{t&&t(o),this.manager.itemEnd(e)},0),o;if(void 0!==Ho[e])return void Ho[e].push({onLoad:t,onProgress:i,onError:r});Ho[e]=[],Ho[e].push({onLoad:t,onProgress:i,onError:r});const s=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),a=this.mimeType,c=this.responseType;fetch(s).then(l=>{if(200===l.status||0===l.status){if(0===l.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||void 0===l.body||void 0===l.body.getReader)return l;const u=Ho[e],d=l.body.getReader(),f=l.headers.get("Content-Length")||l.headers.get("X-File-Size"),h=f?parseInt(f):0,p=0!==h;let _=0;const m=new ReadableStream({start(g){!function v(){d.read().then(({done:y,value:x})=>{if(y)g.close();else{_+=x.byteLength;const C=new ProgressEvent("progress",{lengthComputable:p,loaded:_,total:h});for(let S=0,T=u.length;S<T;S++){const R=u[S];R.onProgress&&R.onProgress(C)}g.enqueue(x),v()}})}()}});return new Response(m)}throw new YX(`fetch for "${l.url}" responded with ${l.status}: ${l.statusText}`,l)}).then(l=>{switch(c){case"arraybuffer":return l.arrayBuffer();case"blob":return l.blob();case"document":return l.text().then(u=>(new DOMParser).parseFromString(u,a));case"json":return l.json();default:if(void 0===a)return l.text();{const d=/charset="?([^;"\s]*)"?/i.exec(a),f=d&&d[1]?d[1].toLowerCase():void 0,h=new TextDecoder(f);return l.arrayBuffer().then(p=>h.decode(p))}}}).then(l=>{Tl.add(e,l);const u=Ho[e];delete Ho[e];for(let d=0,f=u.length;d<f;d++){const h=u[d];h.onLoad&&h.onLoad(l)}}).catch(l=>{const u=Ho[e];if(void 0===u)throw this.manager.itemError(e),l;delete Ho[e];for(let d=0,f=u.length;d<f;d++){const h=u[d];h.onError&&h.onError(l)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class vg extends xi{constructor(e){super(e)}load(e,t,i,r){void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const o=this,s=Tl.get(e);if(void 0!==s)return o.manager.itemStart(e),setTimeout(function(){t&&t(s),o.manager.itemEnd(e)},0),s;const a=hd("img");function c(){u(),Tl.add(e,this),t&&t(this),o.manager.itemEnd(e)}function l(d){u(),r&&r(d),o.manager.itemError(e),o.manager.itemEnd(e)}function u(){a.removeEventListener("load",c,!1),a.removeEventListener("error",l,!1)}return a.addEventListener("load",c,!1),a.addEventListener("error",l,!1),"data:"!==e.slice(0,5)&&void 0!==this.crossOrigin&&(a.crossOrigin=this.crossOrigin),o.manager.itemStart(e),a.src=e,a}}class lI extends xi{constructor(e){super(e)}load(e,t,i,r){const o=new mi,s=new vg(this.manager);return s.setCrossOrigin(this.crossOrigin),s.setPath(this.path),s.load(e,function(a){o.image=a,o.needsUpdate=!0,void 0!==t&&t(o)},i,r),o}}class va extends rn{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new ye(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),t}}const xx=new nt,uI=new D,dI=new D;class Mx{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new oe(512,512),this.map=null,this.mapPass=null,this.matrix=new nt,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Iy,this._frameExtents=new oe(1,1),this._viewportCount=1,this._viewports=[new $t(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,i=this.matrix;uI.setFromMatrixPosition(e.matrixWorld),t.position.copy(uI),dI.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(dI),t.updateMatrixWorld(),xx.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(xx),i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(xx)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return(new this.constructor).copy(this)}toJSON(){const e={};return 0!==this.bias&&(e.bias=this.bias),0!==this.normalBias&&(e.normalBias=this.normalBias),1!==this.radius&&(e.radius=this.radius),(512!==this.mapSize.x||512!==this.mapSize.y)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class KX extends Mx{constructor(){super(new Un(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,i=2*qc*e.angle*this.focus,r=this.mapSize.width/this.mapSize.height,o=e.distance||t.far;(i!==t.fov||r!==t.aspect||o!==t.far)&&(t.fov=i,t.aspect=r,t.far=o,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class fI extends va{constructor(e,t,i=0,r=Math.PI/3,o=0,s=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(rn.DEFAULT_UP),this.updateMatrix(),this.target=new rn,this.distance=i,this.angle=r,this.penumbra=o,this.decay=s,this.map=null,this.shadow=new KX}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const hI=new nt,kd=new D,bx=new D;class JX extends Mx{constructor(){super(new Un(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new oe(4,2),this._viewportCount=6,this._viewports=[new $t(2,1,1,1),new $t(0,1,1,1),new $t(3,1,1,1),new $t(1,1,1,1),new $t(3,0,1,1),new $t(1,0,1,1)],this._cubeDirections=[new D(1,0,0),new D(-1,0,0),new D(0,0,1),new D(0,0,-1),new D(0,1,0),new D(0,-1,0)],this._cubeUps=[new D(0,1,0),new D(0,1,0),new D(0,1,0),new D(0,1,0),new D(0,0,1),new D(0,0,-1)]}updateMatrices(e,t=0){const i=this.camera,r=this.matrix,o=e.distance||i.far;o!==i.far&&(i.far=o,i.updateProjectionMatrix()),kd.setFromMatrixPosition(e.matrixWorld),i.position.copy(kd),bx.copy(i.position),bx.add(this._cubeDirections[t]),i.up.copy(this._cubeUps[t]),i.lookAt(bx),i.updateMatrixWorld(),r.makeTranslation(-kd.x,-kd.y,-kd.z),hI.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromProjectionMatrix(hI)}}class pI extends va{constructor(e,t,i=0,r=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=i,this.decay=r,this.shadow=new JX}get power(){return 4*this.intensity*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class QX extends Mx{constructor(){super(new Wp(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class ya extends va{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(rn.DEFAULT_UP),this.updateMatrix(),this.target=new rn,this.shadow=new QX}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class Cx extends va{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class Al{static decodeText(e){if(typeof TextDecoder<"u")return(new TextDecoder).decode(e);let t="";for(let i=0,r=e.length;i<r;i++)t+=String.fromCharCode(e[i]);try{return decodeURIComponent(escape(t))}catch{return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return-1===t?"./":e.slice(0,t+1)}static resolveURL(e,t){return"string"!=typeof e||""===e?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class sY extends xi{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,i,r){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const o=this,s=Tl.get(e);if(void 0!==s)return o.manager.itemStart(e),setTimeout(function(){t&&t(s),o.manager.itemEnd(e)},0),s;const a={};a.credentials="anonymous"===this.crossOrigin?"same-origin":"include",a.headers=this.requestHeader,fetch(e,a).then(function(c){return c.blob()}).then(function(c){return createImageBitmap(c,Object.assign(o.options,{colorSpaceConversion:"none"}))}).then(function(c){Tl.add(e,c),t&&t(c),o.manager.itemEnd(e)}).catch(function(c){r&&r(c),o.manager.itemError(e),o.manager.itemEnd(e)}),o.manager.itemStart(e)}}const Sx="\\[\\]\\.:\\/",fY=new RegExp("["+Sx+"]","g"),Ex="[^"+Sx+"]",hY="[^"+Sx.replace("\\.","")+"]",vY=new RegExp("^"+/((?:WC+[\/:])*)/.source.replace("WC",Ex)+/(WCOD+)?/.source.replace("WCOD",hY)+/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",Ex)+/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",Ex)+"$"),yY=["material","materials","bones","map"];class xY{constructor(e,t,i){const r=i||on.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}getValue(e,t){this.bind();const r=this._bindings[this._targetGroup.nCachedObjects_];void 0!==r&&r.getValue(e,t)}setValue(e,t){const i=this._bindings;for(let r=this._targetGroup.nCachedObjects_,o=i.length;r!==o;++r)i[r].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].unbind()}}let on=(()=>{class n{constructor(t,i,r){this.path=i,this.parsedPath=r||n.parseTrackName(i),this.node=n.findNode(t,this.parsedPath.nodeName),this.rootNode=t,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(t,i,r){return t&&t.isAnimationObjectGroup?new n.Composite(t,i,r):new n(t,i,r)}static sanitizeNodeName(t){return t.replace(/\s/g,"_").replace(fY,"")}static parseTrackName(t){const i=vY.exec(t);if(null===i)throw new Error("PropertyBinding: Cannot parse trackName: "+t);const r={nodeName:i[2],objectName:i[3],objectIndex:i[4],propertyName:i[5],propertyIndex:i[6]},o=r.nodeName&&r.nodeName.lastIndexOf(".");if(void 0!==o&&-1!==o){const s=r.nodeName.substring(o+1);-1!==yY.indexOf(s)&&(r.nodeName=r.nodeName.substring(0,o),r.objectName=s)}if(null===r.propertyName||0===r.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+t);return r}static findNode(t,i){if(void 0===i||""===i||"."===i||-1===i||i===t.name||i===t.uuid)return t;if(t.skeleton){const r=t.skeleton.getBoneByName(i);if(void 0!==r)return r}if(t.children){const r=function(s){for(let a=0;a<s.length;a++){const c=s[a];if(c.name===i||c.uuid===i)return c;const l=r(c.children);if(l)return l}return null},o=r(t.children);if(o)return o}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(t,i){t[i]=this.targetObject[this.propertyName]}_getValue_array(t,i){const r=this.resolvedProperty;for(let o=0,s=r.length;o!==s;++o)t[i++]=r[o]}_getValue_arrayElement(t,i){t[i]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(t,i){this.resolvedProperty.toArray(t,i)}_setValue_direct(t,i){this.targetObject[this.propertyName]=t[i]}_setValue_direct_setNeedsUpdate(t,i){this.targetObject[this.propertyName]=t[i],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(t,i){this.targetObject[this.propertyName]=t[i],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(t,i){const r=this.resolvedProperty;for(let o=0,s=r.length;o!==s;++o)r[o]=t[i++]}_setValue_array_setNeedsUpdate(t,i){const r=this.resolvedProperty;for(let o=0,s=r.length;o!==s;++o)r[o]=t[i++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(t,i){const r=this.resolvedProperty;for(let o=0,s=r.length;o!==s;++o)r[o]=t[i++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(t,i){this.resolvedProperty[this.propertyIndex]=t[i]}_setValue_arrayElement_setNeedsUpdate(t,i){this.resolvedProperty[this.propertyIndex]=t[i],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(t,i){this.resolvedProperty[this.propertyIndex]=t[i],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(t,i){this.resolvedProperty.fromArray(t,i)}_setValue_fromArray_setNeedsUpdate(t,i){this.resolvedProperty.fromArray(t,i),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(t,i){this.resolvedProperty.fromArray(t,i),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(t,i){this.bind(),this.getValue(t,i)}_setValue_unbound(t,i){this.bind(),this.setValue(t,i)}bind(){let t=this.node;const i=this.parsedPath,r=i.objectName,o=i.propertyName;let s=i.propertyIndex;if(t||(t=n.findNode(this.rootNode,i.nodeName),this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!t)return void console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");if(r){let u=i.objectIndex;switch(r){case"materials":if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);t=t.material.materials;break;case"bones":if(!t.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);t=t.skeleton.bones;for(let d=0;d<t.length;d++)if(t[d].name===u){u=d;break}break;case"map":if("map"in t){t=t.map;break}if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.map)return void console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);t=t.material.map;break;default:if(void 0===t[r])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);t=t[r]}if(void 0!==u){if(void 0===t[u])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,t);t=t[u]}}const a=t[o];if(void 0===a)return void console.error("THREE.PropertyBinding: Trying to update property for track: "+i.nodeName+"."+o+" but it wasn't found.",t);let c=this.Versioning.None;this.targetObject=t,void 0!==t.needsUpdate?c=this.Versioning.NeedsUpdate:void 0!==t.matrixWorldNeedsUpdate&&(c=this.Versioning.MatrixWorldNeedsUpdate);let l=this.BindingType.Direct;if(void 0!==s){if("morphTargetInfluences"===o){if(!t.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!t.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==t.morphTargetDictionary[s]&&(s=t.morphTargetDictionary[s])}l=this.BindingType.ArrayElement,this.resolvedProperty=a,this.propertyIndex=s}else void 0!==a.fromArray&&void 0!==a.toArray?(l=this.BindingType.HasFromToArray,this.resolvedProperty=a):Array.isArray(a)?(l=this.BindingType.EntireArray,this.resolvedProperty=a):this.propertyName=o;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][c]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}return n.Composite=xY,n})();on.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},on.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},on.prototype.GetterByBindingType=[on.prototype._getValue_direct,on.prototype._getValue_array,on.prototype._getValue_arrayElement,on.prototype._getValue_toArray],on.prototype.SetterByBindingTypeAndVersioning=[[on.prototype._setValue_direct,on.prototype._setValue_direct_setNeedsUpdate,on.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[on.prototype._setValue_array,on.prototype._setValue_array_setNeedsUpdate,on.prototype._setValue_array_setMatrixWorldNeedsUpdate],[on.prototype._setValue_arrayElement,on.prototype._setValue_arrayElement_setNeedsUpdate,on.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[on.prototype._setValue_fromArray,on.prototype._setValue_fromArray_setNeedsUpdate,on.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]],new Float32Array(1),typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:"158"}})),typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__="158");const SY=/^[og]\s*(.+)?/,EY=/^mtllib /,PY=/^usemtl /,TY=/^usemap /,NI=/\s+/,LI=new D,Ox=new D,kI=new D,FI=new D,mr=new D,Eg=new ye;function AY(){const n={objects:[],object:{},vertices:[],normals:[],colors:[],uvs:[],materials:{},materialLibraries:[],startObject:function(e,t){if(this.object&&!1===this.object.fromDeclaration)return this.object.name=e,void(this.object.fromDeclaration=!1!==t);const i=this.object&&"function"==typeof this.object.currentMaterial?this.object.currentMaterial():void 0;if(this.object&&"function"==typeof this.object._finalize&&this.object._finalize(!0),this.object={name:e||"",fromDeclaration:!1!==t,geometry:{vertices:[],normals:[],colors:[],uvs:[],hasUVIndices:!1},materials:[],smooth:!0,startMaterial:function(r,o){const s=this._finalize(!1);s&&(s.inherited||s.groupCount<=0)&&this.materials.splice(s.index,1);const a={index:this.materials.length,name:r||"",mtllib:Array.isArray(o)&&o.length>0?o[o.length-1]:"",smooth:void 0!==s?s.smooth:this.smooth,groupStart:void 0!==s?s.groupEnd:0,groupEnd:-1,groupCount:-1,inherited:!1,clone:function(c){const l={index:"number"==typeof c?c:this.index,name:this.name,mtllib:this.mtllib,smooth:this.smooth,groupStart:0,groupEnd:-1,groupCount:-1,inherited:!1};return l.clone=this.clone.bind(l),l}};return this.materials.push(a),a},currentMaterial:function(){if(this.materials.length>0)return this.materials[this.materials.length-1]},_finalize:function(r){const o=this.currentMaterial();if(o&&-1===o.groupEnd&&(o.groupEnd=this.geometry.vertices.length/3,o.groupCount=o.groupEnd-o.groupStart,o.inherited=!1),r&&this.materials.length>1)for(let s=this.materials.length-1;s>=0;s--)this.materials[s].groupCount<=0&&this.materials.splice(s,1);return r&&0===this.materials.length&&this.materials.push({name:"",smooth:this.smooth}),o}},i&&i.name&&"function"==typeof i.clone){const r=i.clone(0);r.inherited=!0,this.object.materials.push(r)}this.objects.push(this.object)},finalize:function(){this.object&&"function"==typeof this.object._finalize&&this.object._finalize(!0)},parseVertexIndex:function(e,t){const i=parseInt(e,10);return 3*(i>=0?i-1:i+t/3)},parseNormalIndex:function(e,t){const i=parseInt(e,10);return 3*(i>=0?i-1:i+t/3)},parseUVIndex:function(e,t){const i=parseInt(e,10);return 2*(i>=0?i-1:i+t/2)},addVertex:function(e,t,i){const r=this.vertices,o=this.object.geometry.vertices;o.push(r[e+0],r[e+1],r[e+2]),o.push(r[t+0],r[t+1],r[t+2]),o.push(r[i+0],r[i+1],r[i+2])},addVertexPoint:function(e){const t=this.vertices;this.object.geometry.vertices.push(t[e+0],t[e+1],t[e+2])},addVertexLine:function(e){const t=this.vertices;this.object.geometry.vertices.push(t[e+0],t[e+1],t[e+2])},addNormal:function(e,t,i){const r=this.normals,o=this.object.geometry.normals;o.push(r[e+0],r[e+1],r[e+2]),o.push(r[t+0],r[t+1],r[t+2]),o.push(r[i+0],r[i+1],r[i+2])},addFaceNormal:function(e,t,i){const r=this.vertices,o=this.object.geometry.normals;LI.fromArray(r,e),Ox.fromArray(r,t),kI.fromArray(r,i),mr.subVectors(kI,Ox),FI.subVectors(LI,Ox),mr.cross(FI),mr.normalize(),o.push(mr.x,mr.y,mr.z),o.push(mr.x,mr.y,mr.z),o.push(mr.x,mr.y,mr.z)},addColor:function(e,t,i){const r=this.colors,o=this.object.geometry.colors;void 0!==r[e]&&o.push(r[e+0],r[e+1],r[e+2]),void 0!==r[t]&&o.push(r[t+0],r[t+1],r[t+2]),void 0!==r[i]&&o.push(r[i+0],r[i+1],r[i+2])},addUV:function(e,t,i){const r=this.uvs,o=this.object.geometry.uvs;o.push(r[e+0],r[e+1]),o.push(r[t+0],r[t+1]),o.push(r[i+0],r[i+1])},addDefaultUV:function(){const e=this.object.geometry.uvs;e.push(0,0),e.push(0,0),e.push(0,0)},addUVLine:function(e){const t=this.uvs;this.object.geometry.uvs.push(t[e+0],t[e+1])},addFace:function(e,t,i,r,o,s,a,c,l){const u=this.vertices.length;let d=this.parseVertexIndex(e,u),f=this.parseVertexIndex(t,u),h=this.parseVertexIndex(i,u);if(this.addVertex(d,f,h),this.addColor(d,f,h),void 0!==a&&""!==a){const p=this.normals.length;d=this.parseNormalIndex(a,p),f=this.parseNormalIndex(c,p),h=this.parseNormalIndex(l,p),this.addNormal(d,f,h)}else this.addFaceNormal(d,f,h);if(void 0!==r&&""!==r){const p=this.uvs.length;d=this.parseUVIndex(r,p),f=this.parseUVIndex(o,p),h=this.parseUVIndex(s,p),this.addUV(d,f,h),this.object.geometry.hasUVIndices=!0}else this.addDefaultUV()},addPointGeometry:function(e){this.object.geometry.type="Points";const t=this.vertices.length;for(let i=0,r=e.length;i<r;i++){const o=this.parseVertexIndex(e[i],t);this.addVertexPoint(o),this.addColor(o)}},addLineGeometry:function(e,t){this.object.geometry.type="Line";const i=this.vertices.length,r=this.uvs.length;for(let o=0,s=e.length;o<s;o++)this.addVertexLine(this.parseVertexIndex(e[o],i));for(let o=0,s=t.length;o<s;o++)this.addUVLine(this.parseUVIndex(t[o],r))}};return n.startObject("",!1),n}class UI extends xi{constructor(e){super(e),this.materials=null}load(e,t,i,r){const o=this,s=new gr(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,function(a){try{t(o.parse(a))}catch(c){r?r(c):console.error(c),o.manager.itemError(e)}},i,r)}setMaterials(e){return this.materials=e,this}parse(e){const t=new AY;-1!==e.indexOf("\r\n")&&(e=e.replace(/\r\n/g,"\n")),-1!==e.indexOf("\\\n")&&(e=e.replace(/\\\n/g,""));const i=e.split("\n");let r=[];for(let a=0,c=i.length;a<c;a++){const l=i[a].trimStart();if(0===l.length)continue;const u=l.charAt(0);if("#"!==u)if("v"===u){const d=l.split(NI);switch(d[0]){case"v":t.vertices.push(parseFloat(d[1]),parseFloat(d[2]),parseFloat(d[3])),d.length>=7?(Eg.setRGB(parseFloat(d[4]),parseFloat(d[5]),parseFloat(d[6])).convertSRGBToLinear(),t.colors.push(Eg.r,Eg.g,Eg.b)):t.colors.push(void 0,void 0,void 0);break;case"vn":t.normals.push(parseFloat(d[1]),parseFloat(d[2]),parseFloat(d[3]));break;case"vt":t.uvs.push(parseFloat(d[1]),parseFloat(d[2]))}}else if("f"===u){const f=l.slice(1).trim().split(NI),h=[];for(let _=0,m=f.length;_<m;_++){const g=f[_];if(g.length>0){const v=g.split("/");h.push(v)}}const p=h[0];for(let _=1,m=h.length-1;_<m;_++){const g=h[_],v=h[_+1];t.addFace(p[0],g[0],v[0],p[1],g[1],v[1],p[2],g[2],v[2])}}else if("l"===u){const d=l.substring(1).trim().split(" ");let f=[];const h=[];if(-1===l.indexOf("/"))f=d;else for(let p=0,_=d.length;p<_;p++){const m=d[p].split("/");""!==m[0]&&f.push(m[0]),""!==m[1]&&h.push(m[1])}t.addLineGeometry(f,h)}else if("p"===u){const f=l.slice(1).trim().split(" ");t.addPointGeometry(f)}else if(null!==(r=SY.exec(l))){const d=(" "+r[0].slice(1).trim()).slice(1);t.startObject(d)}else if(PY.test(l))t.object.startMaterial(l.substring(7).trim(),t.materialLibraries);else if(EY.test(l))t.materialLibraries.push(l.substring(7).trim());else if(TY.test(l))console.warn('THREE.OBJLoader: Rendering identifier "usemap" not supported. Textures must be defined in MTL files.');else if("s"===u){if(r=l.split(" "),r.length>1){const f=r[1].trim().toLowerCase();t.object.smooth="0"!==f&&"off"!==f}else t.object.smooth=!0;const d=t.object.currentMaterial();d&&(d.smooth=t.object.smooth)}else{if("\0"===l)continue;console.warn('THREE.OBJLoader: Unexpected line: "'+l+'"')}}t.finalize();const o=new ro;if(o.materialLibraries=[].concat(t.materialLibraries),1==!(1===t.objects.length&&0===t.objects[0].geometry.vertices.length))for(let a=0,c=t.objects.length;a<c;a++){const l=t.objects[a],u=l.geometry,d=l.materials,f="Line"===u.type,h="Points"===u.type;let p=!1;if(0===u.vertices.length)continue;const _=new vt;_.setAttribute("position",new De(u.vertices,3)),u.normals.length>0&&_.setAttribute("normal",new De(u.normals,3)),u.colors.length>0&&(p=!0,_.setAttribute("color",new De(u.colors,3))),!0===u.hasUVIndices&&_.setAttribute("uv",new De(u.uvs,2));const m=[];for(let v=0,y=d.length;v<y;v++){const x=d[v],C=x.name+"_"+x.smooth+"_"+p;let S=t.materials[C];if(null!==this.materials)if(S=this.materials.create(x.name),!f||!S||S instanceof Wn){if(h&&S&&!(S instanceof ha)){const T=new ha({size:10,sizeAttenuation:!1});On.prototype.copy.call(T,S),T.color.copy(S.color),T.map=S.map,S=T}}else{const T=new Wn;On.prototype.copy.call(T,S),T.color.copy(S.color),S=T}void 0===S&&(S=f?new Wn:h?new ha({size:1,sizeAttenuation:!1}):new _x,S.name=x.name,S.flatShading=!x.smooth,S.vertexColors=p,t.materials[C]=S),m.push(S)}let g;if(m.length>1){for(let v=0,y=d.length;v<y;v++){const x=d[v];_.addGroup(x.groupStart,x.groupCount,v)}g=f?new pr(_,m):h?new Td(_,m):new Dt(_,m)}else g=f?new pr(_,m[0]):h?new Td(_,m[0]):new Dt(_,m[0]);g.name=l.name,o.add(g)}else if(t.vertices.length>0){const a=new ha({size:1,sizeAttenuation:!1}),c=new vt;c.setAttribute("position",new De(t.vertices,3)),t.colors.length>0&&void 0!==t.colors[0]&&(c.setAttribute("color",new De(t.colors,3)),a.vertexColors=!0);const l=new Td(c,a);o.add(l)}return o}}class OY extends xi{constructor(e){super(e)}load(e,t,i,r){const o=this,s=""===this.path?Al.extractUrlBase(e):this.path,a=new gr(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(c){try{t(o.parse(c,s))}catch(l){r?r(l):console.error(l),o.manager.itemError(e)}},i,r)}setMaterialOptions(e){return this.materialOptions=e,this}parse(e,t){const i=e.split("\n");let r={};const o=/\s+/,s={};for(let c=0;c<i.length;c++){let l=i[c];if(l=l.trim(),0===l.length||"#"===l.charAt(0))continue;const u=l.indexOf(" ");let d=u>=0?l.substring(0,u):l;d=d.toLowerCase();let f=u>=0?l.substring(u+1):"";if(f=f.trim(),"newmtl"===d)r={name:f},s[f]=r;else if("ka"===d||"kd"===d||"ks"===d||"ke"===d){const h=f.split(o,3);r[d]=[parseFloat(h[0]),parseFloat(h[1]),parseFloat(h[2])]}else r[d]=f}const a=new DY(this.resourcePath||t,this.materialOptions);return a.setCrossOrigin(this.crossOrigin),a.setManager(this.manager),a.setMaterials(s),a}}class DY{constructor(e="",t={}){this.baseUrl=e,this.options=t,this.materialsInfo={},this.materials={},this.materialsArray=[],this.nameLookup={},this.crossOrigin="anonymous",this.side=void 0!==this.options.side?this.options.side:0,this.wrap=void 0!==this.options.wrap?this.options.wrap:ds}setCrossOrigin(e){return this.crossOrigin=e,this}setManager(e){this.manager=e}setMaterials(e){this.materialsInfo=this.convert(e),this.materials={},this.materialsArray=[],this.nameLookup={}}convert(e){if(!this.options)return e;const t={};for(const i in e){const r=e[i],o={};t[i]=o;for(const s in r){let a=!0,c=r[s];const l=s.toLowerCase();switch(l){case"kd":case"ka":case"ks":this.options&&this.options.normalizeRGB&&(c=[c[0]/255,c[1]/255,c[2]/255]),this.options&&this.options.ignoreZeroRGBs&&0===c[0]&&0===c[1]&&0===c[2]&&(a=!1)}a&&(o[l]=c)}}return t}preload(){for(const e in this.materialsInfo)this.create(e)}getIndex(e){return this.nameLookup[e]}getAsArray(){let e=0;for(const t in this.materialsInfo)this.materialsArray[e]=this.create(t),this.nameLookup[t]=e,e++;return this.materialsArray}create(e){return void 0===this.materials[e]&&this.createMaterial_(e),this.materials[e]}createMaterial_(e){const t=this,i=this.materialsInfo[e],r={name:e,side:this.side};function s(a,c){if(r[a])return;const l=t.getTextureParams(c,r),u=t.loadTexture(function o(a,c){return"string"!=typeof c||""===c?"":/^https?:\/\//i.test(c)?c:a+c}(t.baseUrl,l.url));u.repeat.copy(l.scale),u.offset.copy(l.offset),u.wrapS=t.wrap,u.wrapT=t.wrap,("map"===a||"emissiveMap"===a)&&(u.colorSpace=nn),r[a]=u}for(const a in i){const c=i[a];let l;if(""!==c)switch(a.toLowerCase()){case"kd":r.color=(new ye).fromArray(c).convertSRGBToLinear();break;case"ks":r.specular=(new ye).fromArray(c).convertSRGBToLinear();break;case"ke":r.emissive=(new ye).fromArray(c).convertSRGBToLinear();break;case"map_kd":s("map",c);break;case"map_ks":s("specularMap",c);break;case"map_ke":s("emissiveMap",c);break;case"norm":s("normalMap",c);break;case"map_bump":case"bump":s("bumpMap",c);break;case"map_d":s("alphaMap",c),r.transparent=!0;break;case"ns":r.shininess=parseFloat(c);break;case"d":l=parseFloat(c),l<1&&(r.opacity=l,r.transparent=!0);break;case"tr":l=parseFloat(c),this.options&&this.options.invertTrProperty&&(l=1-l),l>0&&(r.opacity=1-l,r.transparent=!0)}}return this.materials[e]=new _x(r),this.materials[e]}getTextureParams(e,t){const i={scale:new oe(1,1),offset:new oe(0,0)},r=e.split(/\s+/);let o;return o=r.indexOf("-bm"),o>=0&&(t.bumpScale=parseFloat(r[o+1]),r.splice(o,2)),o=r.indexOf("-s"),o>=0&&(i.scale.set(parseFloat(r[o+1]),parseFloat(r[o+2])),r.splice(o,4)),o=r.indexOf("-o"),o>=0&&(i.offset.set(parseFloat(r[o+1]),parseFloat(r[o+2])),r.splice(o,4)),i.url=r.join(" ").trim(),i}loadTexture(e,t,i,r,o){const s=void 0!==this.manager?this.manager:cI;let a=s.getHandler(e);null===a&&(a=new lI(s)),a.setCrossOrigin&&a.setCrossOrigin(this.crossOrigin);const c=a.load(e,i,r,o);return void 0!==t&&(c.mapping=t),c}}function BI(n,e){if(0===e)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),n;if(2===e||1===e){let t=n.getIndex();if(null===t){const s=[],a=n.getAttribute("position");if(void 0===a)return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),n;for(let c=0;c<a.count;c++)s.push(c);n.setIndex(s),t=n.getIndex()}const i=t.count-2,r=[];if(2===e)for(let s=1;s<=i;s++)r.push(t.getX(0)),r.push(t.getX(s)),r.push(t.getX(s+1));else for(let s=0;s<i;s++)s%2==0?(r.push(t.getX(s)),r.push(t.getX(s+1)),r.push(t.getX(s+2))):(r.push(t.getX(s+2)),r.push(t.getX(s+1)),r.push(t.getX(s)));r.length/3!==i&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const o=n.clone();return o.setIndex(r),o.clearGroups(),o}return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",e),n}class VI extends xi{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(t){return new FY(t)}),this.register(function(t){return new jY(t)}),this.register(function(t){return new $Y(t)}),this.register(function(t){return new qY(t)}),this.register(function(t){return new BY(t)}),this.register(function(t){return new VY(t)}),this.register(function(t){return new zY(t)}),this.register(function(t){return new HY(t)}),this.register(function(t){return new kY(t)}),this.register(function(t){return new GY(t)}),this.register(function(t){return new UY(t)}),this.register(function(t){return new WY(t)}),this.register(function(t){return new NY(t)}),this.register(function(t){return new XY(t)}),this.register(function(t){return new YY(t)})}load(e,t,i,r){const o=this;let s;s=""!==this.resourcePath?this.resourcePath:""!==this.path?this.path:Al.extractUrlBase(e),this.manager.itemStart(e);const a=function(l){r?r(l):console.error(l),o.manager.itemError(e),o.manager.itemEnd(e)},c=new gr(this.manager);c.setPath(this.path),c.setResponseType("arraybuffer"),c.setRequestHeader(this.requestHeader),c.setWithCredentials(this.withCredentials),c.load(e,function(l){try{o.parse(l,s,function(u){t(u),o.manager.itemEnd(e)},a)}catch(u){a(u)}},i,a)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return-1===this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.push(e),this}unregister(e){return-1!==this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,i,r){let o;const s={},a={},c=new TextDecoder;if("string"==typeof e)o=JSON.parse(e);else if(e instanceof ArrayBuffer)if(c.decode(new Uint8Array(e,0,4))===zI){try{s[Tt.KHR_BINARY_GLTF]=new ZY(e)}catch(d){return void(r&&r(d))}o=JSON.parse(s[Tt.KHR_BINARY_GLTF].content)}else o=JSON.parse(c.decode(e));else o=e;if(void 0===o.asset||o.asset.version[0]<2)return void(r&&r(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported.")));const l=new lZ(o,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});l.fileLoader.setRequestHeader(this.requestHeader);for(let u=0;u<this.pluginCallbacks.length;u++){const d=this.pluginCallbacks[u](l);d.name||console.error("THREE.GLTFLoader: Invalid plugin found: missing name"),a[d.name]=d,s[d.name]=!0}if(o.extensionsUsed)for(let u=0;u<o.extensionsUsed.length;++u){const d=o.extensionsUsed[u],f=o.extensionsRequired||[];switch(d){case Tt.KHR_MATERIALS_UNLIT:s[d]=new LY;break;case Tt.KHR_DRACO_MESH_COMPRESSION:s[d]=new KY(o,this.dracoLoader);break;case Tt.KHR_TEXTURE_TRANSFORM:s[d]=new JY;break;case Tt.KHR_MESH_QUANTIZATION:s[d]=new QY;break;default:f.indexOf(d)>=0&&void 0===a[d]&&console.warn('THREE.GLTFLoader: Unknown extension "'+d+'".')}}l.setExtensions(s),l.setPlugins(a),l.parse(i,r)}parseAsync(e,t){const i=this;return new Promise(function(r,o){i.parse(e,t,r,o)})}}function RY(){let n={};return{get:function(e){return n[e]},add:function(e,t){n[e]=t},remove:function(e){delete n[e]},removeAll:function(){n={}}}}const Tt={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class NY{constructor(e){this.parser=e,this.name=Tt.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,t=this.parser.json.nodes||[];for(let i=0,r=t.length;i<r;i++){const o=t[i];o.extensions&&o.extensions[this.name]&&void 0!==o.extensions[this.name].light&&e._addNodeRef(this.cache,o.extensions[this.name].light)}}_loadLight(e){const t=this.parser,i="light:"+e;let r=t.cache.get(i);if(r)return r;const o=t.json,c=((o.extensions&&o.extensions[this.name]||{}).lights||[])[e];let l;const u=new ye(16777215);void 0!==c.color&&u.setRGB(c.color[0],c.color[1],c.color[2],Jn);const d=void 0!==c.range?c.range:0;switch(c.type){case"directional":l=new ya(u),l.target.position.set(0,0,-1),l.add(l.target);break;case"point":l=new pI(u),l.distance=d;break;case"spot":l=new fI(u),l.distance=d,c.spot=c.spot||{},c.spot.innerConeAngle=void 0!==c.spot.innerConeAngle?c.spot.innerConeAngle:0,c.spot.outerConeAngle=void 0!==c.spot.outerConeAngle?c.spot.outerConeAngle:Math.PI/4,l.angle=c.spot.outerConeAngle,l.penumbra=1-c.spot.innerConeAngle/c.spot.outerConeAngle,l.target.position.set(0,0,-1),l.add(l.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+c.type)}return l.position.set(0,0,0),l.decay=2,ws(l,c),void 0!==c.intensity&&(l.intensity=c.intensity),l.name=t.createUniqueName(c.name||"light_"+e),r=Promise.resolve(l),t.cache.add(i,r),r}getDependency(e,t){if("light"===e)return this._loadLight(t)}createNodeAttachment(e){const t=this,i=this.parser,o=i.json.nodes[e],a=(o.extensions&&o.extensions[this.name]||{}).light;return void 0===a?null:this._loadLight(a).then(function(c){return i._getNodeRef(t.cache,a,c)})}}class LY{constructor(){this.name=Tt.KHR_MATERIALS_UNLIT}getMaterialType(){return fr}extendParams(e,t,i){const r=[];e.color=new ye(1,1,1),e.opacity=1;const o=t.pbrMetallicRoughness;if(o){if(Array.isArray(o.baseColorFactor)){const s=o.baseColorFactor;e.color.setRGB(s[0],s[1],s[2],Jn),e.opacity=s[3]}void 0!==o.baseColorTexture&&r.push(i.assignTexture(e,"map",o.baseColorTexture,nn))}return Promise.all(r)}}class kY{constructor(e){this.parser=e,this.name=Tt.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,t){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const o=r.extensions[this.name].emissiveStrength;return void 0!==o&&(t.emissiveIntensity=o),Promise.resolve()}}class FY{constructor(e){this.parser=e,this.name=Tt.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const i=this.parser.json.materials[e];return i.extensions&&i.extensions[this.name]?zo:null}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const o=[],s=r.extensions[this.name];if(void 0!==s.clearcoatFactor&&(t.clearcoat=s.clearcoatFactor),void 0!==s.clearcoatTexture&&o.push(i.assignTexture(t,"clearcoatMap",s.clearcoatTexture)),void 0!==s.clearcoatRoughnessFactor&&(t.clearcoatRoughness=s.clearcoatRoughnessFactor),void 0!==s.clearcoatRoughnessTexture&&o.push(i.assignTexture(t,"clearcoatRoughnessMap",s.clearcoatRoughnessTexture)),void 0!==s.clearcoatNormalTexture&&(o.push(i.assignTexture(t,"clearcoatNormalMap",s.clearcoatNormalTexture)),void 0!==s.clearcoatNormalTexture.scale)){const a=s.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new oe(a,a)}return Promise.all(o)}}class UY{constructor(e){this.parser=e,this.name=Tt.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){const i=this.parser.json.materials[e];return i.extensions&&i.extensions[this.name]?zo:null}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const o=[],s=r.extensions[this.name];return void 0!==s.iridescenceFactor&&(t.iridescence=s.iridescenceFactor),void 0!==s.iridescenceTexture&&o.push(i.assignTexture(t,"iridescenceMap",s.iridescenceTexture)),void 0!==s.iridescenceIor&&(t.iridescenceIOR=s.iridescenceIor),void 0===t.iridescenceThicknessRange&&(t.iridescenceThicknessRange=[100,400]),void 0!==s.iridescenceThicknessMinimum&&(t.iridescenceThicknessRange[0]=s.iridescenceThicknessMinimum),void 0!==s.iridescenceThicknessMaximum&&(t.iridescenceThicknessRange[1]=s.iridescenceThicknessMaximum),void 0!==s.iridescenceThicknessTexture&&o.push(i.assignTexture(t,"iridescenceThicknessMap",s.iridescenceThicknessTexture)),Promise.all(o)}}class BY{constructor(e){this.parser=e,this.name=Tt.KHR_MATERIALS_SHEEN}getMaterialType(e){const i=this.parser.json.materials[e];return i.extensions&&i.extensions[this.name]?zo:null}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const o=[];t.sheenColor=new ye(0,0,0),t.sheenRoughness=0,t.sheen=1;const s=r.extensions[this.name];if(void 0!==s.sheenColorFactor){const a=s.sheenColorFactor;t.sheenColor.setRGB(a[0],a[1],a[2],Jn)}return void 0!==s.sheenRoughnessFactor&&(t.sheenRoughness=s.sheenRoughnessFactor),void 0!==s.sheenColorTexture&&o.push(i.assignTexture(t,"sheenColorMap",s.sheenColorTexture,nn)),void 0!==s.sheenRoughnessTexture&&o.push(i.assignTexture(t,"sheenRoughnessMap",s.sheenRoughnessTexture)),Promise.all(o)}}class VY{constructor(e){this.parser=e,this.name=Tt.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const i=this.parser.json.materials[e];return i.extensions&&i.extensions[this.name]?zo:null}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const o=[],s=r.extensions[this.name];return void 0!==s.transmissionFactor&&(t.transmission=s.transmissionFactor),void 0!==s.transmissionTexture&&o.push(i.assignTexture(t,"transmissionMap",s.transmissionTexture)),Promise.all(o)}}class zY{constructor(e){this.parser=e,this.name=Tt.KHR_MATERIALS_VOLUME}getMaterialType(e){const i=this.parser.json.materials[e];return i.extensions&&i.extensions[this.name]?zo:null}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const o=[],s=r.extensions[this.name];t.thickness=void 0!==s.thicknessFactor?s.thicknessFactor:0,void 0!==s.thicknessTexture&&o.push(i.assignTexture(t,"thicknessMap",s.thicknessTexture)),t.attenuationDistance=s.attenuationDistance||1/0;const a=s.attenuationColor||[1,1,1];return t.attenuationColor=(new ye).setRGB(a[0],a[1],a[2],Jn),Promise.all(o)}}class HY{constructor(e){this.parser=e,this.name=Tt.KHR_MATERIALS_IOR}getMaterialType(e){const i=this.parser.json.materials[e];return i.extensions&&i.extensions[this.name]?zo:null}extendMaterialParams(e,t){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const o=r.extensions[this.name];return t.ior=void 0!==o.ior?o.ior:1.5,Promise.resolve()}}class GY{constructor(e){this.parser=e,this.name=Tt.KHR_MATERIALS_SPECULAR}getMaterialType(e){const i=this.parser.json.materials[e];return i.extensions&&i.extensions[this.name]?zo:null}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const o=[],s=r.extensions[this.name];t.specularIntensity=void 0!==s.specularFactor?s.specularFactor:1,void 0!==s.specularTexture&&o.push(i.assignTexture(t,"specularIntensityMap",s.specularTexture));const a=s.specularColorFactor||[1,1,1];return t.specularColor=(new ye).setRGB(a[0],a[1],a[2],Jn),void 0!==s.specularColorTexture&&o.push(i.assignTexture(t,"specularColorMap",s.specularColorTexture,nn)),Promise.all(o)}}class WY{constructor(e){this.parser=e,this.name=Tt.KHR_MATERIALS_ANISOTROPY}getMaterialType(e){const i=this.parser.json.materials[e];return i.extensions&&i.extensions[this.name]?zo:null}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const o=[],s=r.extensions[this.name];return void 0!==s.anisotropyStrength&&(t.anisotropy=s.anisotropyStrength),void 0!==s.anisotropyRotation&&(t.anisotropyRotation=s.anisotropyRotation),void 0!==s.anisotropyTexture&&o.push(i.assignTexture(t,"anisotropyMap",s.anisotropyTexture)),Promise.all(o)}}class jY{constructor(e){this.parser=e,this.name=Tt.KHR_TEXTURE_BASISU}loadTexture(e){const t=this.parser,i=t.json,r=i.textures[e];if(!r.extensions||!r.extensions[this.name])return null;const o=r.extensions[this.name],s=t.options.ktx2Loader;if(!s){if(i.extensionsRequired&&i.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,o.source,s)}}class $Y{constructor(e){this.parser=e,this.name=Tt.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const t=this.name,i=this.parser,r=i.json,o=r.textures[e];if(!o.extensions||!o.extensions[t])return null;const s=o.extensions[t],a=r.images[s.source];let c=i.textureLoader;if(a.uri){const l=i.options.manager.getHandler(a.uri);null!==l&&(c=l)}return this.detectSupport().then(function(l){if(l)return i.loadTextureImage(e,s.source,c);if(r.extensionsRequired&&r.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return i.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(1===t.height)}})),this.isSupported}}class qY{constructor(e){this.parser=e,this.name=Tt.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(e){const t=this.name,i=this.parser,r=i.json,o=r.textures[e];if(!o.extensions||!o.extensions[t])return null;const s=o.extensions[t],a=r.images[s.source];let c=i.textureLoader;if(a.uri){const l=i.options.manager.getHandler(a.uri);null!==l&&(c=l)}return this.detectSupport().then(function(l){if(l)return i.loadTextureImage(e,s.source,c);if(r.extensionsRequired&&r.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return i.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",t.onload=t.onerror=function(){e(1===t.height)}})),this.isSupported}}class XY{constructor(e){this.name=Tt.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const t=this.parser.json,i=t.bufferViews[e];if(i.extensions&&i.extensions[this.name]){const r=i.extensions[this.name],o=this.parser.getDependency("buffer",r.buffer),s=this.parser.options.meshoptDecoder;if(!s||!s.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return o.then(function(a){const u=r.count,d=r.byteStride,f=new Uint8Array(a,r.byteOffset||0,r.byteLength||0);return s.decodeGltfBufferAsync?s.decodeGltfBufferAsync(u,d,f,r.mode,r.filter).then(function(h){return h.buffer}):s.ready.then(function(){const h=new ArrayBuffer(u*d);return s.decodeGltfBuffer(new Uint8Array(h),u,d,f,r.mode,r.filter),h})})}return null}}class YY{constructor(e){this.name=Tt.EXT_MESH_GPU_INSTANCING,this.parser=e}createNodeMesh(e){const t=this.parser.json,i=t.nodes[e];if(!i.extensions||!i.extensions[this.name]||void 0===i.mesh)return null;const r=t.meshes[i.mesh];for(const l of r.primitives)if(l.mode!==_r.TRIANGLES&&l.mode!==_r.TRIANGLE_STRIP&&l.mode!==_r.TRIANGLE_FAN&&void 0!==l.mode)return null;const s=i.extensions[this.name].attributes,a=[],c={};for(const l in s)a.push(this.parser.getDependency("accessor",s[l]).then(u=>(c[l]=u,c[l])));return a.length<1?null:(a.push(this.parser.createNodeMesh(e)),Promise.all(a).then(l=>{const u=l.pop(),d=u.isGroup?u.children:[u],f=l[0].count,h=[];for(const p of d){const _=new nt,m=new D,g=new _i,v=new D(1,1,1),y=new ND(p.geometry,p.material,f);for(let x=0;x<f;x++)c.TRANSLATION&&m.fromBufferAttribute(c.TRANSLATION,x),c.ROTATION&&g.fromBufferAttribute(c.ROTATION,x),c.SCALE&&v.fromBufferAttribute(c.SCALE,x),y.setMatrixAt(x,_.compose(m,g,v));for(const x in c)if("_COLOR_0"===x){const C=c[x];y.instanceColor=new yl(C.array,C.itemSize,C.normalized)}else"TRANSLATION"!==x&&"ROTATION"!==x&&"SCALE"!==x&&p.geometry.setAttribute(x,c[x]);rn.prototype.copy.call(y,p),this.parser.assignFinalMaterial(y),h.push(y)}return u.isGroup?(u.clear(),u.add(...h),u):h[0]}))}}const zI="glTF";class ZY{constructor(e){this.name=Tt.KHR_BINARY_GLTF,this.content=null,this.body=null;const t=new DataView(e,0,12),i=new TextDecoder;if(this.header={magic:i.decode(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==zI)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const r=this.header.length-12,o=new DataView(e,12);let s=0;for(;s<r;){const a=o.getUint32(s,!0);s+=4;const c=o.getUint32(s,!0);if(s+=4,1313821514===c){const l=new Uint8Array(e,12+s,a);this.content=i.decode(l)}else if(5130562===c){const l=12+s;this.body=e.slice(l,l+a)}s+=a}if(null===this.content)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class KY{constructor(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=Tt.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){const i=this.json,r=this.dracoLoader,o=e.extensions[this.name].bufferView,s=e.extensions[this.name].attributes,a={},c={},l={};for(const u in s){const d=Nx[u]||u.toLowerCase();a[d]=s[u]}for(const u in e.attributes){const d=Nx[u]||u.toLowerCase();if(void 0!==s[u]){const f=i.accessors[e.attributes[u]];l[d]=Ol[f.componentType].name,c[d]=!0===f.normalized}}return t.getDependency("bufferView",o).then(function(u){return new Promise(function(d){r.decodeDracoFile(u,function(f){for(const h in f.attributes){const _=c[h];void 0!==_&&(f.attributes[h].normalized=_)}d(f)},a,l)})})}}class JY{constructor(){this.name=Tt.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return(void 0===t.texCoord||t.texCoord===e.channel)&&void 0===t.offset&&void 0===t.rotation&&void 0===t.scale||(e=e.clone(),void 0!==t.texCoord&&(e.channel=t.texCoord),void 0!==t.offset&&e.offset.fromArray(t.offset),void 0!==t.rotation&&(e.rotation=t.rotation),void 0!==t.scale&&e.repeat.fromArray(t.scale),e.needsUpdate=!0),e}}class QY{constructor(){this.name=Tt.KHR_MESH_QUANTIZATION}}class GI extends Nd{constructor(e,t,i,r){super(e,t,i,r)}copySampleValue_(e){const t=this.resultBuffer,i=this.sampleValues,r=this.valueSize,o=e*r*3+r;for(let s=0;s!==r;s++)t[s]=i[o+s];return t}interpolate_(e,t,i,r){const o=this.resultBuffer,s=this.sampleValues,a=this.valueSize,c=2*a,l=3*a,u=r-t,d=(i-t)/u,f=d*d,h=f*d,p=e*l,_=p-l,m=-2*h+3*f,g=h-f,v=1-m,y=g-f+d;for(let x=0;x!==a;x++)o[x]=v*s[_+x+a]+y*(s[_+x+c]*u)+m*s[p+x+a]+g*(s[p+x]*u);return o}}const eZ=new _i;class tZ extends GI{interpolate_(e,t,i,r){const o=super.interpolate_(e,t,i,r);return eZ.fromArray(o).normalize().toArray(o),o}}const _r={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},Ol={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},WI={9728:Cn,9729:gn,9984:1004,9985:1007,9986:1005,9987:Ao},jI={33071:ii,33648:1002,10497:ds},Rx={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},Nx={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},Cs={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},nZ={CUBICSPLINE:void 0,LINEAR:Gc,STEP:dd};function Sa(n,e,t){for(const i in t.extensions)void 0===n[i]&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[i]=t.extensions[i])}function ws(n,e){void 0!==e.extras&&("object"==typeof e.extras?Object.assign(n.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function oZ(n,e){if(n.updateMorphTargets(),void 0!==e.weights)for(let t=0,i=e.weights.length;t<i;t++)n.morphTargetInfluences[t]=e.weights[t];if(e.extras&&Array.isArray(e.extras.targetNames)){const t=e.extras.targetNames;if(n.morphTargetInfluences.length===t.length){n.morphTargetDictionary={};for(let i=0,r=t.length;i<r;i++)n.morphTargetDictionary[t[i]]=i}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function sZ(n){let e;const t=n.extensions&&n.extensions[Tt.KHR_DRACO_MESH_COMPRESSION];if(e=t?"draco:"+t.bufferView+":"+t.indices+":"+kx(t.attributes):n.indices+":"+kx(n.attributes)+":"+n.mode,void 0!==n.targets)for(let i=0,r=n.targets.length;i<r;i++)e+=":"+kx(n.targets[i]);return e}function kx(n){let e="";const t=Object.keys(n).sort();for(let i=0,r=t.length;i<r;i++)e+=t[i]+":"+n[t[i]]+";";return e}function Fx(n){switch(n){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}const cZ=new nt;class lZ{constructor(e={},t={}){this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new RY,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let i=!1,r=!1,o=-1;typeof navigator<"u"&&(i=!0===/^((?!chrome|android).)*safari/i.test(navigator.userAgent),r=navigator.userAgent.indexOf("Firefox")>-1,o=r?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),this.textureLoader=typeof createImageBitmap>"u"||i||r&&o<98?new lI(this.options.manager):new sY(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new gr(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),"use-credentials"===this.options.crossOrigin&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){const i=this,r=this.json,o=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(s){return s._markDefs&&s._markDefs()}),Promise.all(this._invokeAll(function(s){return s.beforeRoot&&s.beforeRoot()})).then(function(){return Promise.all([i.getDependencies("scene"),i.getDependencies("animation"),i.getDependencies("camera")])}).then(function(s){const a={scene:s[0][r.scene||0],scenes:s[0],animations:s[1],cameras:s[2],asset:r.asset,parser:i,userData:{}};return Sa(o,a,r),ws(a,r),Promise.all(i._invokeAll(function(c){return c.afterRoot&&c.afterRoot(a)})).then(function(){e(a)})}).catch(t)}_markDefs(){const e=this.json.nodes||[],t=this.json.skins||[],i=this.json.meshes||[];for(let r=0,o=t.length;r<o;r++){const s=t[r].joints;for(let a=0,c=s.length;a<c;a++)e[s[a]].isBone=!0}for(let r=0,o=e.length;r<o;r++){const s=e[r];void 0!==s.mesh&&(this._addNodeRef(this.meshCache,s.mesh),void 0!==s.skin&&(i[s.mesh].isSkinnedMesh=!0)),void 0!==s.camera&&this._addNodeRef(this.cameraCache,s.camera)}}_addNodeRef(e,t){void 0!==t&&(void 0===e.refs[t]&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,i){if(e.refs[t]<=1)return i;const r=i.clone(),o=(s,a)=>{const c=this.associations.get(s);null!=c&&this.associations.set(a,c);for(const[l,u]of s.children.entries())o(u,a.children[l])};return o(i,r),r.name+="_instance_"+e.uses[t]++,r}_invokeOne(e){const t=Object.values(this.plugins);t.push(this);for(let i=0;i<t.length;i++){const r=e(t[i]);if(r)return r}return null}_invokeAll(e){const t=Object.values(this.plugins);t.unshift(this);const i=[];for(let r=0;r<t.length;r++){const o=e(t[r]);o&&i.push(o)}return i}getDependency(e,t){const i=e+":"+t;let r=this.cache.get(i);if(!r){switch(e){case"scene":r=this.loadScene(t);break;case"node":r=this._invokeOne(function(o){return o.loadNode&&o.loadNode(t)});break;case"mesh":r=this._invokeOne(function(o){return o.loadMesh&&o.loadMesh(t)});break;case"accessor":r=this.loadAccessor(t);break;case"bufferView":r=this._invokeOne(function(o){return o.loadBufferView&&o.loadBufferView(t)});break;case"buffer":r=this.loadBuffer(t);break;case"material":r=this._invokeOne(function(o){return o.loadMaterial&&o.loadMaterial(t)});break;case"texture":r=this._invokeOne(function(o){return o.loadTexture&&o.loadTexture(t)});break;case"skin":r=this.loadSkin(t);break;case"animation":r=this._invokeOne(function(o){return o.loadAnimation&&o.loadAnimation(t)});break;case"camera":r=this.loadCamera(t);break;default:if(r=this._invokeOne(function(o){return o!=this&&o.getDependency&&o.getDependency(e,t)}),!r)throw new Error("Unknown type: "+e)}this.cache.add(i,r)}return r}getDependencies(e){let t=this.cache.get(e);if(!t){const i=this;t=Promise.all((this.json[e+("mesh"===e?"es":"s")]||[]).map(function(o,s){return i.getDependency(e,s)})),this.cache.add(e,t)}return t}loadBuffer(e){const t=this.json.buffers[e],i=this.fileLoader;if(t.type&&"arraybuffer"!==t.type)throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(void 0===t.uri&&0===e)return Promise.resolve(this.extensions[Tt.KHR_BINARY_GLTF].body);const r=this.options;return new Promise(function(o,s){i.load(Al.resolveURL(t.uri,r.path),o,void 0,function(){s(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))})})}loadBufferView(e){const t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then(function(i){const o=t.byteOffset||0;return i.slice(o,o+(t.byteLength||0))})}loadAccessor(e){const t=this,i=this.json,r=this.json.accessors[e];if(void 0===r.bufferView&&void 0===r.sparse){const s=Rx[r.type],c=!0===r.normalized,l=new(0,Ol[r.componentType])(r.count*s);return Promise.resolve(new Gt(l,s,c))}const o=[];return o.push(void 0!==r.bufferView?this.getDependency("bufferView",r.bufferView):null),void 0!==r.sparse&&(o.push(this.getDependency("bufferView",r.sparse.indices.bufferView)),o.push(this.getDependency("bufferView",r.sparse.values.bufferView))),Promise.all(o).then(function(s){const a=s[0],c=Rx[r.type],l=Ol[r.componentType],u=l.BYTES_PER_ELEMENT,f=r.byteOffset||0,h=void 0!==r.bufferView?i.bufferViews[r.bufferView].byteStride:void 0,p=!0===r.normalized;let _,m;if(h&&h!==u*c){const g=Math.floor(f/h),v="InterleavedBuffer:"+r.bufferView+":"+r.componentType+":"+g+":"+r.count;let y=t.cache.get(v);y||(_=new l(a,g*h,r.count*h/u),y=new Xp(_,h/u),t.cache.add(v,y)),m=new fa(y,c,f%h/u,p)}else _=null===a?new l(r.count*c):new l(a,f,r.count*c),m=new Gt(_,c,p);if(void 0!==r.sparse){const x=r.sparse.values.byteOffset||0,C=new(0,Ol[r.sparse.indices.componentType])(s[1],r.sparse.indices.byteOffset||0,r.sparse.count*Rx.SCALAR),S=new l(s[2],x,r.sparse.count*c);null!==a&&(m=new Gt(m.array.slice(),m.itemSize,m.normalized));for(let T=0,R=C.length;T<R;T++){const w=C[T];if(m.setX(w,S[T*c]),c>=2&&m.setY(w,S[T*c+1]),c>=3&&m.setZ(w,S[T*c+2]),c>=4&&m.setW(w,S[T*c+3]),c>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return m})}loadTexture(e){const t=this.json,o=t.textures[e].source,s=t.images[o];let a=this.textureLoader;if(s.uri){const c=this.options.manager.getHandler(s.uri);null!==c&&(a=c)}return this.loadTextureImage(e,o,a)}loadTextureImage(e,t,i){const r=this,o=this.json,s=o.textures[e],a=o.images[t],c=(a.uri||a.bufferView)+":"+s.sampler;if(this.textureCache[c])return this.textureCache[c];const l=this.loadImageSource(t,i).then(function(u){u.flipY=!1,u.name=s.name||a.name||"",""===u.name&&"string"==typeof a.uri&&!1===a.uri.startsWith("data:image/")&&(u.name=a.uri);const f=(o.samplers||{})[s.sampler]||{};return u.magFilter=WI[f.magFilter]||gn,u.minFilter=WI[f.minFilter]||Ao,u.wrapS=jI[f.wrapS]||ds,u.wrapT=jI[f.wrapT]||ds,r.associations.set(u,{textures:e}),u}).catch(function(){return null});return this.textureCache[c]=l,l}loadImageSource(e,t){const r=this.json,o=this.options;if(void 0!==this.sourceCache[e])return this.sourceCache[e].then(d=>d.clone());const s=r.images[e],a=self.URL||self.webkitURL;let c=s.uri||"",l=!1;if(void 0!==s.bufferView)c=this.getDependency("bufferView",s.bufferView).then(function(d){l=!0;const f=new Blob([d],{type:s.mimeType});return c=a.createObjectURL(f),c});else if(void 0===s.uri)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const u=Promise.resolve(c).then(function(d){return new Promise(function(f,h){let p=f;!0===t.isImageBitmapLoader&&(p=function(_){const m=new mi(_);m.needsUpdate=!0,f(m)}),t.load(Al.resolveURL(d,o.path),p,void 0,h)})}).then(function(d){return!0===l&&a.revokeObjectURL(c),d.userData.mimeType=s.mimeType||function aZ(n){return n.search(/\.jpe?g($|\?)/i)>0||0===n.search(/^data\:image\/jpeg/)?"image/jpeg":n.search(/\.webp($|\?)/i)>0||0===n.search(/^data\:image\/webp/)?"image/webp":"image/png"}(s.uri),d}).catch(function(d){throw console.error("THREE.GLTFLoader: Couldn't load texture",c),d});return this.sourceCache[e]=u,u}assignTexture(e,t,i,r){const o=this;return this.getDependency("texture",i.index).then(function(s){if(!s)return null;if(void 0!==i.texCoord&&i.texCoord>0&&((s=s.clone()).channel=i.texCoord),o.extensions[Tt.KHR_TEXTURE_TRANSFORM]){const a=void 0!==i.extensions?i.extensions[Tt.KHR_TEXTURE_TRANSFORM]:void 0;if(a){const c=o.associations.get(s);s=o.extensions[Tt.KHR_TEXTURE_TRANSFORM].extendTexture(s,a),o.associations.set(s,c)}}return void 0!==r&&(s.colorSpace=r),e[t]=s,s})}assignFinalMaterial(e){const t=e.geometry;let i=e.material;const r=void 0===t.attributes.tangent,o=void 0!==t.attributes.color,s=void 0===t.attributes.normal;if(e.isPoints){const a="PointsMaterial:"+i.uuid;let c=this.cache.get(a);c||(c=new ha,On.prototype.copy.call(c,i),c.color.copy(i.color),c.map=i.map,c.sizeAttenuation=!1,this.cache.add(a,c)),i=c}else if(e.isLine){const a="LineBasicMaterial:"+i.uuid;let c=this.cache.get(a);c||(c=new Wn,On.prototype.copy.call(c,i),c.color.copy(i.color),c.map=i.map,this.cache.add(a,c)),i=c}if(r||o||s){let a="ClonedMaterial:"+i.uuid+":";r&&(a+="derivative-tangents:"),o&&(a+="vertex-colors:"),s&&(a+="flat-shading:");let c=this.cache.get(a);c||(c=i.clone(),o&&(c.vertexColors=!0),s&&(c.flatShading=!0),r&&(c.normalScale&&(c.normalScale.y*=-1),c.clearcoatNormalScale&&(c.clearcoatNormalScale.y*=-1)),this.cache.add(a,c),this.associations.set(c,this.associations.get(i))),i=c}e.material=i}getMaterialType(){return si}loadMaterial(e){const t=this,r=this.extensions,o=this.json.materials[e];let s;const a={},l=[];if((o.extensions||{})[Tt.KHR_MATERIALS_UNLIT]){const d=r[Tt.KHR_MATERIALS_UNLIT];s=d.getMaterialType(),l.push(d.extendParams(a,o,t))}else{const d=o.pbrMetallicRoughness||{};if(a.color=new ye(1,1,1),a.opacity=1,Array.isArray(d.baseColorFactor)){const f=d.baseColorFactor;a.color.setRGB(f[0],f[1],f[2],Jn),a.opacity=f[3]}void 0!==d.baseColorTexture&&l.push(t.assignTexture(a,"map",d.baseColorTexture,nn)),a.metalness=void 0!==d.metallicFactor?d.metallicFactor:1,a.roughness=void 0!==d.roughnessFactor?d.roughnessFactor:1,void 0!==d.metallicRoughnessTexture&&(l.push(t.assignTexture(a,"metalnessMap",d.metallicRoughnessTexture)),l.push(t.assignTexture(a,"roughnessMap",d.metallicRoughnessTexture))),s=this._invokeOne(function(f){return f.getMaterialType&&f.getMaterialType(e)}),l.push(Promise.all(this._invokeAll(function(f){return f.extendMaterialParams&&f.extendMaterialParams(e,a)})))}!0===o.doubleSided&&(a.side=2);const u=o.alphaMode||"OPAQUE";if("BLEND"===u?(a.transparent=!0,a.depthWrite=!1):(a.transparent=!1,"MASK"===u&&(a.alphaTest=void 0!==o.alphaCutoff?o.alphaCutoff:.5)),void 0!==o.normalTexture&&s!==fr&&(l.push(t.assignTexture(a,"normalMap",o.normalTexture)),a.normalScale=new oe(1,1),void 0!==o.normalTexture.scale)){const d=o.normalTexture.scale;a.normalScale.set(d,d)}if(void 0!==o.occlusionTexture&&s!==fr&&(l.push(t.assignTexture(a,"aoMap",o.occlusionTexture)),void 0!==o.occlusionTexture.strength&&(a.aoMapIntensity=o.occlusionTexture.strength)),void 0!==o.emissiveFactor&&s!==fr){const d=o.emissiveFactor;a.emissive=(new ye).setRGB(d[0],d[1],d[2],Jn)}return void 0!==o.emissiveTexture&&s!==fr&&l.push(t.assignTexture(a,"emissiveMap",o.emissiveTexture,nn)),Promise.all(l).then(function(){const d=new s(a);return o.name&&(d.name=o.name),ws(d,o),t.associations.set(d,{materials:e}),o.extensions&&Sa(r,d,o),d})}createUniqueName(e){const t=on.sanitizeNodeName(e||"");return t in this.nodeNamesUsed?t+"_"+ ++this.nodeNamesUsed[t]:(this.nodeNamesUsed[t]=0,t)}loadGeometries(e){const t=this,i=this.extensions,r=this.primitiveCache;function o(a){return i[Tt.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(a,t).then(function(c){return $I(c,a,t)})}const s=[];for(let a=0,c=e.length;a<c;a++){const l=e[a],u=sZ(l),d=r[u];if(d)s.push(d.promise);else{let f;f=l.extensions&&l.extensions[Tt.KHR_DRACO_MESH_COMPRESSION]?o(l):$I(new vt,l,t),r[u]={primitive:l,promise:f},s.push(f)}}return Promise.all(s)}loadMesh(e){const t=this,r=this.extensions,o=this.json.meshes[e],s=o.primitives,a=[];for(let c=0,l=s.length;c<l;c++){const u=void 0===s[c].material?(void 0===(n=this.cache).DefaultMaterial&&(n.DefaultMaterial=new si({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:0})),n.DefaultMaterial):this.getDependency("material",s[c].material);a.push(u)}var n;return a.push(t.loadGeometries(s)),Promise.all(a).then(function(c){const l=c.slice(0,c.length-1),u=c[c.length-1],d=[];for(let h=0,p=u.length;h<p;h++){const _=u[h],m=s[h];let g;const v=l[h];if(m.mode===_r.TRIANGLES||m.mode===_r.TRIANGLE_STRIP||m.mode===_r.TRIANGLE_FAN||void 0===m.mode)g=!0===o.isSkinnedMesh?new OD(_,v):new Dt(_,v),!0===g.isSkinnedMesh&&g.normalizeSkinWeights(),m.mode===_r.TRIANGLE_STRIP?g.geometry=BI(g.geometry,1):m.mode===_r.TRIANGLE_FAN&&(g.geometry=BI(g.geometry,2));else if(m.mode===_r.LINES)g=new pr(_,v);else if(m.mode===_r.LINE_STRIP)g=new Ms(_,v);else if(m.mode===_r.LINE_LOOP)g=new VD(_,v);else{if(m.mode!==_r.POINTS)throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+m.mode);g=new Td(_,v)}Object.keys(g.geometry.morphAttributes).length>0&&oZ(g,o),g.name=t.createUniqueName(o.name||"mesh_"+e),ws(g,o),m.extensions&&Sa(r,g,m),t.assignFinalMaterial(g),d.push(g)}for(let h=0,p=d.length;h<p;h++)t.associations.set(d[h],{meshes:e,primitives:h});if(1===d.length)return o.extensions&&Sa(r,d[0],o),d[0];const f=new ro;o.extensions&&Sa(r,f,o),t.associations.set(f,{meshes:e});for(let h=0,p=d.length;h<p;h++)f.add(d[h]);return f})}loadCamera(e){let t;const i=this.json.cameras[e],r=i[i.type];if(r)return"perspective"===i.type?t=new Un(wW_radToDeg(r.yfov),r.aspectRatio||1,r.znear||1,r.zfar||2e6):"orthographic"===i.type&&(t=new Wp(-r.xmag,r.xmag,r.ymag,-r.ymag,r.znear,r.zfar)),i.name&&(t.name=this.createUniqueName(i.name)),ws(t,i),Promise.resolve(t);console.warn("THREE.GLTFLoader: Missing camera parameters.")}loadSkin(e){const t=this.json.skins[e],i=[];for(let r=0,o=t.joints.length;r<o;r++)i.push(this._loadNodeShallow(t.joints[r]));return i.push(void 0!==t.inverseBindMatrices?this.getDependency("accessor",t.inverseBindMatrices):null),Promise.all(i).then(function(r){const o=r.pop(),s=r,a=[],c=[];for(let l=0,u=s.length;l<u;l++){const d=s[l];if(d){a.push(d);const f=new nt;null!==o&&f.fromArray(o.array,16*l),c.push(f)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[l])}return new eg(a,c)})}loadAnimation(e){const i=this,r=this.json.animations[e],o=r.name?r.name:"animation_"+e,s=[],a=[],c=[],l=[],u=[];for(let d=0,f=r.channels.length;d<f;d++){const h=r.channels[d],p=r.samplers[h.sampler],_=h.target,g=void 0!==r.parameters?r.parameters[p.input]:p.input,v=void 0!==r.parameters?r.parameters[p.output]:p.output;void 0!==_.node&&(s.push(this.getDependency("node",_.node)),a.push(this.getDependency("accessor",g)),c.push(this.getDependency("accessor",v)),l.push(p),u.push(_))}return Promise.all([Promise.all(s),Promise.all(a),Promise.all(c),Promise.all(l),Promise.all(u)]).then(function(d){const f=d[0],h=d[1],p=d[2],_=d[3],m=d[4],g=[];for(let v=0,y=f.length;v<y;v++){const x=f[v],C=h[v],S=p[v],T=_[v],R=m[v];if(void 0===x)continue;x.updateMatrix&&x.updateMatrix();const w=i._createAnimationTracks(x,C,S,T,R);if(w)for(let A=0;A<w.length;A++)g.push(w[A])}return new Ld(o,void 0,g)})}createNodeMesh(e){const i=this,r=this.json.nodes[e];return void 0===r.mesh?null:i.getDependency("mesh",r.mesh).then(function(o){const s=i._getNodeRef(i.meshCache,r.mesh,o);return void 0!==r.weights&&s.traverse(function(a){if(a.isMesh)for(let c=0,l=r.weights.length;c<l;c++)a.morphTargetInfluences[c]=r.weights[c]}),s})}loadNode(e){const i=this,r=this.json.nodes[e],o=i._loadNodeShallow(e),s=[],a=r.children||[];for(let l=0,u=a.length;l<u;l++)s.push(i.getDependency("node",a[l]));const c=void 0===r.skin?Promise.resolve(null):i.getDependency("skin",r.skin);return Promise.all([o,Promise.all(s),c]).then(function(l){const u=l[0],d=l[1],f=l[2];null!==f&&u.traverse(function(h){h.isSkinnedMesh&&h.bind(f,cZ)});for(let h=0,p=d.length;h<p;h++)u.add(d[h]);return u})}_loadNodeShallow(e){const i=this.extensions,r=this;if(void 0!==this.nodeCache[e])return this.nodeCache[e];const o=this.json.nodes[e],s=o.name?r.createUniqueName(o.name):"",a=[],c=r._invokeOne(function(l){return l.createNodeMesh&&l.createNodeMesh(e)});return c&&a.push(c),void 0!==o.camera&&a.push(r.getDependency("camera",o.camera).then(function(l){return r._getNodeRef(r.cameraCache,o.camera,l)})),r._invokeAll(function(l){return l.createNodeAttachment&&l.createNodeAttachment(e)}).forEach(function(l){a.push(l)}),this.nodeCache[e]=Promise.all(a).then(function(l){let u;if(u=!0===o.isBone?new Xy:l.length>1?new ro:1===l.length?l[0]:new rn,u!==l[0])for(let d=0,f=l.length;d<f;d++)u.add(l[d]);if(o.name&&(u.userData.name=o.name,u.name=s),ws(u,o),o.extensions&&Sa(i,u,o),void 0!==o.matrix){const d=new nt;d.fromArray(o.matrix),u.applyMatrix4(d)}else void 0!==o.translation&&u.position.fromArray(o.translation),void 0!==o.rotation&&u.quaternion.fromArray(o.rotation),void 0!==o.scale&&u.scale.fromArray(o.scale);return r.associations.has(u)||r.associations.set(u,{}),r.associations.get(u).nodes=e,u}),this.nodeCache[e]}loadScene(e){const t=this.extensions,i=this.json.scenes[e],r=this,o=new ro;i.name&&(o.name=r.createUniqueName(i.name)),ws(o,i),i.extensions&&Sa(t,o,i);const s=i.nodes||[],a=[];for(let c=0,l=s.length;c<l;c++)a.push(r.getDependency("node",s[c]));return Promise.all(a).then(function(c){for(let u=0,d=c.length;u<d;u++)o.add(c[u]);return r.associations=(u=>{const d=new Map;for(const[f,h]of r.associations)(f instanceof On||f instanceof mi)&&d.set(f,h);return u.traverse(f=>{const h=r.associations.get(f);null!=h&&d.set(f,h)}),d})(o),o})}_createAnimationTracks(e,t,i,r,o){const s=[],a=e.name?e.name:e.uuid,c=[];let l;switch(Cs[o.path]===Cs.weights?e.traverse(function(f){f.morphTargetInfluences&&c.push(f.name?f.name:f.uuid)}):c.push(a),Cs[o.path]){case Cs.weights:l=Sl;break;case Cs.rotation:l=_a;break;case Cs.position:case Cs.scale:l=Pl;break;default:l=1===i.itemSize?Sl:Pl}const u=void 0!==r.interpolation?nZ[r.interpolation]:Gc,d=this._getArrayFromAccessor(i);for(let f=0,h=c.length;f<h;f++){const p=new l(c[f]+"."+Cs[o.path],t.array,d,u);"CUBICSPLINE"===r.interpolation&&this._createCubicSplineTrackInterpolant(p),s.push(p)}return s}_getArrayFromAccessor(e){let t=e.array;if(e.normalized){const i=Fx(t.constructor),r=new Float32Array(t.length);for(let o=0,s=t.length;o<s;o++)r[o]=t[o]*i;t=r}return t}_createCubicSplineTrackInterpolant(e){e.createInterpolant=function(i){return new(this instanceof _a?tZ:GI)(this.times,this.values,this.getValueSize()/3,i)},e.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0}}function $I(n,e,t){const i=e.attributes,r=[];function o(s,a){return t.getDependency("accessor",s).then(function(c){n.setAttribute(a,c)})}for(const s in i){const a=Nx[s]||s.toLowerCase();a in n.attributes||r.push(o(i[s],a))}if(void 0!==e.indices&&!n.index){const s=t.getDependency("accessor",e.indices).then(function(a){n.setIndex(a)});r.push(s)}return Bt.workingColorSpace!==Jn&&"COLOR_0"in i&&console.warn(`THREE.GLTFLoader: Converting vertex colors from "srgb-linear" to "${Bt.workingColorSpace}" not supported.`),ws(n,e),function uZ(n,e,t){const i=e.attributes,r=new dr;if(void 0===i.POSITION)return;{const a=t.json.accessors[i.POSITION],c=a.min,l=a.max;if(void 0===c||void 0===l)return void console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");if(r.set(new D(c[0],c[1],c[2]),new D(l[0],l[1],l[2])),a.normalized){const u=Fx(Ol[a.componentType]);r.min.multiplyScalar(u),r.max.multiplyScalar(u)}}const o=e.targets;if(void 0!==o){const a=new D,c=new D;for(let l=0,u=o.length;l<u;l++){const d=o[l];if(void 0!==d.POSITION){const f=t.json.accessors[d.POSITION],h=f.min,p=f.max;if(void 0!==h&&void 0!==p){if(c.setX(Math.max(Math.abs(h[0]),Math.abs(p[0]))),c.setY(Math.max(Math.abs(h[1]),Math.abs(p[1]))),c.setZ(Math.max(Math.abs(h[2]),Math.abs(p[2]))),f.normalized){const _=Fx(Ol[f.componentType]);c.multiplyScalar(_)}a.max(c)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}r.expandByVector(a)}n.boundingBox=r;const s=new Ir;r.getCenter(s.center),s.radius=r.min.distanceTo(r.max)/2,n.boundingSphere=s}(n,e,t),Promise.all(r).then(function(){return void 0!==e.targets?function rZ(n,e,t){let i=!1,r=!1,o=!1;for(let l=0,u=e.length;l<u;l++){const d=e[l];if(void 0!==d.POSITION&&(i=!0),void 0!==d.NORMAL&&(r=!0),void 0!==d.COLOR_0&&(o=!0),i&&r&&o)break}if(!i&&!r&&!o)return Promise.resolve(n);const s=[],a=[],c=[];for(let l=0,u=e.length;l<u;l++){const d=e[l];if(i){const f=void 0!==d.POSITION?t.getDependency("accessor",d.POSITION):n.attributes.position;s.push(f)}if(r){const f=void 0!==d.NORMAL?t.getDependency("accessor",d.NORMAL):n.attributes.normal;a.push(f)}if(o){const f=void 0!==d.COLOR_0?t.getDependency("accessor",d.COLOR_0):n.attributes.color;c.push(f)}}return Promise.all([Promise.all(s),Promise.all(a),Promise.all(c)]).then(function(l){const d=l[1],f=l[2];return i&&(n.morphAttributes.position=l[0]),r&&(n.morphAttributes.normal=d),o&&(n.morphAttributes.color=f),n.morphTargetsRelative=!0,n})}(n,e.targets,t):n})}const dZ=["canvas"];function fZ(n,e){1&n&&(M(0,"div",4),U(1,"div",5),M(2,"span",6),P(3,"LOADING 3D MODEL..."),b()())}let Pg=(()=>{class n{constructor(){this.modelPath="",this.autoRotate=!0,this.autoScale=!0,this.targetSize=5,this.addStreetBackground=!0,this.model=null,this.streetBackground=null,this.animationId=0,this.isLoaded=!1,this.currentRotationEnabled=!0}ngOnInit(){this.currentRotationEnabled=this.autoRotate,console.log("\u{1f3ae} ModelViewerComponent - ngOnInit"),console.log("\u{1f4ca} Input values:",{modelPath:this.modelPath,addStreetBackground:this.addStreetBackground,autoRotate:this.autoRotate}),(!this.modelPath||""===this.modelPath)&&(console.log("\u26a0\ufe0f Pas de chemin fourni, utilisation du chemin de test sp\xe9cifique"),this.modelPath="assets/3dmodel/uploads_files_5109932_\u7c73\u767d\u5370\u82b1\u536b\u8863/\u7c73\u767d\u5370\u82b1\u536b\u8863.obj"),console.log("\u{1f4cd} Chemin final utilis\xe9:",this.modelPath)}ngAfterViewInit(){console.log("\u{1f680} ModelViewerComponent - ngAfterViewInit"),setTimeout(()=>{this.initThreeJS(),this.loadModel(),this.animate()},100)}ngOnDestroy(){this.animationId&&cancelAnimationFrame(this.animationId),this.renderer&&this.renderer.dispose()}initThreeJS(){console.log("\u{1f527} Initialisation ThreeJS...");const t=this.canvasRef.nativeElement,i=t.clientWidth||400,r=t.clientHeight||400;console.log("\u{1f4cf} Canvas dimensions:",{width:i,height:r}),this.scene=new Wy,this.scene.background=new ye(0),console.log("\u{1f3a8} Fond noir d\xe9fini"),this.camera=new Un(45,i/r,.1,1e3),this.camera.position.set(0,3,15),this.renderer=new zy({canvas:t,antialias:!0,alpha:!1}),this.renderer.setSize(i,r),this.renderer.setPixelRatio(Math.min(window.devicePixelRatio,2)),this.renderer.outputColorSpace=nn,this.renderer.shadowMap.enabled=!0,this.renderer.shadowMap.type=Xv,this.setupLighting(),console.log("\u2705 ThreeJS initialis\xe9")}setupLighting(){console.log("\u{1f4a1} Configuration des lumi\xe8res...");const t=new Cx(16777215,.8);this.scene.add(t);const i=new ya(16777215,1.2);i.position.set(10,20,15),i.castShadow=!0,this.scene.add(i);const r=new ya(16777215,.6);r.position.set(-15,10,-10),this.scene.add(r);const o=new ya(16777215,.4);o.position.set(0,10,-15),this.scene.add(o),console.log("\u2705 Lumi\xe8res ajout\xe9es")}loadModel(){console.log("\u{1f4e6} D\xe9but du chargement..."),console.log("\u{1f4cd} Chemin du mod\xe8le:",this.modelPath),console.log("\u{1f3d9}\ufe0f Ajout fond de rue:",this.addStreetBackground),this.addStreetBackground?(console.log("\u{1f3e2} Tentative de chargement du fond de rue..."),this.loadStreetBackground().then(()=>{console.log("\u2705 Fond de rue charg\xe9"),this.loadMainModel()}).catch(t=>{console.error("\u274c Erreur chargement fond:",t),this.createSimpleBackground(),this.loadMainModel()})):(console.log("\u26ab Pas de fond demand\xe9"),this.loadMainModel())}loadStreetBackground(){var t=this;return $i(function*(){return console.log("\u{1f50d} Recherche du fichier GLB..."),new Promise((i,r)=>{const o=new VI,s=["assets/shoot_background__graffiti_street.glb","./assets/shoot_background__graffiti_street.glb","/assets/shoot_background__graffiti_street.glb"];let a=0;const c=()=>{if(a>=s.length)return console.error("\u274c Tous les chemins ont \xe9chou\xe9"),void r(new Error("Fichier non trouv\xe9"));const l=s[a];console.log(`\u{1f504} Test du chemin: ${l}`),o.load(l,u=>{console.log(`\u2705 Fichier trouv\xe9 \xe0: ${l}`),console.log("\u{1f4e6} Contenu GLTF:",u),t.streetBackground=u.scene,t.streetBackground.position.set(0,-3,-25),t.streetBackground.scale.set(5,5,5),t.streetBackground.traverse(d=>{d instanceof Dt&&(d.castShadow=!0,d.receiveShadow=!0)}),t.scene.add(t.streetBackground),console.log("\u2705 Fond ajout\xe9 \xe0 la sc\xe8ne"),i()},u=>{console.log(`\u{1f4e5} Progression: ${u.loaded}/${u.total}`)},u=>{console.error(`\u274c Erreur avec ${l}:`,u),a++,setTimeout(c,100)})};c()})})()}createSimpleBackground(){console.log("\u{1f3a8} Cr\xe9ation d'un fond simple...");const t=new xs(100,100),i=new si({color:3355443,roughness:.9}),r=new Dt(t,i);r.rotation.x=-Math.PI/2,r.position.y=-5,r.receiveShadow=!0,this.scene.add(r);const o=document.createElement("canvas");o.width=256,o.height=256;const s=o.getContext("2d"),a=s.createLinearGradient(0,0,0,256);a.addColorStop(0,"#1a1a2e"),a.addColorStop(1,"#0f3460"),s.fillStyle=a,s.fillRect(0,0,256,256);const c=new eX(o);this.scene.background=c,console.log("\u2705 Fond simple cr\xe9\xe9")}loadMainModel(){console.log("\u{1f3af} Chargement du mod\xe8le principal..."),console.log("\u{1f4c2} Chemin sp\xe9cifique utilis\xe9:",this.modelPath),this.modelPath.toLowerCase().endsWith(".obj")?(console.log("\u{1f3af} Format: OBJ"),this.loadOBJModel()):(console.log("\u26a0\ufe0f Format non support\xe9, cr\xe9ation d'un mod\xe8le 3D simple"),this.createSimple3DModel(),this.isLoaded=!0)}loadOBJModel(){console.log("\u{1f4e6} D\xe9but du chargement OBJ...");const t=this.modelPath.substring(0,this.modelPath.lastIndexOf("/")+1),i=this.modelPath.split("/").pop(),r=i.replace(".obj",".mtl");console.log("\u{1f4c1} Dossier:",t),console.log("\u{1f4c4} Fichier OBJ:",i),console.log("\u{1f3a8} Fichier MTL:",r);const o=new OY;o.setPath(t),console.log("\u{1f504} Tentative de chargement MTL..."),o.load(r,s=>{console.log("\u2705 MTL charg\xe9 avec succ\xe8s!"),console.log("\u{1f3a8} Mat\xe9riaux:",s),s.preload();const a=new UI;a.setMaterials(s),a.setPath(t),console.log("\u{1f504} Tentative de chargement OBJ..."),a.load(i,c=>{console.log("\u2705 OBJ charg\xe9 avec succ\xe8s!"),console.log("\u{1f4e6} Mod\xe8le:",c),this.model=c,c.traverse(l=>{l instanceof Dt&&(l.castShadow=!0,l.receiveShadow=!0,l.material instanceof si&&(l.material.roughness=.5,l.material.metalness=.5,console.log(`\u{1f3a8} Mat\xe9riau optimis\xe9: ${l.name||"sans nom"}`)))}),this.centerAndScale(c),this.scene.add(c),this.adjustCamera(),this.isLoaded=!0,console.log("\u{1f389} Mod\xe8le OBJ charg\xe9 avec succ\xe8s!")},c=>{const l=c.total?(c.loaded/c.total*100).toFixed(1):"0.0";console.log(`\u{1f4e5} Progression OBJ: ${l}%`)},c=>{console.error("\u274c Erreur chargement OBJ:",c),console.log("\u26a0\ufe0f Cr\xe9ation d'un mod\xe8le 3D simple \xe0 la place"),this.createSimple3DModel(),this.isLoaded=!0})},s=>{const a=s.total?(s.loaded/s.total*100).toFixed(1):"0.0";console.log(`\u{1f4e5} Progression MTL: ${a}%`)},s=>{console.error("\u274c Erreur chargement MTL:",s),console.log("\u26a0\ufe0f Tentative de chargement OBJ sans MTL..."),this.loadOBJWithoutMTL()})}loadOBJWithoutMTL(){console.log("\u{1f504} Tentative de chargement OBJ sans MTL...");const t=this.modelPath.substring(0,this.modelPath.lastIndexOf("/")+1),i=this.modelPath.split("/").pop(),r=new UI;r.setPath(t),r.load(i,o=>{console.log("\u2705 OBJ charg\xe9 sans MTL!"),this.model=o,o.traverse(s=>{s instanceof Dt&&(s.castShadow=!0,s.receiveShadow=!0,s.material=new si({color:3800852,roughness:.5,metalness:.3}))}),this.centerAndScale(o),this.scene.add(o),this.adjustCamera(),this.isLoaded=!0,console.log("\u{1f389} Mod\xe8le charg\xe9 avec mat\xe9riau par d\xe9faut")},o=>{const s=o.total?(o.loaded/o.total*100).toFixed(1):"0.0";console.log(`\u{1f4e5} Progression OBJ (sans MTL): ${s}%`)},o=>{console.error("\u274c Erreur chargement OBJ sans MTL:",o),console.log("\u26a0\ufe0f Cr\xe9ation d'un mod\xe8le 3D simple"),this.createSimple3DModel(),this.isLoaded=!0})}createSimple3DModel(){console.log("\u{1f3a8} Cr\xe9ation d'un mod\xe8le 3D simple (hoodie)...");const t=new ro,i=new Uo(3,4,.8),r=new si({color:3800852,roughness:.4,metalness:.2}),o=new Dt(i,r);o.position.y=0,o.castShadow=!0,o.receiveShadow=!0,t.add(o);const s=new lg(1.5,2,8),a=new si({color:3800852,roughness:.5}),c=new Dt(s,a);c.position.y=2.5,c.rotation.x=Math.PI,c.castShadow=!0,t.add(c);const l=new Ml(.4,.6,2.5,8),u=new si({color:3800852,roughness:.5}),d=new Dt(l,u);d.position.set(-2,.5,0),d.rotation.z=Math.PI/2,d.castShadow=!0,t.add(d);const f=new Dt(l,u);f.position.set(2,.5,0),f.rotation.z=Math.PI/2,f.castShadow=!0,t.add(f);const h=new Uo(2,1.5,.1),p=new si({color:16724838,roughness:.3}),_=new Dt(h,p);_.position.set(0,-.8,.41),t.add(_);const m=new xs(1.5,.5),g=new si({color:16777215,roughness:.2,metalness:.8}),v=new Dt(m,g);v.position.set(0,.5,.41),t.add(v),this.model=t,this.scene.add(this.model),this.centerAndScale(t),this.adjustCamera(),console.log("\u2705 Mod\xe8le 3D simple cr\xe9\xe9")}centerAndScale(t){console.log("\u{1f4d0} Centrage et mise \xe0 l\xe9chelle...");const i=(new dr).setFromObject(t),r=i.getCenter(new D),o=i.getSize(new D);if(console.log("\u{1f4cf} Taille originale:",o),console.log("\u{1f3af} Centre original:",r),t.position.set(0,0,0),this.autoScale){const u=this.targetSize/Math.max(o.x,o.y,o.z);console.log("\u2696\ufe0f \xc9chelle n\xe9cessaire:",u),t.scale.setScalar(u),i.setFromObject(t)}const s=i.getSize(new D),a=i.min,c=i.max;console.log("\u{1f4cf} Taille apr\xe8s \xe9chelle:",s),console.log("\u{1f4cd} Min/Max:",{min:a,max:c}),t.position.y=-a.y;const l=i.getCenter(new D);t.position.x=-l.x,t.position.z=-l.z,console.log("\u2705 Position finale:",t.position)}adjustCamera(){if(!this.model)return;console.log("\u{1f4f7} Ajustement cam\xe9ra...");const t=(new dr).setFromObject(this.model),i=t.getSize(new D),r=t.getCenter(new D),o=2.5*Math.max(i.x,i.y,i.z);console.log("\u{1f4d0} Distance cam\xe9ra:",o),this.camera.position.set(r.x,r.y+i.y+5,r.z+o),this.camera.lookAt(r),console.log("\u{1f4cd} Position cam\xe9ra:",this.camera.position),console.log("\u{1f440} Regarde vers:",r)}changeColor(t){console.log(`\u{1f3a8} Changement couleur: #${t.toString(16)}`),this.model&&this.model.traverse(i=>{i instanceof Dt&&i.material instanceof si&&i.material.color.setHex(t)})}animate(){this.animationId=requestAnimationFrame(()=>this.animate()),this.model&&this.currentRotationEnabled&&(this.model.rotation.y+=.005),this.renderer.render(this.scene,this.camera)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=Ui({type:n,selectors:[["app-model-viewer"]],viewQuery:function(i,r){if(1&i&&bh(dZ,5),2&i){let o;Nu(o=Lu())&&(r.canvasRef=o.first)}},inputs:{modelPath:"modelPath",autoRotate:"autoRotate",autoScale:"autoScale",targetSize:"targetSize",addStreetBackground:"addStreetBackground"},decls:4,vars:1,consts:[[1,"model-viewer-container"],[1,"model-canvas"],["canvas",""],["class","loading-overlay",4,"ngIf"],[1,"loading-overlay"],[1,"loading-spinner"],[1,"loading-text"]],template:function(i,r){1&i&&(M(0,"div",0),U(1,"canvas",1,2),se(3,fZ,4,0,"div",3),b()),2&i&&(I(3),q("ngIf",!r.isLoaded))},dependencies:[Kr],styles:['@charset "UTF-8";.model-viewer-container[_ngcontent-%COMP%]{width:100%;height:100%;position:relative;background:#000000;overflow:hidden;min-height:500px;border-radius:12px;box-shadow:0 0 30px #39ff1433}.model-canvas[_ngcontent-%COMP%]{width:100%!important;height:100%!important;display:block;background:transparent!important;position:absolute;top:0;left:0;border-radius:10px}.loading-overlay[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;display:flex;align-items:center;justify-content:center;background:rgba(0,0,0,.95);z-index:10;flex-direction:column;gap:20px;border-radius:10px;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px)}.loading-spinner[_ngcontent-%COMP%]{width:70px;height:70px;border:5px solid rgba(57,255,20,.1);border-top:5px solid #39ff14;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite;box-shadow:0 0 20px #39ff1480}.loading-text[_ngcontent-%COMP%]{color:#39ff14;font-size:20px;font-weight:700;text-transform:uppercase;letter-spacing:3px;font-family:Courier New,monospace;text-shadow:0 0 15px rgba(57,255,20,.7);animation:_ngcontent-%COMP%_pulse 2s infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}@keyframes _ngcontent-%COMP%_pulse{0%,to{opacity:1;text-shadow:0 0 10px rgba(57,255,20,.7)}50%{opacity:.8;text-shadow:0 0 20px rgba(57,255,20,.4)}}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:scale(.95)}to{opacity:1;transform:scale(1)}}.model-viewer-container[_ngcontent-%COMP%]:before{content:"";position:absolute;inset:0;background:linear-gradient(45deg,transparent 48%,rgba(57,255,20,.05) 50%,transparent 52%);background-size:10px 10px;animation:_ngcontent-%COMP%_backgroundMove 20s linear infinite;pointer-events:none;z-index:1;opacity:.3;border-radius:10px}@keyframes _ngcontent-%COMP%_backgroundMove{0%{background-position:0 0}to{background-position:100px 100px}}.model-viewer-container.loaded[_ngcontent-%COMP%]   .model-canvas[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .5s ease-out}@media (max-width: 768px){.model-viewer-container[_ngcontent-%COMP%]{min-height:400px}.loading-text[_ngcontent-%COMP%]{font-size:16px;letter-spacing:2px}.loading-spinner[_ngcontent-%COMP%]{width:50px;height:50px;border-width:4px}}@media (max-width: 480px){.model-viewer-container[_ngcontent-%COMP%]{min-height:300px;border-radius:8px}.loading-text[_ngcontent-%COMP%]{font-size:14px;letter-spacing:1px}.loading-spinner[_ngcontent-%COMP%]{width:40px;height:40px;border-width:3px}}@media (prefers-color-scheme: light){.model-viewer-container[_ngcontent-%COMP%]{background:#f0f0f0;box-shadow:0 0 30px #0064001a}.loading-overlay[_ngcontent-%COMP%]{background:rgba(255,255,255,.95)}.loading-text[_ngcontent-%COMP%]{color:#006400;text-shadow:0 0 5px rgba(0,100,0,.3)}.loading-spinner[_ngcontent-%COMP%]{border-top-color:#006400;border-color:#0064001a}.model-viewer-container[_ngcontent-%COMP%]:before{background:linear-gradient(45deg,transparent 48%,rgba(0,100,0,.05) 50%,transparent 52%)}}']})}}return n})();function hZ(n,e){if(1&n&&(Vs(0),M(1,"div",111),U(2,"app-model-viewer",112),M(3,"div",113),U(4,"i",114),M(5,"span"),P(6,"INTERACTIVE 3D MODEL"),b()()(),zs()),2&n){const t=Z();I(2),q("modelPath",t.featuredProduct.images[0])("autoRotate",!0)}}function pZ(n,e){if(1&n&&U(0,"img",117),2&n){const t=Z(2);q("src",t.featuredProduct.images[0],Gr)("alt",t.featuredProduct.name)}}function gZ(n,e){1&n&&(M(0,"div",118),U(1,"i",119),M(2,"span"),P(3,"FEATURED PRODUCT"),b()())}function mZ(n,e){if(1&n&&(se(0,pZ,1,2,"img",115),se(1,gZ,4,0,"div",116)),2&n){const t=Z();q("ngIf",t.featuredProduct),I(1),q("ngIf",!t.featuredProduct)}}function _Z(n,e){1&n&&(M(0,"span",120),P(1,"NEW ARRIVAL"),b())}function vZ(n,e){1&n&&(M(0,"span",120),P(1,"LIMITED SALE"),b())}function yZ(n,e){1&n&&(M(0,"span",120),P(1,"3D MODEL"),b())}function xZ(n,e){if(1&n&&(M(0,"span",140),P(1),b()),2&n){const t=Z(2);I(1),Ve(" $",t.featuredProduct.originalPrice.toFixed(2)," ")}}function MZ(n,e){if(1&n&&(M(0,"span",141),P(1),b()),2&n){const t=Z(2);I(1),Ve(" -",t.getDiscountPercent(t.featuredProduct),"% ")}}function bZ(n,e){if(1&n){const t=jt();M(0,"div",121)(1,"div",122)(2,"h3",123),P(3),b(),M(4,"div",124),U(5,"i",125),M(6,"span"),P(7),b(),M(8,"span",126),P(9),b()()(),M(10,"h2",127),P(11),b(),M(12,"p",128),P(13),Iu(14,"slice"),b(),M(15,"div",129)(16,"div",130),U(17,"i",131),M(18,"span"),P(19),b()(),M(20,"div",130),U(21,"i",132),M(22,"span"),P(23),b()()(),M(24,"div",133)(25,"div",134)(26,"span",135),P(27),b(),se(28,xZ,2,1,"span",136),se(29,MZ,2,1,"span",137),b(),M(30,"button",138),ge("click",function(){Ue(t);const r=Z();return Be(r.goToProduct(r.featuredProduct.id))}),U(31,"i",139),P(32," VIEW DETAILS "),b()()()}if(2&n){const t=Z();I(3),ot(t.featuredProduct.brand),I(4),ot(t.featuredProduct.rating.toFixed(1)),I(2),Ve("(",t.featuredProduct.reviewCount,")"),I(2),ot(t.featuredProduct.name),I(2),Ve("",yh(14,10,t.featuredProduct.description,0,120),"..."),I(6),ot(t.featuredProduct.material||"Premium Material"),I(4),ot(t.featuredProduct.category),I(4),Ve("$",t.featuredProduct.price.toFixed(2),""),I(1),q("ngIf",t.featuredProduct.originalPrice),I(1),q("ngIf",t.featuredProduct.originalPrice)}}function CZ(n,e){if(1&n){const t=jt();M(0,"div",142),ge("click",function(){const o=Ue(t).$implicit;return Be(Z().goToCategory(o.id))}),M(1,"div",143),U(2,"i"),b(),M(3,"h3",144),P(4),b(),M(5,"p",145),P(6),b(),M(7,"div",146)(8,"span"),P(9,"EXPLORE \u2192"),b()()()}if(2&n){const t=e.$implicit;I(2),bc(t.icon),I(2),ot(t.name),I(2),Ve("",t.count," items")}}function wZ(n,e){if(1&n&&(M(0,"div",179)(1,"span",180),P(2),b(),U(3,"div",181),b()),2&n){const t=Z().index;I(2),Ve("#",t+1,"")}}function SZ(n,e){1&n&&(M(0,"span",182),P(1,"TRENDING"),b())}function EZ(n,e){if(1&n&&(M(0,"span",183),P(1),b()),2&n){const t=Z().$implicit,i=Z();I(1),Ve("-",i.getDiscountPercent(t),"%")}}function PZ(n,e){1&n&&(M(0,"span",184),P(1,"NEW"),b())}function TZ(n,e){1&n&&(M(0,"span",185),P(1,"3D"),b())}function AZ(n,e){if(1&n&&(Vs(0),M(1,"div",186),U(2,"app-model-viewer",112),M(3,"div",187),U(4,"i",74),M(5,"span"),P(6,"3D VIEW"),b()()(),zs()),2&n){const t=Z().$implicit;I(2),q("modelPath",t.images[0])("autoRotate",!0)}}function OZ(n,e){if(1&n&&U(0,"img",188),2&n){const t=Z().$implicit;q("src",t.images[0],Gr)("alt",t.name)}}function DZ(n,e){if(1&n&&(M(0,"span",140),P(1),b()),2&n){const t=Z().$implicit;I(1),Ve(" $",t.originalPrice.toFixed(2)," ")}}function IZ(n,e){if(1&n){const t=jt();M(0,"div",147),ge("click",function(){const o=Ue(t).$implicit;return Be(Z().goToProduct(o.id))}),se(1,wZ,4,1,"div",148),M(2,"div",149)(3,"div",150),se(4,SZ,2,0,"span",151),se(5,EZ,2,1,"span",152),se(6,PZ,2,0,"span",153),se(7,TZ,2,0,"span",154),b(),M(8,"div",155),se(9,AZ,7,2,"ng-container",34),se(10,OZ,1,2,"ng-template",null,156,js),b(),M(12,"div",157)(13,"button",158),ge("click",function(r){const s=Ue(t).$implicit,a=Z();return r.stopPropagation(),Be(a.addToCart(s))}),U(14,"i",159),b(),M(15,"button",158),ge("click",function(r){const s=Ue(t).$implicit,a=Z();return r.stopPropagation(),Be(a.tryOnProduct(s))}),U(16,"i",160),b(),M(17,"button",161),ge("click",function(r){const s=Ue(t).$implicit,a=Z();return r.stopPropagation(),Be(a.toggleFavorite(s.id))}),U(18,"i",162),b()(),M(19,"div",163),U(20,"i",164),M(21,"span"),P(22),b()()(),M(23,"div",165)(24,"div",166)(25,"span",167),P(26),b(),M(27,"span",168),P(28),b()(),M(29,"h3",169),P(30),b(),M(31,"p",170),P(32),Iu(33,"slice"),b(),M(34,"div",171)(35,"div",172),U(36,"i",131),M(37,"span"),P(38),b()(),M(39,"div",172),U(40,"i",125),M(41,"span"),P(42),b()()(),M(43,"div",173)(44,"div",174)(45,"span",135),P(46),b(),se(47,DZ,2,1,"span",136),b(),M(48,"div",175)(49,"button",176),ge("click",function(r){const s=Ue(t).$implicit,a=Z();return r.stopPropagation(),Be(a.goToProduct(s.id))}),U(50,"i",139),b(),M(51,"button",177),ge("click",function(r){const s=Ue(t).$implicit,a=Z();return r.stopPropagation(),Be(a.addToCart(s))}),U(52,"i",178),b()()()()()}if(2&n){const t=e.$implicit,i=e.index,r=Bs(11),o=Z();mt("featured",0===i),I(1),q("ngIf",i<3),I(3),q("ngIf",i<3),I(1),q("ngIf",t.originalPrice),I(1),q("ngIf",t.isNew),I(1),q("ngIf",o.has3DModel(t)),I(2),q("ngIf",o.has3DModel(t))("ngIfElse",r),I(4),q("disabled",!t.inStock),I(2),q("disabled",!t.inStock),I(3),mt("active",o.isFavorite(t.id)),I(1),mt("in-stock",t.inStock),I(1),mt("fa-check-circle",t.inStock)("fa-times-circle",!t.inStock),I(2),ot(t.inStock?"IN STOCK":"OUT OF STOCK"),I(4),ot(t.brand),I(2),ot(t.category),I(2),ot(t.name),I(2),Ve("",yh(33,30,t.description,0,80),"..."),I(6),ot(t.material||"Premium"),I(4),ph("",t.rating.toFixed(1)," (",t.reviewCount,")"),I(4),Ve("$",t.price.toFixed(2),""),I(1),q("ngIf",t.originalPrice),I(4),q("disabled",!t.inStock)}}function RZ(n,e){if(1&n){const t=jt();M(0,"div",189)(1,"div",190)(2,"div",191)(3,"div",192),P(4,"NEW DROP"),b(),U(5,"img",193),M(6,"div",194)(7,"button",195),ge("click",function(){const o=Ue(t).$implicit;return Be(Z().goToProduct(o.id))}),U(8,"i",139),P(9," QUICK VIEW "),b()()(),M(10,"div",196)(11,"h3",197),P(12),b(),M(13,"p",198),P(14),b(),M(15,"div",199)(16,"span",200),P(17),b(),M(18,"span",201),P(19),b()(),M(20,"div",202)(21,"span",134),P(22),b(),M(23,"span",203),ge("click",function(){const o=Ue(t).$implicit;return Be(Z().addToCart(o))}),P(24," ADD TO CART "),U(25,"i",178),b()()()()()}if(2&n){const t=e.$implicit;I(5),q("src",t.images,Gr)("alt",t.name),I(7),ot(t.name),I(2),ot(t.description),I(3),ot(t.category),I(2),ot(t.material),I(3),Ve("$",t.price.toFixed(2),"")}}function NZ(n,e){if(1&n){const t=jt();M(0,"span",204),ge("click",function(){const o=Ue(t).index;return Be(Z().goToSlide(o))}),b()}2&n&&mt("active",e.index===Z().currentSlide)}function LZ(n,e){if(1&n){const t=jt();M(0,"div",205),ge("click",function(){const o=Ue(t).$implicit;return Be(Z().goToCollection(o.id))}),M(1,"div",206)(2,"div",207)(3,"div",208)(4,"h3",209),P(5),b(),M(6,"p",210),P(7),b(),M(8,"div",211)(9,"span",212),P(10),b(),M(11,"span",213),P(12),b()(),M(13,"button",214),P(14," EXPLORE COLLECTION "),U(15,"i",23),b()()(),U(16,"div",215),b()()}if(2&n){const t=e.$implicit;I(1),Xr("background-image","url("+t.image+")"),I(4),ot(t.name),I(2),ot(t.description),I(3),Ve("",t.itemCount," items"),I(2),Ve("From $",t.startingPrice,"")}}function kZ(n,e){1&n&&U(0,"i",125),2&n&&mt("active",e.$implicit<=Z().$implicit.rating)}const FZ=function(){return[1,2,3,4,5]};function UZ(n,e){if(1&n&&(M(0,"div",216)(1,"div",217)(2,"div",218),U(3,"img",193),b(),M(4,"div",219)(5,"h4",220),P(6),b(),M(7,"span",221),P(8),b()(),M(9,"div",222),se(10,kZ,1,2,"i",223),b()(),M(11,"p",224),P(12),b(),M(13,"div",225)(14,"span",226),P(15,"Bought:"),b(),M(16,"span",227),P(17),b()()()),2&n){const t=e.$implicit;I(3),q("src",t.avatar,Gr)("alt",t.name),I(3),ot(t.name),I(2),ot(t.location),I(2),q("ngForOf",Ou(7,FZ)),I(2),Ve('"',t.text,'"'),I(5),ot(t.product)}}const BZ=function(){return[0,1,2]};let VZ=(()=>{class n{constructor(t,i){this.router=t,this.cartService=i,this.allProducts=cp,this.featuredProducts=[],this.featuredProduct=null,this.newArrivals=[],this.categories=[{id:"tops",name:"TOPS",icon:"fas fa-tshirt",count:156},{id:"bottoms",name:"BOTTOMS",icon:"fas fa-vest",count:89},{id:"shoes",name:"SHOES",icon:"fas fa-shoe-prints",count:72},{id:"accessories",name:"ACCESSORIES",icon:"fas fa-gem",count:134},{id:"outerwear",name:"OUTERWEAR",icon:"fas fa-jacket",count:67},{id:"limited",name:"LIMITED",icon:"fas fa-crown",count:42}],this.collections=[{id:"street-essentials",name:"Street Essentials",image:"assets/collections/essentials.jpg",description:"Core pieces for everyday wear",itemCount:45,startingPrice:39.99},{id:"premium-collection",name:"Premium Collection",image:"assets/collections/premium.jpg",description:"High-end materials and craftsmanship",itemCount:28,startingPrice:129.99},{id:"limited-edition",name:"Limited Edition",image:"assets/collections/limited.jpg",description:"Exclusive drops available for limited time",itemCount:15,startingPrice:89.99}],this.testimonials=[{name:"FRANKLIN",location:"Los Santos",avatar:"assets/avatars/franklin.jpg",rating:5,text:"The 3D fitting room changed how I shop. No more returns!",product:"Vinewood Jacket"},{name:"TREVOR",location:"Sandy Shores",avatar:"assets/avatars/trevor.jpg",rating:4,text:"Best streetwear in the city. Quality is unmatched.",product:"Desert Cargos"},{name:"MICHAEL",location:"Rockford Hills",avatar:"assets/avatars/michael.jpg",rating:5,text:"Premium quality meets street style. My go-to shop.",product:"Executive Hoodie"}],this.currentSlide=0,this.favorites={}}ngOnInit(){this.loadData(),this.startSlider(),this.loadFavorites()}ngOnDestroy(){this.sliderInterval&&clearInterval(this.sliderInterval)}loadData(){if(this.featuredProducts=this.allProducts.filter(t=>t.isFeatured).slice(0,6),this.featuredProducts.length>0&&(this.featuredProduct=this.featuredProducts[0]),this.newArrivals=this.allProducts.filter(t=>t.isNew).slice(0,4),this.newArrivals.length<4){const t=this.allProducts.filter(i=>!i.isNew).slice(0,4-this.newArrivals.length);this.newArrivals=[...this.newArrivals,...t]}}goToTryOn(){this.router.navigate(["/try-on"])}goToShop(){this.router.navigate(["/shop"])}goToProduct(t){this.router.navigate(["/product",t])}goToCategory(t){this.router.navigate(["/shop"],{queryParams:{category:t.toUpperCase()}})}goToCollection(t){this.router.navigate(["/shop"],{queryParams:{collection:t}})}goToTutorial(){this.router.navigate(["/tutorial"])}addToCart(t){t.inStock&&(this.cartService.addToCart(t),console.log("Added to cart:",t.name))}tryOnProduct(t){t.inStock&&this.router.navigate(["/try-on"],{queryParams:{productId:t.id}})}toggleFavorite(t){this.favorites[t]=!this.favorites[t],this.saveFavorites()}isFavorite(t){return!!this.favorites[t]}loadFavorites(){const t=localStorage.getItem("home_favorites");t&&(this.favorites=JSON.parse(t))}saveFavorites(){localStorage.setItem("home_favorites",JSON.stringify(this.favorites))}getDiscountPercent(t){return t.originalPrice?Math.round((t.originalPrice-t.price)/t.originalPrice*100):0}has3DModel(t){if(!t||!t.images||!t.images[0])return!1;const i=t.images[0].toLowerCase();return i.endsWith(".obj")||i.endsWith(".glb")||i.endsWith(".fbx")||!!t.has3DModel}startSlider(){this.sliderInterval=setInterval(()=>{this.nextSlide()},5e3)}nextSlide(){this.currentSlide=(this.currentSlide+1)%3}prevSlide(){this.currentSlide=0===this.currentSlide?2:this.currentSlide-1}goToSlide(t){this.currentSlide=t,this.sliderInterval&&(clearInterval(this.sliderInterval),this.startSlider())}onResize(){}getNewArrivalData(){return this.newArrivals.map(t=>({...t,category:t.category,material:t.material||"Premium Material"}))}static{this.\u0275fac=function(i){return new(i||n)(ee(Hn),ee(sd))}}static{this.\u0275cmp=Ui({type:n,selectors:[["app-home"]],hostBindings:function(i,r){1&i&&ge("resize",function(){return r.onResize()},0,Fs)},decls:237,vars:15,consts:[[1,"home","page-container"],[1,"home-hero"],[1,"hero-background"],[1,"hero-grid-overlay"],[1,"hero-glow"],[1,"hero-content"],[1,"hero-left"],[1,"hero-badge"],[1,"badge-text"],[1,"fas","fa-bolt"],[1,"hero-title"],[1,"title-line-1"],[1,"title-line-2"],[1,"title-line-3"],[1,"hero-subtitle"],[1,"highlight"],[1,"hero-stats"],[1,"stat-item"],[1,"stat-number"],[1,"stat-label"],[1,"hero-actions"],[1,"btn-hero-primary",3,"click"],[1,"fas","fa-vr-cardboard"],[1,"fas","fa-arrow-right"],[1,"btn-hero-secondary",3,"click"],[1,"fas","fa-store"],[1,"hero-scroll-indicator"],[1,"fas","fa-chevron-down"],[1,"hero-right"],[1,"hero-featured-product"],[1,"featured-badge"],[1,"featured-product-card"],[1,"featured-product-image"],[1,"image-container"],[4,"ngIf","ngIfElse"],["featuredImage",""],[1,"product-tags"],["class","tag",4,"ngIf"],["class","featured-product-info",4,"ngIf"],[1,"quick-categories"],[1,"section-header"],[1,"section-title"],[1,"title-accent"],[1,"section-subtitle"],[1,"categories-grid"],["class","category-card",3,"click",4,"ngFor","ngForOf"],[1,"featured-products"],[1,"header-left"],[1,"header-right"],[1,"btn-view-all",3,"click"],[1,"products-grid-home"],["class","product-card-home",3,"featured","click",4,"ngFor","ngForOf"],[1,"try-on-banner"],[1,"banner-content"],[1,"banner-left"],[1,"banner-badge"],[1,"banner-title"],[1,"banner-description"],[1,"banner-features"],[1,"feature"],[1,"fas","fa-rotate"],[1,"fas","fa-expand-alt"],[1,"fas","fa-palette"],[1,"fas","fa-user"],[1,"banner-actions"],[1,"btn-banner-primary",3,"click"],[1,"fas","fa-play-circle"],[1,"btn-banner-secondary",3,"click"],[1,"fas","fa-question-circle"],[1,"banner-right"],[1,"banner-preview"],[1,"preview-container"],[1,"preview-model"],[1,"model-placeholder"],[1,"fas","fa-cube"],[1,"preview-controls"],[1,"control-btn"],[1,"new-arrivals"],[1,"arrivals-slider"],[1,"slider-nav","prev",3,"click"],[1,"fas","fa-chevron-left"],[1,"slider-container"],[1,"slider-track"],["class","arrival-slide",4,"ngFor","ngForOf"],[1,"slider-nav","next",3,"click"],[1,"fas","fa-chevron-right"],[1,"slider-dots"],["class","dot",3,"active","click",4,"ngFor","ngForOf"],[1,"collections-home"],[1,"collections-grid-home"],["class","collection-card-home",3,"click",4,"ngFor","ngForOf"],[1,"testimonials"],[1,"testimonials-grid"],["class","testimonial-card",4,"ngFor","ngForOf"],[1,"cta-home"],[1,"cta-background"],[1,"cta-overlay"],[1,"cta-content-home"],[1,"cta-title-home"],[1,"cta-description-home"],[1,"cta-stats-home"],[1,"cta-stat"],[1,"cta-actions-home"],[1,"btn-cta-primary-home",3,"click"],[1,"btn-cta-secondary-home",3,"click"],[1,"trust-badges-home"],[1,"trust-badge"],[1,"fas","fa-shield-alt"],[1,"fas","fa-truck"],[1,"fas","fa-undo-alt"],[1,"fas","fa-headset"],[1,"model-preview-large"],[3,"modelPath","autoRotate"],[1,"model-hint-large"],[1,"fas","fa-arrows-alt"],["class","featured-img",3,"src","alt",4,"ngIf"],["class","image-placeholder-large",4,"ngIf"],[1,"featured-img",3,"src","alt"],[1,"image-placeholder-large"],[1,"fas","fa-tshirt"],[1,"tag"],[1,"featured-product-info"],[1,"featured-product-header"],[1,"featured-brand"],[1,"featured-rating"],[1,"fas","fa-star"],[1,"review-count"],[1,"featured-name"],[1,"featured-description"],[1,"featured-specs"],[1,"spec"],[1,"fas","fa-tag"],[1,"fas","fa-layer-group"],[1,"featured-price-section"],[1,"price"],[1,"current"],["class","original",4,"ngIf"],["class","discount",4,"ngIf"],[1,"btn-featured-view",3,"click"],[1,"fas","fa-eye"],[1,"original"],[1,"discount"],[1,"category-card",3,"click"],[1,"category-icon"],[1,"category-name"],[1,"category-count"],[1,"category-hover"],[1,"product-card-home",3,"click"],["class","product-rank",4,"ngIf"],[1,"product-image-home"],[1,"product-badges-home"],["class","badge hot",4,"ngIf"],["class","badge sale",4,"ngIf"],["class","badge new",4,"ngIf"],["class","badge model-3d",4,"ngIf"],[1,"image-container-home"],["regularImage",""],[1,"quick-actions-home"],[1,"quick-action-btn",3,"disabled","click"],[1,"fas","fa-shopping-bag"],[1,"fas","fa-user-check"],[1,"quick-action-btn",3,"click"],[1,"fas","fa-heart"],[1,"stock-status-home"],[1,"fas"],[1,"product-info-home"],[1,"product-meta-home"],[1,"brand"],[1,"category"],[1,"product-name-home"],[1,"product-description-home"],[1,"product-specs-home"],[1,"spec-home"],[1,"product-footer-home"],[1,"price-home"],[1,"actions-home"],[1,"btn-quick-view",3,"click"],[1,"btn-quick-add",3,"disabled","click"],[1,"fas","fa-plus"],[1,"product-rank"],[1,"rank-number"],[1,"rank-glow"],[1,"badge","hot"],[1,"badge","sale"],[1,"badge","new"],[1,"badge","model-3d"],[1,"model-preview-home"],[1,"model-overlay"],[1,"product-img-home",3,"src","alt"],[1,"arrival-slide"],[1,"arrival-card-home"],[1,"arrival-image-home"],[1,"arrival-badge-home"],[3,"src","alt"],[1,"arrival-overlay"],[1,"btn-quick-view-arrival",3,"click"],[1,"arrival-info-home"],[1,"arrival-name"],[1,"arrival-description"],[1,"arrival-meta"],[1,"arrival-category"],[1,"arrival-material"],[1,"arrival-price-home"],[1,"arrival-action",3,"click"],[1,"dot",3,"click"],[1,"collection-card-home",3,"click"],[1,"collection-image-home"],[1,"collection-overlay-home"],[1,"collection-content-home"],[1,"collection-name-home"],[1,"collection-description-home"],[1,"collection-stats-home"],[1,"collection-count"],[1,"collection-price"],[1,"btn-collection-home"],[1,"collection-gradient"],[1,"testimonial-card"],[1,"testimonial-header"],[1,"testimonial-avatar"],[1,"testimonial-info"],[1,"testimonial-name"],[1,"testimonial-location"],[1,"testimonial-rating"],["class","fas fa-star",3,"active",4,"ngFor","ngForOf"],[1,"testimonial-text"],[1,"testimonial-product"],[1,"product-bought"],[1,"product-name"]],template:function(i,r){if(1&i&&(M(0,"div",0)(1,"section",1)(2,"div",2),U(3,"div",3)(4,"div",4),b(),M(5,"div",5)(6,"div",6)(7,"div",7)(8,"span",8),P(9,"LIMITED TIME"),b(),U(10,"i",9),b(),M(11,"h1",10)(12,"span",11),P(13,"FREEPPING"),b(),M(14,"span",12),P(15,"LOS SANTOS"),b(),M(16,"span",13),P(17,"STREETWEAR"),b()(),M(18,"p",14),P(19," Experience urban fashion through cutting-edge 3D visualization. "),M(20,"span",15),P(21,"Try before you buy"),b(),P(22," in our virtual fitting room. "),b(),M(23,"div",16)(24,"div",17)(25,"div",18),P(26,"500+"),b(),M(27,"div",19),P(28,"PREMIUM ITEMS"),b()(),M(29,"div",17)(30,"div",18),P(31,"3D"),b(),M(32,"div",19),P(33,"VIRTUAL TRY-ON"),b()(),M(34,"div",17)(35,"div",18),P(36,"24H"),b(),M(37,"div",19),P(38,"EXPRESS DELIVERY"),b()(),M(39,"div",17)(40,"div",18),P(41,"4.8"),b(),M(42,"div",19),P(43,"RATING"),b()()(),M(44,"div",20)(45,"button",21),ge("click",function(){return r.goToTryOn()}),U(46,"i",22),M(47,"span"),P(48,"LAUNCH 3D FITTING ROOM"),b(),U(49,"i",23),b(),M(50,"button",24),ge("click",function(){return r.goToShop()}),U(51,"i",25),M(52,"span"),P(53,"EXPLORE COLLECTION"),b()()(),M(54,"div",26)(55,"span"),P(56,"SCROLL TO EXPLORE"),b(),U(57,"i",27),b()(),M(58,"div",28)(59,"div",29)(60,"div",30),P(61,"FEATURED DROP"),b(),M(62,"div",31)(63,"div",32)(64,"div",33),se(65,hZ,7,2,"ng-container",34),se(66,mZ,2,2,"ng-template",null,35,js),b(),M(68,"div",36),se(69,_Z,2,0,"span",37),se(70,vZ,2,0,"span",37),se(71,yZ,2,0,"span",37),b()(),se(72,bZ,33,14,"div",38),b()()()()(),M(73,"section",39)(74,"div",40)(75,"h2",41),U(76,"span",42),P(77," SHOP BY CATEGORY "),U(78,"span",42),b(),M(79,"p",43),P(80,"Browse our curated collections"),b()(),M(81,"div",44),se(82,CZ,10,4,"div",45),b()(),M(83,"section",46)(84,"div",40)(85,"div",47)(86,"h2",41),U(87,"span",42),P(88," TRENDING NOW "),U(89,"span",42),b(),M(90,"p",43),P(91,"Most popular this week"),b()(),M(92,"div",48)(93,"button",49),ge("click",function(){return r.goToShop()}),P(94," VIEW ALL PRODUCTS "),U(95,"i",23),b()()(),M(96,"div",50),se(97,IZ,53,34,"div",51),b()(),M(98,"section",52)(99,"div",53)(100,"div",54)(101,"div",55),U(102,"i",22),M(103,"span"),P(104,"EXCLUSIVE FEATURE"),b()(),M(105,"h2",56),P(106," VIRTUAL "),M(107,"span",15),P(108,"3D FITTING ROOM"),b()(),M(109,"p",57),P(110," Try on any item in our collection with our advanced 3D visualization technology. See how clothes fit, rotate 360\xb0, and find your perfect style. "),b(),M(111,"div",58)(112,"div",59),U(113,"i",60),M(114,"span"),P(115,"360\xb0 Rotation"),b()(),M(116,"div",59),U(117,"i",61),M(118,"span"),P(119,"Zoom & Detail View"),b()(),M(120,"div",59),U(121,"i",62),M(122,"span"),P(123,"Color Customization"),b()(),M(124,"div",59),U(125,"i",63),M(126,"span"),P(127,"Avatar Support"),b()()(),M(128,"div",64)(129,"button",65),ge("click",function(){return r.goToTryOn()}),U(130,"i",66),P(131," LAUNCH 3D FITTING ROOM "),b(),M(132,"button",67),ge("click",function(){return r.goToTutorial()}),U(133,"i",68),P(134," HOW IT WORKS "),b()()(),M(135,"div",69)(136,"div",70)(137,"div",71)(138,"div",72)(139,"div",73),U(140,"i",74),M(141,"span"),P(142,"3D MODEL PREVIEW"),b()(),M(143,"div",75)(144,"button",76),U(145,"i",60),b(),M(146,"button",76),U(147,"i",61),b(),M(148,"button",76),U(149,"i",62),b()()()()()()()(),M(150,"section",77)(151,"div",40)(152,"h2",41),U(153,"span",42),P(154," NEW ARRIVALS "),U(155,"span",42),b(),M(156,"p",43),P(157,"Fresh from Los Santos"),b()(),M(158,"div",78)(159,"button",79),ge("click",function(){return r.prevSlide()}),U(160,"i",80),b(),M(161,"div",81)(162,"div",82),se(163,RZ,26,7,"div",83),b()(),M(164,"button",84),ge("click",function(){return r.nextSlide()}),U(165,"i",85),b(),M(166,"div",86),se(167,NZ,1,2,"span",87),b()()(),M(168,"section",88)(169,"div",40)(170,"h2",41),U(171,"span",42),P(172," CURATED COLLECTIONS "),U(173,"span",42),b(),M(174,"p",43),P(175,"Handpicked styles for every vibe"),b()(),M(176,"div",89),se(177,LZ,17,6,"div",90),b()(),M(178,"section",91)(179,"div",40)(180,"h2",41),U(181,"span",42),P(182," FROM THE STREETS "),U(183,"span",42),b(),M(184,"p",43),P(185,"What Los Santos is saying"),b()(),M(186,"div",92),se(187,UZ,18,8,"div",93),b()(),M(188,"section",94)(189,"div",95),U(190,"div",96),b(),M(191,"div",97)(192,"h2",98),P(193,"READY TO ELEVATE YOUR STREETWEAR?"),b(),M(194,"p",99),P(195," Join thousands of trendsetters in Los Santos who trust Freepping for premium streetwear. "),b(),M(196,"div",100)(197,"div",101)(198,"div",18),P(199,"10K+"),b(),M(200,"div",19),P(201,"SATISFIED CUSTOMERS"),b()(),M(202,"div",101)(203,"div",18),P(204,"4.8"),b(),M(205,"div",19),P(206,"AVERAGE RATING"),b()(),M(207,"div",101)(208,"div",18),P(209,"24H"),b(),M(210,"div",19),P(211,"DELIVERY TIME"),b()()(),M(212,"div",102)(213,"button",103),ge("click",function(){return r.goToShop()}),U(214,"i",25),P(215," START SHOPPING "),b(),M(216,"button",104),ge("click",function(){return r.goToTryOn()}),U(217,"i",22),P(218," TRY 3D FITTING "),b()(),M(219,"div",105)(220,"div",106),U(221,"i",107),M(222,"span"),P(223,"Secure Payment"),b()(),M(224,"div",106),U(225,"i",108),M(226,"span"),P(227,"Free Shipping $100+"),b()(),M(228,"div",106),U(229,"i",109),M(230,"span"),P(231,"30-Day Returns"),b()(),M(232,"div",106),U(233,"i",110),M(234,"span"),P(235,"24/7 Support"),b()()()()()(),U(236,"app-bottom-nav")),2&i){const o=Bs(67);I(65),q("ngIf",r.featuredProduct&&r.has3DModel(r.featuredProduct))("ngIfElse",o),I(4),q("ngIf",null==r.featuredProduct?null:r.featuredProduct.isNew),I(1),q("ngIf",null==r.featuredProduct?null:r.featuredProduct.originalPrice),I(1),q("ngIf",null==r.featuredProduct?null:r.featuredProduct.has3DModel),I(1),q("ngIf",r.featuredProduct),I(10),q("ngForOf",r.categories),I(15),q("ngForOf",r.featuredProducts),I(65),Xr("transform","translateX("+100*-r.currentSlide+"%)"),I(1),q("ngForOf",r.newArrivals),I(4),q("ngForOf",Ou(14,BZ)),I(10),q("ngForOf",r.collections),I(10),q("ngForOf",r.testimonials)}},dependencies:[is,Kr,Vc,Pg,lv],styles:['.home.page-container[_ngcontent-%COMP%]{background:#0a0a0a;min-height:100vh;color:#fff;overflow-x:hidden}.home.page-container[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px}.home.page-container[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#1a1a1a}.home.page-container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#39ff14;border-radius:4px}.home.page-container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#00ffaa}.home-hero[_ngcontent-%COMP%]{position:relative;min-height:90vh;padding:60px 20px;overflow:hidden}.home-hero[_ngcontent-%COMP%]   .hero-background[_ngcontent-%COMP%]{position:absolute;inset:0;z-index:0}.home-hero[_ngcontent-%COMP%]   .hero-background[_ngcontent-%COMP%]   .hero-grid-overlay[_ngcontent-%COMP%]{position:absolute;inset:0;background-image:linear-gradient(rgba(57,255,20,.05) 1px,transparent 1px),linear-gradient(90deg,rgba(57,255,20,.05) 1px,transparent 1px);background-size:50px 50px;opacity:.3}.home-hero[_ngcontent-%COMP%]   .hero-background[_ngcontent-%COMP%]   .hero-glow[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);width:800px;height:800px;background:radial-gradient(circle,rgba(57,255,20,.1) 0%,transparent 70%);filter:blur(100px);z-index:-1}.home-hero[_ngcontent-%COMP%]   .hero-content[_ngcontent-%COMP%]{position:relative;z-index:1;max-width:1400px;margin:0 auto;display:grid;grid-template-columns:1fr 1fr;gap:60px;align-items:center}.home-hero[_ngcontent-%COMP%]   .hero-left[_ngcontent-%COMP%]   .hero-badge[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:10px;background:rgba(57,255,20,.1);border:1px solid #39ff14;padding:8px 16px;border-radius:30px;margin-bottom:30px}.home-hero[_ngcontent-%COMP%]   .hero-left[_ngcontent-%COMP%]   .hero-badge[_ngcontent-%COMP%]   .badge-text[_ngcontent-%COMP%]{font-size:12px;font-weight:600;letter-spacing:2px;color:#39ff14}.home-hero[_ngcontent-%COMP%]   .hero-left[_ngcontent-%COMP%]   .hero-badge[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#39ff14;font-size:14px;animation:_ngcontent-%COMP%_pulse 2s infinite}.home-hero[_ngcontent-%COMP%]   .hero-left[_ngcontent-%COMP%]   .hero-title[_ngcontent-%COMP%]{font-family:Pricedown,sans-serif;font-size:80px;line-height:1;margin-bottom:20px}.home-hero[_ngcontent-%COMP%]   .hero-left[_ngcontent-%COMP%]   .hero-title[_ngcontent-%COMP%]   .title-line-1[_ngcontent-%COMP%]{color:#39ff14;display:block;text-shadow:0 0 30px rgba(57,255,20,.5)}.home-hero[_ngcontent-%COMP%]   .hero-left[_ngcontent-%COMP%]   .hero-title[_ngcontent-%COMP%]   .title-line-2[_ngcontent-%COMP%]{color:#fff;display:block;font-size:60px}.home-hero[_ngcontent-%COMP%]   .hero-left[_ngcontent-%COMP%]   .hero-title[_ngcontent-%COMP%]   .title-line-3[_ngcontent-%COMP%]{color:#ccc;display:block;font-size:40px;letter-spacing:5px}.home-hero[_ngcontent-%COMP%]   .hero-left[_ngcontent-%COMP%]   .hero-subtitle[_ngcontent-%COMP%]{font-size:18px;color:#b0b0b0;line-height:1.6;margin-bottom:40px;max-width:500px}.home-hero[_ngcontent-%COMP%]   .hero-left[_ngcontent-%COMP%]   .hero-subtitle[_ngcontent-%COMP%]   .highlight[_ngcontent-%COMP%]{color:#39ff14;font-weight:600}.home-hero[_ngcontent-%COMP%]   .hero-left[_ngcontent-%COMP%]   .hero-stats[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(4,1fr);gap:20px;margin-bottom:40px}.home-hero[_ngcontent-%COMP%]   .hero-left[_ngcontent-%COMP%]   .hero-stats[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]{text-align:center;padding:20px;background:rgba(255,255,255,.05);border-radius:10px;border:1px solid rgba(255,255,255,.1);transition:all .3s ease}.home-hero[_ngcontent-%COMP%]   .hero-left[_ngcontent-%COMP%]   .hero-stats[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]:hover{border-color:#39ff14;transform:translateY(-5px);background:rgba(57,255,20,.05)}.home-hero[_ngcontent-%COMP%]   .hero-left[_ngcontent-%COMP%]   .hero-stats[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]   .stat-number[_ngcontent-%COMP%]{font-size:32px;font-weight:700;color:#39ff14;margin-bottom:5px}.home-hero[_ngcontent-%COMP%]   .hero-left[_ngcontent-%COMP%]   .hero-stats[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]   .stat-label[_ngcontent-%COMP%]{font-size:12px;color:#888;letter-spacing:1px;text-transform:uppercase}.home-hero[_ngcontent-%COMP%]   .hero-left[_ngcontent-%COMP%]   .hero-actions[_ngcontent-%COMP%]{display:flex;gap:20px;margin-bottom:50px}.home-hero[_ngcontent-%COMP%]   .hero-left[_ngcontent-%COMP%]   .hero-actions[_ngcontent-%COMP%]   .btn-hero-primary[_ngcontent-%COMP%]{flex:1;background:linear-gradient(45deg,#39ff14,#00ffaa);color:#000;border:none;padding:18px 30px;border-radius:10px;font-size:16px;font-weight:600;display:flex;align-items:center;justify-content:center;gap:15px;cursor:pointer;transition:all .3s ease;text-transform:uppercase;letter-spacing:1px}.home-hero[_ngcontent-%COMP%]   .hero-left[_ngcontent-%COMP%]   .hero-actions[_ngcontent-%COMP%]   .btn-hero-primary[_ngcontent-%COMP%]:hover{transform:translateY(-3px);box-shadow:0 10px 30px #39ff1466}.home-hero[_ngcontent-%COMP%]   .hero-left[_ngcontent-%COMP%]   .hero-actions[_ngcontent-%COMP%]   .btn-hero-primary[_ngcontent-%COMP%]:hover   i[_ngcontent-%COMP%]:last-child{transform:translate(5px)}.home-hero[_ngcontent-%COMP%]   .hero-left[_ngcontent-%COMP%]   .hero-actions[_ngcontent-%COMP%]   .btn-hero-primary[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]:last-child{transition:transform .3s ease}.home-hero[_ngcontent-%COMP%]   .hero-left[_ngcontent-%COMP%]   .hero-actions[_ngcontent-%COMP%]   .btn-hero-secondary[_ngcontent-%COMP%]{flex:1;background:transparent;color:#fff;border:2px solid #39ff14;padding:18px 30px;border-radius:10px;font-size:16px;font-weight:600;display:flex;align-items:center;justify-content:center;gap:15px;cursor:pointer;transition:all .3s ease;text-transform:uppercase;letter-spacing:1px}.home-hero[_ngcontent-%COMP%]   .hero-left[_ngcontent-%COMP%]   .hero-actions[_ngcontent-%COMP%]   .btn-hero-secondary[_ngcontent-%COMP%]:hover{background:rgba(57,255,20,.1);transform:translateY(-3px)}.home-hero[_ngcontent-%COMP%]   .hero-left[_ngcontent-%COMP%]   .hero-scroll-indicator[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;color:#888;font-size:14px;letter-spacing:2px}.home-hero[_ngcontent-%COMP%]   .hero-left[_ngcontent-%COMP%]   .hero-scroll-indicator[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_bounce 2s infinite}.home-hero[_ngcontent-%COMP%]   .hero-right[_ngcontent-%COMP%]   .hero-featured-product[_ngcontent-%COMP%]{position:relative}.home-hero[_ngcontent-%COMP%]   .hero-right[_ngcontent-%COMP%]   .hero-featured-product[_ngcontent-%COMP%]   .featured-badge[_ngcontent-%COMP%]{position:absolute;top:-10px;left:50%;transform:translate(-50%);background:#ff3366;color:#fff;padding:8px 20px;border-radius:20px;font-size:12px;font-weight:600;letter-spacing:2px;z-index:2;box-shadow:0 5px 20px #ff33664d}.home-hero[_ngcontent-%COMP%]   .hero-right[_ngcontent-%COMP%]   .hero-featured-product[_ngcontent-%COMP%]   .featured-product-card[_ngcontent-%COMP%]{background:rgba(26,26,26,.8);-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border-radius:20px;border:2px solid rgba(57,255,20,.3);overflow:hidden;box-shadow:0 20px 60px #00000080}.home-hero[_ngcontent-%COMP%]   .hero-right[_ngcontent-%COMP%]   .hero-featured-product[_ngcontent-%COMP%]   .featured-product-card[_ngcontent-%COMP%]   .featured-product-image[_ngcontent-%COMP%]{position:relative;height:400px}.home-hero[_ngcontent-%COMP%]   .hero-right[_ngcontent-%COMP%]   .hero-featured-product[_ngcontent-%COMP%]   .featured-product-card[_ngcontent-%COMP%]   .featured-product-image[_ngcontent-%COMP%]   .image-container[_ngcontent-%COMP%]{height:100%;width:100%;position:relative}.home-hero[_ngcontent-%COMP%]   .hero-right[_ngcontent-%COMP%]   .hero-featured-product[_ngcontent-%COMP%]   .featured-product-card[_ngcontent-%COMP%]   .featured-product-image[_ngcontent-%COMP%]   .image-container[_ngcontent-%COMP%]   .model-preview-large[_ngcontent-%COMP%], .home-hero[_ngcontent-%COMP%]   .hero-right[_ngcontent-%COMP%]   .hero-featured-product[_ngcontent-%COMP%]   .featured-product-card[_ngcontent-%COMP%]   .featured-product-image[_ngcontent-%COMP%]   .image-container[_ngcontent-%COMP%]   .featured-img[_ngcontent-%COMP%], .home-hero[_ngcontent-%COMP%]   .hero-right[_ngcontent-%COMP%]   .hero-featured-product[_ngcontent-%COMP%]   .featured-product-card[_ngcontent-%COMP%]   .featured-product-image[_ngcontent-%COMP%]   .image-container[_ngcontent-%COMP%]   .image-placeholder-large[_ngcontent-%COMP%]{height:100%;width:100%;object-fit:cover}.home-hero[_ngcontent-%COMP%]   .hero-right[_ngcontent-%COMP%]   .hero-featured-product[_ngcontent-%COMP%]   .featured-product-card[_ngcontent-%COMP%]   .featured-product-image[_ngcontent-%COMP%]   .image-container[_ngcontent-%COMP%]   .model-preview-large[_ngcontent-%COMP%]{position:relative}.home-hero[_ngcontent-%COMP%]   .hero-right[_ngcontent-%COMP%]   .hero-featured-product[_ngcontent-%COMP%]   .featured-product-card[_ngcontent-%COMP%]   .featured-product-image[_ngcontent-%COMP%]   .image-container[_ngcontent-%COMP%]   .model-preview-large[_ngcontent-%COMP%]   .model-hint-large[_ngcontent-%COMP%]{position:absolute;bottom:20px;left:50%;transform:translate(-50%);background:rgba(0,0,0,.8);color:#39ff14;padding:8px 16px;border-radius:20px;font-size:12px;display:flex;align-items:center;gap:8px;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px)}.home-hero[_ngcontent-%COMP%]   .hero-right[_ngcontent-%COMP%]   .hero-featured-product[_ngcontent-%COMP%]   .featured-product-card[_ngcontent-%COMP%]   .featured-product-image[_ngcontent-%COMP%]   .image-container[_ngcontent-%COMP%]   .image-placeholder-large[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;background:#1a1a1a;color:#666}.home-hero[_ngcontent-%COMP%]   .hero-right[_ngcontent-%COMP%]   .hero-featured-product[_ngcontent-%COMP%]   .featured-product-card[_ngcontent-%COMP%]   .featured-product-image[_ngcontent-%COMP%]   .image-container[_ngcontent-%COMP%]   .image-placeholder-large[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:60px;margin-bottom:20px;color:#39ff14}.home-hero[_ngcontent-%COMP%]   .hero-right[_ngcontent-%COMP%]   .hero-featured-product[_ngcontent-%COMP%]   .featured-product-card[_ngcontent-%COMP%]   .featured-product-image[_ngcontent-%COMP%]   .image-container[_ngcontent-%COMP%]   .image-placeholder-large[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:14px;letter-spacing:2px}.home-hero[_ngcontent-%COMP%]   .hero-right[_ngcontent-%COMP%]   .hero-featured-product[_ngcontent-%COMP%]   .featured-product-card[_ngcontent-%COMP%]   .featured-product-image[_ngcontent-%COMP%]   .product-tags[_ngcontent-%COMP%]{position:absolute;bottom:20px;left:20px;display:flex;gap:10px}.home-hero[_ngcontent-%COMP%]   .hero-right[_ngcontent-%COMP%]   .hero-featured-product[_ngcontent-%COMP%]   .featured-product-card[_ngcontent-%COMP%]   .featured-product-image[_ngcontent-%COMP%]   .product-tags[_ngcontent-%COMP%]   .tag[_ngcontent-%COMP%]{background:rgba(0,0,0,.8);color:#fff;padding:6px 12px;border-radius:15px;font-size:11px;letter-spacing:1px;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px)}.home-hero[_ngcontent-%COMP%]   .hero-right[_ngcontent-%COMP%]   .hero-featured-product[_ngcontent-%COMP%]   .featured-product-card[_ngcontent-%COMP%]   .featured-product-image[_ngcontent-%COMP%]   .product-tags[_ngcontent-%COMP%]   .tag[_ngcontent-%COMP%]:first-child{background:rgba(57,255,20,.8);color:#000}.home-hero[_ngcontent-%COMP%]   .hero-right[_ngcontent-%COMP%]   .hero-featured-product[_ngcontent-%COMP%]   .featured-product-card[_ngcontent-%COMP%]   .featured-product-info[_ngcontent-%COMP%]{padding:30px}.home-hero[_ngcontent-%COMP%]   .hero-right[_ngcontent-%COMP%]   .hero-featured-product[_ngcontent-%COMP%]   .featured-product-card[_ngcontent-%COMP%]   .featured-product-info[_ngcontent-%COMP%]   .featured-product-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:15px}.home-hero[_ngcontent-%COMP%]   .hero-right[_ngcontent-%COMP%]   .hero-featured-product[_ngcontent-%COMP%]   .featured-product-card[_ngcontent-%COMP%]   .featured-product-info[_ngcontent-%COMP%]   .featured-product-header[_ngcontent-%COMP%]   .featured-brand[_ngcontent-%COMP%]{color:#39ff14;font-size:14px;font-weight:600;letter-spacing:2px;text-transform:uppercase}.home-hero[_ngcontent-%COMP%]   .hero-right[_ngcontent-%COMP%]   .hero-featured-product[_ngcontent-%COMP%]   .featured-product-card[_ngcontent-%COMP%]   .featured-product-info[_ngcontent-%COMP%]   .featured-product-header[_ngcontent-%COMP%]   .featured-rating[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;color:#f90}.home-hero[_ngcontent-%COMP%]   .hero-right[_ngcontent-%COMP%]   .hero-featured-product[_ngcontent-%COMP%]   .featured-product-card[_ngcontent-%COMP%]   .featured-product-info[_ngcontent-%COMP%]   .featured-product-header[_ngcontent-%COMP%]   .featured-rating[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:14px}.home-hero[_ngcontent-%COMP%]   .hero-right[_ngcontent-%COMP%]   .hero-featured-product[_ngcontent-%COMP%]   .featured-product-card[_ngcontent-%COMP%]   .featured-product-info[_ngcontent-%COMP%]   .featured-product-header[_ngcontent-%COMP%]   .featured-rating[_ngcontent-%COMP%]   .review-count[_ngcontent-%COMP%]{color:#666;font-size:12px}.home-hero[_ngcontent-%COMP%]   .hero-right[_ngcontent-%COMP%]   .hero-featured-product[_ngcontent-%COMP%]   .featured-product-card[_ngcontent-%COMP%]   .featured-product-info[_ngcontent-%COMP%]   .featured-name[_ngcontent-%COMP%]{font-size:24px;font-weight:700;margin-bottom:15px;line-height:1.3}.home-hero[_ngcontent-%COMP%]   .hero-right[_ngcontent-%COMP%]   .hero-featured-product[_ngcontent-%COMP%]   .featured-product-card[_ngcontent-%COMP%]   .featured-product-info[_ngcontent-%COMP%]   .featured-description[_ngcontent-%COMP%]{color:#b0b0b0;font-size:14px;line-height:1.6;margin-bottom:20px}.home-hero[_ngcontent-%COMP%]   .hero-right[_ngcontent-%COMP%]   .hero-featured-product[_ngcontent-%COMP%]   .featured-product-card[_ngcontent-%COMP%]   .featured-product-info[_ngcontent-%COMP%]   .featured-specs[_ngcontent-%COMP%]{display:flex;gap:20px;margin-bottom:25px}.home-hero[_ngcontent-%COMP%]   .hero-right[_ngcontent-%COMP%]   .hero-featured-product[_ngcontent-%COMP%]   .featured-product-card[_ngcontent-%COMP%]   .featured-product-info[_ngcontent-%COMP%]   .featured-specs[_ngcontent-%COMP%]   .spec[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;color:#888;font-size:13px}.home-hero[_ngcontent-%COMP%]   .hero-right[_ngcontent-%COMP%]   .hero-featured-product[_ngcontent-%COMP%]   .featured-product-card[_ngcontent-%COMP%]   .featured-product-info[_ngcontent-%COMP%]   .featured-specs[_ngcontent-%COMP%]   .spec[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#39ff14}.home-hero[_ngcontent-%COMP%]   .hero-right[_ngcontent-%COMP%]   .hero-featured-product[_ngcontent-%COMP%]   .featured-product-card[_ngcontent-%COMP%]   .featured-product-info[_ngcontent-%COMP%]   .featured-price-section[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.home-hero[_ngcontent-%COMP%]   .hero-right[_ngcontent-%COMP%]   .hero-featured-product[_ngcontent-%COMP%]   .featured-product-card[_ngcontent-%COMP%]   .featured-product-info[_ngcontent-%COMP%]   .featured-price-section[_ngcontent-%COMP%]   .price[_ngcontent-%COMP%]{display:flex;align-items:center;gap:15px}.home-hero[_ngcontent-%COMP%]   .hero-right[_ngcontent-%COMP%]   .hero-featured-product[_ngcontent-%COMP%]   .featured-product-card[_ngcontent-%COMP%]   .featured-product-info[_ngcontent-%COMP%]   .featured-price-section[_ngcontent-%COMP%]   .price[_ngcontent-%COMP%]   .current[_ngcontent-%COMP%]{font-size:32px;font-weight:700;color:#39ff14}.home-hero[_ngcontent-%COMP%]   .hero-right[_ngcontent-%COMP%]   .hero-featured-product[_ngcontent-%COMP%]   .featured-product-card[_ngcontent-%COMP%]   .featured-product-info[_ngcontent-%COMP%]   .featured-price-section[_ngcontent-%COMP%]   .price[_ngcontent-%COMP%]   .original[_ngcontent-%COMP%]{font-size:20px;color:#666;text-decoration:line-through}.home-hero[_ngcontent-%COMP%]   .hero-right[_ngcontent-%COMP%]   .hero-featured-product[_ngcontent-%COMP%]   .featured-product-card[_ngcontent-%COMP%]   .featured-product-info[_ngcontent-%COMP%]   .featured-price-section[_ngcontent-%COMP%]   .price[_ngcontent-%COMP%]   .discount[_ngcontent-%COMP%]{background:#ff3366;color:#fff;padding:4px 10px;border-radius:15px;font-size:12px;font-weight:600}.home-hero[_ngcontent-%COMP%]   .hero-right[_ngcontent-%COMP%]   .hero-featured-product[_ngcontent-%COMP%]   .featured-product-card[_ngcontent-%COMP%]   .featured-product-info[_ngcontent-%COMP%]   .featured-price-section[_ngcontent-%COMP%]   .btn-featured-view[_ngcontent-%COMP%]{background:transparent;color:#fff;border:2px solid #39ff14;padding:12px 24px;border-radius:8px;font-size:14px;font-weight:600;display:flex;align-items:center;gap:10px;cursor:pointer;transition:all .3s ease}.home-hero[_ngcontent-%COMP%]   .hero-right[_ngcontent-%COMP%]   .hero-featured-product[_ngcontent-%COMP%]   .featured-product-card[_ngcontent-%COMP%]   .featured-product-info[_ngcontent-%COMP%]   .featured-price-section[_ngcontent-%COMP%]   .btn-featured-view[_ngcontent-%COMP%]:hover{background:rgba(57,255,20,.1);transform:translate(5px)}.quick-categories[_ngcontent-%COMP%]{padding:80px 20px;background:#111}.quick-categories[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:60px}.quick-categories[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]{font-size:36px;display:flex;align-items:center;justify-content:center;gap:20px;margin-bottom:15px;font-family:Oswald,sans-serif;letter-spacing:3px}.quick-categories[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]   .title-accent[_ngcontent-%COMP%]{width:60px;height:2px;background:#39ff14}.quick-categories[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   .section-subtitle[_ngcontent-%COMP%]{color:#888;font-size:16px;max-width:600px;margin:0 auto}.quick-categories[_ngcontent-%COMP%]   .categories-grid[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;display:grid;grid-template-columns:repeat(auto-fit,minmax(180px,1fr));gap:20px}.quick-categories[_ngcontent-%COMP%]   .categories-grid[_ngcontent-%COMP%]   .category-card[_ngcontent-%COMP%]{background:#1a1a1a;border-radius:15px;padding:30px 20px;text-align:center;cursor:pointer;transition:all .3s ease;border:1px solid rgba(255,255,255,.1);position:relative;overflow:hidden}.quick-categories[_ngcontent-%COMP%]   .categories-grid[_ngcontent-%COMP%]   .category-card[_ngcontent-%COMP%]:hover{border-color:#39ff14;transform:translateY(-10px);box-shadow:0 20px 40px #39ff141a}.quick-categories[_ngcontent-%COMP%]   .categories-grid[_ngcontent-%COMP%]   .category-card[_ngcontent-%COMP%]:hover   .category-hover[_ngcontent-%COMP%]{opacity:1;transform:translateY(0)}.quick-categories[_ngcontent-%COMP%]   .categories-grid[_ngcontent-%COMP%]   .category-card[_ngcontent-%COMP%]:hover   .category-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{transform:scale(1.2)}.quick-categories[_ngcontent-%COMP%]   .categories-grid[_ngcontent-%COMP%]   .category-card[_ngcontent-%COMP%]   .category-icon[_ngcontent-%COMP%]{margin-bottom:20px}.quick-categories[_ngcontent-%COMP%]   .categories-grid[_ngcontent-%COMP%]   .category-card[_ngcontent-%COMP%]   .category-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:40px;color:#39ff14;transition:transform .3s ease}.quick-categories[_ngcontent-%COMP%]   .categories-grid[_ngcontent-%COMP%]   .category-card[_ngcontent-%COMP%]   .category-name[_ngcontent-%COMP%]{font-size:18px;font-weight:600;margin-bottom:10px;color:#fff}.quick-categories[_ngcontent-%COMP%]   .categories-grid[_ngcontent-%COMP%]   .category-card[_ngcontent-%COMP%]   .category-count[_ngcontent-%COMP%]{color:#888;font-size:14px}.quick-categories[_ngcontent-%COMP%]   .categories-grid[_ngcontent-%COMP%]   .category-card[_ngcontent-%COMP%]   .category-hover[_ngcontent-%COMP%]{position:absolute;bottom:20px;left:0;right:0;text-align:center;opacity:0;transform:translateY(10px);transition:all .3s ease}.quick-categories[_ngcontent-%COMP%]   .categories-grid[_ngcontent-%COMP%]   .category-card[_ngcontent-%COMP%]   .category-hover[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#39ff14;font-size:12px;letter-spacing:2px}.featured-products[_ngcontent-%COMP%]{padding:80px 20px;background:#0a0a0a}.featured-products[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]{max-width:1400px;margin:0 auto 60px;display:flex;justify-content:space-between;align-items:flex-end}.featured-products[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]{font-size:36px;display:flex;align-items:center;gap:20px;margin-bottom:15px;font-family:Oswald,sans-serif;letter-spacing:3px}.featured-products[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]   .title-accent[_ngcontent-%COMP%]{width:60px;height:2px;background:#39ff14}.featured-products[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   .section-subtitle[_ngcontent-%COMP%]{color:#888;font-size:16px}.featured-products[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   .header-right[_ngcontent-%COMP%]   .btn-view-all[_ngcontent-%COMP%]{background:transparent;color:#fff;border:2px solid #39ff14;padding:12px 24px;border-radius:8px;font-size:14px;font-weight:600;display:flex;align-items:center;gap:10px;cursor:pointer;transition:all .3s ease}.featured-products[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   .header-right[_ngcontent-%COMP%]   .btn-view-all[_ngcontent-%COMP%]:hover{background:rgba(57,255,20,.1);transform:translate(5px)}.featured-products[_ngcontent-%COMP%]   .products-grid-home[_ngcontent-%COMP%]{max-width:1400px;margin:0 auto;display:grid;grid-template-columns:repeat(auto-fill,minmax(300px,1fr));gap:30px}.featured-products[_ngcontent-%COMP%]   .products-grid-home[_ngcontent-%COMP%]   .product-card-home[_ngcontent-%COMP%]{background:#1a1a1a;border-radius:15px;overflow:hidden;cursor:pointer;transition:all .3s ease;border:1px solid rgba(255,255,255,.1);position:relative}.featured-products[_ngcontent-%COMP%]   .products-grid-home[_ngcontent-%COMP%]   .product-card-home.featured[_ngcontent-%COMP%]{grid-column:span 2}@media (max-width: 1024px){.featured-products[_ngcontent-%COMP%]   .products-grid-home[_ngcontent-%COMP%]   .product-card-home.featured[_ngcontent-%COMP%]{grid-column:span 1}}.featured-products[_ngcontent-%COMP%]   .products-grid-home[_ngcontent-%COMP%]   .product-card-home[_ngcontent-%COMP%]:hover{border-color:#39ff14;transform:translateY(-10px);box-shadow:0 20px 40px #39ff141a}.featured-products[_ngcontent-%COMP%]   .products-grid-home[_ngcontent-%COMP%]   .product-card-home[_ngcontent-%COMP%]:hover   .quick-actions-home[_ngcontent-%COMP%]{opacity:1;transform:translateY(0)}.featured-products[_ngcontent-%COMP%]   .products-grid-home[_ngcontent-%COMP%]   .product-card-home[_ngcontent-%COMP%]   .product-rank[_ngcontent-%COMP%]{position:absolute;top:15px;left:15px;z-index:2}.featured-products[_ngcontent-%COMP%]   .products-grid-home[_ngcontent-%COMP%]   .product-card-home[_ngcontent-%COMP%]   .product-rank[_ngcontent-%COMP%]   .rank-number[_ngcontent-%COMP%]{font-size:24px;font-weight:700;color:#f90;position:relative;z-index:1}.featured-products[_ngcontent-%COMP%]   .products-grid-home[_ngcontent-%COMP%]   .product-card-home[_ngcontent-%COMP%]   .product-rank[_ngcontent-%COMP%]   .rank-glow[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);width:50px;height:50px;background:radial-gradient(circle,rgba(255,153,0,.3) 0%,transparent 70%);filter:blur(10px)}.featured-products[_ngcontent-%COMP%]   .products-grid-home[_ngcontent-%COMP%]   .product-card-home[_ngcontent-%COMP%]   .product-image-home[_ngcontent-%COMP%]{height:250px;position:relative;overflow:hidden}.featured-products[_ngcontent-%COMP%]   .products-grid-home[_ngcontent-%COMP%]   .product-card-home[_ngcontent-%COMP%]   .product-image-home[_ngcontent-%COMP%]   .product-badges-home[_ngcontent-%COMP%]{position:absolute;top:15px;right:15px;display:flex;flex-direction:column;gap:8px;z-index:2}.featured-products[_ngcontent-%COMP%]   .products-grid-home[_ngcontent-%COMP%]   .product-card-home[_ngcontent-%COMP%]   .product-image-home[_ngcontent-%COMP%]   .product-badges-home[_ngcontent-%COMP%]   .badge[_ngcontent-%COMP%]{padding:6px 12px;border-radius:4px;font-size:11px;font-weight:600;letter-spacing:1px;text-transform:uppercase}.featured-products[_ngcontent-%COMP%]   .products-grid-home[_ngcontent-%COMP%]   .product-card-home[_ngcontent-%COMP%]   .product-image-home[_ngcontent-%COMP%]   .product-badges-home[_ngcontent-%COMP%]   .badge.hot[_ngcontent-%COMP%]{background:#ff3366;color:#fff}.featured-products[_ngcontent-%COMP%]   .products-grid-home[_ngcontent-%COMP%]   .product-card-home[_ngcontent-%COMP%]   .product-image-home[_ngcontent-%COMP%]   .product-badges-home[_ngcontent-%COMP%]   .badge.sale[_ngcontent-%COMP%]{background:#ff9900;color:#000}.featured-products[_ngcontent-%COMP%]   .products-grid-home[_ngcontent-%COMP%]   .product-card-home[_ngcontent-%COMP%]   .product-image-home[_ngcontent-%COMP%]   .product-badges-home[_ngcontent-%COMP%]   .badge.new[_ngcontent-%COMP%]{background:#39ff14;color:#000}.featured-products[_ngcontent-%COMP%]   .products-grid-home[_ngcontent-%COMP%]   .product-card-home[_ngcontent-%COMP%]   .product-image-home[_ngcontent-%COMP%]   .product-badges-home[_ngcontent-%COMP%]   .badge.model-3d[_ngcontent-%COMP%]{background:#3366ff;color:#fff}.featured-products[_ngcontent-%COMP%]   .products-grid-home[_ngcontent-%COMP%]   .product-card-home[_ngcontent-%COMP%]   .product-image-home[_ngcontent-%COMP%]   .image-container-home[_ngcontent-%COMP%], .featured-products[_ngcontent-%COMP%]   .products-grid-home[_ngcontent-%COMP%]   .product-card-home[_ngcontent-%COMP%]   .product-image-home[_ngcontent-%COMP%]   .image-container-home[_ngcontent-%COMP%]   .model-preview-home[_ngcontent-%COMP%]{height:100%;width:100%;position:relative}.featured-products[_ngcontent-%COMP%]   .products-grid-home[_ngcontent-%COMP%]   .product-card-home[_ngcontent-%COMP%]   .product-image-home[_ngcontent-%COMP%]   .image-container-home[_ngcontent-%COMP%]   .model-preview-home[_ngcontent-%COMP%]   .model-overlay[_ngcontent-%COMP%]{position:absolute;bottom:15px;right:15px;background:rgba(0,0,0,.8);color:#39ff14;padding:6px 12px;border-radius:15px;font-size:11px;display:flex;align-items:center;gap:6px;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px)}.featured-products[_ngcontent-%COMP%]   .products-grid-home[_ngcontent-%COMP%]   .product-card-home[_ngcontent-%COMP%]   .product-image-home[_ngcontent-%COMP%]   .image-container-home[_ngcontent-%COMP%]   .product-img-home[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.featured-products[_ngcontent-%COMP%]   .products-grid-home[_ngcontent-%COMP%]   .product-card-home[_ngcontent-%COMP%]   .product-image-home[_ngcontent-%COMP%]   .quick-actions-home[_ngcontent-%COMP%]{position:absolute;top:15px;left:15px;display:flex;flex-direction:column;gap:10px;opacity:0;transform:translateY(-10px);transition:all .3s ease}.featured-products[_ngcontent-%COMP%]   .products-grid-home[_ngcontent-%COMP%]   .product-card-home[_ngcontent-%COMP%]   .product-image-home[_ngcontent-%COMP%]   .quick-actions-home[_ngcontent-%COMP%]   .quick-action-btn[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:50%;background:rgba(0,0,0,.8);border:1px solid #39ff14;color:#fff;display:flex;align-items:center;justify-content:center;cursor:pointer;transition:all .3s ease;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px)}.featured-products[_ngcontent-%COMP%]   .products-grid-home[_ngcontent-%COMP%]   .product-card-home[_ngcontent-%COMP%]   .product-image-home[_ngcontent-%COMP%]   .quick-actions-home[_ngcontent-%COMP%]   .quick-action-btn[_ngcontent-%COMP%]:hover:not(:disabled){background:#39ff14;color:#000}.featured-products[_ngcontent-%COMP%]   .products-grid-home[_ngcontent-%COMP%]   .product-card-home[_ngcontent-%COMP%]   .product-image-home[_ngcontent-%COMP%]   .quick-actions-home[_ngcontent-%COMP%]   .quick-action-btn[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.featured-products[_ngcontent-%COMP%]   .products-grid-home[_ngcontent-%COMP%]   .product-card-home[_ngcontent-%COMP%]   .product-image-home[_ngcontent-%COMP%]   .quick-actions-home[_ngcontent-%COMP%]   .quick-action-btn[_ngcontent-%COMP%]   .fa-heart.active[_ngcontent-%COMP%]{color:#f36}.featured-products[_ngcontent-%COMP%]   .products-grid-home[_ngcontent-%COMP%]   .product-card-home[_ngcontent-%COMP%]   .product-image-home[_ngcontent-%COMP%]   .stock-status-home[_ngcontent-%COMP%]{position:absolute;bottom:15px;left:15px;display:flex;align-items:center;gap:8px;padding:6px 12px;border-radius:15px;font-size:12px;font-weight:600;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px)}.featured-products[_ngcontent-%COMP%]   .products-grid-home[_ngcontent-%COMP%]   .product-card-home[_ngcontent-%COMP%]   .product-image-home[_ngcontent-%COMP%]   .stock-status-home.in-stock[_ngcontent-%COMP%]{background:rgba(57,255,20,.2);color:#39ff14;border:1px solid rgba(57,255,20,.5)}.featured-products[_ngcontent-%COMP%]   .products-grid-home[_ngcontent-%COMP%]   .product-card-home[_ngcontent-%COMP%]   .product-image-home[_ngcontent-%COMP%]   .stock-status-home.out-of-stock[_ngcontent-%COMP%]{background:rgba(255,51,102,.2);color:#f36;border:1px solid rgba(255,51,102,.5)}.featured-products[_ngcontent-%COMP%]   .products-grid-home[_ngcontent-%COMP%]   .product-card-home[_ngcontent-%COMP%]   .product-info-home[_ngcontent-%COMP%]{padding:25px}.featured-products[_ngcontent-%COMP%]   .products-grid-home[_ngcontent-%COMP%]   .product-card-home[_ngcontent-%COMP%]   .product-info-home[_ngcontent-%COMP%]   .product-meta-home[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:10px}.featured-products[_ngcontent-%COMP%]   .products-grid-home[_ngcontent-%COMP%]   .product-card-home[_ngcontent-%COMP%]   .product-info-home[_ngcontent-%COMP%]   .product-meta-home[_ngcontent-%COMP%]   .brand[_ngcontent-%COMP%]{color:#39ff14;font-size:12px;font-weight:600;letter-spacing:2px;text-transform:uppercase}.featured-products[_ngcontent-%COMP%]   .products-grid-home[_ngcontent-%COMP%]   .product-card-home[_ngcontent-%COMP%]   .product-info-home[_ngcontent-%COMP%]   .product-meta-home[_ngcontent-%COMP%]   .category[_ngcontent-%COMP%]{color:#666;font-size:12px}.featured-products[_ngcontent-%COMP%]   .products-grid-home[_ngcontent-%COMP%]   .product-card-home[_ngcontent-%COMP%]   .product-info-home[_ngcontent-%COMP%]   .product-name-home[_ngcontent-%COMP%]{font-size:18px;font-weight:600;margin-bottom:12px;line-height:1.4}.featured-products[_ngcontent-%COMP%]   .products-grid-home[_ngcontent-%COMP%]   .product-card-home[_ngcontent-%COMP%]   .product-info-home[_ngcontent-%COMP%]   .product-description-home[_ngcontent-%COMP%]{color:#888;font-size:14px;line-height:1.6;margin-bottom:20px}.featured-products[_ngcontent-%COMP%]   .products-grid-home[_ngcontent-%COMP%]   .product-card-home[_ngcontent-%COMP%]   .product-info-home[_ngcontent-%COMP%]   .product-specs-home[_ngcontent-%COMP%]{display:flex;gap:20px;margin-bottom:25px}.featured-products[_ngcontent-%COMP%]   .products-grid-home[_ngcontent-%COMP%]   .product-card-home[_ngcontent-%COMP%]   .product-info-home[_ngcontent-%COMP%]   .product-specs-home[_ngcontent-%COMP%]   .spec-home[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;color:#666;font-size:12px}.featured-products[_ngcontent-%COMP%]   .products-grid-home[_ngcontent-%COMP%]   .product-card-home[_ngcontent-%COMP%]   .product-info-home[_ngcontent-%COMP%]   .product-specs-home[_ngcontent-%COMP%]   .spec-home[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#39ff14}.featured-products[_ngcontent-%COMP%]   .products-grid-home[_ngcontent-%COMP%]   .product-card-home[_ngcontent-%COMP%]   .product-info-home[_ngcontent-%COMP%]   .product-footer-home[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;border-top:1px solid rgba(255,255,255,.1);padding-top:20px}.featured-products[_ngcontent-%COMP%]   .products-grid-home[_ngcontent-%COMP%]   .product-card-home[_ngcontent-%COMP%]   .product-info-home[_ngcontent-%COMP%]   .product-footer-home[_ngcontent-%COMP%]   .price-home[_ngcontent-%COMP%]   .current[_ngcontent-%COMP%]{font-size:22px;font-weight:700;color:#39ff14;margin-right:10px}.featured-products[_ngcontent-%COMP%]   .products-grid-home[_ngcontent-%COMP%]   .product-card-home[_ngcontent-%COMP%]   .product-info-home[_ngcontent-%COMP%]   .product-footer-home[_ngcontent-%COMP%]   .price-home[_ngcontent-%COMP%]   .original[_ngcontent-%COMP%]{font-size:16px;color:#666;text-decoration:line-through}.featured-products[_ngcontent-%COMP%]   .products-grid-home[_ngcontent-%COMP%]   .product-card-home[_ngcontent-%COMP%]   .product-info-home[_ngcontent-%COMP%]   .product-footer-home[_ngcontent-%COMP%]   .actions-home[_ngcontent-%COMP%]{display:flex;gap:10px}.featured-products[_ngcontent-%COMP%]   .products-grid-home[_ngcontent-%COMP%]   .product-card-home[_ngcontent-%COMP%]   .product-info-home[_ngcontent-%COMP%]   .product-footer-home[_ngcontent-%COMP%]   .actions-home[_ngcontent-%COMP%]   .btn-quick-view[_ngcontent-%COMP%], .featured-products[_ngcontent-%COMP%]   .products-grid-home[_ngcontent-%COMP%]   .product-card-home[_ngcontent-%COMP%]   .product-info-home[_ngcontent-%COMP%]   .product-footer-home[_ngcontent-%COMP%]   .actions-home[_ngcontent-%COMP%]   .btn-quick-add[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:50%;border:none;display:flex;align-items:center;justify-content:center;cursor:pointer;transition:all .3s ease}.featured-products[_ngcontent-%COMP%]   .products-grid-home[_ngcontent-%COMP%]   .product-card-home[_ngcontent-%COMP%]   .product-info-home[_ngcontent-%COMP%]   .product-footer-home[_ngcontent-%COMP%]   .actions-home[_ngcontent-%COMP%]   .btn-quick-view[_ngcontent-%COMP%]{background:rgba(57,255,20,.1);color:#39ff14;border:1px solid #39ff14}.featured-products[_ngcontent-%COMP%]   .products-grid-home[_ngcontent-%COMP%]   .product-card-home[_ngcontent-%COMP%]   .product-info-home[_ngcontent-%COMP%]   .product-footer-home[_ngcontent-%COMP%]   .actions-home[_ngcontent-%COMP%]   .btn-quick-view[_ngcontent-%COMP%]:hover, .featured-products[_ngcontent-%COMP%]   .products-grid-home[_ngcontent-%COMP%]   .product-card-home[_ngcontent-%COMP%]   .product-info-home[_ngcontent-%COMP%]   .product-footer-home[_ngcontent-%COMP%]   .actions-home[_ngcontent-%COMP%]   .btn-quick-add[_ngcontent-%COMP%]{background:#39ff14;color:#000}.featured-products[_ngcontent-%COMP%]   .products-grid-home[_ngcontent-%COMP%]   .product-card-home[_ngcontent-%COMP%]   .product-info-home[_ngcontent-%COMP%]   .product-footer-home[_ngcontent-%COMP%]   .actions-home[_ngcontent-%COMP%]   .btn-quick-add[_ngcontent-%COMP%]:hover:not(:disabled){background:#00ffaa;transform:scale(1.1)}.featured-products[_ngcontent-%COMP%]   .products-grid-home[_ngcontent-%COMP%]   .product-card-home[_ngcontent-%COMP%]   .product-info-home[_ngcontent-%COMP%]   .product-footer-home[_ngcontent-%COMP%]   .actions-home[_ngcontent-%COMP%]   .btn-quick-add[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.try-on-banner[_ngcontent-%COMP%]{padding:100px 20px;background:linear-gradient(135deg,#0a0a0a 0%,#1a1f1b 100%);position:relative;overflow:hidden}.try-on-banner[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;right:0;height:1px;background:linear-gradient(90deg,transparent,#39ff14,transparent)}.try-on-banner[_ngcontent-%COMP%]   .banner-content[_ngcontent-%COMP%]{max-width:1400px;margin:0 auto;display:grid;grid-template-columns:1fr 1fr;gap:60px;align-items:center;position:relative;z-index:1}.try-on-banner[_ngcontent-%COMP%]   .banner-left[_ngcontent-%COMP%]   .banner-badge[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:10px;background:rgba(57,255,20,.1);border:1px solid #39ff14;padding:8px 16px;border-radius:30px;margin-bottom:30px}.try-on-banner[_ngcontent-%COMP%]   .banner-left[_ngcontent-%COMP%]   .banner-badge[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#39ff14;animation:_ngcontent-%COMP%_pulse 2s infinite}.try-on-banner[_ngcontent-%COMP%]   .banner-left[_ngcontent-%COMP%]   .banner-badge[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:12px;font-weight:600;letter-spacing:2px;color:#39ff14}.try-on-banner[_ngcontent-%COMP%]   .banner-left[_ngcontent-%COMP%]   .banner-title[_ngcontent-%COMP%]{font-size:48px;font-weight:700;margin-bottom:20px;line-height:1.2}.try-on-banner[_ngcontent-%COMP%]   .banner-left[_ngcontent-%COMP%]   .banner-title[_ngcontent-%COMP%]   .highlight[_ngcontent-%COMP%]{color:#39ff14}.try-on-banner[_ngcontent-%COMP%]   .banner-left[_ngcontent-%COMP%]   .banner-description[_ngcontent-%COMP%]{font-size:18px;color:#b0b0b0;line-height:1.6;margin-bottom:40px;max-width:500px}.try-on-banner[_ngcontent-%COMP%]   .banner-left[_ngcontent-%COMP%]   .banner-features[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:20px;margin-bottom:40px}.try-on-banner[_ngcontent-%COMP%]   .banner-left[_ngcontent-%COMP%]   .banner-features[_ngcontent-%COMP%]   .feature[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;padding:15px;background:rgba(255,255,255,.05);border-radius:10px;border:1px solid rgba(255,255,255,.1);transition:all .3s ease}.try-on-banner[_ngcontent-%COMP%]   .banner-left[_ngcontent-%COMP%]   .banner-features[_ngcontent-%COMP%]   .feature[_ngcontent-%COMP%]:hover{border-color:#39ff14;transform:translateY(-3px)}.try-on-banner[_ngcontent-%COMP%]   .banner-left[_ngcontent-%COMP%]   .banner-features[_ngcontent-%COMP%]   .feature[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#39ff14;font-size:20px}.try-on-banner[_ngcontent-%COMP%]   .banner-left[_ngcontent-%COMP%]   .banner-features[_ngcontent-%COMP%]   .feature[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:14px;font-weight:600;color:#fff}.try-on-banner[_ngcontent-%COMP%]   .banner-left[_ngcontent-%COMP%]   .banner-actions[_ngcontent-%COMP%]{display:flex;gap:20px}.try-on-banner[_ngcontent-%COMP%]   .banner-left[_ngcontent-%COMP%]   .banner-actions[_ngcontent-%COMP%]   .btn-banner-primary[_ngcontent-%COMP%]{background:linear-gradient(45deg,#39ff14,#00ffaa);color:#000;border:none;padding:18px 30px;border-radius:10px;font-size:16px;font-weight:600;display:flex;align-items:center;justify-content:center;gap:15px;cursor:pointer;transition:all .3s ease}.try-on-banner[_ngcontent-%COMP%]   .banner-left[_ngcontent-%COMP%]   .banner-actions[_ngcontent-%COMP%]   .btn-banner-primary[_ngcontent-%COMP%]:hover{transform:translateY(-3px);box-shadow:0 10px 30px #39ff1466}.try-on-banner[_ngcontent-%COMP%]   .banner-left[_ngcontent-%COMP%]   .banner-actions[_ngcontent-%COMP%]   .btn-banner-secondary[_ngcontent-%COMP%]{background:transparent;color:#fff;border:2px solid #39ff14;padding:18px 30px;border-radius:10px;font-size:16px;font-weight:600;display:flex;align-items:center;justify-content:center;gap:15px;cursor:pointer;transition:all .3s ease}.try-on-banner[_ngcontent-%COMP%]   .banner-left[_ngcontent-%COMP%]   .banner-actions[_ngcontent-%COMP%]   .btn-banner-secondary[_ngcontent-%COMP%]:hover{background:rgba(57,255,20,.1);transform:translateY(-3px)}.try-on-banner[_ngcontent-%COMP%]   .banner-right[_ngcontent-%COMP%]   .banner-preview[_ngcontent-%COMP%]   .preview-container[_ngcontent-%COMP%]{background:rgba(26,26,26,.8);-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border-radius:20px;border:2px solid rgba(57,255,20,.3);overflow:hidden;box-shadow:0 20px 60px #00000080;padding:30px}.try-on-banner[_ngcontent-%COMP%]   .banner-right[_ngcontent-%COMP%]   .banner-preview[_ngcontent-%COMP%]   .preview-container[_ngcontent-%COMP%]   .preview-model[_ngcontent-%COMP%]{height:300px;position:relative}.try-on-banner[_ngcontent-%COMP%]   .banner-right[_ngcontent-%COMP%]   .banner-preview[_ngcontent-%COMP%]   .preview-container[_ngcontent-%COMP%]   .preview-model[_ngcontent-%COMP%]   .model-placeholder[_ngcontent-%COMP%]{height:100%;display:flex;flex-direction:column;align-items:center;justify-content:center;background:#1a1a1a;border-radius:10px;border:2px dashed rgba(57,255,20,.3)}.try-on-banner[_ngcontent-%COMP%]   .banner-right[_ngcontent-%COMP%]   .banner-preview[_ngcontent-%COMP%]   .preview-container[_ngcontent-%COMP%]   .preview-model[_ngcontent-%COMP%]   .model-placeholder[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:60px;color:#39ff14;margin-bottom:20px;animation:_ngcontent-%COMP%_rotate 10s linear infinite}.try-on-banner[_ngcontent-%COMP%]   .banner-right[_ngcontent-%COMP%]   .banner-preview[_ngcontent-%COMP%]   .preview-container[_ngcontent-%COMP%]   .preview-model[_ngcontent-%COMP%]   .model-placeholder[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#666;font-size:14px;letter-spacing:2px}.try-on-banner[_ngcontent-%COMP%]   .banner-right[_ngcontent-%COMP%]   .banner-preview[_ngcontent-%COMP%]   .preview-container[_ngcontent-%COMP%]   .preview-model[_ngcontent-%COMP%]   .preview-controls[_ngcontent-%COMP%]{position:absolute;bottom:20px;left:50%;transform:translate(-50%);display:flex;gap:10px}.try-on-banner[_ngcontent-%COMP%]   .banner-right[_ngcontent-%COMP%]   .banner-preview[_ngcontent-%COMP%]   .preview-container[_ngcontent-%COMP%]   .preview-model[_ngcontent-%COMP%]   .preview-controls[_ngcontent-%COMP%]   .control-btn[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:50%;background:rgba(0,0,0,.8);border:1px solid #39ff14;color:#fff;display:flex;align-items:center;justify-content:center;cursor:pointer;transition:all .3s ease;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px)}.try-on-banner[_ngcontent-%COMP%]   .banner-right[_ngcontent-%COMP%]   .banner-preview[_ngcontent-%COMP%]   .preview-container[_ngcontent-%COMP%]   .preview-model[_ngcontent-%COMP%]   .preview-controls[_ngcontent-%COMP%]   .control-btn[_ngcontent-%COMP%]:hover{background:#39ff14;color:#000}.new-arrivals[_ngcontent-%COMP%]{padding:80px 20px;background:#111}.new-arrivals[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:60px}.new-arrivals[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]{font-size:36px;display:flex;align-items:center;justify-content:center;gap:20px;margin-bottom:15px;font-family:Oswald,sans-serif;letter-spacing:3px}.new-arrivals[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]   .title-accent[_ngcontent-%COMP%]{width:60px;height:2px;background:#39ff14}.new-arrivals[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   .section-subtitle[_ngcontent-%COMP%]{color:#888;font-size:16px;max-width:600px;margin:0 auto}.new-arrivals[_ngcontent-%COMP%]   .arrivals-slider[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;position:relative}.new-arrivals[_ngcontent-%COMP%]   .arrivals-slider[_ngcontent-%COMP%]   .slider-nav[_ngcontent-%COMP%]{position:absolute;top:50%;transform:translateY(-50%);width:50px;height:50px;border-radius:50%;background:rgba(0,0,0,.8);border:1px solid #39ff14;color:#fff;display:flex;align-items:center;justify-content:center;cursor:pointer;transition:all .3s ease;z-index:2;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px)}.new-arrivals[_ngcontent-%COMP%]   .arrivals-slider[_ngcontent-%COMP%]   .slider-nav[_ngcontent-%COMP%]:hover{background:#39ff14;color:#000}.new-arrivals[_ngcontent-%COMP%]   .arrivals-slider[_ngcontent-%COMP%]   .slider-nav.prev[_ngcontent-%COMP%]{left:-25px}.new-arrivals[_ngcontent-%COMP%]   .arrivals-slider[_ngcontent-%COMP%]   .slider-nav.next[_ngcontent-%COMP%]{right:-25px}.new-arrivals[_ngcontent-%COMP%]   .arrivals-slider[_ngcontent-%COMP%]   .slider-container[_ngcontent-%COMP%]{overflow:hidden;border-radius:20px}.new-arrivals[_ngcontent-%COMP%]   .arrivals-slider[_ngcontent-%COMP%]   .slider-container[_ngcontent-%COMP%]   .slider-track[_ngcontent-%COMP%]{display:flex;transition:transform .5s ease}.new-arrivals[_ngcontent-%COMP%]   .arrivals-slider[_ngcontent-%COMP%]   .slider-container[_ngcontent-%COMP%]   .slider-track[_ngcontent-%COMP%]   .arrival-slide[_ngcontent-%COMP%]{flex:0 0 100%}.new-arrivals[_ngcontent-%COMP%]   .arrivals-slider[_ngcontent-%COMP%]   .slider-container[_ngcontent-%COMP%]   .slider-track[_ngcontent-%COMP%]   .arrival-slide[_ngcontent-%COMP%]   .arrival-card-home[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:40px;background:#1a1a1a;border-radius:20px;overflow:hidden;border:1px solid rgba(255,255,255,.1)}@media (max-width: 768px){.new-arrivals[_ngcontent-%COMP%]   .arrivals-slider[_ngcontent-%COMP%]   .slider-container[_ngcontent-%COMP%]   .slider-track[_ngcontent-%COMP%]   .arrival-slide[_ngcontent-%COMP%]   .arrival-card-home[_ngcontent-%COMP%]{grid-template-columns:1fr}}.new-arrivals[_ngcontent-%COMP%]   .arrivals-slider[_ngcontent-%COMP%]   .slider-container[_ngcontent-%COMP%]   .slider-track[_ngcontent-%COMP%]   .arrival-slide[_ngcontent-%COMP%]   .arrival-card-home[_ngcontent-%COMP%]   .arrival-image-home[_ngcontent-%COMP%]{position:relative;min-height:400px}.new-arrivals[_ngcontent-%COMP%]   .arrivals-slider[_ngcontent-%COMP%]   .slider-container[_ngcontent-%COMP%]   .slider-track[_ngcontent-%COMP%]   .arrival-slide[_ngcontent-%COMP%]   .arrival-card-home[_ngcontent-%COMP%]   .arrival-image-home[_ngcontent-%COMP%]   .arrival-badge-home[_ngcontent-%COMP%]{position:absolute;top:20px;left:20px;background:#39ff14;color:#000;padding:8px 16px;border-radius:4px;font-size:12px;font-weight:600;letter-spacing:2px;z-index:2}.new-arrivals[_ngcontent-%COMP%]   .arrivals-slider[_ngcontent-%COMP%]   .slider-container[_ngcontent-%COMP%]   .slider-track[_ngcontent-%COMP%]   .arrival-slide[_ngcontent-%COMP%]   .arrival-card-home[_ngcontent-%COMP%]   .arrival-image-home[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.new-arrivals[_ngcontent-%COMP%]   .arrivals-slider[_ngcontent-%COMP%]   .slider-container[_ngcontent-%COMP%]   .slider-track[_ngcontent-%COMP%]   .arrival-slide[_ngcontent-%COMP%]   .arrival-card-home[_ngcontent-%COMP%]   .arrival-image-home[_ngcontent-%COMP%]   .arrival-overlay[_ngcontent-%COMP%]{position:absolute;inset:0;background:rgba(0,0,0,.5);display:flex;align-items:center;justify-content:center;opacity:0;transition:opacity .3s ease}.new-arrivals[_ngcontent-%COMP%]   .arrivals-slider[_ngcontent-%COMP%]   .slider-container[_ngcontent-%COMP%]   .slider-track[_ngcontent-%COMP%]   .arrival-slide[_ngcontent-%COMP%]   .arrival-card-home[_ngcontent-%COMP%]   .arrival-image-home[_ngcontent-%COMP%]   .arrival-overlay[_ngcontent-%COMP%]:hover{opacity:1}.new-arrivals[_ngcontent-%COMP%]   .arrivals-slider[_ngcontent-%COMP%]   .slider-container[_ngcontent-%COMP%]   .slider-track[_ngcontent-%COMP%]   .arrival-slide[_ngcontent-%COMP%]   .arrival-card-home[_ngcontent-%COMP%]   .arrival-image-home[_ngcontent-%COMP%]   .arrival-overlay[_ngcontent-%COMP%]   .btn-quick-view-arrival[_ngcontent-%COMP%]{background:rgba(57,255,20,.9);color:#000;border:none;padding:12px 24px;border-radius:8px;font-size:14px;font-weight:600;display:flex;align-items:center;gap:10px;cursor:pointer;transition:all .3s ease}.new-arrivals[_ngcontent-%COMP%]   .arrivals-slider[_ngcontent-%COMP%]   .slider-container[_ngcontent-%COMP%]   .slider-track[_ngcontent-%COMP%]   .arrival-slide[_ngcontent-%COMP%]   .arrival-card-home[_ngcontent-%COMP%]   .arrival-image-home[_ngcontent-%COMP%]   .arrival-overlay[_ngcontent-%COMP%]   .btn-quick-view-arrival[_ngcontent-%COMP%]:hover{background:#00ffaa;transform:scale(1.05)}.new-arrivals[_ngcontent-%COMP%]   .arrivals-slider[_ngcontent-%COMP%]   .slider-container[_ngcontent-%COMP%]   .slider-track[_ngcontent-%COMP%]   .arrival-slide[_ngcontent-%COMP%]   .arrival-card-home[_ngcontent-%COMP%]   .arrival-info-home[_ngcontent-%COMP%]{padding:40px;display:flex;flex-direction:column;justify-content:center}.new-arrivals[_ngcontent-%COMP%]   .arrivals-slider[_ngcontent-%COMP%]   .slider-container[_ngcontent-%COMP%]   .slider-track[_ngcontent-%COMP%]   .arrival-slide[_ngcontent-%COMP%]   .arrival-card-home[_ngcontent-%COMP%]   .arrival-info-home[_ngcontent-%COMP%]   .arrival-name[_ngcontent-%COMP%]{font-size:32px;font-weight:700;margin-bottom:20px;line-height:1.2}.new-arrivals[_ngcontent-%COMP%]   .arrivals-slider[_ngcontent-%COMP%]   .slider-container[_ngcontent-%COMP%]   .slider-track[_ngcontent-%COMP%]   .arrival-slide[_ngcontent-%COMP%]   .arrival-card-home[_ngcontent-%COMP%]   .arrival-info-home[_ngcontent-%COMP%]   .arrival-description[_ngcontent-%COMP%]{color:#b0b0b0;font-size:16px;line-height:1.6;margin-bottom:25px}.new-arrivals[_ngcontent-%COMP%]   .arrivals-slider[_ngcontent-%COMP%]   .slider-container[_ngcontent-%COMP%]   .slider-track[_ngcontent-%COMP%]   .arrival-slide[_ngcontent-%COMP%]   .arrival-card-home[_ngcontent-%COMP%]   .arrival-info-home[_ngcontent-%COMP%]   .arrival-meta[_ngcontent-%COMP%]{display:flex;gap:20px;margin-bottom:30px}.new-arrivals[_ngcontent-%COMP%]   .arrivals-slider[_ngcontent-%COMP%]   .slider-container[_ngcontent-%COMP%]   .slider-track[_ngcontent-%COMP%]   .arrival-slide[_ngcontent-%COMP%]   .arrival-card-home[_ngcontent-%COMP%]   .arrival-info-home[_ngcontent-%COMP%]   .arrival-meta[_ngcontent-%COMP%]   .arrival-category[_ngcontent-%COMP%], .new-arrivals[_ngcontent-%COMP%]   .arrivals-slider[_ngcontent-%COMP%]   .slider-container[_ngcontent-%COMP%]   .slider-track[_ngcontent-%COMP%]   .arrival-slide[_ngcontent-%COMP%]   .arrival-card-home[_ngcontent-%COMP%]   .arrival-info-home[_ngcontent-%COMP%]   .arrival-meta[_ngcontent-%COMP%]   .arrival-material[_ngcontent-%COMP%]{background:rgba(57,255,20,.1);color:#39ff14;padding:6px 12px;border-radius:15px;font-size:12px;font-weight:600}.new-arrivals[_ngcontent-%COMP%]   .arrivals-slider[_ngcontent-%COMP%]   .slider-container[_ngcontent-%COMP%]   .slider-track[_ngcontent-%COMP%]   .arrival-slide[_ngcontent-%COMP%]   .arrival-card-home[_ngcontent-%COMP%]   .arrival-info-home[_ngcontent-%COMP%]   .arrival-price-home[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.new-arrivals[_ngcontent-%COMP%]   .arrivals-slider[_ngcontent-%COMP%]   .slider-container[_ngcontent-%COMP%]   .slider-track[_ngcontent-%COMP%]   .arrival-slide[_ngcontent-%COMP%]   .arrival-card-home[_ngcontent-%COMP%]   .arrival-info-home[_ngcontent-%COMP%]   .arrival-price-home[_ngcontent-%COMP%]   .price[_ngcontent-%COMP%]{font-size:36px;font-weight:700;color:#39ff14}.new-arrivals[_ngcontent-%COMP%]   .arrivals-slider[_ngcontent-%COMP%]   .slider-container[_ngcontent-%COMP%]   .slider-track[_ngcontent-%COMP%]   .arrival-slide[_ngcontent-%COMP%]   .arrival-card-home[_ngcontent-%COMP%]   .arrival-info-home[_ngcontent-%COMP%]   .arrival-price-home[_ngcontent-%COMP%]   .arrival-action[_ngcontent-%COMP%]{background:transparent;color:#fff;border:2px solid #39ff14;padding:12px 24px;border-radius:8px;font-size:14px;font-weight:600;display:flex;align-items:center;gap:10px;cursor:pointer;transition:all .3s ease}.new-arrivals[_ngcontent-%COMP%]   .arrivals-slider[_ngcontent-%COMP%]   .slider-container[_ngcontent-%COMP%]   .slider-track[_ngcontent-%COMP%]   .arrival-slide[_ngcontent-%COMP%]   .arrival-card-home[_ngcontent-%COMP%]   .arrival-info-home[_ngcontent-%COMP%]   .arrival-price-home[_ngcontent-%COMP%]   .arrival-action[_ngcontent-%COMP%]:hover{background:rgba(57,255,20,.1)}.new-arrivals[_ngcontent-%COMP%]   .arrivals-slider[_ngcontent-%COMP%]   .slider-dots[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:10px;margin-top:30px}.new-arrivals[_ngcontent-%COMP%]   .arrivals-slider[_ngcontent-%COMP%]   .slider-dots[_ngcontent-%COMP%]   .dot[_ngcontent-%COMP%]{width:12px;height:12px;border-radius:50%;background:rgba(255,255,255,.2);cursor:pointer;transition:all .3s ease}.new-arrivals[_ngcontent-%COMP%]   .arrivals-slider[_ngcontent-%COMP%]   .slider-dots[_ngcontent-%COMP%]   .dot[_ngcontent-%COMP%]:hover{background:rgba(57,255,20,.5)}.new-arrivals[_ngcontent-%COMP%]   .arrivals-slider[_ngcontent-%COMP%]   .slider-dots[_ngcontent-%COMP%]   .dot.active[_ngcontent-%COMP%]{background:#39ff14;transform:scale(1.2)}.collections-home[_ngcontent-%COMP%]{padding:80px 20px;background:#0a0a0a}.collections-home[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:60px}.collections-home[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]{font-size:36px;display:flex;align-items:center;justify-content:center;gap:20px;margin-bottom:15px;font-family:Oswald,sans-serif;letter-spacing:3px}.collections-home[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]   .title-accent[_ngcontent-%COMP%]{width:60px;height:2px;background:#39ff14}.collections-home[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   .section-subtitle[_ngcontent-%COMP%]{color:#888;font-size:16px;max-width:600px;margin:0 auto}.collections-home[_ngcontent-%COMP%]   .collections-grid-home[_ngcontent-%COMP%]{max-width:1400px;margin:0 auto;display:grid;grid-template-columns:repeat(auto-fit,minmax(350px,1fr));gap:30px}.collections-home[_ngcontent-%COMP%]   .collections-grid-home[_ngcontent-%COMP%]   .collection-card-home[_ngcontent-%COMP%]{height:400px;border-radius:20px;overflow:hidden;cursor:pointer;position:relative}.collections-home[_ngcontent-%COMP%]   .collections-grid-home[_ngcontent-%COMP%]   .collection-card-home[_ngcontent-%COMP%]:hover   .collection-overlay-home[_ngcontent-%COMP%]{opacity:1}.collections-home[_ngcontent-%COMP%]   .collections-grid-home[_ngcontent-%COMP%]   .collection-card-home[_ngcontent-%COMP%]:hover   .collection-overlay-home[_ngcontent-%COMP%]   .collection-content-home[_ngcontent-%COMP%]{transform:translateY(0)}.collections-home[_ngcontent-%COMP%]   .collections-grid-home[_ngcontent-%COMP%]   .collection-card-home[_ngcontent-%COMP%]:hover   .collection-gradient[_ngcontent-%COMP%]{opacity:.8}.collections-home[_ngcontent-%COMP%]   .collections-grid-home[_ngcontent-%COMP%]   .collection-card-home[_ngcontent-%COMP%]   .collection-image-home[_ngcontent-%COMP%]{height:100%;width:100%;background-size:cover;background-position:center;position:relative}.collections-home[_ngcontent-%COMP%]   .collections-grid-home[_ngcontent-%COMP%]   .collection-card-home[_ngcontent-%COMP%]   .collection-image-home[_ngcontent-%COMP%]   .collection-overlay-home[_ngcontent-%COMP%]{position:absolute;inset:0;background:rgba(0,0,0,.8);display:flex;align-items:center;justify-content:center;padding:40px;opacity:0;transition:opacity .3s ease}.collections-home[_ngcontent-%COMP%]   .collections-grid-home[_ngcontent-%COMP%]   .collection-card-home[_ngcontent-%COMP%]   .collection-image-home[_ngcontent-%COMP%]   .collection-overlay-home[_ngcontent-%COMP%]   .collection-content-home[_ngcontent-%COMP%]{text-align:center;transform:translateY(20px);transition:transform .3s ease}.collections-home[_ngcontent-%COMP%]   .collections-grid-home[_ngcontent-%COMP%]   .collection-card-home[_ngcontent-%COMP%]   .collection-image-home[_ngcontent-%COMP%]   .collection-overlay-home[_ngcontent-%COMP%]   .collection-content-home[_ngcontent-%COMP%]   .collection-name-home[_ngcontent-%COMP%]{font-size:28px;font-weight:700;margin-bottom:15px;color:#fff}.collections-home[_ngcontent-%COMP%]   .collections-grid-home[_ngcontent-%COMP%]   .collection-card-home[_ngcontent-%COMP%]   .collection-image-home[_ngcontent-%COMP%]   .collection-overlay-home[_ngcontent-%COMP%]   .collection-content-home[_ngcontent-%COMP%]   .collection-description-home[_ngcontent-%COMP%]{color:#b0b0b0;font-size:16px;line-height:1.6;margin-bottom:25px}.collections-home[_ngcontent-%COMP%]   .collections-grid-home[_ngcontent-%COMP%]   .collection-card-home[_ngcontent-%COMP%]   .collection-image-home[_ngcontent-%COMP%]   .collection-overlay-home[_ngcontent-%COMP%]   .collection-content-home[_ngcontent-%COMP%]   .collection-stats-home[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:30px;margin-bottom:30px}.collections-home[_ngcontent-%COMP%]   .collections-grid-home[_ngcontent-%COMP%]   .collection-card-home[_ngcontent-%COMP%]   .collection-image-home[_ngcontent-%COMP%]   .collection-overlay-home[_ngcontent-%COMP%]   .collection-content-home[_ngcontent-%COMP%]   .collection-stats-home[_ngcontent-%COMP%]   .collection-count[_ngcontent-%COMP%], .collections-home[_ngcontent-%COMP%]   .collections-grid-home[_ngcontent-%COMP%]   .collection-card-home[_ngcontent-%COMP%]   .collection-image-home[_ngcontent-%COMP%]   .collection-overlay-home[_ngcontent-%COMP%]   .collection-content-home[_ngcontent-%COMP%]   .collection-stats-home[_ngcontent-%COMP%]   .collection-price[_ngcontent-%COMP%]{color:#39ff14;font-size:14px;font-weight:600}.collections-home[_ngcontent-%COMP%]   .collections-grid-home[_ngcontent-%COMP%]   .collection-card-home[_ngcontent-%COMP%]   .collection-image-home[_ngcontent-%COMP%]   .collection-overlay-home[_ngcontent-%COMP%]   .collection-content-home[_ngcontent-%COMP%]   .btn-collection-home[_ngcontent-%COMP%]{background:rgba(57,255,20,.2);color:#fff;border:2px solid #39ff14;padding:12px 24px;border-radius:8px;font-size:14px;font-weight:600;display:flex;align-items:center;gap:10px;cursor:pointer;transition:all .3s ease;margin:0 auto}.collections-home[_ngcontent-%COMP%]   .collections-grid-home[_ngcontent-%COMP%]   .collection-card-home[_ngcontent-%COMP%]   .collection-image-home[_ngcontent-%COMP%]   .collection-overlay-home[_ngcontent-%COMP%]   .collection-content-home[_ngcontent-%COMP%]   .btn-collection-home[_ngcontent-%COMP%]:hover{background:rgba(57,255,20,.4);transform:translate(5px)}.collections-home[_ngcontent-%COMP%]   .collections-grid-home[_ngcontent-%COMP%]   .collection-card-home[_ngcontent-%COMP%]   .collection-image-home[_ngcontent-%COMP%]   .collection-gradient[_ngcontent-%COMP%]{position:absolute;bottom:0;left:0;right:0;height:50%;background:linear-gradient(transparent,rgba(0,0,0,.8));opacity:0;transition:opacity .3s ease}.testimonials[_ngcontent-%COMP%]{padding:80px 20px;background:#111}.testimonials[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:60px}.testimonials[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]{font-size:36px;display:flex;align-items:center;justify-content:center;gap:20px;margin-bottom:15px;font-family:Oswald,sans-serif;letter-spacing:3px}.testimonials[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]   .title-accent[_ngcontent-%COMP%]{width:60px;height:2px;background:#39ff14}.testimonials[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   .section-subtitle[_ngcontent-%COMP%]{color:#888;font-size:16px;max-width:600px;margin:0 auto}.testimonials[_ngcontent-%COMP%]   .testimonials-grid[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;display:grid;grid-template-columns:repeat(auto-fit,minmax(350px,1fr));gap:30px}.testimonials[_ngcontent-%COMP%]   .testimonials-grid[_ngcontent-%COMP%]   .testimonial-card[_ngcontent-%COMP%]{background:#1a1a1a;border-radius:20px;padding:30px;border:1px solid rgba(255,255,255,.1);transition:all .3s ease}.testimonials[_ngcontent-%COMP%]   .testimonials-grid[_ngcontent-%COMP%]   .testimonial-card[_ngcontent-%COMP%]:hover{border-color:#39ff14;transform:translateY(-5px);box-shadow:0 10px 30px #39ff141a}.testimonials[_ngcontent-%COMP%]   .testimonials-grid[_ngcontent-%COMP%]   .testimonial-card[_ngcontent-%COMP%]   .testimonial-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:15px;margin-bottom:20px}.testimonials[_ngcontent-%COMP%]   .testimonials-grid[_ngcontent-%COMP%]   .testimonial-card[_ngcontent-%COMP%]   .testimonial-header[_ngcontent-%COMP%]   .testimonial-avatar[_ngcontent-%COMP%]{width:60px;height:60px;border-radius:50%;overflow:hidden;border:2px solid #39ff14}.testimonials[_ngcontent-%COMP%]   .testimonials-grid[_ngcontent-%COMP%]   .testimonial-card[_ngcontent-%COMP%]   .testimonial-header[_ngcontent-%COMP%]   .testimonial-avatar[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.testimonials[_ngcontent-%COMP%]   .testimonials-grid[_ngcontent-%COMP%]   .testimonial-card[_ngcontent-%COMP%]   .testimonial-header[_ngcontent-%COMP%]   .testimonial-info[_ngcontent-%COMP%]{flex:1}.testimonials[_ngcontent-%COMP%]   .testimonials-grid[_ngcontent-%COMP%]   .testimonial-card[_ngcontent-%COMP%]   .testimonial-header[_ngcontent-%COMP%]   .testimonial-info[_ngcontent-%COMP%]   .testimonial-name[_ngcontent-%COMP%]{font-size:18px;font-weight:600;margin-bottom:5px;color:#fff}.testimonials[_ngcontent-%COMP%]   .testimonials-grid[_ngcontent-%COMP%]   .testimonial-card[_ngcontent-%COMP%]   .testimonial-header[_ngcontent-%COMP%]   .testimonial-info[_ngcontent-%COMP%]   .testimonial-location[_ngcontent-%COMP%]{color:#39ff14;font-size:12px;letter-spacing:1px}.testimonials[_ngcontent-%COMP%]   .testimonials-grid[_ngcontent-%COMP%]   .testimonial-card[_ngcontent-%COMP%]   .testimonial-header[_ngcontent-%COMP%]   .testimonial-rating[_ngcontent-%COMP%]{display:flex;gap:2px}.testimonials[_ngcontent-%COMP%]   .testimonials-grid[_ngcontent-%COMP%]   .testimonial-card[_ngcontent-%COMP%]   .testimonial-header[_ngcontent-%COMP%]   .testimonial-rating[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#f90;font-size:14px}.testimonials[_ngcontent-%COMP%]   .testimonials-grid[_ngcontent-%COMP%]   .testimonial-card[_ngcontent-%COMP%]   .testimonial-header[_ngcontent-%COMP%]   .testimonial-rating[_ngcontent-%COMP%]   i.active[_ngcontent-%COMP%]{color:#f90}.testimonials[_ngcontent-%COMP%]   .testimonials-grid[_ngcontent-%COMP%]   .testimonial-card[_ngcontent-%COMP%]   .testimonial-header[_ngcontent-%COMP%]   .testimonial-rating[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]:not(.active){color:#666}.testimonials[_ngcontent-%COMP%]   .testimonials-grid[_ngcontent-%COMP%]   .testimonial-card[_ngcontent-%COMP%]   .testimonial-text[_ngcontent-%COMP%]{color:#b0b0b0;font-size:16px;line-height:1.6;margin-bottom:20px;font-style:italic}.testimonials[_ngcontent-%COMP%]   .testimonials-grid[_ngcontent-%COMP%]   .testimonial-card[_ngcontent-%COMP%]   .testimonial-product[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;padding-top:20px;border-top:1px solid rgba(255,255,255,.1)}.testimonials[_ngcontent-%COMP%]   .testimonials-grid[_ngcontent-%COMP%]   .testimonial-card[_ngcontent-%COMP%]   .testimonial-product[_ngcontent-%COMP%]   .product-bought[_ngcontent-%COMP%]{color:#888;font-size:12px}.testimonials[_ngcontent-%COMP%]   .testimonials-grid[_ngcontent-%COMP%]   .testimonial-card[_ngcontent-%COMP%]   .testimonial-product[_ngcontent-%COMP%]   .product-name[_ngcontent-%COMP%]{color:#39ff14;font-size:14px;font-weight:600}.cta-home[_ngcontent-%COMP%]{padding:100px 20px;position:relative;overflow:hidden}.cta-home[_ngcontent-%COMP%]   .cta-background[_ngcontent-%COMP%]{position:absolute;inset:0}.cta-home[_ngcontent-%COMP%]   .cta-background[_ngcontent-%COMP%]   .cta-overlay[_ngcontent-%COMP%]{position:absolute;inset:0;background:linear-gradient(135deg,#0a0a0a 0%,#1a1f1b 100%)}.cta-home[_ngcontent-%COMP%]   .cta-content-home[_ngcontent-%COMP%]{position:relative;z-index:1;max-width:800px;margin:0 auto;text-align:center}.cta-home[_ngcontent-%COMP%]   .cta-content-home[_ngcontent-%COMP%]   .cta-title-home[_ngcontent-%COMP%]{font-size:48px;font-weight:700;margin-bottom:20px;font-family:Oswald,sans-serif;letter-spacing:3px;color:#fff}.cta-home[_ngcontent-%COMP%]   .cta-content-home[_ngcontent-%COMP%]   .cta-description-home[_ngcontent-%COMP%]{color:#b0b0b0;font-size:18px;line-height:1.6;margin-bottom:40px;max-width:600px;margin-left:auto;margin-right:auto}.cta-home[_ngcontent-%COMP%]   .cta-content-home[_ngcontent-%COMP%]   .cta-stats-home[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:40px;margin-bottom:50px;flex-wrap:wrap}.cta-home[_ngcontent-%COMP%]   .cta-content-home[_ngcontent-%COMP%]   .cta-stats-home[_ngcontent-%COMP%]   .cta-stat[_ngcontent-%COMP%]{text-align:center}.cta-home[_ngcontent-%COMP%]   .cta-content-home[_ngcontent-%COMP%]   .cta-stats-home[_ngcontent-%COMP%]   .cta-stat[_ngcontent-%COMP%]   .stat-number[_ngcontent-%COMP%]{font-size:36px;font-weight:700;color:#39ff14;margin-bottom:5px}.cta-home[_ngcontent-%COMP%]   .cta-content-home[_ngcontent-%COMP%]   .cta-stats-home[_ngcontent-%COMP%]   .cta-stat[_ngcontent-%COMP%]   .stat-label[_ngcontent-%COMP%]{color:#888;font-size:12px;letter-spacing:2px;text-transform:uppercase}.cta-home[_ngcontent-%COMP%]   .cta-content-home[_ngcontent-%COMP%]   .cta-actions-home[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:20px;margin-bottom:50px;flex-wrap:wrap}.cta-home[_ngcontent-%COMP%]   .cta-content-home[_ngcontent-%COMP%]   .cta-actions-home[_ngcontent-%COMP%]   .btn-cta-primary-home[_ngcontent-%COMP%]{background:linear-gradient(45deg,#39ff14,#00ffaa);color:#000;border:none;padding:20px 40px;border-radius:10px;font-size:16px;font-weight:600;display:flex;align-items:center;justify-content:center;gap:15px;cursor:pointer;transition:all .3s ease}.cta-home[_ngcontent-%COMP%]   .cta-content-home[_ngcontent-%COMP%]   .cta-actions-home[_ngcontent-%COMP%]   .btn-cta-primary-home[_ngcontent-%COMP%]:hover{transform:translateY(-5px);box-shadow:0 10px 30px #39ff1466}.cta-home[_ngcontent-%COMP%]   .cta-content-home[_ngcontent-%COMP%]   .cta-actions-home[_ngcontent-%COMP%]   .btn-cta-secondary-home[_ngcontent-%COMP%]{background:transparent;color:#fff;border:2px solid #39ff14;padding:20px 40px;border-radius:10px;font-size:16px;font-weight:600;display:flex;align-items:center;justify-content:center;gap:15px;cursor:pointer;transition:all .3s ease}.cta-home[_ngcontent-%COMP%]   .cta-content-home[_ngcontent-%COMP%]   .cta-actions-home[_ngcontent-%COMP%]   .btn-cta-secondary-home[_ngcontent-%COMP%]:hover{background:rgba(57,255,20,.1);transform:translateY(-5px)}.cta-home[_ngcontent-%COMP%]   .cta-content-home[_ngcontent-%COMP%]   .trust-badges-home[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:40px;flex-wrap:wrap}.cta-home[_ngcontent-%COMP%]   .cta-content-home[_ngcontent-%COMP%]   .trust-badges-home[_ngcontent-%COMP%]   .trust-badge[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;color:#888;font-size:14px}.cta-home[_ngcontent-%COMP%]   .cta-content-home[_ngcontent-%COMP%]   .trust-badges-home[_ngcontent-%COMP%]   .trust-badge[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#39ff14;font-size:20px}@keyframes _ngcontent-%COMP%_pulse{0%,to{opacity:1}50%{opacity:.5}}@keyframes _ngcontent-%COMP%_bounce{0%,20%,50%,80%,to{transform:translateY(0)}40%{transform:translateY(-10px)}60%{transform:translateY(-5px)}}@keyframes _ngcontent-%COMP%_rotate{0%{transform:rotate(0)}to{transform:rotate(360deg)}}@media (max-width: 1200px){.home-hero[_ngcontent-%COMP%]   .hero-content[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:40px}.home-hero[_ngcontent-%COMP%]   .hero-left[_ngcontent-%COMP%]{text-align:center}.home-hero[_ngcontent-%COMP%]   .hero-left[_ngcontent-%COMP%]   .hero-stats[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}.home-hero[_ngcontent-%COMP%]   .hero-left[_ngcontent-%COMP%]   .hero-actions[_ngcontent-%COMP%]{flex-direction:column}.try-on-banner[_ngcontent-%COMP%]   .banner-content[_ngcontent-%COMP%]{grid-template-columns:1fr;text-align:center}.try-on-banner[_ngcontent-%COMP%]   .banner-content[_ngcontent-%COMP%]   .banner-left[_ngcontent-%COMP%]   .banner-features[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr);max-width:500px;margin:0 auto 40px}.try-on-banner[_ngcontent-%COMP%]   .banner-content[_ngcontent-%COMP%]   .banner-left[_ngcontent-%COMP%]   .banner-actions[_ngcontent-%COMP%]{justify-content:center}}@media (max-width: 768px){.home-hero[_ngcontent-%COMP%]   .hero-left[_ngcontent-%COMP%]   .hero-title[_ngcontent-%COMP%]{font-size:60px}.home-hero[_ngcontent-%COMP%]   .hero-left[_ngcontent-%COMP%]   .hero-title[_ngcontent-%COMP%]   .title-line-2[_ngcontent-%COMP%]{font-size:45px}.home-hero[_ngcontent-%COMP%]   .hero-left[_ngcontent-%COMP%]   .hero-title[_ngcontent-%COMP%]   .title-line-3[_ngcontent-%COMP%]{font-size:30px}.home-hero[_ngcontent-%COMP%]   .hero-left[_ngcontent-%COMP%]   .hero-stats[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}.home-hero[_ngcontent-%COMP%]   .hero-right[_ngcontent-%COMP%]   .hero-featured-product[_ngcontent-%COMP%]   .featured-product-card[_ngcontent-%COMP%]   .featured-product-image[_ngcontent-%COMP%]{height:300px}.home-hero[_ngcontent-%COMP%]   .hero-right[_ngcontent-%COMP%]   .hero-featured-product[_ngcontent-%COMP%]   .featured-product-card[_ngcontent-%COMP%]   .featured-product-info[_ngcontent-%COMP%]{padding:20px}.home-hero[_ngcontent-%COMP%]   .hero-right[_ngcontent-%COMP%]   .hero-featured-product[_ngcontent-%COMP%]   .featured-product-card[_ngcontent-%COMP%]   .featured-product-info[_ngcontent-%COMP%]   .featured-price-section[_ngcontent-%COMP%]{flex-direction:column;gap:20px;align-items:flex-start}.featured-products[_ngcontent-%COMP%]   .products-grid-home[_ngcontent-%COMP%]{grid-template-columns:1fr}.featured-products[_ngcontent-%COMP%]   .products-grid-home[_ngcontent-%COMP%]   .product-card-home.featured[_ngcontent-%COMP%]{grid-column:span 1}.new-arrivals[_ngcontent-%COMP%]   .arrivals-slider[_ngcontent-%COMP%]   .slider-nav[_ngcontent-%COMP%]{display:none}.cta-home[_ngcontent-%COMP%]   .cta-content-home[_ngcontent-%COMP%]   .cta-actions-home[_ngcontent-%COMP%]{flex-direction:column;align-items:center}.cta-home[_ngcontent-%COMP%]   .cta-content-home[_ngcontent-%COMP%]   .cta-actions-home[_ngcontent-%COMP%]   .btn-cta-primary-home[_ngcontent-%COMP%], .cta-home[_ngcontent-%COMP%]   .cta-content-home[_ngcontent-%COMP%]   .cta-actions-home[_ngcontent-%COMP%]   .btn-cta-secondary-home[_ngcontent-%COMP%]{width:100%;max-width:300px}.cta-home[_ngcontent-%COMP%]   .cta-content-home[_ngcontent-%COMP%]   .trust-badges-home[_ngcontent-%COMP%]{flex-direction:column;align-items:center;gap:20px}}@media (max-width: 480px){.home-hero[_ngcontent-%COMP%]   .hero-left[_ngcontent-%COMP%]   .hero-title[_ngcontent-%COMP%]{font-size:48px}.home-hero[_ngcontent-%COMP%]   .hero-left[_ngcontent-%COMP%]   .hero-title[_ngcontent-%COMP%]   .title-line-2[_ngcontent-%COMP%]{font-size:36px}.home-hero[_ngcontent-%COMP%]   .hero-left[_ngcontent-%COMP%]   .hero-title[_ngcontent-%COMP%]   .title-line-3[_ngcontent-%COMP%]{font-size:24px}.home-hero[_ngcontent-%COMP%]   .hero-left[_ngcontent-%COMP%]   .hero-stats[_ngcontent-%COMP%]{grid-template-columns:1fr}.quick-categories[_ngcontent-%COMP%]   .categories-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}.collections-home[_ngcontent-%COMP%]   .collections-grid-home[_ngcontent-%COMP%], .testimonials[_ngcontent-%COMP%]   .testimonials-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}}']})}}return n})(),qI=(()=>{class n{constructor(t,i){this._renderer=t,this._elementRef=i,this.onChange=r=>{},this.onTouched=()=>{}}setProperty(t,i){this._renderer.setProperty(this._elementRef.nativeElement,t,i)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static{this.\u0275fac=function(i){return new(i||n)(ee(Wr),ee(Hi))}}static{this.\u0275dir=et({type:n})}}return n})(),Ea=(()=>{class n extends qI{static{this.\u0275fac=function(){let t;return function(r){return(t||(t=Kn(n)))(r||n)}}()}static{this.\u0275dir=et({type:n,features:[zt]})}}return n})();const ao=new Ne("NgValueAccessor"),HZ={provide:ao,useExisting:Zt(()=>Ux),multi:!0};let Ux=(()=>{class n extends Ea{writeValue(t){this.setProperty("checked",t)}static{this.\u0275fac=function(){let t;return function(r){return(t||(t=Kn(n)))(r||n)}}()}static{this.\u0275dir=et({type:n,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(i,r){1&i&&ge("change",function(s){return r.onChange(s.target.checked)})("blur",function(){return r.onTouched()})},features:[ln([HZ]),zt]})}}return n})();const GZ={provide:ao,useExisting:Zt(()=>Dl),multi:!0},jZ=new Ne("CompositionEventMode");let Dl=(()=>{class n extends qI{constructor(t,i,r){super(t,i),this._compositionMode=r,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function WZ(){const n=ns()?ns().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static{this.\u0275fac=function(i){return new(i||n)(ee(Wr),ee(Hi),ee(jZ,8))}}static{this.\u0275dir=et({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(i,r){1&i&&ge("input",function(s){return r._handleInput(s.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(s){return r._compositionEnd(s.target.value)})},features:[ln([GZ]),zt]})}}return n})();function Ss(n){return null==n||("string"==typeof n||Array.isArray(n))&&0===n.length}function XI(n){return null!=n&&"number"==typeof n.length}const ai=new Ne("NgValidators"),Es=new Ne("NgAsyncValidators"),$Z=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class Sn{static min(e){return function YI(n){return e=>{if(Ss(e.value)||Ss(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}(e)}static max(e){return function ZI(n){return e=>{if(Ss(e.value)||Ss(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}(e)}static required(e){return function KI(n){return Ss(n.value)?{required:!0}:null}(e)}static requiredTrue(e){return function JI(n){return!0===n.value?null:{required:!0}}(e)}static email(e){return function QI(n){return Ss(n.value)||$Z.test(n.value)?null:{email:!0}}(e)}static minLength(e){return function e2(n){return e=>Ss(e.value)||!XI(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static maxLength(e){return t2(e)}static pattern(e){return function n2(n){if(!n)return Tg;let e,t;return"string"==typeof n?(t="","^"!==n.charAt(0)&&(t+="^"),t+=n,"$"!==n.charAt(n.length-1)&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),i=>{if(Ss(i.value))return null;const r=i.value;return e.test(r)?null:{pattern:{requiredPattern:t,actualValue:r}}}}(e)}static nullValidator(e){return null}static compose(e){return c2(e)}static composeAsync(e){return l2(e)}}function t2(n){return e=>XI(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}function Tg(n){return null}function i2(n){return null!=n}function r2(n){return Cu(n)?zn(n):n}function o2(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function s2(n,e){return e.map(t=>t(n))}function a2(n){return n.map(e=>function qZ(n){return!n.validate}(e)?e:t=>e.validate(t))}function c2(n){if(!n)return null;const e=n.filter(i2);return 0==e.length?null:function(t){return o2(s2(t,e))}}function Bx(n){return null!=n?c2(a2(n)):null}function l2(n){if(!n)return null;const e=n.filter(i2);return 0==e.length?null:function(t){return function zZ(...n){const e=NM(n),{args:t,keys:i}=xT(n),r=new Pn(o=>{const{length:s}=t;if(!s)return void o.complete();const a=new Array(s);let c=s,l=s;for(let u=0;u<s;u++){let d=!1;Li(t[u]).subscribe(Tn(o,f=>{d||(d=!0,l--),a[u]=f},()=>c--,void 0,()=>{(!c||!d)&&(l||o.next(i?bT(i,a):a),o.complete())}))}});return e?r.pipe(MT(e)):r}(s2(t,e).map(r2)).pipe(Xt(o2))}}function Vx(n){return null!=n?l2(a2(n)):null}function u2(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function d2(n){return n._rawValidators}function f2(n){return n._rawAsyncValidators}function zx(n){return n?Array.isArray(n)?n:[n]:[]}function Ag(n,e){return Array.isArray(n)?n.includes(e):n===e}function h2(n,e){const t=zx(e);return zx(n).forEach(r=>{Ag(t,r)||t.push(r)}),t}function p2(n,e){return zx(e).filter(t=>!Ag(n,t))}class g2{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=Bx(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=Vx(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class Mi extends g2{get formDirective(){return null}get path(){return null}}class Ps extends g2{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class m2{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let Og=(()=>{class n extends m2{constructor(t){super(t)}static{this.\u0275fac=function(i){return new(i||n)(ee(Ps,2))}}static{this.\u0275dir=et({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(i,r){2&i&&mt("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[zt]})}}return n})(),_2=(()=>{class n extends m2{constructor(t){super(t)}static{this.\u0275fac=function(i){return new(i||n)(ee(Mi,10))}}static{this.\u0275dir=et({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(i,r){2&i&&mt("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},features:[zt]})}}return n})();const Ud="VALID",Ig="INVALID",Il="PENDING",Bd="DISABLED";function Wx(n){return(Rg(n)?n.validators:n)||null}function jx(n,e){return(Rg(e)?e.asyncValidators:n)||null}function Rg(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}function y2(n,e,t){const i=n.controls;if(!(e?Object.keys(i):i).length)throw new ce(1e3,"");if(!i[t])throw new ce(1001,"")}function x2(n,e,t){n._forEachChild((i,r)=>{if(void 0===t[r])throw new ce(1002,"")})}class Ng{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===Ud}get invalid(){return this.status===Ig}get pending(){return this.status==Il}get disabled(){return this.status===Bd}get enabled(){return this.status!==Bd}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(h2(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(h2(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(p2(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(p2(e,this._rawAsyncValidators))}hasValidator(e){return Ag(this._rawValidators,e)}hasAsyncValidator(e){return Ag(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Il,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Bd,this.errors=null,this._forEachChild(i=>{i.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Ud,this._forEachChild(i=>{i.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Ud||this.status===Il)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Bd:Ud}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Il,this._hasOwnPendingAsyncValidator=!0;const t=r2(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(i=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(i,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((i,r)=>i&&i._find(r),this)}getError(e,t){const i=t?this.get(t):this;return i&&i.errors?i.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new dn,this.statusChanges=new dn}_calculateStatus(){return this._allControlsDisabled()?Bd:this.errors?Ig:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Il)?Il:this._anyControlsHaveStatus(Ig)?Ig:Ud}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Rg(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function KZ(n){return Array.isArray(n)?Bx(n):n||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function JZ(n){return Array.isArray(n)?Vx(n):n||null}(this._rawAsyncValidators)}}class Vd extends Ng{constructor(e,t,i){super(Wx(t),jx(i,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,i={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,i={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){x2(this,0,e),Object.keys(e).forEach(i=>{y2(this,!0,i),this.controls[i].setValue(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(i=>{const r=this.controls[i];r&&r.patchValue(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((i,r)=>{i.reset(e?e[r]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,i)=>(e[i]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,i)=>!!i._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const i=this.controls[t];i&&e(i,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,i]of Object.entries(this.controls))if(this.contains(t)&&e(i))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,i,r)=>((i.enabled||this.disabled)&&(t[r]=i.value),t))}_reduceChildren(e,t){let i=e;return this._forEachChild((r,o)=>{i=t(i,r,o)}),i}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}class M2 extends Vd{}const Pa=new Ne("CallSetDisabledState",{providedIn:"root",factory:()=>zd}),zd="always";function Lg(n,e){return[...e.path,n]}function Hd(n,e,t=zd){$x(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||"always"===t)&&e.valueAccessor.setDisabledState?.(n.disabled),function eK(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&b2(n,e)})}(n,e),function nK(n,e){const t=(i,r)=>{e.valueAccessor.writeValue(i),r&&e.viewToModelUpdate(i)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function tK(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&b2(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function QZ(n,e){if(e.valueAccessor.setDisabledState){const t=i=>{e.valueAccessor.setDisabledState(i)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function kg(n,e,t=!0){const i=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(i),e.valueAccessor.registerOnTouched(i)),Ug(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function Fg(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function $x(n,e){const t=d2(n);null!==e.validator?n.setValidators(u2(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const i=f2(n);null!==e.asyncValidator?n.setAsyncValidators(u2(i,e.asyncValidator)):"function"==typeof i&&n.setAsyncValidators([i]);const r=()=>n.updateValueAndValidity();Fg(e._rawValidators,r),Fg(e._rawAsyncValidators,r)}function Ug(n,e){let t=!1;if(null!==n){if(null!==e.validator){const r=d2(n);if(Array.isArray(r)&&r.length>0){const o=r.filter(s=>s!==e.validator);o.length!==r.length&&(t=!0,n.setValidators(o))}}if(null!==e.asyncValidator){const r=f2(n);if(Array.isArray(r)&&r.length>0){const o=r.filter(s=>s!==e.asyncValidator);o.length!==r.length&&(t=!0,n.setAsyncValidators(o))}}}const i=()=>{};return Fg(e._rawValidators,i),Fg(e._rawAsyncValidators,i),t}function b2(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function Xx(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}function Yx(n,e){if(!e)return null;let t,i,r;return Array.isArray(e),e.forEach(o=>{o.constructor===Dl?t=o:function oK(n){return Object.getPrototypeOf(n.constructor)===Ea}(o)?i=o:r=o}),r||i||t||null}function S2(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function E2(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const Wd=class extends Ng{constructor(e=null,t,i){super(Wx(t),jx(i,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Rg(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=E2(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(i=>i(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){S2(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){S2(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){E2(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},uK={provide:Ps,useExisting:Zt(()=>Bg)},A2=(()=>Promise.resolve())();let Bg=(()=>{class n extends Ps{constructor(t,i,r,o,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this.control=new Wd,this._registered=!1,this.name="",this.update=new dn,this._parent=t,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=Yx(0,o)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const i=t.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),Xx(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){Hd(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){A2.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){const i=t.isDisabled.currentValue,r=0!==i&&function Ac(n){return"boolean"==typeof n?n:null!=n&&"false"!==n}(i);A2.then(()=>{r&&!this.control.disabled?this.control.disable():!r&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?Lg(t,this._parent):[t]}static{this.\u0275fac=function(i){return new(i||n)(ee(Mi,9),ee(ai,10),ee(Es,10),ee(ao,10),ee(Tc,8),ee(Pa,8))}}static{this.\u0275dir=et({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[ln([uK]),zt,nr]})}}return n})(),O2=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275dir=et({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}}return n})();const fK={provide:ao,useExisting:Zt(()=>Kx),multi:!0};let I2=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=br({type:n})}static{this.\u0275inj=er({})}}return n})(),hK=(()=>{class n{constructor(){this._accessors=[]}add(t,i){this._accessors.push([t,i])}remove(t){for(let i=this._accessors.length-1;i>=0;--i)if(this._accessors[i][1]===t)return void this._accessors.splice(i,1)}select(t){this._accessors.forEach(i=>{this._isSameGroup(i,t)&&i[1]!==t&&i[1].fireUncheck(t.value)})}_isSameGroup(t,i){return!!t[0].control&&t[0]._parent===i._control._parent&&t[1].name===i.name}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=We({token:n,factory:n.\u0275fac,providedIn:I2})}}return n})(),Kx=(()=>{class n extends Ea{constructor(t,i,r,o){super(t,i),this._registry=r,this._injector=o,this.setDisabledStateFired=!1,this.onChange=()=>{},this.callSetDisabledState=Ie(Pa,{optional:!0})??zd}ngOnInit(){this._control=this._injector.get(Ps),this._checkName(),this._registry.add(this._control,this)}ngOnDestroy(){this._registry.remove(this)}writeValue(t){this._state=t===this.value,this.setProperty("checked",this._state)}registerOnChange(t){this._fn=t,this.onChange=()=>{t(this.value),this._registry.select(this)}}setDisabledState(t){(this.setDisabledStateFired||t||"whenDisabledForLegacyCode"===this.callSetDisabledState)&&this.setProperty("disabled",t),this.setDisabledStateFired=!0}fireUncheck(t){this.writeValue(t)}_checkName(){!this.name&&this.formControlName&&(this.name=this.formControlName)}static{this.\u0275fac=function(i){return new(i||n)(ee(Wr),ee(Hi),ee(hK),ee(Gi))}}static{this.\u0275dir=et({type:n,selectors:[["input","type","radio","formControlName",""],["input","type","radio","formControl",""],["input","type","radio","ngModel",""]],hostBindings:function(i,r){1&i&&ge("change",function(){return r.onChange()})("blur",function(){return r.onTouched()})},inputs:{name:"name",formControlName:"formControlName",value:"value"},features:[ln([fK]),zt]})}}return n})();const Jx=new Ne("NgModelWithFormControlWarning"),mK={provide:Mi,useExisting:Zt(()=>Vg)};let Vg=(()=>{class n extends Mi{constructor(t,i,r){super(),this.callSetDisabledState=r,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new dn,this._setValidators(t),this._setAsyncValidators(i)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Ug(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const i=this.form.get(t.path);return Hd(i,t,this.callSetDisabledState),i.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),i}getControl(t){return this.form.get(t.path)}removeControl(t){kg(t.control||null,t,!1),function sK(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,i){this.form.get(t.path).setValue(i)}onSubmit(t){return this.submitted=!0,function w2(n,e){n._syncPendingControls(),e.forEach(t=>{const i=t.control;"submit"===i.updateOn&&i._pendingChange&&(t.viewToModelUpdate(i._pendingValue),i._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const i=t.control,r=this.form.get(t.path);i!==r&&(kg(i||null,t),(n=>n instanceof Wd)(r)&&(Hd(r,t,this.callSetDisabledState),t.control=r))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const i=this.form.get(t.path);(function C2(n,e){$x(n,e)})(i,t),i.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const i=this.form.get(t.path);i&&function iK(n,e){return Ug(n,e)}(i,t)&&i.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){$x(this.form,this),this._oldForm&&Ug(this._oldForm,this)}_checkFormPresent(){}static{this.\u0275fac=function(i){return new(i||n)(ee(ai,10),ee(Es,10),ee(Pa,8))}}static{this.\u0275dir=et({type:n,selectors:[["","formGroup",""]],hostBindings:function(i,r){1&i&&ge("submit",function(s){return r.onSubmit(s)})("reset",function(){return r.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[ln([mK]),zt,nr]})}}return n})();const yK={provide:Ps,useExisting:Zt(()=>tM)};let tM=(()=>{class n extends Ps{set isDisabled(t){}static{this._ngModelWarningSentOnce=!1}constructor(t,i,r,o,s){super(),this._ngModelWarningConfig=s,this._added=!1,this.name=null,this.update=new dn,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=Yx(0,o)}ngOnChanges(t){this._added||this._setUpControl(),Xx(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return Lg(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}static{this.\u0275fac=function(i){return new(i||n)(ee(Mi,13),ee(ai,10),ee(Es,10),ee(ao,10),ee(Jx,8))}}static{this.\u0275dir=et({type:n,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[ln([yK]),zt,nr]})}}return n})();const xK={provide:ao,useExisting:Zt(()=>jd),multi:!0};function k2(n,e){return null==n?`${e}`:(e&&"object"==typeof e&&(e="Object"),`${n}: ${e}`.slice(0,50))}let jd=(()=>{class n extends Ea{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;const r=k2(this._getOptionId(t),t);this.setProperty("value",r)}registerOnChange(t){this.onChange=i=>{this.value=this._getOptionValue(i),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(const i of this._optionMap.keys())if(this._compareWith(this._optionMap.get(i),t))return i;return null}_getOptionValue(t){const i=function MK(n){return n.split(":")[0]}(t);return this._optionMap.has(i)?this._optionMap.get(i):t}static{this.\u0275fac=function(){let t;return function(r){return(t||(t=Kn(n)))(r||n)}}()}static{this.\u0275dir=et({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(i,r){1&i&&ge("change",function(s){return r.onChange(s.target.value)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[ln([xK]),zt]})}}return n})(),nM=(()=>{class n{constructor(t,i,r){this._element=t,this._renderer=i,this._select=r,this._select&&(this.id=this._select._registerOption())}set ngValue(t){null!=this._select&&(this._select._optionMap.set(this.id,t),this._setElementValue(k2(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static{this.\u0275fac=function(i){return new(i||n)(ee(Hi),ee(Wr),ee(jd,9))}}static{this.\u0275dir=et({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}}return n})();const bK={provide:ao,useExisting:Zt(()=>iM),multi:!0};function F2(n,e){return null==n?`${e}`:("string"==typeof e&&(e=`'${e}'`),e&&"object"==typeof e&&(e="Object"),`${n}: ${e}`.slice(0,50))}let iM=(()=>{class n extends Ea{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){let i;if(this.value=t,Array.isArray(t)){const r=t.map(o=>this._getOptionId(o));i=(o,s)=>{o._setSelected(r.indexOf(s.toString())>-1)}}else i=(r,o)=>{r._setSelected(!1)};this._optionMap.forEach(i)}registerOnChange(t){this.onChange=i=>{const r=[],o=i.selectedOptions;if(void 0!==o){const s=o;for(let a=0;a<s.length;a++){const l=this._getOptionValue(s[a].value);r.push(l)}}else{const s=i.options;for(let a=0;a<s.length;a++){const c=s[a];if(c.selected){const l=this._getOptionValue(c.value);r.push(l)}}}this.value=r,t(r)}}_registerOption(t){const i=(this._idCounter++).toString();return this._optionMap.set(i,t),i}_getOptionId(t){for(const i of this._optionMap.keys())if(this._compareWith(this._optionMap.get(i)._value,t))return i;return null}_getOptionValue(t){const i=function CK(n){return n.split(":")[0]}(t);return this._optionMap.has(i)?this._optionMap.get(i)._value:t}static{this.\u0275fac=function(){let t;return function(r){return(t||(t=Kn(n)))(r||n)}}()}static{this.\u0275dir=et({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(i,r){1&i&&ge("change",function(s){return r.onChange(s.target)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[ln([bK]),zt]})}}return n})(),rM=(()=>{class n{constructor(t,i,r){this._element=t,this._renderer=i,this._select=r,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){null!=this._select&&(this._value=t,this._setElementValue(F2(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(F2(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static{this.\u0275fac=function(i){return new(i||n)(ee(Hi),ee(Wr),ee(iM,9))}}static{this.\u0275dir=et({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}}return n})();let Ta=(()=>{class n{constructor(){this._validator=Tg}ngOnChanges(t){if(this.inputName in t){const i=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(i),this._validator=this._enabled?this.createValidator(i):Tg,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return null!=t}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275dir=et({type:n,features:[nr]})}}return n})();const OK={provide:ai,useExisting:Zt(()=>sM),multi:!0};let sM=(()=>{class n extends Ta{constructor(){super(...arguments),this.inputName="maxlength",this.normalizeInput=t=>function U2(n){return"number"==typeof n?n:parseInt(n,10)}(t),this.createValidator=t=>t2(t)}static{this.\u0275fac=function(){let t;return function(r){return(t||(t=Kn(n)))(r||n)}}()}static{this.\u0275dir=et({type:n,selectors:[["","maxlength","","formControlName",""],["","maxlength","","formControl",""],["","maxlength","","ngModel",""]],hostVars:1,hostBindings:function(i,r){2&i&&qr("maxlength",r._enabled?r.maxlength:null)},inputs:{maxlength:"maxlength"},features:[ln([OK]),zt]})}}return n})(),$2=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=br({type:n})}static{this.\u0275inj=er({imports:[I2]})}}return n})();class q2 extends Ng{constructor(e,t,i){super(Wx(t),jx(i,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[this._adjustIndex(e)]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,i={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:i.emitEvent})}removeAt(e,t={}){let i=this._adjustIndex(e);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,i={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),t&&(this.controls.splice(r,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){x2(this,0,e),e.forEach((i,r)=>{y2(this,!1,r),this.at(r).setValue(i,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((i,r)=>{this.at(r)&&this.at(r).patchValue(i,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((i,r)=>{i.reset(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((t,i)=>!!i._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,i)=>{e(t,i)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}}function X2(n){return!!n&&(void 0!==n.asyncValidators||void 0!==n.validators||void 0!==n.updateOn)}let IK=(()=>{class n{constructor(){this.useNonNullable=!1}get nonNullable(){const t=new n;return t.useNonNullable=!0,t}group(t,i=null){const r=this._reduceControls(t);let o={};return X2(i)?o=i:null!==i&&(o.validators=i.validator,o.asyncValidators=i.asyncValidator),new Vd(r,o)}record(t,i=null){const r=this._reduceControls(t);return new M2(r,i)}control(t,i,r){let o={};return this.useNonNullable?(X2(i)?o=i:(o.validators=i,o.asyncValidators=r),new Wd(t,{...o,nonNullable:!0})):new Wd(t,i,r)}array(t,i,r){const o=t.map(s=>this._createControl(s));return new q2(o,i,r)}_reduceControls(t){const i={};return Object.keys(t).forEach(r=>{i[r]=this._createControl(t[r])}),i}_createControl(t){return t instanceof Wd||t instanceof Ng?t:Array.isArray(t)?this.control(t[0],t.length>1?t[1]:null,t.length>2?t[2]:null):this.control(t)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=We({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Y2=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:Pa,useValue:t.callSetDisabledState??zd}]}}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=br({type:n})}static{this.\u0275inj=er({imports:[$2]})}}return n})(),RK=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:Jx,useValue:t.warnOnNgModelWithFormControl??"always"},{provide:Pa,useValue:t.callSetDisabledState??zd}]}}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=br({type:n})}static{this.\u0275inj=er({imports:[$2]})}}return n})();function NK(n,e){if(1&n){const t=jt();M(0,"button",34),ge("click",function(){const o=Ue(t).$implicit;return Be(Z().onCategorySelect(o.name))}),U(1,"i"),P(2),b()}if(2&n){const t=e.$implicit;mt("active",Z().selectedCategory===t.name),I(1),bc(t.icon),I(1),Ve(" ",t.name," ")}}function LK(n,e){if(1&n&&(M(0,"option",35),P(1),b()),2&n){const t=e.$implicit;q("value",t),I(1),ot(t)}}function kK(n,e){1&n&&(M(0,"div",36),U(1,"div",37),M(2,"span",38),P(3,"LOADING DROPS..."),b()())}function FK(n,e){if(1&n){const t=jt();M(0,"div",39)(1,"div",40),U(2,"i",5),M(3,"h3"),P(4,"NO MATCHES FOUND"),b(),M(5,"p"),P(6,"Your search didn't return any results"),b(),M(7,"button",41),ge("click",function(){return Ue(t),Be(Z().clearFilters())}),P(8," RESET FILTERS "),b()()()}}function UK(n,e){if(1&n){const t=jt();Vs(0),M(1,"img",81),ge("error",function(r){Ue(t);const o=Z().$implicit;return Be(Z(2).handleImageError(o,r))}),b(),zs()}if(2&n){const t=Z().$implicit,i=Z(2);I(1),q("src",i.getProductImage(t),Gr)("alt",t.name)}}function BK(n,e){1&n&&(M(0,"div",82),U(1,"i",83),M(2,"span"),P(3,"NO IMAGE"),b()())}function VK(n,e){1&n&&(M(0,"span",84),P(1," SALE "),b())}function zK(n,e){1&n&&(M(0,"span",85),P(1," FEATURED "),b())}function HK(n,e){1&n&&(M(0,"span",86),P(1," OUT "),b())}function GK(n,e){1&n&&(M(0,"span",87),U(1,"i",88),P(2," 3D "),b())}function WK(n,e){1&n&&U(0,"i"),2&n&&bc(e.$implicit<=Z().$implicit.rating?"fas fa-star":"far fa-star")}function jK(n,e){if(1&n&&(M(0,"div",89)(1,"div",90)(2,"span",91),P(3,"MATERIAL:"),b(),M(4,"span",92),P(5),b()()()),2&n){const t=Z().$implicit;I(5),ot(t.material)}}function $K(n,e){if(1&n&&(M(0,"span",93),P(1),b()),2&n){const t=Z().$implicit;I(1),Ve(" $",t.originalPrice," ")}}const qK=function(){return[1,2,3,4,5]};function XK(n,e){if(1&n){const t=jt();M(0,"div",44),ge("click",function(){const o=Ue(t).$implicit;return Be(Z(2).onProductClick(o))}),M(1,"div",45)(2,"div",46),U(3,"div",47)(4,"div",48)(5,"div",49),b(),M(6,"div",50),ge("click",function(){const o=Ue(t).$implicit;return Be(Z(2).goToProduct(o.id))}),se(7,UK,2,2,"ng-container",51),se(8,BK,4,0,"ng-template",null,52,js),b(),M(10,"div",53),se(11,VK,2,0,"span",54),se(12,zK,2,0,"span",55),se(13,HK,2,0,"span",56),se(14,GK,3,0,"span",57),b(),M(15,"div",58)(16,"button",59),ge("click",function(r){const s=Ue(t).$implicit,a=Z(2);return r.stopPropagation(),Be(a.tryOnProduct(s))}),U(17,"i",60),b(),M(18,"button",59),ge("click",function(r){const s=Ue(t).$implicit,a=Z(2);return r.stopPropagation(),Be(a.toggleFavorite(s.id))}),U(19,"i",61),b()()(),M(20,"div",62)(21,"div",63)(22,"div",64),P(23),b(),M(24,"h3",65),P(25),b(),M(26,"div",66),P(27),b(),M(28,"div",67)(29,"div",68),se(30,WK,1,2,"i",69),b(),M(31,"span",70),P(32),b()(),M(33,"p",71),P(34),Iu(35,"slice"),b(),se(36,jK,6,1,"div",72),b(),M(37,"div",73)(38,"div",74)(39,"div",75)(40,"span",76),P(41),b(),se(42,$K,2,1,"span",77),b(),M(43,"div",78),P(44),b()(),M(45,"button",79),ge("click",function(r){const s=Ue(t).$implicit,a=Z(2);return r.stopPropagation(),Be(a.addToCart(s))}),U(46,"i",80),b()()()()}if(2&n){const t=e.$implicit,i=Bs(9),r=Z(2);mt("has-3d",r.has3DModel(t)),I(7),q("ngIf",t.images&&t.images.length>0)("ngIfElse",i),I(4),q("ngIf",t.originalPrice),I(1),q("ngIf",t.isFeatured),I(1),q("ngIf",!t.inStock),I(1),q("ngIf",r.has3DModel(t)),I(9),ot(t.brand),I(2),ot(t.name),I(2),ot(t.category),I(3),q("ngForOf",Ou(23,qK)),I(2),Ve("(",t.reviewCount,")"),I(2),Ve("",yh(35,19,t.description,0,80),"..."),I(2),q("ngIf",t.material),I(5),Ve("$",t.price,""),I(1),q("ngIf",t.originalPrice),I(2),Ve(" ",t.material," "),I(1),q("disabled",!t.inStock)}}function YK(n,e){if(1&n&&(M(0,"div",42),se(1,XK,47,24,"div",43),b()),2&n){const t=Z();q("ngClass","grid-"+t.gridSize),I(1),q("ngForOf",t.filteredProducts)}}let ZK=(()=>{class n{onProductClick(t){t&&this.goToProduct(t.id)}constructor(t,i,r){this.router=t,this.route=i,this.cartService=r,this.allProducts=cp,this.filteredProducts=[],this.categories=o9,this.selectedCategory="ALL",this.sortOptions=["NEWEST","PRICE LOW-HIGH","PRICE HIGH-LOW","POPULAR"],this.selectedSort="NEWEST",this.searchQuery="",this.isLoading=!1,this.viewMode="grid",this.gridSize="medium",this.product3DView={},this.productIsRotating={},this.favorites={},this.selectedProduct=null,this.selectedSize="",this.selectedColor="",this.isRotating=!0,this.show3DView=!0,this.selectedImageIndex=0}ngOnInit(){this.route.queryParams.subscribe(t=>{if(t.category&&(this.selectedCategory=t.category),t.productId){const i=t.productId;this.selectedProduct=this.allProducts.find(r=>r.id===i)||null}this.filterProducts()})}selectProduct(t){this.selectedProduct=t,this.selectedSize="",this.selectedColor="",this.isRotating=!0,this.show3DView=this.has3DModel(t),this.selectedImageIndex=0,this.router.navigate([],{relativeTo:this.route,queryParams:{productId:t.id},queryParamsHandling:"merge"})}closeProductDetails(){this.selectedProduct=null,this.router.navigate([],{relativeTo:this.route,queryParams:{productId:null},queryParamsHandling:"merge"})}get selectedProductHas3DModel(){return!!this.selectedProduct&&this.has3DModel(this.selectedProduct)}getCurrentImage(){return this.selectedProduct&&this.selectedProduct.images?this.selectedProduct.images[this.selectedImageIndex]:""}selectImage(t){this.selectedImageIndex=t}toggleRotation(){this.isRotating=!this.isRotating}changeColor(){console.log("Change color for selected product")}resetView(){this.isRotating=!0,this.selectedImageIndex=0}onResize(){window.innerWidth<768&&this.selectedProduct&&this.closeProductDetails()}filterProducts(){this.isLoading=!0,setTimeout(()=>{let t=[...this.allProducts];if("ALL"!==this.selectedCategory&&(t=t.filter(i=>i.category===this.selectedCategory)),this.searchQuery.trim()){const i=this.searchQuery.toLowerCase();t=t.filter(r=>r.name.toLowerCase().includes(i)||r.description.toLowerCase().includes(i)||r.tags&&r.tags.some(o=>o.toLowerCase().includes(i)))}this.filteredProducts=this.sortProducts(t),this.isLoading=!1},300)}sortProducts(t){switch(this.selectedSort){case"PRICE LOW-HIGH":return[...t].sort((i,r)=>i.price-r.price);case"PRICE HIGH-LOW":return[...t].sort((i,r)=>r.price-i.price);case"POPULAR":return[...t].sort((i,r)=>r.rating-i.rating);default:return t}}onCategorySelect(t){this.selectedCategory=t,this.filterProducts()}onSortChange(){this.filterProducts()}onSearch(){this.filterProducts()}clearFilters(){this.selectedCategory="ALL",this.searchQuery="",this.selectedSort="NEWEST",this.filterProducts()}goToProduct(t){this.router.navigate(["/product",t])}getCategoryIcon(t){return{TOPS:"fas fa-tshirt",BOTTOMS:"fas fa-vest",SHOES:"fas fa-shoe-prints",ACCESSORIES:"fas fa-gem",OUTERWEAR:"fas fa-jacket"}[t]||"fas fa-store"}getDiscountPercent(t){return t.originalPrice?Math.round((t.originalPrice-t.price)/t.originalPrice*100):0}toggleProduct3DView(t){this.product3DView[t]=!this.product3DView[t],this.product3DView[t]&&(this.productIsRotating[t]=!0)}toggleProductRotation(t){this.productIsRotating[t]=!this.productIsRotating[t]}changeProductColor(t){console.log("Change color for product:",t)}resetProductView(t){this.product3DView[t]=!1,this.productIsRotating[t]=!1}addToCart(t){this.cartService.addToCart(t),console.log("Added to cart:",t.name)}tryOnProduct(t){console.log("Try on:",t.name),this.router.navigate(["/try-on"],{queryParams:{productId:t.id}})}toggleFavorite(t){this.favorites[t]=!this.favorites[t],console.log("Toggled favorite for:",t,"Status:",this.favorites[t])}isFavorite(t){return!!this.favorites[t]}getProductImage(t){if(!t.images||0===t.images.length)return"assets/images/placeholder.jpg";for(const i of t.images)if(!this.is3DFile(i))return i;return t.images[0]}is3DFile(t){if(!t)return!1;const i=t.toLowerCase();return i.endsWith(".obj")||i.endsWith(".glb")||i.endsWith(".gltf")||i.endsWith(".fbx")}handleImageError(t,i){if(console.log("\u274c Erreur de chargement d'image pour:",t.name),this.is3DFile(i.target.src)){i.target.style.display="none";const r=i.target.parentElement,o=document.createElement("div");o.className="product-3d-placeholder",o.innerHTML='\n      <i class="fas fa-cube"></i>\n      <span>3D MODEL</span>\n      <small>Cliquez pour voir</small>\n    ',r.appendChild(o)}else i.target.src="assets/images/placeholder.jpg"}has3DModel(t){return t.images&&(t.images.some(i=>this.is3DFile(i))||t.has3DModel)||!1}static{this.\u0275fac=function(i){return new(i||n)(ee(Hn),ee(as),ee(sd))}}static{this.\u0275cmp=Ui({type:n,selectors:[["app-shop"]],hostBindings:function(i,r){1&i&&ge("resize",function(){return r.onResize()},0,Fs)},decls:49,vars:15,consts:[[1,"shop","page-container"],[1,"shop-header"],[1,"shop-title"],[1,"search-container"],[1,"search-bar"],[1,"fas","fa-search"],["type","text","placeholder","SEARCH STREETWEAR...",1,"search-input",3,"ngModel","ngModelChange","keyup.enter"],[1,"search-btn",3,"click"],[1,"filters"],[1,"filter-row"],[1,"filter-section"],[1,"filter-title"],[1,"category-filters"],["class","category-filter-btn",3,"active","click",4,"ngFor","ngForOf"],[1,"sort-options"],[1,"sort-select",3,"ngModel","ngModelChange","change"],[3,"value",4,"ngFor","ngForOf"],[1,"btn","btn-dark",3,"click"],[1,"fas","fa-redo","mr-2"],[1,"products-section"],[1,"products-header-modern"],[1,"modern-header-left"],[1,"modern-title"],[1,"modern-subtitle"],[1,"modern-header-right"],[1,"modern-count"],[1,"modern-view-controls"],[1,"modern-view-btn",3,"click"],[1,"fas","fa-th"],[1,"fas","fa-th-large"],[1,"fas","fa-square"],["class","loading-modern",4,"ngIf"],["class","no-products-modern",4,"ngIf"],["class","products-modern-grid",3,"ngClass",4,"ngIf"],[1,"category-filter-btn",3,"click"],[3,"value"],[1,"loading-modern"],[1,"modern-spinner"],[1,"modern-loading-text"],[1,"no-products-modern"],[1,"modern-empty-state"],[1,"btn-modern",3,"click"],[1,"products-modern-grid",3,"ngClass"],["class","modern-product",3,"has-3d","click",4,"ngFor","ngForOf"],[1,"modern-product",3,"click"],[1,"modern-product-image"],[1,"gta-panels"],[1,"gta-panel","panel-1"],[1,"gta-panel","panel-2"],[1,"gta-panel","panel-3"],[1,"product-img-container",3,"click"],[4,"ngIf","ngIfElse"],["placeholder",""],[1,"modern-indicators"],["class","modern-badge sale",4,"ngIf"],["class","modern-badge new",4,"ngIf"],["class","modern-badge out",4,"ngIf"],["class","modern-badge model-3d",4,"ngIf"],[1,"modern-quick-actions"],[1,"modern-quick-btn",3,"click"],[1,"fas","fa-user"],[1,"fas","fa-heart"],[1,"modern-product-content"],[1,"modern-product-info"],[1,"modern-brand"],[1,"modern-product-name"],[1,"modern-category"],[1,"modern-rating"],[1,"stars"],[3,"class",4,"ngFor","ngForOf"],[1,"rating-count"],[1,"product-description"],["class","product-specs",4,"ngIf"],[1,"modern-product-footer"],[1,"modern-price-section"],[1,"modern-price"],[1,"modern-current"],["class","modern-original",4,"ngIf"],[1,"modern-material"],[1,"modern-add-btn",3,"disabled","click"],[1,"fas","fa-plus"],[1,"product-img",3,"src","alt","error"],[1,"product-img-placeholder"],[1,"fas","fa-tshirt"],[1,"modern-badge","sale"],[1,"modern-badge","new"],[1,"modern-badge","out"],[1,"modern-badge","model-3d"],[1,"fas","fa-cube"],[1,"product-specs"],[1,"spec-item"],[1,"spec-label"],[1,"spec-value"],[1,"modern-original"]],template:function(i,r){1&i&&(M(0,"div",0)(1,"header",1)(2,"h1",2),P(3,"SHOP"),b(),M(4,"div",3)(5,"div",4),U(6,"i",5),M(7,"input",6),ge("ngModelChange",function(s){return r.searchQuery=s})("keyup.enter",function(){return r.onSearch()}),b(),M(8,"button",7),ge("click",function(){return r.onSearch()}),P(9,"GO"),b()()()(),M(10,"section",8)(11,"div",9)(12,"div",10)(13,"h3",11),P(14,"CATEGORIES"),b(),M(15,"div",12),se(16,NK,3,5,"button",13),b()()(),M(17,"div",9)(18,"div",10)(19,"h3",11),P(20,"SORT BY"),b(),M(21,"div",14)(22,"select",15),ge("ngModelChange",function(s){return r.selectedSort=s})("change",function(){return r.onSortChange()}),se(23,LK,2,2,"option",16),b()()(),M(24,"div",10)(25,"button",17),ge("click",function(){return r.clearFilters()}),U(26,"i",18),P(27,"CLEAR FILTERS "),b()()()(),M(28,"section",19)(29,"div",20)(30,"div",21)(31,"h2",22),P(32),b(),M(33,"span",23),P(34,"LOS SANTOS STREETWEAR"),b()(),M(35,"div",24)(36,"span",25),P(37),b(),M(38,"div",26)(39,"button",27),ge("click",function(){return r.gridSize="small"}),U(40,"i",28),b(),M(41,"button",27),ge("click",function(){return r.gridSize="medium"}),U(42,"i",29),b(),M(43,"button",27),ge("click",function(){return r.gridSize="large"}),U(44,"i",30),b()()()(),se(45,kK,4,0,"div",31),se(46,FK,9,0,"div",32),se(47,YK,2,2,"div",33),b()(),U(48,"app-bottom-nav")),2&i&&(I(7),q("ngModel",r.searchQuery),I(9),q("ngForOf",r.categories),I(6),q("ngModel",r.selectedSort),I(1),q("ngForOf",r.sortOptions),I(9),ot(r.selectedCategory),I(5),Ve("",r.filteredProducts.length," ITEMS"),I(2),mt("active","small"===r.gridSize),I(2),mt("active","medium"===r.gridSize),I(2),mt("active","large"===r.gridSize),I(2),q("ngIf",r.isLoading),I(1),q("ngIf",!r.isLoading&&0===r.filteredProducts.length),I(1),q("ngIf",!r.isLoading&&r.filteredProducts.length>0))},dependencies:[GP,is,Kr,nM,rM,Dl,jd,Og,Bg,Vc,lv],styles:['@charset "UTF-8";.product-details-style[_ngcontent-%COMP%]{background:#fff;border:4px solid #000;border-radius:0;box-shadow:8px 8px #000;padding:0;margin:0;display:flex;flex-direction:column;min-height:520px;max-width:100%;overflow:hidden;position:relative}.product-details-style[_ngcontent-%COMP%]   .product-content[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:0;padding:0;min-height:400px}.product-details-style[_ngcontent-%COMP%]   .product-gallery[_ngcontent-%COMP%]{flex:1 1 50%;background:#000;display:flex;align-items:center;justify-content:center;min-width:0;min-height:320px;padding:0;position:relative}.product-details-style[_ngcontent-%COMP%]   .model-container[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;align-items:center;justify-content:center;background:transparent}.product-details-style[_ngcontent-%COMP%]   .model-viewer-wrapper[_ngcontent-%COMP%]{width:100%;height:320px;display:flex;align-items:center;justify-content:center;background:transparent}.product-details-style[_ngcontent-%COMP%]   app-model-viewer[_ngcontent-%COMP%]{width:100%!important;height:320px!important;display:block;background:transparent}.product-details-style[_ngcontent-%COMP%]   .model-controls[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:8px;position:absolute;bottom:10px;left:10px;z-index:2}.product-details-style[_ngcontent-%COMP%]{background:#fff;border:4px solid #000;border-radius:0;box-shadow:8px 8px #000;padding:0;margin:0;display:flex;flex-direction:column;min-height:520px;max-width:100%;overflow:hidden;position:relative;box-shadow:2px 2px #000}.product-details-style[_ngcontent-%COMP%]   .product-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:0;padding:0;min-height:400px;flex:1 1 50%}.product-details-style[_ngcontent-%COMP%]   .product-gallery[_ngcontent-%COMP%]{width:100%;background:#000;display:flex;align-items:center;justify-content:center;min-width:0;min-height:260px;padding:0;font-family:Oswald,sans-serif;position:relative}.product-details-style[_ngcontent-%COMP%]   .product-info-panel[_ngcontent-%COMP%]{width:100%;padding:18px;display:flex;flex-direction:column;justify-content:flex-start;background:#fff;min-width:0;min-height:180px;border-top:2px solid #eee;letter-spacing:1.5px}.product-details-style[_ngcontent-%COMP%]   .product-gallery[_ngcontent-%COMP%] + .product-info-panel[_ngcontent-%COMP%]{margin-top:0}@media (max-width: 900px){.product-details-style[_ngcontent-%COMP%]   .product-content[_ngcontent-%COMP%]{flex-direction:column}.product-details-style[_ngcontent-%COMP%]   .product-gallery[_ngcontent-%COMP%], .product-details-style[_ngcontent-%COMP%]   .product-info-panel[_ngcontent-%COMP%]{min-width:0;width:100%;min-height:160px;padding:10px 8px}.product-details-style[_ngcontent-%COMP%]   .model-viewer-wrapper[_ngcontent-%COMP%], .product-details-style[_ngcontent-%COMP%]   app-model-viewer[_ngcontent-%COMP%]{height:180px!important}}.product-details-style[_ngcontent-%COMP%]   .product-meta[_ngcontent-%COMP%]{display:flex;align-items:center;gap:18px;margin-bottom:10px}.product-details-style[_ngcontent-%COMP%]   .price-tag[_ngcontent-%COMP%]{color:#000;font-size:20px;font-family:Street,Pricedown,sans-serif;font-weight:900}.product-details-style[_ngcontent-%COMP%]   .original-price[_ngcontent-%COMP%]{color:#777;font-size:15px;text-decoration:line-through;margin-left:8px}.product-details-style[_ngcontent-%COMP%]   .rating[_ngcontent-%COMP%]{color:#f90;font-size:15px;display:flex;align-items:center;gap:3px}.product-details-style[_ngcontent-%COMP%]   .product-description[_ngcontent-%COMP%]{color:#222;font-size:15px;margin:10px 0 12px;font-family:Oswald,sans-serif}.product-details-style[_ngcontent-%COMP%]   .product-specs[_ngcontent-%COMP%]{margin-bottom:10px}.product-details-style[_ngcontent-%COMP%]   .spec-item[_ngcontent-%COMP%]{font-size:13px;color:#555;margin-bottom:2px}.product-details-style[_ngcontent-%COMP%]   .spec-label[_ngcontent-%COMP%]{color:#39ff14;font-weight:700;margin-right:4px}.product-details-style[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]{display:flex;gap:10px;margin-top:10px}.product-details-style[_ngcontent-%COMP%]   .gta-btn[_ngcontent-%COMP%]{background:#39ff14;color:#000;border:2px solid #000;font-family:Street,Pricedown,sans-serif;font-size:14px;padding:8px 18px;border-radius:0;cursor:pointer;transition:background .2s,color .2s;font-weight:900;box-shadow:2px 2px #000}.product-details-style[_ngcontent-%COMP%]   .gta-btn.secondary-btn[_ngcontent-%COMP%]{background:#fff;color:#39ff14;border:2px solid #39ff14}.product-details-style[_ngcontent-%COMP%]   .gta-btn[_ngcontent-%COMP%]:disabled{background:#ccc;color:#777;border-color:#aaa;cursor:not-allowed}.product-details-style[_ngcontent-%COMP%]   .model-info[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:10px;margin-top:12px;background:#f7f7f7;border-left:3px solid #39ff14;padding:8px 12px;border-radius:0 6px 6px 0}.product-details-style[_ngcontent-%COMP%]   .info-icon[_ngcontent-%COMP%]{color:#39ff14;font-size:22px;margin-top:2px}.product-details-style[_ngcontent-%COMP%]   .info-text[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 2px;font-size:15px;color:#222;font-family:Street,Pricedown,sans-serif}.product-details-style[_ngcontent-%COMP%]   .info-text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:13px;color:#555;font-family:Oswald,sans-serif}@media (max-width: 900px){.product-details-style[_ngcontent-%COMP%]   .product-content[_ngcontent-%COMP%]{flex-direction:column}.product-details-style[_ngcontent-%COMP%]   .product-gallery[_ngcontent-%COMP%], .product-details-style[_ngcontent-%COMP%]   .product-info-panel[_ngcontent-%COMP%]{min-width:0;width:100%;min-height:220px;padding:10px 8px}.product-details-style[_ngcontent-%COMP%]   .model-viewer-wrapper[_ngcontent-%COMP%], .product-details-style[_ngcontent-%COMP%]   app-model-viewer[_ngcontent-%COMP%]{height:220px!important}}.shop[_ngcontent-%COMP%]{background:#0b0f0c;min-height:100vh;position:relative;overflow-x:hidden;scroll-behavior:smooth}.shop[_ngcontent-%COMP%]:before{content:"";position:fixed;inset:0;background-image:radial-gradient(circle at 20% 30%,rgba(57,255,20,.05) 0%,transparent 50%),radial-gradient(circle at 80% 70%,rgba(255,153,0,.05) 0%,transparent 50%),linear-gradient(45deg,#0b0f0c 25%,#0f1f14 25%,#0f1f14 50%,#0b0f0c 50%,#0b0f0c 75%,#0f1f14 75%,#0f1f14);background-size:5px 5px,5px 5px,10px 10px;z-index:-1;opacity:.3}.shop-header[_ngcontent-%COMP%]{background:#000;padding:40px 20px 30px;border-bottom:4px solid #39ff14;position:relative;overflow:hidden}.shop-header[_ngcontent-%COMP%]:before{content:"";position:absolute;inset:0;background:linear-gradient(45deg,transparent 48%,rgba(57,255,20,.1) 50%,transparent 52%),linear-gradient(-45deg,transparent 48%,rgba(57,255,20,.1) 50%,transparent 52%);background-size:20px 20px}.shop-title[_ngcontent-%COMP%]{font-family:Street,Pricedown,sans-serif;font-size:52px;color:#39ff14;text-align:center;letter-spacing:4px;margin-bottom:25px;text-shadow:3px 3px 0 #000,-1px -1px 0 #000,1px -1px 0 #000,-1px 1px 0 #000,1px 1px 0 #000;position:relative;z-index:1}.shop-title[_ngcontent-%COMP%]:after{content:"LOS SANTOS";position:absolute;bottom:-10px;left:50%;transform:translate(-50%);font-size:16px;color:#fff;letter-spacing:8px;opacity:.7;font-family:Oswald,sans-serif}.search-container[_ngcontent-%COMP%]{max-width:600px;margin:0 auto;position:relative;z-index:1}.search-bar[_ngcontent-%COMP%]{display:flex;background:#111;border:3px solid #39ff14;border-radius:0;overflow:hidden;transform:skew(-5deg);box-shadow:5px 5px #000}.search-bar[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#39ff14;padding:15px;font-size:18px;transform:skew(5deg);background:#000}.search-input[_ngcontent-%COMP%]{flex:1;background:#000;border:none;color:#39ff14;font-size:16px;padding:0 15px;outline:none;font-family:Oswald,sans-serif;letter-spacing:1px;transform:skew(5deg)}.search-input[_ngcontent-%COMP%]::placeholder{color:#777;letter-spacing:2px;text-transform:uppercase}.search-btn[_ngcontent-%COMP%]{background:#39ff14;color:#000;border:none;padding:0 30px;font-weight:900;cursor:pointer;text-transform:uppercase;letter-spacing:2px;font-family:Street,Pricedown,sans-serif;transition:all .3s ease;transform:skew(5deg);position:relative;overflow:hidden}.search-btn[_ngcontent-%COMP%]:hover{background:#ff9900;color:#000;box-shadow:0 0 15px #f90}.search-btn[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:-100%;width:100%;height:100%;background:linear-gradient(90deg,transparent,rgba(255,255,255,.3),transparent);transition:.5s}.search-btn[_ngcontent-%COMP%]:hover:before{left:100%}.filters[_ngcontent-%COMP%]{background:#000;border:3px solid #39ff14;border-radius:0;margin:40px 20px 30px;padding:25px;box-shadow:10px 10px #000;position:relative;transform:skew(-2deg);overflow:hidden}.filters[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;right:0;height:4px;background:repeating-linear-gradient(90deg,#39ff14,#39ff14 10px,#000 10px,#000 20px)}.filter-row[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:20px;margin-bottom:20px;transform:skew(2deg)}.filter-row[_ngcontent-%COMP%]:last-child{margin-bottom:0}.filter-section[_ngcontent-%COMP%]{flex:1;min-width:250px}.filter-title[_ngcontent-%COMP%]{color:#39ff14;font-size:18px;margin-bottom:15px;letter-spacing:2px;text-transform:uppercase;font-family:Street,Pricedown,sans-serif;text-shadow:2px 2px 0 #000;position:relative;display:inline-block}.filter-title[_ngcontent-%COMP%]:after{content:"";position:absolute;bottom:-5px;left:0;width:60%;height:2px;background:#ff9900}.category-filters[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:12px}.category-filter-btn[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;background:#000;border:2px solid #333;color:#ccc;padding:12px 20px;border-radius:0;cursor:pointer;transition:all .3s ease;font-weight:600;letter-spacing:1px;font-family:Oswald,sans-serif;text-transform:uppercase;transform:skew(-5deg);position:relative;overflow:hidden}.category-filter-btn[_ngcontent-%COMP%]:hover{border-color:#39ff14;color:#39ff14;transform:skew(-5deg) translateY(-3px);box-shadow:4px 4px #000}.category-filter-btn.active[_ngcontent-%COMP%]{background:#39ff14;color:#000;border-color:#000;box-shadow:6px 6px #000;transform:skew(-5deg)}.category-filter-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:16px;transform:skew(5deg)}.category-filter-btn[_ngcontent-%COMP%]:before{content:"";position:absolute;top:50%;left:50%;width:0;height:0;background:rgba(57,255,20,.2);border-radius:50%;transform:translate(-50%,-50%);transition:width .6s,height .6s}.category-filter-btn[_ngcontent-%COMP%]:hover:before{width:100%;height:100%}.sort-options[_ngcontent-%COMP%]{display:flex;gap:10px}.sort-select[_ngcontent-%COMP%]{flex:1;background:#000;border:2px solid #39ff14;color:#39ff14;padding:12px 15px;border-radius:0;font-size:16px;cursor:pointer;outline:none;font-family:Oswald,sans-serif;min-width:200px;text-transform:uppercase;letter-spacing:1px;transform:skew(-5deg)}.sort-select[_ngcontent-%COMP%]   option[_ngcontent-%COMP%]{background:#000;color:#39ff14;font-family:Oswald,sans-serif}.products-section[_ngcontent-%COMP%]{padding:0 20px 60px}.products-header-modern[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-end;margin-bottom:40px;padding-bottom:15px;border-bottom:4px solid #39ff14;position:relative}.products-header-modern[_ngcontent-%COMP%]:after{content:"";position:absolute;bottom:-4px;left:0;width:100%;height:4px;background:repeating-linear-gradient(90deg,#ff9900,#ff9900 10px,transparent 10px,transparent 20px)}.modern-header-left[_ngcontent-%COMP%]{flex:1}.modern-title[_ngcontent-%COMP%]{font-family:Street,Pricedown,sans-serif;font-size:42px;color:#39ff14;letter-spacing:3px;margin:0 0 5px;text-transform:uppercase;text-shadow:2px 2px 0 #000,-1px -1px 0 #000,1px -1px 0 #000,-1px 1px 0 #000}.modern-subtitle[_ngcontent-%COMP%]{color:#fff;font-size:16px;letter-spacing:3px;text-transform:uppercase;font-family:Oswald,sans-serif;background:#000;padding:5px 15px;display:inline-block;border:2px solid #ff9900;transform:skew(-5deg)}.modern-header-right[_ngcontent-%COMP%]{display:flex;align-items:center;gap:25px}.modern-count[_ngcontent-%COMP%]{color:#39ff14;font-weight:900;font-size:18px;letter-spacing:2px;background:#000;padding:8px 15px;border:2px solid #39ff14;transform:skew(-5deg);font-family:Street,Pricedown,sans-serif;text-shadow:1px 1px 0 #000}.modern-view-controls[_ngcontent-%COMP%]{display:flex;gap:8px;background:#000;border:2px solid #39ff14;padding:8px;transform:skew(-5deg)}.modern-view-btn[_ngcontent-%COMP%]{background:#111;border:2px solid #000;color:#777;width:40px;height:40px;display:flex;align-items:center;justify-content:center;cursor:pointer;transition:all .3s ease;transform:skew(5deg)}.modern-view-btn[_ngcontent-%COMP%]:hover{color:#39ff14;background:#000;border-color:#39ff14}.modern-view-btn.active[_ngcontent-%COMP%]{background:#39ff14;color:#000;border-color:#000;box-shadow:3px 3px #000}.modern-product[_ngcontent-%COMP%]{background:linear-gradient(160deg,#e3efcd 0%,#cbdca8 100%);border:4px solid #000;border-radius:0;transform:skew(-3deg);box-shadow:10px 10px #000;transition:all .2s cubic-bezier(.4,0,.2,1);cursor:pointer;position:relative;overflow:hidden;z-index:1}.modern-product[_ngcontent-%COMP%]:hover{transform:skew(-3deg) translate(-4px,-4px);box-shadow:16px 16px #000;z-index:10;background:linear-gradient(160deg,#eaf4da 0%,#d4e2b6 100%)}.modern-product[_ngcontent-%COMP%]:before, .modern-product[_ngcontent-%COMP%]:after{display:none}.products-modern-grid[_ngcontent-%COMP%]{display:grid;gap:35px;position:relative;z-index:2}.grid-small[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fill,minmax(220px,1fr))}.grid-medium[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fill,minmax(300px,1fr))}.grid-large[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fill,minmax(380px,1fr))}@media (max-width: 768px){.grid-small[_ngcontent-%COMP%], .grid-medium[_ngcontent-%COMP%], .grid-large[_ngcontent-%COMP%]{grid-template-columns:1fr!important}.modern-product-image[_ngcontent-%COMP%]{height:1000px}}.modern-product-image[_ngcontent-%COMP%]{background:#000;height:500px;border-bottom:4px solid #000;position:relative;overflow:hidden;display:flex;align-items:center;justify-content:center}.gta-panels[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;inset:0;display:flex;justify-content:center;align-items:center;gap:10px;overflow:hidden;z-index:0}.gta-panel[_ngcontent-%COMP%]{background:linear-gradient(to bottom,rgba(0,0,0,.2),rgba(0,0,0,.8)),url(bg1.54feb52e8cf9f583.jpg);background-size:cover;background-position:center;border:2px solid #000;box-shadow:8px 8px #000;position:relative}.gta-panel[_ngcontent-%COMP%]:after{content:"";position:absolute;inset:0;background:linear-gradient(120deg,rgba(255,255,255,.1),rgba(0,0,0,.1))}.panel-1[_ngcontent-%COMP%]{flex:.8;height:55%;transform:rotate(-5deg) translateY(10px);will-change:transform;animation:_ngcontent-%COMP%_float-1 3s ease-in-out infinite alternate;margin-top:0}.panel-2[_ngcontent-%COMP%]{flex:1;height:80%;transform:rotate(0) scale(1.1);z-index:2;will-change:transform;animation:_ngcontent-%COMP%_float-2 4s ease-in-out infinite alternate}.panel-3[_ngcontent-%COMP%]{flex:.6;height:55%;transform:rotate(5deg) translateY(10px);will-change:transform;animation:_ngcontent-%COMP%_float-3 3.5s ease-in-out infinite alternate;margin-top:0}@keyframes _ngcontent-%COMP%_float-1{0%{transform:rotate(-5deg) translateY(10px) translate(0)}to{transform:rotate(-5deg) translateY(10px) translate(5px,-5px)}}@keyframes _ngcontent-%COMP%_float-2{0%{transform:rotate(0) scale(1.1) translate(0)}to{transform:rotate(0) scale(1.1) translate(-5px,5px)}}@keyframes _ngcontent-%COMP%_float-3{0%{transform:rotate(5deg) translateY(10px) translate(0)}to{transform:rotate(5deg) translateY(10px) translate(8px,8px)}}.modern-product-image[_ngcontent-%COMP%]:before{display:none}.product-img-container[_ngcontent-%COMP%]{z-index:2;position:relative;width:100%;height:100%;display:flex;align-items:center;justify-content:center;padding:20px}.product-3d-viewer[_ngcontent-%COMP%]{width:100%;height:100%;display:block}.product-img[_ngcontent-%COMP%]{max-width:100%;max-height:100%;object-fit:contain;filter:drop-shadow(5px 5px 0 rgba(0,0,0,.3)) contrast(1.1);mix-blend-mode:multiply}.product-img-placeholder[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;gap:15px;color:#39ff14;font-size:24px}.product-img-placeholder[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:64px;opacity:.5}.product-img-placeholder[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-family:Street,Pricedown,sans-serif;font-size:32px;letter-spacing:3px;text-shadow:2px 2px 0 #000}.modern-product-image[_ngcontent-%COMP%]:after{content:"";position:absolute;inset:0;background:linear-gradient(to bottom,transparent 70%,rgba(0,0,0,.2));z-index:2}.modern-indicators[_ngcontent-%COMP%]{position:absolute;top:15px;left:15px;display:flex;flex-direction:column;gap:10px;z-index:3}.modern-badge[_ngcontent-%COMP%]{padding:8px 15px;border-radius:0;border:2px solid #000;transform:skew(-10deg);font-size:12px;font-weight:900;letter-spacing:1px;text-transform:uppercase;font-family:Street,Pricedown,sans-serif;box-shadow:3px 3px #0000004d;z-index:4}.modern-badge.sale[_ngcontent-%COMP%]{background:#ffcc00;color:#000}.modern-badge.new[_ngcontent-%COMP%]{background:#39ff14;color:#000}.modern-badge.out[_ngcontent-%COMP%]{background:#ff3333;color:#fff}.modern-quick-actions[_ngcontent-%COMP%]{position:absolute;top:15px;right:15px;display:flex;flex-direction:column;gap:10px;opacity:0;transform:translate(20px) skew(2deg);transition:all .3s ease;z-index:3}.modern-product[_ngcontent-%COMP%]:hover   .modern-quick-actions[_ngcontent-%COMP%]{opacity:1;transform:translate(0) skew(2deg)}.modern-quick-btn[_ngcontent-%COMP%]{width:42px;height:42px;border-radius:0;border:2px solid #000;background:#fff;color:#000;display:flex;align-items:center;justify-content:center;cursor:pointer;transition:all .3s ease;font-size:18px;transform:skew(2deg);box-shadow:3px 3px #000}.modern-quick-btn[_ngcontent-%COMP%]:hover{background:#39ff14;color:#000;transform:skew(2deg) translate(-2px,-2px);box-shadow:5px 5px #000}.modern-product-content[_ngcontent-%COMP%]{position:relative;z-index:2;background:#fff;color:#000;border-top:4px solid #000;padding:25px;display:flex;flex-direction:column;flex:1}.modern-product-info[_ngcontent-%COMP%]{flex:1;margin-bottom:20px}.modern-brand[_ngcontent-%COMP%]{color:#777;font-size:12px;letter-spacing:2px;text-transform:uppercase;margin-bottom:8px;font-family:Oswald,sans-serif;font-weight:600}.modern-product-name[_ngcontent-%COMP%]{font-family:Street,Pricedown,sans-serif;text-transform:uppercase;letter-spacing:1.5px;color:#000;font-size:22px;margin:0 0 10px;font-weight:900;line-height:1.2;text-shadow:1px 1px 0 rgba(0,0,0,.1);position:relative}.modern-product-name[_ngcontent-%COMP%]:after{content:"";position:absolute;bottom:-5px;left:0;width:60px;height:3px;background:#ff9900}.modern-category[_ngcontent-%COMP%]{color:#39ff14;font-size:14px;text-transform:uppercase;letter-spacing:1px;margin-bottom:15px;font-family:Oswald,sans-serif;font-weight:600;background:#000;padding:4px 10px;display:inline-block;transform:skew(-5deg)}.modern-rating[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;margin-top:15px}.stars[_ngcontent-%COMP%]{color:#f90;font-size:14px}.stars[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{text-shadow:1px 1px 0 #000}.rating-count[_ngcontent-%COMP%]{color:#777;font-size:13px;font-weight:600;font-family:Oswald,sans-serif}.modern-product-footer[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-end}.modern-price-section[_ngcontent-%COMP%]{flex:1}.modern-price[_ngcontent-%COMP%]{display:flex;align-items:center;gap:15px;margin-bottom:8px}.modern-current[_ngcontent-%COMP%]{color:#000;font-size:28px;font-weight:900;font-family:Street,Pricedown,sans-serif;text-shadow:2px 2px 0 rgba(0,0,0,.1);position:relative}.modern-current[_ngcontent-%COMP%]:before{content:"$";font-size:18px;vertical-align:super;margin-right:2px}.modern-original[_ngcontent-%COMP%]{color:#777;font-size:18px;text-decoration:line-through;font-weight:600;font-family:Oswald,sans-serif}.modern-material[_ngcontent-%COMP%]{color:#555;font-size:12px;letter-spacing:.5px;font-style:italic;font-family:Oswald,sans-serif;border-top:1px dashed #ccc;padding-top:5px;margin-top:5px}.modern-add-btn[_ngcontent-%COMP%]{width:48px;height:48px;border-radius:0;border:3px solid #000;background:#39ff14;color:#000;display:flex;align-items:center;justify-content:center;cursor:pointer;transition:all .3s ease;font-size:24px;font-weight:900;box-shadow:4px 4px #000;transform:skew(-5deg)}.modern-add-btn[_ngcontent-%COMP%]:hover:not(:disabled){background:#ff9900;transform:skew(-5deg) translate(-4px,-4px);box-shadow:8px 8px #000}.modern-add-btn[_ngcontent-%COMP%]:disabled{background:#ccc;color:#777;cursor:not-allowed;box-shadow:2px 2px #777}.loading-modern[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:100px 20px;background:#000;border:3px solid #39ff14;margin:40px;transform:skew(-5deg)}.modern-spinner[_ngcontent-%COMP%]{width:60px;height:60px;border:4px solid #333;border-top:4px solid #39ff14;border-radius:0;animation:_ngcontent-%COMP%_spin 1s linear infinite;margin-bottom:20px;transform:skew(5deg)}@keyframes _ngcontent-%COMP%_spin{0%{transform:skew(5deg) rotate(0)}to{transform:skew(5deg) rotate(360deg)}}.modern-loading-text[_ngcontent-%COMP%]{color:#39ff14;letter-spacing:3px;text-transform:uppercase;font-size:16px;font-family:Street,Pricedown,sans-serif;text-shadow:2px 2px 0 #000}.no-products-modern[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:500px;padding:40px}.modern-empty-state[_ngcontent-%COMP%]{text-align:center;padding:50px;background:#000;border:4px solid #39ff14;transform:skew(-5deg);box-shadow:15px 15px #00000080;max-width:500px}.modern-empty-state[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:80px;color:#333;margin-bottom:30px;transform:skew(5deg)}.modern-empty-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#39ff14;font-size:32px;margin-bottom:15px;font-family:Street,Pricedown,sans-serif;text-transform:uppercase;letter-spacing:3px;transform:skew(5deg)}.modern-empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#ccc;margin-bottom:30px;font-size:18px;font-family:Oswald,sans-serif;transform:skew(5deg)}.btn-modern[_ngcontent-%COMP%]{background:#39ff14;color:#000;border:3px solid #000;padding:15px 40px;border-radius:0;font-weight:900;letter-spacing:2px;cursor:pointer;text-transform:uppercase;transition:all .3s ease;font-family:Street,Pricedown,sans-serif;transform:skew(-5deg);box-shadow:6px 6px #000}.btn-modern[_ngcontent-%COMP%]:hover{background:#ff9900;transform:skew(-5deg) translate(-4px,-4px);box-shadow:10px 10px #000}@media (max-width: 1024px){.grid-large[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fill,minmax(320px,1fr))}.shop-title[_ngcontent-%COMP%]{font-size:42px}.modern-title[_ngcontent-%COMP%]{font-size:36px}}@media (max-width: 768px){.products-header-modern[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:20px}.modern-header-right[_ngcontent-%COMP%]{width:100%;justify-content:space-between}.grid-small[_ngcontent-%COMP%], .grid-medium[_ngcontent-%COMP%], .grid-large[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}.modern-product-image[_ngcontent-%COMP%]{height:220px}.shop-title[_ngcontent-%COMP%]{font-size:36px}.modern-title[_ngcontent-%COMP%]{font-size:28px}.modern-subtitle[_ngcontent-%COMP%]{font-size:14px}}@media (max-width: 480px){.grid-small[_ngcontent-%COMP%], .grid-medium[_ngcontent-%COMP%], .grid-large[_ngcontent-%COMP%]{grid-template-columns:1fr}.modern-view-controls[_ngcontent-%COMP%]{display:none}.shop-title[_ngcontent-%COMP%]{font-size:28px;letter-spacing:2px}.modern-title[_ngcontent-%COMP%]{font-size:24px}.filters[_ngcontent-%COMP%]{margin:20px 10px;padding:15px}.category-filters[_ngcontent-%COMP%]{justify-content:center}.category-filter-btn[_ngcontent-%COMP%]{flex:1;min-width:120px;justify-content:center;padding:10px;font-size:12px}.search-bar[_ngcontent-%COMP%]{flex-direction:column;border-radius:0;transform:none}.search-bar[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{display:none}.search-input[_ngcontent-%COMP%]{padding:15px;text-align:center;transform:none}.search-btn[_ngcontent-%COMP%]{padding:15px;transform:none;width:100%}.modern-product[_ngcontent-%COMP%]{transform:skew(-1deg)}.modern-product[_ngcontent-%COMP%]:hover{transform:skew(-1deg) scale(1.02)}}@keyframes _ngcontent-%COMP%_street-pulse{0%,to{box-shadow:12px 12px #000}50%{box-shadow:12px 12px #000,0 0 20px #39ff1480}}.modern-product.featured[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_street-pulse 2s infinite;border-color:#f90}.modern-product[_ngcontent-%COMP%]:nth-child(3n):before{content:"FRESH";position:absolute;bottom:10px;right:10px;font-family:Street,Pricedown,sans-serif;color:#ff99004d;font-size:24px;transform:rotate(-15deg) skew(-10deg);z-index:1}.modern-product[_ngcontent-%COMP%]:nth-child(3n+1):before{content:"HOT";position:absolute;bottom:10px;right:10px;font-family:Street,Pricedown,sans-serif;color:#ff33334d;font-size:24px;transform:rotate(10deg) skew(-10deg);z-index:1}']})}}return n})();function KK(n,e){1&n&&(M(0,"div",34),U(1,"i",35),M(2,"span"),P(3,"3D VIEW"),b()())}function JK(n,e){if(1&n){const t=jt();M(0,"div",36)(1,"div",37),U(2,"app-model-viewer",38),M(3,"div",39)(4,"button",40),ge("click",function(){return Ue(t),Be(Z(2).toggleBackground())}),U(5,"i",41),M(6,"span"),P(7),b()()()()()}if(2&n){const t=Z(2);I(2),q("modelPath",t.product.images[0])("autoRotate",t.isRotating)("autoScale",!0)("targetSize",12)("addStreetBackground",t.addStreetBackground),I(2),mt("active",t.addStreetBackground),I(1),mt("fa-city",t.addStreetBackground)("fa-mountain",!t.addStreetBackground),I(2),ot(t.addStreetBackground?"STREET VIEW":"STUDIO VIEW")}}function QK(n,e){if(1&n&&(M(0,"div",42)(1,"div",43),U(2,"div",44)(3,"div",45)(4,"div",46),b(),U(5,"img",47),b()),2&n){const t=Z(2);I(5),q("src",t.getCurrentImage(),Gr)("alt",t.product.name)}}function eJ(n,e){if(1&n){const t=jt();M(0,"div",48)(1,"button",49),ge("click",function(){return Ue(t),Be(Z(2).show3DView=!0)}),U(2,"i",35),M(3,"span"),P(4,"3D VIEW"),b()(),M(5,"button",49),ge("click",function(){return Ue(t),Be(Z(2).show3DView=!1)}),U(6,"i",50),M(7,"span"),P(8,"IMAGE"),b()()()}if(2&n){const t=Z(2);I(1),mt("active",t.show3DView),I(4),mt("active",!t.show3DView)}}function tJ(n,e){if(1&n){const t=jt();M(0,"div",53),ge("click",function(){const o=Ue(t).index;return Be(Z(3).selectImage(o))}),U(1,"img",54),b()}if(2&n){const t=e.$implicit,i=e.index,r=Z(3);mt("active",r.selectedImageIndex===i),I(1),q("src",t,Gr)("alt",r.product.name+" thumbnail "+(i+1))}}function nJ(n,e){if(1&n&&(M(0,"div",51),se(1,tJ,2,4,"div",52),b()),2&n){const t=Z(2);I(1),q("ngForOf",t.getImageThumbnails())}}function iJ(n,e){if(1&n&&(M(0,"span",55),P(1),b()),2&n){const t=Z(2);I(1),Ve("$",t.product.originalPrice,"")}}function rJ(n,e){1&n&&U(0,"i",56),2&n&&Xr("opacity",e.$implicit<=Z(2).product.rating?1:.3)}function oJ(n,e){1&n&&(M(0,"div",58)(1,"span",59),P(2,"VIEW:"),b(),M(3,"span",60),P(4,"3D Model Available"),b()())}function sJ(n,e){if(1&n&&(M(0,"div",58)(1,"span",59),P(2,"BACKGROUND:"),b(),M(3,"span",60),P(4),b()()),2&n){const t=Z(3);I(4),ot(t.addStreetBackground?"Street View":"Studio View")}}function aJ(n,e){if(1&n&&(M(0,"div",57)(1,"div",58)(2,"span",59),P(3,"MATERIAL:"),b(),M(4,"span",60),P(5),b()(),se(6,oJ,5,0,"div",61),se(7,sJ,5,1,"div",61),b()),2&n){const t=Z(2);I(5),ot(t.product.material),I(1),q("ngIf",t.has3DModel),I(1),q("ngIf",t.has3DModel)}}function cJ(n,e){if(1&n){const t=jt();M(0,"div",65),ge("click",function(){const o=Ue(t).$implicit;return Be(Z(3).selectSize(o))}),P(1),b()}if(2&n){const t=e.$implicit;mt("selected",Z(3).selectedSize===t),I(1),Ve(" ",t," ")}}function lJ(n,e){if(1&n&&(M(0,"div",62)(1,"h3"),P(2,"SELECT SIZE"),b(),M(3,"div",63),se(4,cJ,2,3,"div",64),b()()),2&n){const t=Z(2);I(4),q("ngForOf",t.product.sizes)}}function uJ(n,e){if(1&n){const t=jt();M(0,"div",65),ge("click",function(){const o=Ue(t).$implicit;return Be(Z(3).selectColor(o))}),P(1),b()}if(2&n){const t=e.$implicit;mt("selected",Z(3).selectedColor===t),I(1),Ve(" ",t," ")}}function dJ(n,e){if(1&n&&(M(0,"div",62)(1,"h3"),P(2,"SELECT COLOR"),b(),M(3,"div",63),se(4,uJ,2,3,"div",64),b()()),2&n){const t=Z(2);I(4),q("ngForOf",t.product.colors)}}function fJ(n,e){if(1&n){const t=jt();M(0,"div",62)(1,"h3"),P(2,"3D BACKGROUND"),b(),M(3,"div",63)(4,"div",65),ge("click",function(){return Ue(t),Be(Z(2).addStreetBackground=!0)}),P(5," STREET "),b(),M(6,"div",65),ge("click",function(){return Ue(t),Be(Z(2).addStreetBackground=!1)}),P(7," STUDIO "),b()()()}if(2&n){const t=Z(2);I(4),mt("selected",t.addStreetBackground),I(2),mt("selected",!t.addStreetBackground)}}function hJ(n,e){1&n&&(M(0,"p",71),U(1,"i",72),P(2," Viewing in Street Mode with graffiti background "),b())}function pJ(n,e){if(1&n&&(M(0,"div",66)(1,"div",67),U(2,"i",68),b(),M(3,"div",69)(4,"h4"),P(5,"3D INTERACTIVE VIEW"),b(),M(6,"p"),P(7,"Rotate, zoom, and change colors of this product in 3D. Click and drag to explore."),b(),se(8,hJ,3,0,"p",70),b()()),2&n){const t=Z(2);I(8),q("ngIf",t.addStreetBackground)}}const gJ=function(){return[1,2,3,4,5]};function mJ(n,e){if(1&n){const t=jt();M(0,"div",3)(1,"div",4)(2,"div",5),ge("click",function(){return Ue(t),Be(Z().goBack())}),U(3,"i",6),P(4," BACK "),b(),se(5,KK,4,0,"div",7),b(),M(6,"div",8)(7,"div",9),se(8,JK,8,12,"div",10),se(9,QK,6,2,"div",11),M(10,"div",12),se(11,eJ,9,4,"div",13),se(12,nJ,2,1,"div",14),b()(),M(13,"div",15)(14,"span",16),P(15),b(),M(16,"h1",17),P(17),b(),M(18,"div",18)(19,"div",19)(20,"span",20),P(21,"$"),b(),P(22),se(23,iJ,2,1,"span",21),b(),M(24,"div",22),se(25,rJ,1,2,"i",23),M(26,"span"),P(27),b()()(),M(28,"p",24),P(29),b(),se(30,aJ,8,3,"div",25),M(31,"div",26),se(32,lJ,5,1,"div",27),se(33,dJ,5,1,"div",27),se(34,fJ,8,4,"div",27),b(),M(35,"div",28)(36,"button",29),ge("click",function(r){Ue(t);const o=Z();return r.stopPropagation(),Be(o.addToCart(o.product))}),U(37,"i",30),P(38),b(),M(39,"button",31),ge("click",function(){return Ue(t),Be(Z().tryOn())}),U(40,"i",32),P(41," TRY ON "),b()(),se(42,pJ,9,1,"div",33),b()()()}if(2&n){const t=Z();I(5),q("ngIf",t.has3DModel),I(3),q("ngIf",t.has3DModel&&t.show3DView),I(1),q("ngIf",!t.has3DModel||!t.show3DView),I(2),q("ngIf",t.has3DModel),I(1),q("ngIf",!t.show3DView&&t.product.images.length>1),I(3),ph("",t.product.brand," // ",t.product.category,""),I(2),ot(t.product.name),I(5),Ve("",t.product.price," "),I(1),q("ngIf",t.product.originalPrice),I(2),q("ngForOf",Ou(20,gJ)),I(2),Ve("(",t.product.reviewCount," REVIEWS)"),I(2),ot(t.product.description),I(1),q("ngIf",t.product.material),I(2),q("ngIf",null==t.product.sizes?null:t.product.sizes.length),I(1),q("ngIf",null==t.product.colors?null:t.product.colors.length),I(1),q("ngIf",t.has3DModel),I(2),q("disabled",!t.product.inStock),I(2),Ve(" ",t.product.inStock?"ADD TO CART":"OUT OF STOCK"," "),I(4),q("ngIf",t.has3DModel)}}function _J(n,e){1&n&&(M(0,"div",73),U(1,"div",74),M(2,"p"),P(3,"LOADING PRODUCT DATA..."),b()())}let vJ=(()=>{class n{constructor(t,i,r){this.route=t,this.router=i,this.cartService=r,this.selectedSize="",this.selectedColor="",this.selectedImageIndex=0,this.isRotating=!0,this.has3DModel=!1,this.show3DView=!0,this.addStreetBackground=!0}ngOnInit(){const t=this.route.snapshot.paramMap.get("id");t&&(this.product=cp.find(i=>i.id===t),this.checkFor3DModel()),this.product&&(this.product.sizes?.length>0&&(this.selectedSize=this.product.sizes[0]),this.product.colors?.length>0&&(this.selectedColor=this.product.colors[0])),console.log("\u{1f3af} Produit charg\xe9:",this.product?.name),console.log("\u{1f3d9}\ufe0f addStreetBackground initial:",this.addStreetBackground)}checkFor3DModel(){if(!this.product||!this.product.images||0===this.product.images.length)return this.has3DModel=!1,void(this.show3DView=!1);const t=this.product.images[0];this.has3DModel=t?.endsWith(".obj")||t?.endsWith(".glb")||t?.endsWith(".gltf")||this.product.has3DModel||!1,console.log("\u{1f50d} V\xe9rification mod\xe8le 3D:",{firstImage:t,has3DModel:this.has3DModel,productHas3DModel:this.product.has3DModel}),this.show3DView=this.has3DModel}toggleRotation(){this.isRotating=!this.isRotating,console.log("\u{1f504} Rotation:",this.isRotating?"ON":"OFF")}toggleBackground(){this.addStreetBackground=!this.addStreetBackground,console.log("\u{1f3d9}\ufe0f Fond chang\xe9:",this.addStreetBackground?"STREET":"STUDIO")}changeModelColor(){if(this.modelViewer){console.log("\u{1f3a8} Changement de couleur");const t=[16711680,65280,255,16776960,16711935,65535],i=t[Math.floor(Math.random()*t.length)];this.modelViewer.changeColor(i)}else console.log("\u274c modelViewer non disponible")}resetModel(){this.isRotating=!0,console.log("\u{1f504} R\xe9initialisation mod\xe8le")}getCurrentImage(){if(!this.product?.images||0===this.product.images.length)return"assets/images/placeholder.jpg";if(this.show3DView&&this.has3DModel)return console.log("\u{1f4f7} Image 3D s\xe9lectionn\xe9e:",this.product.images[0]),this.product.images[0];const t=this.getImageThumbnails();return t[this.selectedImageIndex]||t[0]||"assets/images/placeholder.jpg"}getImageThumbnails(){if(!this.product?.images)return[];console.log("\u{1f4f8} Images disponibles:",this.product.images);const t=this.product.images.filter(i=>!(i.endsWith(".obj")||i.endsWith(".fbx")||i.endsWith(".glb")||i.endsWith(".gltf")));return console.log("\u{1f5bc}\ufe0f Miniatures filtr\xe9es:",t),t}selectImage(t){this.selectedImageIndex=t,console.log("\u{1f5bc}\ufe0f Image s\xe9lectionn\xe9e:",t)}selectSize(t){this.selectedSize=t,console.log("\u{1f4cf} Taille s\xe9lectionn\xe9e:",t)}selectColor(t){this.selectedColor=t,console.log("\u{1f3a8} Couleur s\xe9lectionn\xe9e:",t)}tryOn(){this.product&&(console.log("\u{1f4f7} Essayage virtuel:",this.product.name),this.router.navigate(["/try-on"],{queryParams:{productId:this.product.id,modelUrl:this.has3DModel?this.product.images[0]:null,backgroundMode:this.addStreetBackground?"street":"studio"}}))}goBack(){console.log("\u2b05\ufe0f Retour"),this.router.navigate(["/shop"])}addToCart(t){console.log("\u{1f6d2} Ajout au panier:",t.name),this.cartService.addToCart(t)}static{this.\u0275fac=function(i){return new(i||n)(ee(as),ee(Hn),ee(sd))}}static{this.\u0275cmp=Ui({type:n,selectors:[["app-product-details"]],viewQuery:function(i,r){if(1&i&&bh(Pg,5),2&i){let o;Nu(o=Lu())&&(r.modelViewer=o.first)}},decls:5,vars:2,consts:[[1,"product-details-page"],["class","product-page-container",4,"ngIf","ngIfElse"],["loading",""],[1,"product-page-container"],[1,"details-header"],[1,"back-button",3,"click"],[1,"fas","fa-arrow-left"],["class","model-indicator",4,"ngIf"],[1,"product-content"],[1,"product-gallery"],["class","model-container",4,"ngIf"],["class","main-image-container",4,"ngIf"],[1,"gallery-controls"],["class","view-toggle",4,"ngIf"],["class","thumbnail-gallery",4,"ngIf"],[1,"product-info-panel"],[1,"product-brand"],[1,"product-title"],[1,"product-meta"],[1,"price-tag"],[1,"currency"],["class","original-price",4,"ngIf"],[1,"rating"],["class","fas fa-star",3,"opacity",4,"ngFor","ngForOf"],[1,"product-description"],["class","product-specs",4,"ngIf"],[1,"options-container"],["class","option-group",4,"ngIf"],[1,"action-buttons"],[1,"gta-btn","primary-btn",3,"disabled","click"],[1,"fas","fa-shopping-cart"],[1,"gta-btn","secondary-btn",3,"click"],[1,"fas","fa-camera"],["class","model-info",4,"ngIf"],[1,"model-indicator"],[1,"fas","fa-cube"],[1,"model-container"],[1,"model-viewer-wrapper"],[3,"modelPath","autoRotate","autoScale","targetSize","addStreetBackground"],[1,"background-toggle"],[1,"bg-toggle-btn",3,"click"],[1,"fas"],[1,"main-image-container"],[1,"gta-bg-elements"],[1,"bg-panel","panel-1"],[1,"bg-panel","panel-2"],[1,"bg-panel","panel-3"],[1,"main-image",3,"src","alt"],[1,"view-toggle"],[1,"view-btn",3,"click"],[1,"fas","fa-image"],[1,"thumbnail-gallery"],["class","thumbnail",3,"active","click",4,"ngFor","ngForOf"],[1,"thumbnail",3,"click"],[3,"src","alt"],[1,"original-price"],[1,"fas","fa-star"],[1,"product-specs"],[1,"spec-item"],[1,"spec-label"],[1,"spec-value"],["class","spec-item",4,"ngIf"],[1,"option-group"],[1,"option-chips"],["class","chip",3,"selected","click",4,"ngFor","ngForOf"],[1,"chip",3,"click"],[1,"model-info"],[1,"info-icon"],[1,"fas","fa-info-circle"],[1,"info-text"],["class","bg-info",4,"ngIf"],[1,"bg-info"],[1,"fas","fa-map-marker-alt"],[1,"loading-state"],[1,"spinner"]],template:function(i,r){if(1&i&&(M(0,"div",0),se(1,mJ,43,21,"div",1),se(2,_J,4,0,"ng-template",null,2,js),b(),U(4,"app-bottom-nav")),2&i){const o=Bs(3);I(1),q("ngIf",r.product)("ngIfElse",o)}},dependencies:[is,Kr,Vc,Pg],styles:['@import"https://fonts.googleapis.com/css2?family=Oswald:wght@300;400;500;700&display=swap";[_nghost-%COMP%]{display:block;min-height:100vh;font-family:Oswald,sans-serif}.product-details-page[_ngcontent-%COMP%]{background:#0b0f0c;min-height:100vh;position:relative;overflow-x:hidden;padding-top:80px}.product-details-page[_ngcontent-%COMP%]:before{content:"";position:fixed;inset:0;background-image:radial-gradient(circle at 20% 30%,rgba(57,255,20,.05) 0%,transparent 50%),radial-gradient(circle at 80% 70%,rgba(255,153,0,.05) 0%,transparent 50%),linear-gradient(45deg,#0b0f0c 25%,#0f1f14 25%,#0f1f14 50%,#0b0f0c 50%,#0b0f0c 75%,#0f1f14 75%,#0f1f14);background-size:5px 5px,5px 5px,10px 10px;z-index:0;opacity:.3}.product-page-container[_ngcontent-%COMP%]{max-width:950px;margin:0 auto;padding:30px 20px;position:relative;z-index:1}.details-header[_ngcontent-%COMP%]{border-bottom:4px solid #39ff14;padding-bottom:20px;margin-bottom:40px;display:flex;justify-content:space-between;align-items:center}.model-indicator[_ngcontent-%COMP%]{background:rgba(57,255,20,.1);border:2px solid #39ff14;padding:8px 16px;color:#39ff14;font-family:Oswald,sans-serif;font-weight:700;text-transform:uppercase;letter-spacing:1px;display:flex;align-items:center;gap:8px;font-size:14px}.model-indicator[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:16px;animation:_ngcontent-%COMP%_pulse 2s infinite}@keyframes _ngcontent-%COMP%_pulse{0%,to{opacity:1}50%{opacity:.5}}.back-button[_ngcontent-%COMP%]{cursor:pointer;background:#000;border:2px solid #39ff14;padding:10px 20px;color:#39ff14;font-family:Street,Pricedown,sans-serif;letter-spacing:2px;text-transform:uppercase;transform:skew(-5deg);display:inline-flex;align-items:center;gap:10px;font-size:18px;transition:all .3s ease}.back-button[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{transform:skew(5deg)}.back-button[_ngcontent-%COMP%]:hover{background:#39ff14;color:#000;box-shadow:0 0 15px #39ff1466}.product-content[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:40px;align-items:start}.product-gallery[_ngcontent-%COMP%]{position:relative}.main-image-container[_ngcontent-%COMP%]{width:100%;aspect-ratio:1;background:transparent;position:relative;display:flex;align-items:center;justify-content:center;transform:skew(-2deg);transition:transform .3s ease;margin-bottom:20px}.main-image-container[_ngcontent-%COMP%]:hover{transform:skew(-2deg) scale(1.02)}.gta-bg-elements[_ngcontent-%COMP%]{position:absolute;inset:0;width:100%;height:100%;z-index:1;display:flex;justify-content:center;align-items:center;gap:10px}.bg-panel[_ngcontent-%COMP%]{background:linear-gradient(to bottom,rgba(0,0,0,.2),rgba(0,0,0,.8)),url(bg1.54feb52e8cf9f583.jpg);background-size:cover;background-position:center;border:2px solid #000}.panel-1[_ngcontent-%COMP%]{flex:.8;height:85%;transform:rotate(-5deg) translateY(20px);transition:transform .3s ease;will-change:transform;animation:_ngcontent-%COMP%_float-1 3s ease-in-out infinite alternate}.panel-2[_ngcontent-%COMP%]{flex:1;height:100%;transform:rotate(0) scale(1.1);transition:transform .3s ease;will-change:transform;animation:_ngcontent-%COMP%_float-2 4s ease-in-out infinite alternate}.panel-3[_ngcontent-%COMP%]{flex:.6;height:75%;transform:rotate(5deg) translateY(20px);transition:transform .3s ease;will-change:transform;animation:_ngcontent-%COMP%_float-3 3.5s ease-in-out infinite alternate}@keyframes _ngcontent-%COMP%_float-1{0%{transform:rotate(-5deg) translateY(20px) translate(0)}to{transform:rotate(-5deg) translateY(20px) translate(5px,-10px)}}@keyframes _ngcontent-%COMP%_float-2{0%{transform:rotate(0) scale(1.1) translate(0)}to{transform:rotate(0) scale(1.1) translate(-5px,5px)}}@keyframes _ngcontent-%COMP%_float-3{0%{transform:rotate(5deg) translateY(20px) translate(0)}to{transform:rotate(5deg) translateY(20px) translate(8px,8px)}}.model-viewer-wrapper[_ngcontent-%COMP%]{width:100%;height:100%;position:relative;z-index:10;transform:skew(2deg)}.model-viewer-wrapper[_ngcontent-%COMP%]   app-model-viewer[_ngcontent-%COMP%]{width:100%;height:100%;display:block;background:transparent!important}.model-viewer-wrapper[_ngcontent-%COMP%]   .model-controls[_ngcontent-%COMP%]{position:absolute;bottom:20px;left:50%;transform:translate(-50%);display:flex;gap:10px;z-index:20}.model-viewer-wrapper[_ngcontent-%COMP%]   .model-controls[_ngcontent-%COMP%]   .model-btn[_ngcontent-%COMP%]{background:rgba(0,0,0,.8);color:#39ff14;border:2px solid #39ff14;padding:10px 20px;cursor:pointer;font-family:Oswald,sans-serif;font-weight:700;font-size:14px;text-transform:uppercase;letter-spacing:1px;transition:all .3s ease;display:flex;align-items:center;gap:8px;box-shadow:3px 3px #000}.model-viewer-wrapper[_ngcontent-%COMP%]   .model-controls[_ngcontent-%COMP%]   .model-btn[_ngcontent-%COMP%]:hover{background:#39ff14;color:#000;transform:translate(-2px,-2px);box-shadow:5px 5px #000}.model-viewer-wrapper[_ngcontent-%COMP%]   .model-controls[_ngcontent-%COMP%]   .model-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:12px}.main-image[_ngcontent-%COMP%]{max-width:90%;max-height:90%;object-fit:contain;z-index:10;filter:drop-shadow(10px 10px 5px rgba(0,0,0,.5));transform:skew(2deg)}.gallery-controls[_ngcontent-%COMP%]{margin-top:20px}.view-toggle[_ngcontent-%COMP%]{display:flex;gap:10px;margin-bottom:20px}.view-toggle[_ngcontent-%COMP%]   .view-btn[_ngcontent-%COMP%]{flex:1;background:rgba(255,255,255,.1);border:2px solid #333;color:#888;padding:12px;cursor:pointer;font-family:Oswald,sans-serif;font-weight:700;text-transform:uppercase;letter-spacing:1px;display:flex;align-items:center;justify-content:center;gap:8px;transition:all .3s ease}.view-toggle[_ngcontent-%COMP%]   .view-btn.active[_ngcontent-%COMP%]{background:rgba(57,255,20,.2);border-color:#39ff14;color:#39ff14}.view-toggle[_ngcontent-%COMP%]   .view-btn[_ngcontent-%COMP%]:hover{border-color:#fff;color:#fff}.view-toggle[_ngcontent-%COMP%]   .view-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:16px}.view-toggle[_ngcontent-%COMP%]   .view-btn[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:14px}.thumbnail-gallery[_ngcontent-%COMP%]{display:flex;gap:15px;overflow-x:auto;padding:10px;background:rgba(0,0,0,.5);border-radius:8px;border:1px solid #333}.thumbnail-gallery[_ngcontent-%COMP%]   .thumbnail[_ngcontent-%COMP%]{flex:0 0 auto;width:80px;height:80px;border:2px solid #333;border-radius:6px;overflow:hidden;cursor:pointer;transition:all .3s ease}.thumbnail-gallery[_ngcontent-%COMP%]   .thumbnail.active[_ngcontent-%COMP%]{border-color:#39ff14;transform:scale(1.1)}.thumbnail-gallery[_ngcontent-%COMP%]   .thumbnail[_ngcontent-%COMP%]:hover{border-color:#fff}.thumbnail-gallery[_ngcontent-%COMP%]   .thumbnail[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.product-info-panel[_ngcontent-%COMP%]{background:#000;border:3px solid #39ff14;padding:40px;box-shadow:10px 10px #000c;position:relative;transform:skew(-2deg)}.product-info-panel[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{transform:skew(2deg)}.product-brand[_ngcontent-%COMP%]{font-size:1.2rem;color:#888;text-transform:uppercase;letter-spacing:2px;margin-bottom:.5rem;display:block;font-weight:600}.product-title[_ngcontent-%COMP%]{font-family:Street,Pricedown,sans-serif;font-size:2.5rem;line-height:1;color:#39ff14;text-transform:uppercase;letter-spacing:2px;margin:0 0 15px;text-shadow:2px 2px 0 #000}.product-meta[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-end;border-bottom:2px dashed #333;padding-bottom:20px;margin-bottom:30px}.price-tag[_ngcontent-%COMP%]{font-family:Street,Pricedown,sans-serif;font-size:2.2rem;color:#fff;line-height:1}.currency[_ngcontent-%COMP%]{color:#39ff14;margin-right:5px}.original-price[_ngcontent-%COMP%]{font-family:Oswald,sans-serif;font-size:1.5rem;color:#666;text-decoration:line-through;margin-left:1rem}.rating[_ngcontent-%COMP%]{font-size:1.2rem;color:#f90;display:flex;align-items:center;gap:5px}.rating[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#888;font-size:.9rem;margin-left:5px}.product-description[_ngcontent-%COMP%]{font-size:1.1rem;line-height:1.6;color:#ccc;margin-bottom:30px;border-left:3px solid #333;padding-left:15px}.product-specs[_ngcontent-%COMP%]{margin:25px 0;padding:15px;background:rgba(255,255,255,.05);border-radius:8px;border:1px solid #333}.product-specs[_ngcontent-%COMP%]   .spec-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-bottom:10px}.product-specs[_ngcontent-%COMP%]   .spec-item[_ngcontent-%COMP%]:last-child{margin-bottom:0}.product-specs[_ngcontent-%COMP%]   .spec-item[_ngcontent-%COMP%]   .spec-label[_ngcontent-%COMP%]{color:#888;font-weight:700;text-transform:uppercase;letter-spacing:1px;font-size:14px}.product-specs[_ngcontent-%COMP%]   .spec-item[_ngcontent-%COMP%]   .spec-value[_ngcontent-%COMP%]{color:#39ff14;font-weight:700}.model-info[_ngcontent-%COMP%]{display:flex;gap:15px;background:rgba(57,255,20,.1);border:1px solid #39ff14;border-radius:8px;padding:15px;margin-top:25px}.model-info[_ngcontent-%COMP%]   .info-icon[_ngcontent-%COMP%]{color:#39ff14;font-size:24px}.model-info[_ngcontent-%COMP%]   .info-text[_ngcontent-%COMP%]{flex:1}.model-info[_ngcontent-%COMP%]   .info-text[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:#39ff14;margin:0 0 5px;font-size:16px;text-transform:uppercase;letter-spacing:1px}.model-info[_ngcontent-%COMP%]   .info-text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#aaa;margin:0;font-size:14px;line-height:1.4}.option-group[_ngcontent-%COMP%]{margin-bottom:25px}.option-group[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#39ff14;font-size:1.1rem;margin-bottom:15px;text-transform:uppercase;letter-spacing:2px;font-weight:700}.option-chips[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:15px}.chip[_ngcontent-%COMP%]{padding:10px 20px;background:#111;border:2px solid #333;color:#ccc;cursor:pointer;text-transform:uppercase;font-weight:700;transition:all .2s ease;min-width:50px;text-align:center;position:relative}.chip[_ngcontent-%COMP%]:hover{border-color:#39ff14;color:#39ff14;transform:translateY(-2px)}.chip.selected[_ngcontent-%COMP%]{background:#39ff14;color:#000;border-color:#39ff14;box-shadow:0 0 10px #39ff1466}.action-buttons[_ngcontent-%COMP%]{display:grid;grid-template-columns:2fr 1fr;gap:20px;margin-top:40px}.gta-btn[_ngcontent-%COMP%]{padding:15px;border:none;font-family:Street,Pricedown,sans-serif;font-size:1.5rem;cursor:pointer;text-transform:uppercase;display:flex;align-items:center;justify-content:center;gap:15px;transition:all .3s ease;letter-spacing:2px;position:relative;overflow:hidden}.primary-btn[_ngcontent-%COMP%]{background:#39ff14;color:#000;box-shadow:5px 5px #000}.primary-btn[_ngcontent-%COMP%]:hover:not(:disabled){background:#ff9900;transform:translate(-2px,-2px);box-shadow:7px 7px #000}.primary-btn[_ngcontent-%COMP%]:disabled{background:#666;color:#999;cursor:not-allowed;box-shadow:5px 5px #333}.secondary-btn[_ngcontent-%COMP%]{background:transparent;border:2px solid #fff;color:#fff;box-shadow:5px 5px #ffffff1a}.secondary-btn[_ngcontent-%COMP%]:hover{background:#fff;color:#000}.loading-state[_ngcontent-%COMP%]{height:80vh;display:flex;flex-direction:column;align-items:center;justify-content:center;color:#39ff14;font-family:Street,Pricedown,sans-serif;font-size:2rem}.spinner[_ngcontent-%COMP%]{width:60px;height:60px;border:5px solid rgba(57,255,20,.3);border-top-color:#39ff14;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite;margin-bottom:20px}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}@media (max-width: 900px){.product-content[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:40px}.main-image-container[_ngcontent-%COMP%]{aspect-ratio:4/3}.action-buttons[_ngcontent-%COMP%]{grid-template-columns:1fr}.model-controls[_ngcontent-%COMP%]{flex-wrap:wrap;justify-content:center}.model-controls[_ngcontent-%COMP%]   .model-btn[_ngcontent-%COMP%]{flex:1;min-width:100px}}']})}}return n})(),yJ=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=Ui({type:n,selectors:[["app-try-on"]],decls:3,vars:0,template:function(i,r){1&i&&(M(0,"p"),P(1,"try-on works!"),b(),U(2,"app-bottom-nav"))},dependencies:[Vc]})}}return n})();const $d={_origin:"https://api.emailjs.com"};class K2{constructor(e){this.status=e.status,this.text=e.responseText}}const Q2_send=(n,e,t,i)=>{const r=i||$d._userID;return((n,e,t)=>{if(!n)throw"The user ID is required. Visit https://dashboard.emailjs.com/admin/integration";if(!e)throw"The service ID is required. Visit https://dashboard.emailjs.com/admin";if(!t)throw"The template ID is required. Visit https://dashboard.emailjs.com/admin/templates"})(r,n,e),((n,e,t={})=>new Promise((i,r)=>{const o=new XMLHttpRequest;o.addEventListener("load",({target:s})=>{const a=new K2(s);200===a.status||"OK"===a.text?i(a):r(a)}),o.addEventListener("error",({target:s})=>{r(new K2(s))}),o.open("POST",$d._origin+n,!0),Object.keys(t).forEach(s=>{o.setRequestHeader(s,t[s])}),o.send(e)}))("/api/v1.0/email/send",JSON.stringify({lib_version:"3.2.0",user_id:r,service_id:n,template_id:e,template_params:t}),{"Content-type":"application/json"})};function CJ(n,e){if(1&n&&(M(0,"span",12),P(1),b()),2&n){const t=Z();I(1),Ve(" ",t.getTotalItems()," ITEMS ")}}function wJ(n,e){if(1&n&&(M(0,"div",36)(1,"div",37),U(2,"i",26),M(3,"span"),P(4),b()(),M(5,"div",38),U(6,"div",39),b()()),2&n){const t=Z(2);I(4),Ve("Spend ",t.formatCurrency(t.getRemainingForFreeShipping())," more for FREE shipping!"),I(2),Xr("width",t.subtotal/t.SHIPPING_THRESHOLD*100+"%")}}function SJ(n,e){if(1&n&&U(0,"img",78),2&n){const t=Z().$implicit;q("src",t.product.images[0],Gr)("alt",t.product.name)}}function EJ(n,e){1&n&&(M(0,"div",79),U(1,"i",80),M(2,"span"),P(3,"NO IMAGE"),b()())}function PJ(n,e){if(1&n&&(M(0,"div",81),P(1),b()),2&n){const t=Z().$implicit,i=Z(2);I(1),Ve(" -",i.getItemDiscountPercentage(t.product.id),"% ")}}function TJ(n,e){1&n&&(M(0,"div",82),P(1," NEW "),b())}function AJ(n,e){if(1&n&&(M(0,"div",83),P(1),b()),2&n){const t=Z().$implicit;I(1),Ve(" x",t.quantity," ")}}function OJ(n,e){if(1&n&&(M(0,"span",84),P(1),b()),2&n){const t=Z().$implicit,i=Z(2);let r;I(1),Ve(" $",null==(r=i.getProductById(t.product.id))?null:r.originalPrice," ")}}function DJ(n,e){if(1&n&&(M(0,"div",85),U(1,"i",86),P(2),b()),2&n){const t=Z().$implicit,i=Z(2);I(2),Ve(" Save $",i.getItemSavings(t)," ")}}function IJ(n,e){if(1&n&&(M(0,"div",89)(1,"span",90),P(2,"Size:"),b(),M(3,"span",91),P(4),b()()),2&n){const t=Z().ngIf;I(4),ot(t.sizes[0])}}function RJ(n,e){if(1&n&&(M(0,"div",89)(1,"span",90),P(2,"Color:"),b(),M(3,"span",91),P(4),b()()),2&n){const t=Z().ngIf;I(4),ot(t.colors[0])}}function NJ(n,e){if(1&n&&(M(0,"div",87),se(1,IJ,5,1,"div",88),se(2,RJ,5,1,"div",88),b()),2&n){const t=e.ngIf;I(1),q("ngIf",null==t.sizes?null:t.sizes.length),I(1),q("ngIf",null==t.colors?null:t.colors.length)}}function LJ(n,e){if(1&n){const t=jt();M(0,"div",40)(1,"div",41)(2,"div",42),U(3,"div",43)(4,"div",44)(5,"div",45),b(),M(6,"div",46),se(7,SJ,1,2,"img",47),se(8,EJ,4,0,"ng-template",null,48,js),b(),M(10,"div",49),se(11,PJ,2,1,"div",50),se(12,TJ,2,0,"div",51),se(13,AJ,2,1,"div",52),b(),M(14,"div",53)(15,"button",54),ge("click",function(){const o=Ue(t).$implicit;return Be(Z(2).removeFromCart(o.product.id))}),U(16,"i",55),b(),M(17,"button",56),ge("click",function(){const o=Ue(t).$implicit;return Be(Z(2).updateQuantity(o.product.id,o.quantity+1))}),U(18,"i",57),b()()(),M(19,"div",58)(20,"div",59)(21,"div",60),P(22),b(),M(23,"h3",61),P(24),b(),M(25,"div",62),P(26),b(),M(27,"div",63)(28,"div",64)(29,"span",65),P(30),b(),se(31,OJ,2,1,"span",66),b(),se(32,DJ,3,1,"div",67),M(33,"div",68),P(34),b()(),se(35,NJ,3,2,"div",69),M(36,"div",70)(37,"label",71),P(38,"QUANTITY:"),b(),M(39,"div",72)(40,"button",73),ge("click",function(){const o=Ue(t).$implicit;return Be(Z(2).updateQuantity(o.product.id,o.quantity-1))}),U(41,"i",74),b(),M(42,"input",75),ge("change",function(r){const s=Ue(t).$implicit;return Be(Z(2).updateQuantity(s.product.id,r.target.value))})("keyup.enter",function(r){return Ue(t),Be(Z(2).onInputEnter(r))})("blur",function(r){const s=Ue(t).$implicit;return Be(Z(2).updateQuantity(s.product.id,r.target.value))}),b(),M(43,"button",76),ge("click",function(){const o=Ue(t).$implicit;return Be(Z(2).updateQuantity(o.product.id,o.quantity+1))}),U(44,"i",57),b()()()(),M(45,"div",77)(46,"span",30),P(47,"ITEM TOTAL:"),b(),M(48,"span",31),P(49),b()()()()}if(2&n){const t=e.$implicit,i=Bs(9),r=Z(2);let o,s;I(7),q("ngIf",t.product.images&&t.product.images.length>0)("ngIfElse",i),I(4),q("ngIf",r.isItemOnSale(t.product.id)),I(1),q("ngIf",null==(o=r.getProductById(t.product.id))?null:o.isFeatured),I(1),q("ngIf",t.quantity>1),I(9),ot(t.product.brand||"FREPPING"),I(2),ot(t.product.name),I(2),ot(t.product.category||"TOPS"),I(4),Ve("$",t.product.price,""),I(1),q("ngIf",r.isItemOnSale(t.product.id)),I(1),q("ngIf",r.getItemSavings(t)>0),I(2),ot((null==(s=r.getProductById(t.product.id))?null:s.material)||"Premium Quality"),I(1),q("ngIf",r.getProductById(t.product.id)),I(5),q("disabled",t.quantity<=1),I(2),q("value",t.quantity),I(7),Ve("$",r.getItemTotal(t),"")}}function kJ(n,e){if(1&n&&(M(0,"div",92)(1,"span"),U(2,"i",86),P(3," Discounts Applied "),b(),M(4,"span",93),P(5),b()()),2&n){const t=Z(2);I(5),Ve("-$",t.getTotalSavings().toFixed(2),"")}}function FJ(n,e){1&n&&(M(0,"span",94),P(1,"FREE"),b())}function UJ(n,e){if(1&n&&(M(0,"div",95),U(1,"i",96),P(2),b()),2&n){const t=Z(2);I(2),Ve(" Add $",t.getRemainingForFreeShipping().toFixed(2)," more for free shipping! ")}}function BJ(n,e){1&n&&(M(0,"div",184),P(1," Please enter your first name "),b())}function VJ(n,e){1&n&&(M(0,"div",184),P(1," Please enter your last name "),b())}function zJ(n,e){1&n&&(M(0,"div",184),P(1," Please enter a valid email address "),b())}function HJ(n,e){1&n&&(M(0,"div",184),P(1," Please enter a valid phone number "),b())}function GJ(n,e){1&n&&(M(0,"div",184),P(1," Please enter your address "),b())}function WJ(n,e){1&n&&(M(0,"div",184),P(1," Please enter your city "),b())}function jJ(n,e){1&n&&(M(0,"div",184),P(1," Please select your governorate "),b())}function $J(n,e){1&n&&(M(0,"div",184),P(1," Please enter a valid postal code (4 digits) "),b())}function qJ(n,e){1&n&&(M(0,"div",185)(1,"div",106)(2,"div",107)(3,"label",186),U(4,"i",159),P(5," Card Number * "),b(),U(6,"input",187),b(),M(7,"div",107)(8,"label",188),U(9,"i",189),P(10," Expiry Date * "),b(),U(11,"input",190),b(),M(12,"div",107)(13,"label",191),U(14,"i",182),P(15," CVV * "),b(),U(16,"input",192),b()()())}function XJ(n,e){1&n&&(M(0,"div",184),P(1," You must accept the terms and conditions "),b())}function YJ(n,e){if(1&n&&(M(0,"span"),P(1),b()),2&n){const t=Z(3);I(1),Ve("CONFIRM ORDER - $",t.getTotal().toFixed(2),"")}}function ZJ(n,e){1&n&&(M(0,"span"),U(1,"i",193),P(2," PROCESSING... "),b())}function KJ(n,e){if(1&n){const t=jt();M(0,"div",97)(1,"div",98)(2,"h3",19),U(3,"i",99),P(4," CHECKOUT INFORMATION "),b(),M(5,"button",100),ge("click",function(){return Ue(t),Be(Z(2).showCheckoutForm=!1)}),U(6,"i",101),b()(),M(7,"form",102),ge("ngSubmit",function(){return Ue(t),Be(Z(2).submitCheckout())}),M(8,"div",103)(9,"div",104),U(10,"i",105),M(11,"span"),P(12,"1. PERSONAL INFORMATION"),b()(),M(13,"div",106)(14,"div",107)(15,"label",108),U(16,"i",109),P(17," First Name * "),b(),U(18,"input",110),se(19,BJ,2,0,"div",111),b(),M(20,"div",107)(21,"label",112),U(22,"i",109),P(23," Last Name * "),b(),U(24,"input",113),se(25,VJ,2,0,"div",111),b(),M(26,"div",107)(27,"label",114),U(28,"i",115),P(29," Email Address * "),b(),U(30,"input",116),se(31,zJ,2,0,"div",111),b(),M(32,"div",107)(33,"label",117),U(34,"i",118),P(35," Phone Number * "),b(),U(36,"input",119),se(37,HJ,2,0,"div",111),b()()(),M(38,"div",103)(39,"div",104),U(40,"i",120),M(41,"span"),P(42,"2. ADDRESS INFORMATION"),b()(),M(43,"div",106)(44,"div",121)(45,"label",122),U(46,"i",123),P(47," Address * "),b(),U(48,"input",124),se(49,GJ,2,0,"div",111),b(),M(50,"div",107)(51,"label",125),U(52,"i",126),P(53," City * "),b(),U(54,"input",127),se(55,WJ,2,0,"div",111),b(),M(56,"div",107)(57,"label",128),U(58,"i",129),P(59," Governorate * "),b(),M(60,"select",130)(61,"option",131),P(62,"Select Governorate"),b(),M(63,"option",132),P(64,"Tunis"),b(),M(65,"option",133),P(66,"Ariana"),b(),M(67,"option",134),P(68,"Ben Arous"),b(),M(69,"option",135),P(70,"Manouba"),b(),M(71,"option",136),P(72,"Nabeul"),b(),M(73,"option",137),P(74,"Zaghouan"),b(),M(75,"option",138),P(76,"Bizerte"),b(),M(77,"option",139),P(78,"B\xe9ja"),b(),M(79,"option",140),P(80,"Jendouba"),b(),M(81,"option",141),P(82,"Le Kef"),b(),M(83,"option",142),P(84,"Siliana"),b(),M(85,"option",143),P(86,"Sousse"),b(),M(87,"option",144),P(88,"Monastir"),b(),M(89,"option",145),P(90,"Mahdia"),b(),M(91,"option",146),P(92,"Sfax"),b(),M(93,"option",147),P(94,"Kairouan"),b(),M(95,"option",148),P(96,"Kasserine"),b(),M(97,"option",149),P(98,"Sidi Bouzid"),b(),M(99,"option",150),P(100,"Gab\xe8s"),b(),M(101,"option",151),P(102,"M\xe9denine"),b(),M(103,"option",152),P(104,"Tataouine"),b(),M(105,"option",153),P(106,"Gafsa"),b(),M(107,"option",154),P(108,"Tozeur"),b(),M(109,"option",155),P(110,"K\xe9bili"),b()(),se(111,jJ,2,0,"div",111),b(),M(112,"div",107)(113,"label",156),U(114,"i",157),P(115," Postal Code * "),b(),U(116,"input",158),se(117,$J,2,0,"div",111),b()()(),M(118,"div",103)(119,"div",104),U(120,"i",159),M(121,"span"),P(122,"3. PAYMENT METHOD"),b()(),M(123,"div",160)(124,"label",161),U(125,"input",162),M(126,"div",163)(127,"div",164),U(128,"i",165),b(),M(129,"div",166)(130,"h4"),P(131,"Cash on Delivery"),b(),M(132,"p"),P(133,"Pay when you receive your order"),b()(),M(134,"div",167),U(135,"i",168),b()()(),M(136,"label",161),U(137,"input",169),M(138,"div",163)(139,"div",164),U(140,"i",159),b(),M(141,"div",166)(142,"h4"),P(143,"Credit/Debit Card"),b(),M(144,"p"),P(145,"Pay securely with your card"),b()(),M(146,"div",167),U(147,"i",168),b()()(),M(148,"label",161),U(149,"input",170),M(150,"div",163)(151,"div",164),U(152,"i",171),b(),M(153,"div",166)(154,"h4"),P(155,"Flouci"),b(),M(156,"p"),P(157,"Pay with Flouci wallet"),b()(),M(158,"div",167),U(159,"i",168),b()()()(),se(160,qJ,17,0,"div",172),b(),M(161,"div",173)(162,"label",174),U(163,"input",175),M(164,"div",176),U(165,"i",168),b(),M(166,"span",177),P(167," I agree to the "),M(168,"a",178),P(169,"Terms and Conditions"),b(),P(170," and "),M(171,"a",178),P(172,"Privacy Policy"),b()()(),se(173,XJ,2,0,"div",111),b(),M(174,"div",179)(175,"button",180),ge("click",function(){return Ue(t),Be(Z(2).showCheckoutForm=!1)}),U(176,"i",8),P(177," CANCEL "),b(),M(178,"button",181),U(179,"i",182),se(180,YJ,2,1,"span",183),se(181,ZJ,3,0,"span",183),b()()()()}if(2&n){const t=Z(2);let i,r,o,s,a,c,l,u,d,f,h,p,_,m,g,v,y,x,C,S,T,R;I(7),q("formGroup",t.checkoutForm),I(11),mt("error",(null==(i=t.checkoutForm.get("firstName"))?null:i.invalid)&&(null==(i=t.checkoutForm.get("firstName"))?null:i.touched)),I(1),q("ngIf",(null==(r=t.checkoutForm.get("firstName"))?null:r.invalid)&&(null==(r=t.checkoutForm.get("firstName"))?null:r.touched)),I(5),mt("error",(null==(o=t.checkoutForm.get("lastName"))?null:o.invalid)&&(null==(o=t.checkoutForm.get("lastName"))?null:o.touched)),I(1),q("ngIf",(null==(s=t.checkoutForm.get("lastName"))?null:s.invalid)&&(null==(s=t.checkoutForm.get("lastName"))?null:s.touched)),I(5),mt("error",(null==(a=t.checkoutForm.get("email"))?null:a.invalid)&&(null==(a=t.checkoutForm.get("email"))?null:a.touched)),I(1),q("ngIf",(null==(c=t.checkoutForm.get("email"))?null:c.invalid)&&(null==(c=t.checkoutForm.get("email"))?null:c.touched)),I(5),mt("error",(null==(l=t.checkoutForm.get("phone"))?null:l.invalid)&&(null==(l=t.checkoutForm.get("phone"))?null:l.touched)),I(1),q("ngIf",(null==(u=t.checkoutForm.get("phone"))?null:u.invalid)&&(null==(u=t.checkoutForm.get("phone"))?null:u.touched)),I(11),mt("error",(null==(d=t.checkoutForm.get("address"))?null:d.invalid)&&(null==(d=t.checkoutForm.get("address"))?null:d.touched)),I(1),q("ngIf",(null==(f=t.checkoutForm.get("address"))?null:f.invalid)&&(null==(f=t.checkoutForm.get("address"))?null:f.touched)),I(5),mt("error",(null==(h=t.checkoutForm.get("city"))?null:h.invalid)&&(null==(h=t.checkoutForm.get("city"))?null:h.touched)),I(1),q("ngIf",(null==(p=t.checkoutForm.get("city"))?null:p.invalid)&&(null==(p=t.checkoutForm.get("city"))?null:p.touched)),I(5),mt("error",(null==(_=t.checkoutForm.get("governorate"))?null:_.invalid)&&(null==(_=t.checkoutForm.get("governorate"))?null:_.touched)),I(51),q("ngIf",(null==(m=t.checkoutForm.get("governorate"))?null:m.invalid)&&(null==(m=t.checkoutForm.get("governorate"))?null:m.touched)),I(5),mt("error",(null==(g=t.checkoutForm.get("postalCode"))?null:g.invalid)&&(null==(g=t.checkoutForm.get("postalCode"))?null:g.touched)),I(1),q("ngIf",(null==(v=t.checkoutForm.get("postalCode"))?null:v.invalid)&&(null==(v=t.checkoutForm.get("postalCode"))?null:v.touched)),I(7),mt("selected","cash"===(null==(y=t.checkoutForm.get("paymentMethod"))?null:y.value)),I(12),mt("selected","card"===(null==(x=t.checkoutForm.get("paymentMethod"))?null:x.value)),I(12),mt("selected","flouci"===(null==(C=t.checkoutForm.get("paymentMethod"))?null:C.value)),I(12),q("ngIf","card"===(null==(S=t.checkoutForm.get("paymentMethod"))?null:S.value)),I(4),mt("checked",null==(T=t.checkoutForm.get("acceptTerms"))?null:T.value),I(9),q("ngIf",(null==(R=t.checkoutForm.get("acceptTerms"))?null:R.invalid)&&(null==(R=t.checkoutForm.get("acceptTerms"))?null:R.touched)),I(5),q("disabled",t.checkoutForm.invalid||t.isSubmitting),I(2),q("ngIf",!t.isSubmitting),I(1),q("ngIf",t.isSubmitting)}}function JJ(n,e){if(1&n){const t=jt();M(0,"div",194)(1,"button",195),ge("click",function(){return Ue(t),Be(Z(2).continueShopping())}),U(2,"i",8),P(3," CONTINUE SHOPPING "),b(),M(4,"button",196),ge("click",function(){return Ue(t),Be(Z(2).clearCart())}),U(5,"i",197),P(6," CLEAR CART "),b(),M(7,"button",198),ge("click",function(){return Ue(t),Be(Z(2).showCheckoutForm=!0)}),U(8,"i",182),P(9),b()()}if(2&n){const t=Z(2);I(9),Ve(" SECURE CHECKOUT - $",t.getTotal().toFixed(2)," ")}}function QJ(n,e){1&n&&(M(0,"div",199)(1,"div",200),U(2,"i",201),M(3,"span"),P(4,"Secure Payment"),b()(),M(5,"div",200),U(6,"i",202),M(7,"span"),P(8,"30-Day Returns"),b()(),M(9,"div",200),U(10,"i",203),M(11,"span"),P(12,"Fast Shipping"),b()()())}function eQ(n,e){if(1&n&&(M(0,"div"),se(1,wJ,7,3,"div",13),M(2,"div",14),se(3,LJ,50,16,"div",15),b(),M(4,"div",16)(5,"div",17)(6,"div",18)(7,"h3",19),P(8,"ORDER SUMMARY"),b(),M(9,"div",20),U(10,"i",21),M(11,"span",22),P(12),b()()(),M(13,"div",23)(14,"div",24)(15,"span"),P(16),b(),M(17,"span"),P(18),b()(),se(19,kJ,6,1,"div",25),M(20,"div",24)(21,"span"),U(22,"i",26),P(23," Shipping "),se(24,FJ,2,0,"span",27),b(),M(25,"span"),P(26),b()(),M(27,"div",24)(28,"span"),P(29),b(),M(30,"span"),P(31),b()(),U(32,"div",28),M(33,"div",29)(34,"span",30),P(35,"TOTAL"),b(),M(36,"span",31),P(37),b()(),se(38,UJ,3,1,"div",32),b(),se(39,KJ,182,38,"div",33),se(40,JJ,10,1,"div",34),se(41,QJ,13,0,"div",35),b()()()),2&n){const t=Z();I(1),q("ngIf",!t.hasFreeShipping()&&t.cartItems.length>0),I(2),q("ngForOf",t.cartItems),I(9),ot(t.getTotalItems()),I(4),Ve("Subtotal (",t.getTotalItems()," items)"),I(2),Ve("$",t.getSubtotal().toFixed(2),""),I(1),q("ngIf",t.getTotalSavings()>0),I(5),q("ngIf",t.hasFreeShipping()),I(1),mt("free-shipping",t.hasFreeShipping()),I(1),Ve(" ",t.hasFreeShipping()?"FREE":"$"+t.getShipping().toFixed(2)," "),I(3),Ve("Tax (",100*t.TAX_RATE,"%)"),I(2),Ve("$",t.getTax().toFixed(2),""),I(6),Ve("$",t.getTotal().toFixed(2),""),I(1),q("ngIf",!t.hasFreeShipping()),I(1),q("ngIf",t.showCheckoutForm),I(1),q("ngIf",!t.showCheckoutForm),I(1),q("ngIf",!t.showCheckoutForm)}}function tQ(n,e){if(1&n){const t=jt();M(0,"div",204)(1,"div",205)(2,"div",206),U(3,"i",207)(4,"div",208),b(),M(5,"h3"),P(6,"YOUR CART IS EMPTY"),b(),M(7,"p"),P(8,"Looks like you haven't added any items to your cart yet."),b(),M(9,"button",209),ge("click",function(){return Ue(t),Be(Z().continueShopping())}),U(10,"i",210),P(11," BROWSE FREPPING PRODUCTS "),b(),M(12,"div",211)(13,"span",4),P(14,"LOS SANTOS"),b(),M(15,"span",4),P(16,"CUSTOMS"),b(),M(17,"span",4),P(18,"FREPPING"),b()()()()}}const rQ=["canvas"];function oQ(n,e){1&n&&(M(0,"div",6),U(1,"div",7),M(2,"span",8),P(3,"RECHERCHE DU FOND DE RUE..."),b(),M(4,"div",9),P(5," Test des chemins: assets/shoot_background__graffiti_street.glb "),b()())}function sQ(n,e){if(1&n&&(M(0,"div",27),P(1," \u{1f4cd} Chemin: "),M(2,"code"),P(3),b()()),2&n){const t=Z(2);I(3),ot(t.debugInfo.foundPath)}}function aQ(n,e){if(1&n&&(M(0,"div",28),P(1),b()),2&n){const t=Z(2);I(1),Ve(" \u26a0\ufe0f Erreur: ",t.debugInfo.backgroundError," ")}}function cQ(n,e){if(1&n){const t=jt();M(0,"li")(1,"code",29),ge("click",function(){const o=Ue(t).$implicit;return Be(Z(2).manualPath=o)}),P(2),b()()}if(2&n){const t=e.$implicit;I(2),ot(t)}}function lQ(n,e){if(1&n){const t=jt();M(0,"div",10)(1,"div",11)(2,"h3"),P(3,"\u{1f50d} DEBUG PANEL"),b(),M(4,"button",12),ge("click",function(){return Ue(t),Be(Z().showDebugPanel=!1)}),P(5,"\xd7"),b()(),M(6,"div",13)(7,"h4"),P(8,"\u{1f3af} FOND DE RUE"),b(),M(9,"div",14)(10,"span",15),P(11),b(),M(12,"span",16),P(13),b()(),se(14,sQ,4,1,"div",17),se(15,aQ,2,1,"div",18),b(),M(16,"div",13)(17,"h4"),P(18,"\u{1f9ea} TEST MANUEL"),b(),M(19,"div",19)(20,"input",20),ge("ngModelChange",function(r){return Ue(t),Be(Z().manualPath=r)}),b(),M(21,"button",21),ge("click",function(){return Ue(t),Be(Z().testManualPath())}),P(22," Tester ce chemin "),b()(),M(23,"div",22)(24,"h5"),P(25,"Chemins sugg\xe9r\xe9s:"),b(),M(26,"ul"),se(27,cQ,3,1,"li",23),b()()(),M(28,"div",13)(29,"h4"),P(30,"\u{1f4c1} ASSETS"),b(),M(31,"button",24),ge("click",function(){return Ue(t),Be(Z().checkAssetStructure())}),P(32," V\xe9rifier la structure des fichiers "),b()(),M(33,"div",25)(34,"span",26),P(35),b(),M(36,"span",26),P(37),b()()()}if(2&n){const t=Z();I(9),mt("success",t.debugInfo.backgroundLoaded),I(2),ot(t.debugInfo.backgroundLoaded?"\u2705":"\u274c"),I(2),Ve(" ",t.debugInfo.backgroundLoaded?"CHARG\xc9":"NON TROUV\xc9"," "),I(1),q("ngIf",t.debugInfo.foundPath),I(1),q("ngIf",t.debugInfo.backgroundError),I(5),q("ngModel",t.manualPath),I(7),q("ngForOf",t.backgroundPaths),I(8),Ve("\u{1f441}\ufe0f Objets: ",(null==t.children?null:t.children.length)||0,""),I(2),Ve("\u{1f3af} Rotation: ",t.autoRotate?"ON":"OFF","")}}function uQ(n,e){if(1&n){const t=jt();M(0,"button",30),ge("click",function(){return Ue(t),Be(Z().showDebugPanel=!0)}),P(1," \u{1f50d} DEBUG "),b()}}const dQ=[{path:"",component:VZ},{path:"shop",component:ZK},{path:"product/:id",component:vJ},{path:"try-on",component:yJ},{path:"cart",component:(()=>{class n{constructor(t,i,r){this.cartService=t,this.router=i,this.fb=r,this.cartItems=[],this.showCheckoutForm=!1,this.isSubmitting=!1,this.EMAILJS_CONFIG={SERVICE_ID:"service_xfoa9an",TEMPLATE_ID:"template_oozt5vf",PUBLIC_KEY:"2w26KF5jldH41vNeR",RECEIVER_EMAIL:"oussamajb02@gmail.com",SENDER_NAME:"FREPPING Store"},this.TAX_RATE=.085,this.SHIPPING_THRESHOLD=100,this.SHIPPING_COST=9.99,this.subtotal=0,this.shippingCost=0,this.taxAmount=0,this.total=0,this.discountAmount=0,this.cartItems$=this.cartService.cartItems$,this.checkoutForm=this.fb.group({}),this.initializeForm(),((n,e="https://api.emailjs.com")=>{$d._userID=n,$d._origin=e})(this.EMAILJS_CONFIG.PUBLIC_KEY)}ngOnInit(){this.cartSubscription=this.cartItems$.subscribe(t=>{this.cartItems=t,this.calculateCartSummary()}),this.loadSavedFormData()}ngOnDestroy(){this.cartSubscription&&this.cartSubscription.unsubscribe()}initializeForm(){this.checkoutForm=this.fb.group({firstName:["",[Sn.required,Sn.minLength(2)]],lastName:["",[Sn.required,Sn.minLength(2)]],email:["",[Sn.required,Sn.email]],phone:["",[Sn.required,Sn.pattern(/^\+?[0-9\s\-\(\)]{8,}$/)]],address:["",Sn.required],city:["",Sn.required],governorate:["",Sn.required],postalCode:["",[Sn.required,Sn.pattern(/^[0-9]{4}$/)]],paymentMethod:["cash",Sn.required],cardNumber:[""],expiryDate:[""],cvv:[""],acceptTerms:[!1,Sn.requiredTrue]}),this.checkoutForm.get("paymentMethod")?.valueChanges.subscribe(t=>{const i=this.checkoutForm.get("cardNumber"),r=this.checkoutForm.get("expiryDate"),o=this.checkoutForm.get("cvv");"card"===t?(i?.setValidators([Sn.required,Sn.pattern(/^[0-9]{16}$/)]),r?.setValidators([Sn.required,Sn.pattern(/^(0[1-9]|1[0-2])\/[0-9]{2}$/)]),o?.setValidators([Sn.required,Sn.pattern(/^[0-9]{3}$/)])):(i?.clearValidators(),r?.clearValidators(),o?.clearValidators()),i?.updateValueAndValidity(),r?.updateValueAndValidity(),o?.updateValueAndValidity()}),this.checkoutForm.get("cardNumber")?.valueChanges.subscribe(t=>{if(t){const i=t.replace(/\s/g,"").replace(/(\d{4})/g,"$1 ").trim();t!==i&&this.checkoutForm.get("cardNumber")?.setValue(i,{emitEvent:!1})}})}loadSavedFormData(){const t=localStorage.getItem("checkoutFormData");if(t)try{const i=JSON.parse(t);this.checkoutForm.patchValue(i)}catch(i){console.error("Error loading saved form data:",i)}}saveFormData(){localStorage.setItem("checkoutFormData",JSON.stringify(this.checkoutForm.value))}onInputEnter(t){t.target.blur()}goBack(){this.router.navigate(["/shop"])}removeFromCart(t){this.cartService.removeFromCart(t)}clearCart(){this.cartService.clearCart()}updateQuantity(t,i){const r=Math.max(1,Math.floor(Number(i)));isNaN(r)?console.error("Invalid quantity value"):this.cartService.updateQuantity(t,r)}getProductById(t){return cp.find(i=>i.id===t)}getItemTotal(t){const i=this.getProductById(t.product.id);let r=t.product.price;return i?.originalPrice&&i.originalPrice>r&&(r=i.price),Math.round(r*t.quantity*100)/100}getItemSavings(t){const i=this.getProductById(t.product.id);return i?.originalPrice&&i.originalPrice>i.price?Math.round((i.originalPrice-i.price)*t.quantity*100)/100:0}calculateCartSummary(){this.subtotal=this.cartItems.reduce((t,i)=>t+this.getItemTotal(i),0),this.discountAmount=this.cartItems.reduce((t,i)=>t+this.getItemSavings(i),0),this.shippingCost=this.subtotal>=this.SHIPPING_THRESHOLD||0===this.cartItems.length?0:this.SHIPPING_COST,this.taxAmount=Math.round(this.subtotal*this.TAX_RATE*100)/100,this.total=Math.round(100*(this.subtotal+this.shippingCost+this.taxAmount))/100}getSubtotal(){return this.subtotal}getTax(){return this.taxAmount}getShipping(){return this.shippingCost}getTotal(){return this.total}getTotalSavings(){return this.discountAmount}hasFreeShipping(){return this.subtotal>=this.SHIPPING_THRESHOLD}getRemainingForFreeShipping(){return this.hasFreeShipping()||0===this.cartItems.length?0:Math.max(0,this.SHIPPING_THRESHOLD-this.subtotal)}getTotalItems(){return this.cartItems.reduce((t,i)=>t+i.quantity,0)}continueShopping(){this.router.navigate(["/shop"])}proceedToCheckout(){0!==this.cartItems.length?this.showCheckoutForm=!0:console.warn("Cart is empty! Add items before checkout.")}formatCurrency(t){return`$${t.toFixed(2)}`}isItemOnSale(t){const i=this.getProductById(t);return!!(i?.originalPrice&&i.originalPrice>i.price)}getItemDiscountPercentage(t){const i=this.getProductById(t);return i?.originalPrice&&i.originalPrice>i.price?Math.round((i.originalPrice-i.price)/i.originalPrice*100):0}submitCheckout(){if(this.checkoutForm.invalid)return void Object.keys(this.checkoutForm.controls).forEach(i=>{this.checkoutForm.get(i)?.markAsTouched()});this.isSubmitting=!0;const t={...this.checkoutForm.value,cartItems:this.cartItems,subtotal:this.subtotal,shipping:this.shippingCost,tax:this.taxAmount,total:this.total,orderDate:(new Date).toLocaleString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}),orderId:"ORD-"+Date.now()+"-"+Math.random().toString(36).substr(2,9).toUpperCase(),itemsCount:this.getTotalItems(),hasFreeShipping:this.hasFreeShipping(),itemsList:this.generateItemsList(),itemsText:this.generateItemsListText()};this.saveFormData(),this.sendOrderEmail(t)}generateItemsList(){let t="";return this.cartItems.forEach(i=>{const r=this.getItemTotal(i);t+=`${i.quantity}x ${i.product.name} - $${r.toFixed(2)}\n`}),t}generateItemsListText(){return this.cartItems.map(t=>{const i=this.getItemTotal(t);return`${t.quantity}x ${t.product.name} - $${i.toFixed(2)}`}).join("\n")}sendOrderEmail(t){var i=this;return $i(function*(){try{const r={to_email:i.EMAILJS_CONFIG.RECEIVER_EMAIL,to_name:i.EMAILJS_CONFIG.SENDER_NAME,from_name:`${t.firstName} ${t.lastName}`,from_email:t.email,reply_to:t.email,order_id:t.orderId,order_date:t.orderDate,customer_name:`${t.firstName} ${t.lastName}`,customer_email:t.email,customer_phone:t.phone,customer_address:`\n          ${t.address}\n          ${t.city}, ${t.governorate}\n          Postal Code: ${t.postalCode}\n        `,payment_method:i.getPaymentMethodName(t.paymentMethod),subtotal:`$${t.subtotal.toFixed(2)}`,shipping_cost:t.hasFreeShipping?"FREE":`$${t.shipping.toFixed(2)}`,tax_amount:`$${t.tax.toFixed(2)}`,total_amount:`$${t.total.toFixed(2)}`,items_count:t.itemsCount.toString(),items_list:t.itemsList,items_text:t.itemsText,store_name:"FREPPING",store_email:"info@frepping.com",store_phone:"+216 XX XXX XXX",store_address:"Los Santos Customs, FREPPING Headquarters"},o=yield Q2_send(i.EMAILJS_CONFIG.SERVICE_ID,i.EMAILJS_CONFIG.TEMPLATE_ID,r);console.log("Email sent successfully:",o),localStorage.setItem("lastOrder",JSON.stringify(t)),i.cartService.clearCart(),i.showOrderSuccess(t),setTimeout(()=>{i.checkoutForm.reset({paymentMethod:"cash",acceptTerms:!1}),i.showCheckoutForm=!1,i.isSubmitting=!1},3e3)}catch(r){console.error("Failed to send email:",r),i.isSubmitting=!1,i.showEmailError(t)}})()}getPaymentMethodName(t){switch(t){case"cash":return"Cash on Delivery";case"card":return"Credit/Debit Card";case"flouci":return"Flouci Wallet";default:return"Unknown"}}showEmailError(t){localStorage.setItem("lastOrder",JSON.stringify(t)),this.cartService.clearCart();const i=document.createElement("div");i.className="order-error-notification",i.innerHTML=`\n      <div class="error-content">\n        <i class="fas fa-exclamation-triangle"></i>\n        <h3>ORDER PLACED BUT EMAIL FAILED</h3>\n        <p>Your order #${t.orderId} has been saved.</p>\n        <p>Total: $${t.total.toFixed(2)}</p>\n        <p>We couldn't send the confirmation email. Please save your order number.</p>\n        <p class="order-id-highlight">${t.orderId}</p>\n      </div>\n    `,document.body.appendChild(i),setTimeout(()=>{i.parentNode&&i.parentNode.removeChild(i),this.router.navigate(["/"])},5e3)}showOrderSuccess(t){const i=document.createElement("div");i.className="order-success-notification",i.innerHTML=`\n      <div class="success-content">\n        <i class="fas fa-check-circle"></i>\n        <h3>ORDER CONFIRMED!</h3>\n        <p>Your order #${t.orderId} has been placed successfully.</p>\n        <p>Total: $${t.total.toFixed(2)}</p>\n        <p>A confirmation email has been sent to ${t.email}</p>\n        <p class="order-note">You will also receive an SMS confirmation shortly.</p>\n      </div>\n    `,document.body.appendChild(i),setTimeout(()=>{i.parentNode&&i.parentNode.removeChild(i),this.router.navigate(["/"])},5e3)}static{this.\u0275fac=function(i){return new(i||n)(ee(sd),ee(Hn),ee(IK))}}static{this.\u0275cmp=Ui({type:n,selectors:[["app-cart"]],decls:17,vars:3,consts:[[1,"cart","page-container","shop"],[1,"cart-header","shop-header"],[1,"cart-title","shop-title"],[1,"cart-header-subtitle"],[1,"street-tag"],["class","cart-count-badge",4,"ngIf"],[1,"details-header"],[1,"back-button",3,"click"],[1,"fas","fa-arrow-left"],[1,"cart-section"],[4,"ngIf","ngIfElse"],["emptyCart",""],[1,"cart-count-badge"],["class","shipping-progress",4,"ngIf"],[1,"cart-modern-grid","products-modern-grid","grid-large"],["class","modern-cart-item modern-product",4,"ngFor","ngForOf"],[1,"cart-summary-modern"],[1,"summary-panel"],[1,"summary-header"],[1,"street-title"],[1,"summary-icon"],[1,"fas","fa-clipboard-list"],[1,"item-count"],[1,"summary-details"],[1,"summary-row"],["class","summary-row discount",4,"ngIf"],[1,"fas","fa-shipping-fast"],["class","free-badge",4,"ngIf"],[1,"summary-divider"],[1,"summary-row","total"],[1,"total-label"],[1,"total-amount"],["class","summary-note",4,"ngIf"],["class","checkout-form-modern",4,"ngIf"],["class","cart-actions-modern",4,"ngIf"],["class","security-badges",4,"ngIf"],[1,"shipping-progress"],[1,"progress-label"],[1,"progress-bar"],[1,"progress-fill"],[1,"modern-cart-item","modern-product"],[1,"modern-cart-image","modern-product-image"],[1,"gta-panels"],[1,"gta-panel","panel-1"],[1,"gta-panel","panel-2"],[1,"gta-panel","panel-3"],[1,"product-img-container"],["class","cart-img product-img","onerror","this.onerror=null; this.src='assets/images/products/placeholder.png'",3,"src","alt",4,"ngIf","ngIfElse"],["placeholder",""],[1,"modern-indicators"],["class","modern-badge sale",4,"ngIf"],["class","modern-badge new",4,"ngIf"],["class","modern-badge quantity",4,"ngIf"],[1,"modern-quick-actions"],["title","Remove item",1,"modern-quick-btn",3,"click"],[1,"fas","fa-trash"],["title","Add one more",1,"modern-quick-btn",3,"click"],[1,"fas","fa-plus"],[1,"modern-cart-content","modern-product-content"],[1,"modern-cart-info","modern-product-info"],[1,"modern-brand"],[1,"modern-product-name"],[1,"modern-category"],[1,"modern-price-section"],[1,"modern-price"],[1,"modern-current"],["class","modern-original",4,"ngIf"],["class","savings-badge",4,"ngIf"],[1,"modern-material"],["class","item-details",4,"ngIf"],[1,"modern-qty"],[1,"street-label"],[1,"qty-controls"],[1,"qty-btn","minus",3,"disabled","click"],[1,"fas","fa-minus"],["type","number","min","1",1,"street-input",3,"value","change","keyup.enter","blur"],[1,"qty-btn","plus",3,"click"],[1,"item-total"],["onerror","this.onerror=null; this.src='assets/images/products/placeholder.png'",1,"cart-img","product-img",3,"src","alt"],[1,"cart-img-placeholder","product-img-placeholder"],[1,"fas","fa-tshirt"],[1,"modern-badge","sale"],[1,"modern-badge","new"],[1,"modern-badge","quantity"],[1,"modern-original"],[1,"savings-badge"],[1,"fas","fa-tag"],[1,"item-details"],["class","detail-row",4,"ngIf"],[1,"detail-row"],[1,"detail-label"],[1,"detail-value"],[1,"summary-row","discount"],[1,"discount-amount"],[1,"free-badge"],[1,"summary-note"],[1,"fas","fa-info-circle"],[1,"checkout-form-modern"],[1,"form-header"],[1,"fas","fa-user-check"],[1,"close-form-btn",3,"click"],[1,"fas","fa-times"],[3,"formGroup","ngSubmit"],[1,"form-section"],[1,"section-title"],[1,"fas","fa-id-card"],[1,"form-grid"],[1,"form-group"],["for","firstName"],[1,"fas","fa-user"],["type","text","id","firstName","formControlName","firstName","placeholder","Enter your first name",1,"street-input"],["class","error-message",4,"ngIf"],["for","lastName"],["type","text","id","lastName","formControlName","lastName","placeholder","Enter your last name",1,"street-input"],["for","email"],[1,"fas","fa-envelope"],["type","email","id","email","formControlName","email","placeholder","your.email@example.com",1,"street-input"],["for","phone"],[1,"fas","fa-phone"],["type","tel","id","phone","formControlName","phone","placeholder","+216 XX XXX XXX",1,"street-input"],[1,"fas","fa-map-marker-alt"],[1,"form-group","full-width"],["for","address"],[1,"fas","fa-home"],["type","text","id","address","formControlName","address","placeholder","Street address, building, apartment",1,"street-input"],["for","city"],[1,"fas","fa-city"],["type","text","id","city","formControlName","city","placeholder","Enter your city",1,"street-input"],["for","governorate"],[1,"fas","fa-landmark"],["id","governorate","formControlName","governorate",1,"street-select"],["value",""],["value","tunis"],["value","ariana"],["value","benarous"],["value","manouba"],["value","nabeul"],["value","zaghouan"],["value","bizerte"],["value","beja"],["value","jendouba"],["value","kef"],["value","siliana"],["value","sousse"],["value","monastir"],["value","mahdia"],["value","sfax"],["value","kairouan"],["value","kasserine"],["value","sidi_bouzid"],["value","gabes"],["value","medenine"],["value","tataouine"],["value","gafsa"],["value","tozeur"],["value","kebili"],["for","postalCode"],[1,"fas","fa-mail-bulk"],["type","text","id","postalCode","formControlName","postalCode","placeholder","XXXX","maxlength","4",1,"street-input"],[1,"fas","fa-credit-card"],[1,"payment-methods"],[1,"payment-option"],["type","radio","formControlName","paymentMethod","value","cash","hidden",""],[1,"payment-content"],[1,"payment-icon"],[1,"fas","fa-money-bill-wave"],[1,"payment-info"],[1,"payment-check"],[1,"fas","fa-check"],["type","radio","formControlName","paymentMethod","value","card","hidden",""],["type","radio","formControlName","paymentMethod","value","flouci","hidden",""],[1,"fas","fa-mobile-alt"],["class","card-details",4,"ngIf"],[1,"terms-section"],[1,"terms-checkbox"],["type","checkbox","formControlName","acceptTerms","hidden",""],[1,"custom-checkbox"],[1,"terms-text"],["href","#",1,"terms-link"],[1,"form-actions"],["type","button",1,"btn-modern","secondary-btn",3,"click"],["type","submit",1,"btn-modern","checkout-btn",3,"disabled"],[1,"fas","fa-lock"],[4,"ngIf"],[1,"error-message"],[1,"card-details"],["for","cardNumber"],["type","text","id","cardNumber","formControlName","cardNumber","placeholder","XXXX XXXX XXXX XXXX","maxlength","19",1,"street-input"],["for","expiryDate"],[1,"fas","fa-calendar-alt"],["type","text","id","expiryDate","formControlName","expiryDate","placeholder","MM/YY",1,"street-input"],["for","cvv"],["type","text","id","cvv","formControlName","cvv","placeholder","123","maxlength","3",1,"street-input"],[1,"fas","fa-spinner","fa-spin"],[1,"cart-actions-modern"],[1,"btn-modern","secondary-btn",3,"click"],[1,"btn-modern","danger-btn",3,"click"],[1,"fas","fa-trash-alt"],[1,"btn-modern","checkout-btn",3,"click"],[1,"security-badges"],[1,"security-badge"],[1,"fas","fa-shield-alt"],[1,"fas","fa-undo"],[1,"fas","fa-truck"],[1,"no-products-modern"],[1,"modern-empty-state","cart-empty-state"],[1,"empty-cart-icon"],[1,"fas","fa-shopping-cart"],[1,"empty-cart-pulse"],[1,"btn-modern",3,"click"],[1,"fas","fa-store"],[1,"empty-cart-tagline"]],template:function(i,r){if(1&i&&(M(0,"div",0)(1,"header",1)(2,"h1",2),P(3,"CART"),b(),M(4,"div",3)(5,"span",4),P(6,"LOS SANTOS MERCH"),b(),se(7,CJ,2,1,"span",5),b()(),M(8,"div",6)(9,"div",7),ge("click",function(){return r.goBack()}),U(10,"i",8),P(11," BACK "),b()(),M(12,"section",9),se(13,eQ,42,17,"div",10),se(14,tQ,19,0,"ng-template",null,11,js),b()(),U(16,"app-bottom-nav")),2&i){const o=Bs(15);I(7),q("ngIf",r.cartItems.length>0),I(6),q("ngIf",r.cartItems.length>0)("ngIfElse",o)}},dependencies:[is,Kr,O2,nM,rM,Dl,Ux,jd,Kx,Og,_2,sM,Vg,tM,Vc],styles:['@charset "UTF-8";.cart.page-container[_ngcontent-%COMP%]{background:#0b0f0c;min-height:100vh;padding-bottom:60px;position:relative;overflow-x:hidden}.cart.page-container[_ngcontent-%COMP%]:before{content:"";position:fixed;inset:0;background-image:radial-gradient(circle at 20% 30%,rgba(57,255,20,.05) 0%,transparent 50%),radial-gradient(circle at 80% 70%,rgba(255,153,0,.05) 0%,transparent 50%),linear-gradient(45deg,#0b0f0c 25%,#0f1f14 25%,#0f1f14 50%,#0b0f0c 50%,#0b0f0c 75%,#0f1f14 75%,#0f1f14);background-size:5px 5px,5px 5px,10px 10px;z-index:-1;opacity:.3}.cart-header[_ngcontent-%COMP%]{background:#000;padding:40px 20px 30px;border-bottom:4px solid #39ff14;position:relative;overflow:hidden;text-align:center}.cart-header[_ngcontent-%COMP%]:before{content:"";position:absolute;inset:0;background:linear-gradient(45deg,transparent 48%,rgba(57,255,20,.1) 50%,transparent 52%),linear-gradient(-45deg,transparent 48%,rgba(57,255,20,.1) 50%,transparent 52%);background-size:20px 20px}.cart-title[_ngcontent-%COMP%]{font-family:Street,Pricedown,sans-serif;font-size:62px;color:#39ff14;text-align:center;letter-spacing:4px;margin-bottom:15px;text-shadow:3px 3px 0 #000,-1px -1px 0 #000,1px -1px 0 #000,-1px 1px 0 #000,1px 1px 0 #000;position:relative;z-index:1}.cart-header-subtitle[_ngcontent-%COMP%]{position:relative;z-index:1;display:flex;justify-content:center;align-items:center;gap:20px;flex-wrap:wrap}.street-tag[_ngcontent-%COMP%]{background:#000;color:#39ff14;padding:8px 20px;border:2px solid #39ff14;font-family:Street,Pricedown,sans-serif;letter-spacing:3px;text-transform:uppercase;font-size:14px;display:inline-block;transform:skew(-5deg);box-shadow:3px 3px #000;transition:all .3s ease}.street-tag[_ngcontent-%COMP%]:hover{background:#39ff14;color:#000;transform:skew(-5deg) translate(-2px,-2px);box-shadow:5px 5px #000}.cart-count-badge[_ngcontent-%COMP%]{background:#39ff14;color:#000;padding:8px 20px;border:2px solid #000;font-family:Street,Pricedown,sans-serif;letter-spacing:2px;font-size:16px;font-weight:900;transform:skew(-5deg);display:inline-block;box-shadow:4px 4px #000;position:relative;overflow:hidden}.cart-count-badge[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:-100%;width:100%;height:100%;background:linear-gradient(90deg,transparent,rgba(255,255,255,.3),transparent);transition:.5s}.cart-count-badge[_ngcontent-%COMP%]:hover:before{left:100%}.cart-section[_ngcontent-%COMP%]{position:relative;z-index:2}.shipping-progress[_ngcontent-%COMP%]{background:#000;border:3px solid #39ff14;padding:20px;margin:30px auto;max-width:800px;transform:skew(-3deg);position:relative;overflow:hidden;box-shadow:8px 8px #000}.shipping-progress[_ngcontent-%COMP%]:after{content:"";position:absolute;top:0;left:0;right:0;height:4px;background:repeating-linear-gradient(90deg,#ff9900,#ff9900 10px,transparent 10px,transparent 20px)}.progress-label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:15px;color:#39ff14;font-family:Oswald,sans-serif;margin-bottom:15px;font-size:16px;letter-spacing:1px;transform:skew(3deg)}.progress-label[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:20px;color:#f90}.progress-bar[_ngcontent-%COMP%]{height:12px;background:#222;border:2px solid #000;overflow:hidden;position:relative;transform:skew(3deg)}.progress-fill[_ngcontent-%COMP%]{height:100%;background:linear-gradient(90deg,#39ff14,#ff9900);transition:width .5s ease;position:relative;overflow:hidden}.progress-fill[_ngcontent-%COMP%]:after{content:"";position:absolute;inset:0;background:linear-gradient(90deg,transparent,rgba(255,255,255,.2),transparent);animation:_ngcontent-%COMP%_shimmer 2s infinite}@keyframes _ngcontent-%COMP%_shimmer{0%{transform:translate(-100%)}to{transform:translate(100%)}}.cart-modern-grid[_ngcontent-%COMP%]{display:grid;gap:35px;padding:40px 20px;max-width:1400px;margin:0 auto}.modern-cart-item[_ngcontent-%COMP%]{background:linear-gradient(160deg,#e3efcd 0%,#cbdca8 100%);border:4px solid #000;border-radius:0;transform:skew(-3deg);box-shadow:10px 10px #000;transition:all .2s cubic-bezier(.4,0,.2,1);position:relative;overflow:hidden;z-index:1;animation:_ngcontent-%COMP%_cartSlideIn .4s ease-out forwards}.modern-cart-item[_ngcontent-%COMP%]:hover{transform:skew(-3deg) translate(-4px,-4px);box-shadow:16px 16px #000;z-index:10;background:linear-gradient(160deg,#eaf4da 0%,#d4e2b6 100%)}@keyframes _ngcontent-%COMP%_cartSlideIn{0%{opacity:0;transform:translate(-30px) skew(-3deg)}to{opacity:1;transform:translate(0) skew(-3deg)}}.modern-cart-image[_ngcontent-%COMP%]{background:#000;height:320px;border-bottom:4px solid #000;position:relative;overflow:hidden;display:flex;align-items:center;justify-content:center}.modern-cart-image[_ngcontent-%COMP%]:after{content:"";position:absolute;inset:0;background:linear-gradient(to bottom,transparent 70%,rgba(0,0,0,.2));z-index:2}.gta-panels[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;inset:0;display:flex;justify-content:center;align-items:center;gap:10px;overflow:hidden;z-index:0}.gta-panel[_ngcontent-%COMP%]{background:linear-gradient(to bottom,rgba(0,0,0,.2),rgba(0,0,0,.8)),url(bg1.54feb52e8cf9f583.jpg);background-size:cover;background-position:center;border:2px solid #000;box-shadow:8px 8px #000;position:relative}.gta-panel[_ngcontent-%COMP%]:after{content:"";position:absolute;inset:0;background:linear-gradient(120deg,rgba(255,255,255,.1),rgba(0,0,0,.1))}.gta-panel.panel-1[_ngcontent-%COMP%]{flex:.8;height:55%;transform:rotate(-5deg) translateY(10px);will-change:transform;animation:_ngcontent-%COMP%_float-1 3s ease-in-out infinite alternate}.gta-panel.panel-2[_ngcontent-%COMP%]{flex:1;height:80%;transform:rotate(0) scale(1.1);z-index:2;will-change:transform;animation:_ngcontent-%COMP%_float-2 4s ease-in-out infinite alternate}.gta-panel.panel-3[_ngcontent-%COMP%]{flex:.6;height:55%;transform:rotate(5deg) translateY(10px);will-change:transform;animation:_ngcontent-%COMP%_float-3 3.5s ease-in-out infinite alternate}@keyframes _ngcontent-%COMP%_float-1{0%{transform:rotate(-5deg) translateY(10px) translate(0)}to{transform:rotate(-5deg) translateY(10px) translate(5px,-5px)}}@keyframes _ngcontent-%COMP%_float-2{0%{transform:rotate(0) scale(1.1) translate(0)}to{transform:rotate(0) scale(1.1) translate(-5px,5px)}}@keyframes _ngcontent-%COMP%_float-3{0%{transform:rotate(5deg) translateY(10px) translate(0)}to{transform:rotate(5deg) translateY(10px) translate(8px,8px)}}.product-img-container[_ngcontent-%COMP%]{z-index:2;position:relative;width:100%;height:100%;display:flex;align-items:center;justify-content:center;padding:20px}.cart-img[_ngcontent-%COMP%]{max-width:100%;max-height:100%;object-fit:contain;filter:drop-shadow(5px 5px 0 rgba(0,0,0,.3)) contrast(1.1);mix-blend-mode:multiply}.cart-img-placeholder[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;gap:15px;color:#39ff14;font-size:24px;z-index:2;position:relative}.cart-img-placeholder[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:64px;opacity:.5}.cart-img-placeholder[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-family:Street,Pricedown,sans-serif;font-size:32px;letter-spacing:3px;text-shadow:2px 2px 0 #000}.modern-indicators[_ngcontent-%COMP%]{position:absolute;top:15px;left:15px;display:flex;flex-direction:column;gap:10px;z-index:3}.modern-badge[_ngcontent-%COMP%]{padding:8px 15px;border-radius:0;border:2px solid #000;transform:skew(-10deg);font-size:12px;font-weight:900;letter-spacing:1px;text-transform:uppercase;font-family:Street,Pricedown,sans-serif;box-shadow:3px 3px #0000004d;z-index:4;display:flex;align-items:center;justify-content:center}.modern-badge.sale[_ngcontent-%COMP%]{background:#ffcc00;color:#000}.modern-badge.new[_ngcontent-%COMP%]{background:#39ff14;color:#000}.modern-badge.quantity[_ngcontent-%COMP%]{background:#ff9900;color:#000}.modern-badge.out[_ngcontent-%COMP%]{background:#ff3333;color:#fff}.modern-quick-actions[_ngcontent-%COMP%]{position:absolute;top:15px;right:15px;display:flex;flex-direction:column;gap:10px;opacity:0;transform:translate(20px) skew(2deg);transition:all .3s ease;z-index:3}.modern-cart-item[_ngcontent-%COMP%]:hover   .modern-quick-actions[_ngcontent-%COMP%]{opacity:1;transform:translate(0) skew(2deg)}.modern-quick-btn[_ngcontent-%COMP%]{width:42px;height:42px;border-radius:0;border:2px solid #000;background:#fff;color:#000;display:flex;align-items:center;justify-content:center;cursor:pointer;transition:all .3s ease;font-size:18px;transform:skew(2deg);box-shadow:3px 3px #000}.modern-quick-btn[_ngcontent-%COMP%]:hover{background:#39ff14;color:#000;transform:skew(2deg) translate(-2px,-2px);box-shadow:5px 5px #000}.modern-quick-btn[_ngcontent-%COMP%]:active{transform:skew(2deg) translate(0);box-shadow:2px 2px #000}.modern-cart-content[_ngcontent-%COMP%]{position:relative;z-index:2;background:#fff;color:#000;border-top:4px solid #000;padding:25px;display:flex;flex-direction:column;flex:1;gap:20px}.modern-cart-info[_ngcontent-%COMP%]{flex:1;margin-bottom:10px}.modern-brand[_ngcontent-%COMP%]{color:#777;font-size:12px;letter-spacing:2px;text-transform:uppercase;margin-bottom:8px;font-family:Oswald,sans-serif;font-weight:600}.modern-product-name[_ngcontent-%COMP%]{font-family:Street,Pricedown,sans-serif;text-transform:uppercase;letter-spacing:1.5px;color:#000;font-size:22px;margin:0 0 10px;font-weight:900;line-height:1.2;text-shadow:1px 1px 0 rgba(0,0,0,.1);position:relative}.modern-product-name[_ngcontent-%COMP%]:after{content:"";position:absolute;bottom:-5px;left:0;width:60px;height:3px;background:#ff9900}.modern-category[_ngcontent-%COMP%]{color:#39ff14;font-size:14px;text-transform:uppercase;letter-spacing:1px;margin-bottom:15px;font-family:Oswald,sans-serif;font-weight:600;background:#000;padding:4px 10px;display:inline-block;transform:skew(-5deg);box-shadow:2px 2px #000}.modern-price-section[_ngcontent-%COMP%]{margin:15px 0}.modern-price[_ngcontent-%COMP%]{display:flex;align-items:center;gap:15px;margin-bottom:5px}.modern-current[_ngcontent-%COMP%]{color:#000;font-size:28px;font-weight:900;font-family:Street,Pricedown,sans-serif;text-shadow:2px 2px 0 rgba(0,0,0,.1);position:relative}.modern-current[_ngcontent-%COMP%]:before{content:"$";font-size:18px;vertical-align:super;margin-right:2px}.modern-original[_ngcontent-%COMP%]{color:#777;font-size:18px;text-decoration:line-through;font-weight:600;font-family:Oswald,sans-serif}.savings-badge[_ngcontent-%COMP%]{background:#ff9900;color:#000;padding:5px 10px;font-size:13px;font-family:Street,Pricedown,sans-serif;display:inline-block;margin:5px 0;transform:skew(-5deg);border:2px solid #000;box-shadow:3px 3px #000;display:flex;align-items:center;gap:6px}.savings-badge[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:12px}.modern-material[_ngcontent-%COMP%]{color:#555;font-size:12px;letter-spacing:.5px;font-style:italic;font-family:Oswald,sans-serif;border-top:1px dashed #ccc;padding-top:8px;margin-top:8px}.item-details[_ngcontent-%COMP%]{margin:15px 0;border-top:1px dashed #ccc;padding-top:12px}.detail-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;font-size:13px;margin-bottom:5px;padding:3px 0}.detail-label[_ngcontent-%COMP%]{color:#777;font-weight:600;font-family:Oswald,sans-serif;text-transform:uppercase;letter-spacing:.5px}.detail-value[_ngcontent-%COMP%]{color:#000;font-family:Street,Pricedown,sans-serif;font-weight:600;letter-spacing:1px}.modern-qty[_ngcontent-%COMP%]{margin-top:20px}.street-label[_ngcontent-%COMP%]{display:block;font-family:Street,Pricedown,sans-serif;color:#000;font-size:16px;margin-bottom:12px;letter-spacing:2px;text-transform:uppercase;font-weight:900}.qty-controls[_ngcontent-%COMP%]{display:flex;gap:10px;align-items:center;background:#000;padding:8px;border:3px solid #39ff14;transform:skew(-5deg);max-width:250px;box-shadow:4px 4px #000}.street-input[_ngcontent-%COMP%]{flex:1;background:#fff;border:2px solid #000;color:#000;font-size:20px;padding:10px;text-align:center;font-family:Street,Pricedown,sans-serif;font-weight:900;outline:none;transform:skew(5deg);min-width:70px;box-shadow:inset 2px 2px #ddd}.street-input[_ngcontent-%COMP%]:focus{border-color:#f90;box-shadow:inset 2px 2px #ddd,0 0 0 2px #ff99004d}.qty-btn[_ngcontent-%COMP%]{width:46px;height:46px;background:#39ff14;border:2px solid #000;color:#000;cursor:pointer;display:flex;align-items:center;justify-content:center;font-size:18px;font-weight:900;transition:all .3s ease;transform:skew(5deg);box-shadow:3px 3px #000}.qty-btn[_ngcontent-%COMP%]:hover:not(:disabled){background:#ff9900;transform:skew(5deg) translate(-2px,-2px);box-shadow:5px 5px #000}.qty-btn[_ngcontent-%COMP%]:active:not(:disabled){transform:skew(5deg) translate(0);box-shadow:2px 2px #000}.qty-btn[_ngcontent-%COMP%]:disabled{background:#ccc;color:#777;cursor:not-allowed;box-shadow:1px 1px #777;transform:skew(5deg)}.item-total[_ngcontent-%COMP%]{border-top:3px dashed #000;margin-top:15px;display:flex;justify-content:space-between;align-items:center;background:#000;padding:15px;border:2px solid #39ff14;transform:skew(-3deg)}.total-label[_ngcontent-%COMP%]{font-family:Street,Pricedown,sans-serif;color:#fff;font-size:20px;letter-spacing:2px;text-transform:uppercase;font-weight:900}.total-amount[_ngcontent-%COMP%]{font-family:Street,Pricedown,sans-serif;color:#39ff14;font-size:28px;font-weight:900;background:#000;padding:5px 15px;border:2px solid #39ff14;transform:skew(-5deg);box-shadow:4px 4px #000;position:relative;overflow:hidden}.total-amount[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:-100%;width:100%;height:100%;background:linear-gradient(90deg,transparent,rgba(57,255,20,.2),transparent);animation:_ngcontent-%COMP%_shimmer 2s infinite}.cart-summary-modern[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto 60px;padding:0 20px}.summary-panel[_ngcontent-%COMP%]{background:linear-gradient(160deg,#e3efcd 0%,#cbdca8 100%);border:4px solid #000;transform:skew(-2deg);box-shadow:15px 15px #000;padding:40px;position:relative;overflow:hidden}.summary-panel[_ngcontent-%COMP%]:before{content:"";position:absolute;inset:0;background:repeating-linear-gradient(45deg,transparent,transparent 10px,rgba(0,0,0,.05) 10px,rgba(0,0,0,.05) 20px)}.summary-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:40px;position:relative;z-index:2;padding-bottom:15px;border-bottom:3px solid #000}.street-title[_ngcontent-%COMP%]{font-family:Street,Pricedown,sans-serif;font-size:36px;color:#000;letter-spacing:3px;text-transform:uppercase;margin:0;text-shadow:2px 2px 0 rgba(0,0,0,.1);position:relative}.street-title[_ngcontent-%COMP%]:after{content:"";position:absolute;bottom:-18px;left:0;width:100px;height:4px;background:#39ff14}.summary-icon[_ngcontent-%COMP%]{width:70px;height:70px;background:#000;border:3px solid #39ff14;display:flex;align-items:center;justify-content:center;transform:skew(-10deg);position:relative;box-shadow:6px 6px #000}.summary-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#39ff14;font-size:32px;transform:skew(10deg)}.summary-icon[_ngcontent-%COMP%]   .item-count[_ngcontent-%COMP%]{position:absolute;top:-8px;right:-8px;background:#ff9900;color:#000;width:32px;height:32px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:16px;font-weight:900;border:2px solid #000;font-family:Street,Pricedown,sans-serif;box-shadow:3px 3px #000}.summary-details[_ngcontent-%COMP%]{background:#000;padding:30px;border:3px solid #39ff14;position:relative;z-index:2;margin-bottom:40px;box-shadow:8px 8px #000}.summary-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:15px 0;color:#fff;font-family:Oswald,sans-serif;font-size:18px;letter-spacing:1px;border-bottom:1px solid #333}.summary-row[_ngcontent-%COMP%]:last-child{border-bottom:none}.summary-row.discount[_ngcontent-%COMP%]{color:#39ff14;border-bottom:1px dashed #39ff14;font-weight:600}.summary-row.discount[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:10px}.summary-row.total[_ngcontent-%COMP%]{border-top:4px solid #39ff14;margin-top:10px;padding-top:25px;color:#39ff14;font-size:28px;font-weight:900;font-family:Street,Pricedown,sans-serif}.discount-amount[_ngcontent-%COMP%]{color:#39ff14;font-weight:900;font-size:20px}.free-badge[_ngcontent-%COMP%]{background:#39ff14;color:#000;padding:3px 12px;margin-left:10px;font-size:12px;font-weight:900;border:1px solid #000;transform:skew(-5deg);font-family:Street,Pricedown,sans-serif;display:inline-block;box-shadow:2px 2px #000}.free-shipping[_ngcontent-%COMP%]{color:#39ff14!important;font-weight:900;font-family:Street,Pricedown,sans-serif;letter-spacing:2px}.summary-divider[_ngcontent-%COMP%]{height:4px;background:repeating-linear-gradient(90deg,#ff9900,#ff9900 10px,transparent 10px,transparent 20px);margin:25px 0}.summary-note[_ngcontent-%COMP%]{background:rgba(57,255,20,.1);border-left:4px solid #39ff14;padding:15px;margin-top:20px;font-size:14px;color:#39ff14;display:flex;align-items:center;gap:10px;font-family:Oswald,sans-serif;letter-spacing:1px}.summary-note[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:18px}.cart-actions-modern[_ngcontent-%COMP%]{display:flex;gap:20px;justify-content:center;position:relative;z-index:2;flex-wrap:wrap;margin-top:40px}.btn-modern[_ngcontent-%COMP%]{background:#39ff14;color:#000;border:3px solid #000;padding:18px 40px;border-radius:0;font-weight:900;letter-spacing:2px;cursor:pointer;text-transform:uppercase;transition:all .3s ease;font-family:Street,Pricedown,sans-serif;transform:skew(-5deg);box-shadow:8px 8px #000;display:flex;align-items:center;gap:12px;font-size:16px;position:relative;overflow:hidden;min-width:200px;justify-content:center}.btn-modern[_ngcontent-%COMP%]:hover{background:#ff9900;transform:skew(-5deg) translate(-4px,-4px);box-shadow:12px 12px #000}.btn-modern[_ngcontent-%COMP%]:active{transform:skew(-5deg) translate(-1px,-1px);box-shadow:4px 4px #000}.btn-modern.secondary-btn[_ngcontent-%COMP%]{background:#000;color:#39ff14;border-color:#39ff14}.btn-modern.secondary-btn[_ngcontent-%COMP%]:hover{background:#111;color:#f90}.btn-modern.danger-btn[_ngcontent-%COMP%]{background:#ff3333;color:#000;border-color:#000}.btn-modern.danger-btn[_ngcontent-%COMP%]:hover{background:#ff6666}.btn-modern.checkout-btn[_ngcontent-%COMP%]{background:linear-gradient(45deg,#ff9900,#ffcc00);color:#000;border-color:#000;padding:20px 50px;font-size:18px;min-width:300px}.btn-modern.checkout-btn[_ngcontent-%COMP%]:hover{background:linear-gradient(45deg,#ffcc00,#ff9900);animation:_ngcontent-%COMP%_pulse .5s ease-in-out}.btn-modern[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:18px}@keyframes _ngcontent-%COMP%_pulse{0%{transform:skew(-5deg) scale(1)}50%{transform:skew(-5deg) scale(1.05)}to{transform:skew(-5deg) scale(1)}}.security-badges[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:30px;margin-top:40px;flex-wrap:wrap;position:relative;z-index:2}.security-badge[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;color:#777;font-size:14px;font-family:Oswald,sans-serif;letter-spacing:1px;padding:10px 20px;background:#000;border:2px solid #333;transform:skew(-5deg);transition:all .3s ease}.security-badge[_ngcontent-%COMP%]:hover{border-color:#39ff14;color:#39ff14;transform:skew(-5deg) translateY(-3px);box-shadow:4px 4px #000}.security-badge[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#39ff14;font-size:20px}.no-products-modern[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:600px;padding:40px}.cart-empty-state[_ngcontent-%COMP%]{text-align:center;padding:60px;background:#000;border:4px solid #39ff14;transform:skew(-5deg);box-shadow:20px 20px #00000080;max-width:600px;width:100%}.empty-cart-icon[_ngcontent-%COMP%]{position:relative;margin-bottom:30px;display:inline-block}.empty-cart-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:100px;color:#333;position:relative;z-index:2}.empty-cart-pulse[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);width:120px;height:120px;background:rgba(57,255,20,.2);border-radius:50%;animation:_ngcontent-%COMP%_cartPulse 2s infinite}@keyframes _ngcontent-%COMP%_cartPulse{0%{transform:translate(-50%,-50%) scale(.8);opacity:.5}50%{transform:translate(-50%,-50%) scale(1.2);opacity:.2}to{transform:translate(-50%,-50%) scale(.8);opacity:.5}}.cart-empty-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#39ff14;font-size:36px;margin-bottom:20px;font-family:Street,Pricedown,sans-serif;text-transform:uppercase;letter-spacing:3px;transform:skew(5deg);text-shadow:3px 3px 0 #000}.cart-empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#ccc;margin-bottom:40px;font-size:18px;font-family:Oswald,sans-serif;transform:skew(5deg);line-height:1.6;max-width:400px;margin-left:auto;margin-right:auto}.empty-cart-tagline[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:20px;margin-top:40px;flex-wrap:wrap}@media (max-width: 1024px){.cart-title[_ngcontent-%COMP%]{font-size:52px}.cart-modern-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr);gap:25px;padding:30px 15px}.modern-cart-image[_ngcontent-%COMP%]{height:280px}.summary-panel[_ngcontent-%COMP%]{padding:30px}.street-title[_ngcontent-%COMP%]{font-size:30px}.cart-actions-modern[_ngcontent-%COMP%]{gap:15px}.btn-modern[_ngcontent-%COMP%]{min-width:180px;padding:15px 30px;font-size:14px}.btn-modern.checkout-btn[_ngcontent-%COMP%]{min-width:250px}}@media (max-width: 768px){.cart-title[_ngcontent-%COMP%]{font-size:42px}.cart-header[_ngcontent-%COMP%]{padding:30px 15px}.cart-modern-grid[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:20px;padding:20px 10px}.modern-cart-image[_ngcontent-%COMP%]{height:250px}.modern-cart-content[_ngcontent-%COMP%]{padding:20px}.summary-panel[_ngcontent-%COMP%]{padding:20px;transform:skew(0)}.summary-header[_ngcontent-%COMP%]{flex-direction:column;gap:20px;text-align:center}.street-title[_ngcontent-%COMP%]{font-size:26px}.street-title[_ngcontent-%COMP%]:after{left:50%;transform:translate(-50%)}.cart-actions-modern[_ngcontent-%COMP%]{flex-direction:column}.btn-modern[_ngcontent-%COMP%]{width:100%;min-width:auto;justify-content:center;transform:skew(0)}.btn-modern[_ngcontent-%COMP%]:hover{transform:translate(-2px,-2px)}.btn-modern.checkout-btn[_ngcontent-%COMP%]{min-width:auto;order:-1}.security-badges[_ngcontent-%COMP%]{gap:15px}.shipping-progress[_ngcontent-%COMP%]{margin:20px 15px;transform:skew(0)}.progress-label[_ngcontent-%COMP%], .progress-bar[_ngcontent-%COMP%]{transform:skew(0)}}@media (max-width: 480px){.cart-title[_ngcontent-%COMP%]{font-size:32px;letter-spacing:2px}.street-tag[_ngcontent-%COMP%]{font-size:12px;padding:6px 15px}.cart-count-badge[_ngcontent-%COMP%]{font-size:14px;padding:6px 15px}.modern-product-name[_ngcontent-%COMP%]{font-size:18px}.modern-current[_ngcontent-%COMP%]{font-size:24px}.modern-original[_ngcontent-%COMP%]{font-size:16px}.street-input[_ngcontent-%COMP%]{font-size:18px;min-width:50px}.qty-btn[_ngcontent-%COMP%]{width:40px;height:40px;font-size:16px}.total-amount[_ngcontent-%COMP%]{font-size:24px}.summary-row[_ngcontent-%COMP%]{font-size:16px;padding:12px 0}.summary-row.total[_ngcontent-%COMP%]{font-size:24px}.cart-empty-state[_ngcontent-%COMP%]{padding:40px 20px}.cart-empty-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:28px}.empty-cart-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:80px}.empty-cart-pulse[_ngcontent-%COMP%]{width:100px;height:100px}}@keyframes _ngcontent-%COMP%_street-pulse{0%,to{box-shadow:12px 12px #000}50%{box-shadow:12px 12px #000,0 0 20px #39ff1480}}.modern-cart-item.featured[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_street-pulse 2s infinite;border-color:#f90}.cart-empty-state[_ngcontent-%COMP%]:before{content:"EMPTY";position:absolute;bottom:20px;right:20px;font-family:Street,Pricedown,sans-serif;color:#39ff141a;font-size:60px;transform:rotate(-15deg) skew(-10deg);z-index:1;pointer-events:none}.back-button[_ngcontent-%COMP%]{cursor:pointer;background:#000;border:2px solid #39ff14;padding:10px 20px;color:#39ff14;font-family:Street,Pricedown,sans-serif;letter-spacing:2px;text-transform:uppercase;transform:skew(-5deg);display:inline-flex;align-items:center;gap:10px;font-size:18px;transition:all .3s ease}.back-button[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{transform:skew(5deg)}.back-button[_ngcontent-%COMP%]:hover{background:#39ff14;color:#000;box-shadow:0 0 15px #39ff1466}.checkout-form-modern[_ngcontent-%COMP%]{background:linear-gradient(160deg,#e3efcd 0%,#cbdca8 100%);border:4px solid #000;transform:skew(-2deg);box-shadow:15px 15px #000;padding:30px;position:relative;overflow:hidden;margin-top:20px;z-index:2;animation:_ngcontent-%COMP%_formSlideIn .4s ease-out}.checkout-form-modern[_ngcontent-%COMP%]:before{content:"";position:absolute;inset:0;background:repeating-linear-gradient(45deg,transparent,transparent 10px,rgba(0,0,0,.05) 10px,rgba(0,0,0,.05) 20px);z-index:-1}@keyframes _ngcontent-%COMP%_formSlideIn{0%{opacity:0;transform:skew(-2deg) translateY(30px)}to{opacity:1;transform:skew(-2deg) translateY(0)}}.form-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:30px;padding-bottom:15px;border-bottom:3px solid #000;position:relative}.form-header[_ngcontent-%COMP%]   .street-title[_ngcontent-%COMP%]{font-family:Street,Pricedown,sans-serif;font-size:28px;color:#000;letter-spacing:2px;margin:0;display:flex;align-items:center;gap:15px}.form-header[_ngcontent-%COMP%]   .street-title[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#39ff14;font-size:24px;animation:_ngcontent-%COMP%_iconGlow 2s infinite alternate}@keyframes _ngcontent-%COMP%_iconGlow{0%{filter:drop-shadow(0 0 0 rgba(57,255,20,0))}to{filter:drop-shadow(0 0 8px rgba(57,255,20,.8))}}.close-form-btn[_ngcontent-%COMP%]{background:#000;border:2px solid #39ff14;color:#39ff14;width:40px;height:40px;display:flex;align-items:center;justify-content:center;cursor:pointer;transform:skew(-5deg);transition:all .3s ease;font-size:18px;box-shadow:3px 3px #000;position:relative;overflow:hidden}.close-form-btn[_ngcontent-%COMP%]:hover{background:#ff3333;color:#000;border-color:#000;transform:skew(-5deg) scale(1.1);box-shadow:5px 5px #000}.close-form-btn[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:-100%;width:100%;height:100%;background:linear-gradient(90deg,transparent,rgba(255,255,255,.3),transparent);transition:.5s}.close-form-btn[_ngcontent-%COMP%]:hover:before{left:100%}.form-section[_ngcontent-%COMP%]{margin-bottom:30px;padding:20px;background:#fff;border:3px solid #000;transform:skew(-1deg);box-shadow:8px 8px #0000001a;position:relative;overflow:hidden}.form-section[_ngcontent-%COMP%]:after{content:"";position:absolute;top:0;right:0;width:60px;height:60px;background:linear-gradient(45deg,transparent 40%,rgba(57,255,20,.1) 50%,transparent 60%);transform:rotate(45deg) translate(30px,-30px)}.form-section[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:15px;margin-bottom:25px;padding-bottom:10px;border-bottom:2px solid #39ff14}.form-section[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-family:Street,Pricedown,sans-serif;font-size:20px;color:#000;letter-spacing:2px;text-transform:uppercase;position:relative}.form-section[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:after{content:"";position:absolute;bottom:-12px;left:0;width:40px;height:3px;background:#ff9900}.form-section[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#39ff14;font-size:24px;background:#000;padding:8px;border-radius:0;border:2px solid #39ff14;transform:skew(-5deg);box-shadow:3px 3px #000}.form-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:20px;margin-top:20px}.form-grid[_ngcontent-%COMP%]   .full-width[_ngcontent-%COMP%]{grid-column:1/-1}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;position:relative}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-family:Oswald,sans-serif;font-weight:600;color:#000;margin-bottom:8px;font-size:14px;letter-spacing:1px;display:flex;align-items:center;gap:8px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#39ff14;font-size:14px;background:#000;padding:4px;border-radius:0;border:1px solid #39ff14;transform:skew(-3deg)}.street-input[_ngcontent-%COMP%]{background:#fff;border:2px solid #000;color:#000;padding:12px 15px;font-family:Oswald,sans-serif;font-size:16px;outline:none;transform:skew(-5deg);transition:all .3s ease;box-shadow:inset 3px 3px #eee;position:relative;z-index:1}.street-input[_ngcontent-%COMP%]:focus{border-color:#39ff14;box-shadow:inset 3px 3px #eee,0 0 0 3px #39ff1433;transform:skew(-5deg) translateY(-2px)}.street-input[_ngcontent-%COMP%]::placeholder{color:#777;font-family:Oswald,sans-serif;letter-spacing:1px;font-style:italic}.street-input.error[_ngcontent-%COMP%]{border-color:#f33;background:rgba(255,51,51,.05)}.street-input.error[_ngcontent-%COMP%]:focus{box-shadow:inset 3px 3px #eee,0 0 0 3px #f333}.street-select[_ngcontent-%COMP%]{background:#fff;border:2px solid #000;color:#000;padding:12px 40px 12px 15px;font-family:Oswald,sans-serif;font-size:16px;outline:none;transform:skew(-5deg);transition:all .3s ease;cursor:pointer;box-shadow:inset 3px 3px #eee;appearance:none;background-image:url("data:image/svg+xml,%3Csvg xmlns=\'http://www.w3.org/2000/svg\' width=\'16\' height=\'16\' fill=\'%2339ff14\' viewBox=\'0 0 16 16\'%3E%3Cpath d=\'M7.247 11.14 2.451 5.658C1.885 5.013 2.345 4 3.204 4h9.592a1 1 0 0 1 .753 1.659l-4.796 5.48a1 1 0 0 1-1.506 0z\'/%3E%3C/svg%3E");background-repeat:no-repeat;background-position:right 15px center;background-size:12px}.street-select[_ngcontent-%COMP%]:focus{border-color:#39ff14;box-shadow:inset 3px 3px #eee,0 0 0 3px #39ff1433;transform:skew(-5deg) translateY(-2px)}.street-select.error[_ngcontent-%COMP%]{border-color:#f33;background:rgba(255,51,51,.05)}.error-message[_ngcontent-%COMP%]{color:#f33;font-family:Oswald,sans-serif;font-size:12px;margin-top:5px;letter-spacing:.5px;transform:skew(5deg);display:flex;align-items:center;gap:5px}.error-message[_ngcontent-%COMP%]:before{content:"\\26a0";font-size:10px}.payment-methods[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:15px;margin-top:20px}.payment-option[_ngcontent-%COMP%]{display:block;cursor:pointer}.payment-option[_ngcontent-%COMP%]   .payment-content[_ngcontent-%COMP%]{display:flex;align-items:center;gap:15px;padding:15px;background:#000;border:2px solid #333;transform:skew(-5deg);transition:all .3s ease;position:relative;overflow:hidden}.payment-option[_ngcontent-%COMP%]   .payment-content[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:-100%;width:100%;height:100%;background:linear-gradient(90deg,transparent,rgba(57,255,20,.1),transparent);transition:.5s}.payment-option[_ngcontent-%COMP%]   .payment-content[_ngcontent-%COMP%]:hover:before{left:100%}.payment-option[_ngcontent-%COMP%]:hover   .payment-content[_ngcontent-%COMP%]{border-color:#39ff14;transform:skew(-5deg) translateY(-3px);box-shadow:4px 4px #000}.payment-option.selected[_ngcontent-%COMP%]   .payment-content[_ngcontent-%COMP%]{background:#39ff14;border-color:#000;box-shadow:5px 5px #000}.payment-option.selected[_ngcontent-%COMP%]   .payment-content[_ngcontent-%COMP%]   .payment-icon[_ngcontent-%COMP%]{background:#000;border-color:#000}.payment-option.selected[_ngcontent-%COMP%]   .payment-content[_ngcontent-%COMP%]   .payment-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#39ff14}.payment-option.selected[_ngcontent-%COMP%]   .payment-content[_ngcontent-%COMP%]   .payment-info[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%], .payment-option.selected[_ngcontent-%COMP%]   .payment-content[_ngcontent-%COMP%]   .payment-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#000}.payment-option.selected[_ngcontent-%COMP%]   .payment-content[_ngcontent-%COMP%]   .payment-check[_ngcontent-%COMP%]{opacity:1;transform:skew(5deg) scale(1)}.payment-icon[_ngcontent-%COMP%]{width:50px;height:50px;background:#111;border:2px solid #39ff14;display:flex;align-items:center;justify-content:center;transform:skew(5deg);transition:all .3s ease}.payment-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#39ff14;font-size:24px;transform:skew(-5deg);transition:color .3s ease}.payment-info[_ngcontent-%COMP%]{flex:1}.payment-info[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-family:Street,Pricedown,sans-serif;color:#fff;margin:0 0 5px;font-size:18px;letter-spacing:1px;transition:color .3s ease}.payment-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#aaa;margin:0;font-family:Oswald,sans-serif;font-size:14px;transition:color .3s ease}.payment-check[_ngcontent-%COMP%]{width:30px;height:30px;background:#39ff14;border:2px solid #000;display:flex;align-items:center;justify-content:center;transform:skew(5deg) scale(0);opacity:0;transition:all .3s ease}.payment-check[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#000;font-size:14px;transform:skew(-5deg)}.card-details[_ngcontent-%COMP%]{margin-top:25px;padding:20px;background:rgba(0,0,0,.05);border:2px dashed #000;transform:skew(-2deg);animation:_ngcontent-%COMP%_fadeIn .5s ease-out}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:skew(-2deg) translateY(10px)}to{opacity:1;transform:skew(-2deg) translateY(0)}}.terms-section[_ngcontent-%COMP%]{margin:30px 0;padding:20px;background:#000;border:2px solid #39ff14;transform:skew(-3deg);box-shadow:6px 6px #0003}.terms-checkbox[_ngcontent-%COMP%]{display:flex;align-items:center;gap:15px;cursor:pointer}.terms-checkbox[_ngcontent-%COMP%]:hover   .custom-checkbox[_ngcontent-%COMP%]{border-color:#f90;transform:skew(-5deg) scale(1.1)}.terms-checkbox[_ngcontent-%COMP%]:hover   .terms-link[_ngcontent-%COMP%]{color:#f90}.custom-checkbox[_ngcontent-%COMP%]{width:24px;height:24px;background:#111;border:2px solid #39ff14;display:flex;align-items:center;justify-content:center;transform:skew(-5deg);transition:all .3s ease;flex-shrink:0;box-shadow:2px 2px #000}.custom-checkbox[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#39ff14;font-size:14px;opacity:0;transform:skew(5deg);transition:opacity .3s ease}.custom-checkbox.checked[_ngcontent-%COMP%]{background:#39ff14;box-shadow:3px 3px #000}.custom-checkbox.checked[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{opacity:1;color:#000}.terms-text[_ngcontent-%COMP%]{color:#fff;font-family:Oswald,sans-serif;font-size:14px;letter-spacing:.5px;line-height:1.4}.terms-link[_ngcontent-%COMP%]{color:#39ff14;text-decoration:none;font-weight:600;position:relative}.terms-link[_ngcontent-%COMP%]:after{content:"";position:absolute;bottom:-2px;left:0;width:0;height:1px;background:#39ff14;transition:width .3s ease}.terms-link[_ngcontent-%COMP%]:hover:after{width:100%}.form-actions[_ngcontent-%COMP%]{display:flex;gap:20px;justify-content:center;margin-top:40px}.form-actions[_ngcontent-%COMP%]   .btn-modern[_ngcontent-%COMP%]{min-width:200px;transform:skew(-5deg);transition:all .3s ease}.form-actions[_ngcontent-%COMP%]   .btn-modern[_ngcontent-%COMP%]:disabled{background:#ccc;color:#777;border-color:#999;cursor:not-allowed;box-shadow:4px 4px #999}.form-actions[_ngcontent-%COMP%]   .btn-modern[_ngcontent-%COMP%]:disabled:hover{transform:skew(-5deg);box-shadow:4px 4px #999}.order-success-notification[_ngcontent-%COMP%]{position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);background:linear-gradient(160deg,#e3efcd 0%,#cbdca8 100%);border:4px solid #000;padding:40px;z-index:9999;box-shadow:20px 20px #0000004d;animation:_ngcontent-%COMP%_successSlideIn .5s ease-out;text-align:center;max-width:500px;width:90%}.order-success-notification[_ngcontent-%COMP%]:before{content:"";position:absolute;inset:0;background:repeating-linear-gradient(45deg,transparent,transparent 10px,rgba(0,0,0,.05) 10px,rgba(0,0,0,.05) 20px)}.order-success-notification[_ngcontent-%COMP%]   .success-content[_ngcontent-%COMP%]{position:relative;z-index:2}.order-success-notification[_ngcontent-%COMP%]   .success-content[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:60px;color:#39ff14;margin-bottom:20px;animation:_ngcontent-%COMP%_successPulse 2s infinite;filter:drop-shadow(0 0 5px rgba(57,255,20,.5))}.order-success-notification[_ngcontent-%COMP%]   .success-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-family:Street,Pricedown,sans-serif;font-size:32px;color:#000;margin-bottom:15px;letter-spacing:2px;text-transform:uppercase;text-shadow:1px 1px 0 rgba(0,0,0,.1)}.order-success-notification[_ngcontent-%COMP%]   .success-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-family:Oswald,sans-serif;color:#333;margin:8px 0;font-size:16px;line-height:1.4}.order-success-notification[_ngcontent-%COMP%]   .success-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:nth-child(4){color:#39ff14;font-weight:600;background:#000;padding:5px 15px;display:inline-block;transform:skew(-5deg);margin-top:10px}@keyframes _ngcontent-%COMP%_successSlideIn{0%{opacity:0;transform:translate(-50%,-60%)}to{opacity:1;transform:translate(-50%,-50%)}}@keyframes _ngcontent-%COMP%_successPulse{0%,to{transform:scale(1);color:#39ff14}50%{transform:scale(1.1);color:#f90}}.form-loading[_ngcontent-%COMP%]{position:relative;opacity:.7}.form-loading[_ngcontent-%COMP%]:after{content:"";position:absolute;inset:0;background:rgba(255,255,255,.8);display:flex;align-items:center;justify-content:center;z-index:100}@media (max-width: 1024px){.form-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}.form-actions[_ngcontent-%COMP%]   .btn-modern[_ngcontent-%COMP%]{min-width:180px;padding:15px 25px;font-size:14px}}@media (max-width: 768px){.checkout-form-modern[_ngcontent-%COMP%]{padding:20px;transform:skew(0);margin:20px 10px}.form-header[_ngcontent-%COMP%]{flex-direction:column;gap:15px;text-align:center}.form-header[_ngcontent-%COMP%]   .street-title[_ngcontent-%COMP%]{font-size:24px;justify-content:center}.form-section[_ngcontent-%COMP%]{padding:15px;transform:skew(0)}.form-section[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:18px}.form-section[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:20px}.form-grid[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:15px}.street-input[_ngcontent-%COMP%], .street-select[_ngcontent-%COMP%]{transform:skew(0)}.street-input[_ngcontent-%COMP%]:focus, .street-select[_ngcontent-%COMP%]:focus{transform:translateY(-2px)}.payment-option[_ngcontent-%COMP%]   .payment-content[_ngcontent-%COMP%]{transform:skew(0)}.payment-option[_ngcontent-%COMP%]   .payment-content[_ngcontent-%COMP%]:hover, .payment-option[_ngcontent-%COMP%]   .payment-content.selected[_ngcontent-%COMP%]{transform:translateY(-3px)}.payment-icon[_ngcontent-%COMP%], .payment-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{transform:skew(0)}.payment-check[_ngcontent-%COMP%]{transform:skew(0) scale(0)}.payment-check[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{transform:skew(0)}.payment-check.selected[_ngcontent-%COMP%]   .payment-check[_ngcontent-%COMP%]{transform:scale(1)}.terms-section[_ngcontent-%COMP%], .custom-checkbox[_ngcontent-%COMP%]{transform:skew(0)}.form-actions[_ngcontent-%COMP%]{flex-direction:column;gap:15px}.form-actions[_ngcontent-%COMP%]   .btn-modern[_ngcontent-%COMP%]{width:100%;min-width:auto;transform:skew(0)}.form-actions[_ngcontent-%COMP%]   .btn-modern[_ngcontent-%COMP%]:hover{transform:translate(-2px,-2px)}.form-actions[_ngcontent-%COMP%]   .btn-modern[_ngcontent-%COMP%]:disabled:hover{transform:none}.order-success-notification[_ngcontent-%COMP%]{padding:30px 20px}.order-success-notification[_ngcontent-%COMP%]   .success-content[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:48px}.order-success-notification[_ngcontent-%COMP%]   .success-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:24px}.order-success-notification[_ngcontent-%COMP%]   .success-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px}}@media (max-width: 480px){.checkout-form-modern[_ngcontent-%COMP%]{padding:15px}.form-header[_ngcontent-%COMP%]   .street-title[_ngcontent-%COMP%]{font-size:20px;flex-direction:column;gap:8px}.form-header[_ngcontent-%COMP%]   .street-title[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:20px}.form-section[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:16px}.form-section[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:18px;padding:6px}.payment-option[_ngcontent-%COMP%]   .payment-content[_ngcontent-%COMP%]{flex-direction:column;text-align:center;padding:20px 15px}.payment-info[_ngcontent-%COMP%]{text-align:center}.payment-info[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:16px}.payment-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:12px}}@media print{.checkout-form-modern[_ngcontent-%COMP%]{box-shadow:none;border:1px solid #000;transform:none}.checkout-form-modern[_ngcontent-%COMP%]:before{display:none}.btn-modern[_ngcontent-%COMP%], .close-form-btn[_ngcontent-%COMP%]{display:none}}']})}}return n})()},{path:"profile",component:(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=Ui({type:n,selectors:[["app-profile"]],decls:3,vars:0,template:function(i,r){1&i&&(M(0,"p"),P(1,"profile works!"),b(),U(2,"app-bottom-nav"))},dependencies:[Vc]})}}return n})()},{path:"test-3d",component:(()=>{class n{constructor(t){this.cdRef=t,this.modelPath="",this.autoRotate=!0,this.autoScale=!0,this.targetSize=5,this.backgroundColor="#000000",this.addStreetBackground=!0,this.debugMode=!0,this.model=null,this.streetBackground=null,this.animationId=0,this.isLoaded=!1,this.isLoading=!1,this.currentRotationEnabled=!0,this.debugInfo={mainModelLoaded:!1,backgroundLoaded:!1,backgroundError:"",mainModelError:"",testedPaths:[],foundPath:""},this.backgroundPaths=["assets/shoot_background__graffiti_street.glb","assets/models/shoot_background__graffiti_street.glb","assets/3d/shoot_background__graffiti_street.glb","assets/backgrounds/shoot_background__graffiti_street.glb","assets/textures/shoot_background__graffiti_street.glb","/assets/shoot_background__graffiti_street.glb","./assets/shoot_background__graffiti_street.glb","shoot_background__graffiti_street.glb"],this.showDebugPanel=!0,this.manualPath="assets/shoot_background__graffiti_street.glb"}ngOnInit(){this.currentRotationEnabled=this.autoRotate,console.log("\u{1f3ae} TestViewerComponent initialis\xe9 - FORCEMENT du fond de rue!"),console.log("\u{1f4cd} Chemins \xe0 tester:",this.backgroundPaths)}ngAfterViewInit(){setTimeout(()=>{this.initThreeJS(),this.loadModel(),this.animate()},100)}ngOnDestroy(){this.animationId&&cancelAnimationFrame(this.animationId),this.renderer&&this.renderer.dispose()}initThreeJS(){try{const t=this.canvasRef.nativeElement,i=t.clientWidth||400,r=t.clientHeight||400;console.log("\u{1f680} Initialisation ThreeJS:",{width:i,height:r}),this.scene=new Wy,this.scene.background=new ye(0),this.camera=new Un(45,i/r,.1,1e3),this.camera.position.set(0,2,10),this.renderer=new zy({canvas:t,antialias:!0,alpha:!1}),this.renderer.setSize(i,r),this.renderer.setPixelRatio(Math.min(window.devicePixelRatio,2)),this.renderer.outputColorSpace=nn,this.renderer.shadowMap.enabled=!0,this.renderer.shadowMap.type=Xv,this.setupLighting(),console.log("\u2705 ThreeJS initialis\xe9 avec succ\xe8s")}catch(t){console.error("\u274c Erreur ThreeJS:",t)}}setupLighting(){const t=new Cx(16777215,.8);this.scene.add(t);const i=new ya(16777215,1.2);i.position.set(10,20,15),i.castShadow=!0,this.scene.add(i);const r=new ya(16777215,.5);r.position.set(-10,10,-10),this.scene.add(r)}loadModel(){var t=this;return $i(function*(){t.isLoading=!0,console.log("\u{1f4e6} D\xe9but du chargement - FORCEMENT du fond de rue!");try{console.log("\u{1f3d9}\ufe0f FORCEMENT du chargement du fond de rue..."),yield t.loadStreetBackground(),t.modelPath?yield t.loadMainModel():t.createPlaceholder(),t.isLoaded=!0,t.isLoading=!1,t.cdRef.detectChanges(),console.log("\u{1f389} Chargement termin\xe9"),t.printDebugInfo()}catch(i){console.error("\u{1f4a5} Erreur:",i),t.isLoading=!1,t.cdRef.detectChanges()}})()}loadStreetBackground(){var t=this;return $i(function*(){console.log("\u{1f50d} Recherche du fichier shoot_background__graffiti_street.glb..."),t.debugInfo.testedPaths=[],t.debugInfo.foundPath="",t.debugInfo.backgroundLoaded=!1;for(const i of t.backgroundPaths)if(console.log(`\u{1f50e} Test du chemin: ${i}`),t.debugInfo.testedPaths.push(i),yield t.tryLoadGLB(i))return t.debugInfo.foundPath=i,t.debugInfo.backgroundLoaded=!0,void console.log(`\u2705 FOND TROUV\xc9 ET CHARG\xc9: ${i}`);console.warn("\u26a0\ufe0f Aucun chemin valide trouv\xe9 pour le fond"),t.debugInfo.backgroundError="Fichier non trouv\xe9",t.createDefaultBackground()})()}tryLoadGLB(t){return new Promise(i=>{(new VI).load(t,o=>{console.log(`\u{1f389} SUCC\xc8S: Fichier trouv\xe9 \xe0 ${t}`),console.log("\u{1f4e6} Contenu du GLB:",o),this.streetBackground=o.scene,this.streetBackground.position.set(0,-2,-15),this.streetBackground.scale.set(3,3,3),this.streetBackground.traverse(s=>{s instanceof Dt&&(s.castShadow=!0,s.receiveShadow=!0)}),this.scene.add(this.streetBackground),this.camera.position.set(0,3,10),this.camera.lookAt(0,0,-10),i(!0)},o=>{if(o.lengthComputable){const s=(o.loaded/o.total*100).toFixed(1);console.log(`\u{1f4e5} ${t}: ${s}%`)}},o=>{console.log(`\u274c ${t}: ${onmessage||"Non trouv\xe9"}`),i(!1)}),setTimeout(()=>{console.log(`\u23f1\ufe0f Timeout pour ${t}`),i(!1)},3e3)})}createDefaultBackground(){console.log("\u{1f3a8} Cr\xe9ation d'un fond par d\xe9faut");const t=new xs(100,100),i=new si({color:3355443,roughness:.9}),r=new Dt(t,i);r.rotation.x=-Math.PI/2,r.position.y=-5,r.receiveShadow=!0,this.scene.add(r);const o=new xs(80,40),s=new si({color:16777215*Math.random()}),a=new Dt(o,s);a.position.z=-30,a.position.y=15,this.scene.add(a),console.log("\u2705 Fond par d\xe9faut cr\xe9\xe9")}loadMainModel(){var t=this;return $i(function*(){console.log("\u{1f3af} Chargement du mod\xe8le principal:",t.modelPath)})()}createPlaceholder(){const t=new Uo(2,3,2),i=new si({color:16724838,roughness:.4}),r=new Dt(t,i);r.position.set(0,0,0),r.castShadow=!0,this.scene.add(r),this.model=r,this.debugInfo.mainModelLoaded=!0,console.log("\u2705 Placeholder cr\xe9\xe9")}testManualPath(){var t=this;return $i(function*(){console.log(`\u{1f9ea} Test manuel du chemin: ${t.manualPath}`),t.streetBackground&&(t.scene.remove(t.streetBackground),t.streetBackground=null),(yield t.tryLoadGLB(t.manualPath))?(t.debugInfo.foundPath=t.manualPath,t.debugInfo.backgroundLoaded=!0,alert(`\u2705 FOND CHARG\xc9: ${t.manualPath}`)):alert(`\u274c FOND NON TROUV\xc9: ${t.manualPath}`),t.cdRef.detectChanges()})()}checkAssetStructure(){console.log("\u{1f4c1} Structure des assets attendue:"),console.log("src/assets/"),console.log("\u251c\u2500\u2500 shoot_background__graffiti_street.glb"),console.log("\u251c\u2500\u2500 models/"),console.log("\u2502   \u2514\u2500\u2500 vos-modeles.glb"),console.log("\u2514\u2500\u2500 ..."),this.testAssetPaths()}testAssetPaths(){var t=this;return $i(function*(){console.log("\u{1f50d} Test HTTP des chemins...");for(const i of t.backgroundPaths)try{const r=yield fetch(i,{method:"HEAD"});console.log(`${r.ok?"\u2705":"\u274c"} ${i}: ${r.status} ${r.statusText}`)}catch{console.log(`\u274c ${i}: ${onmessage||"Erreur inconnue"}`)}})()}printDebugInfo(){console.log("=== \u{1f4ca} DEBUG INFO ==="),console.log("\xc9tat du chargement:",this.debugInfo),console.log("Objets dans la sc\xe8ne:",this.scene.children.length),this.scene.children.forEach((t,i)=>{console.log(`  ${i}. ${t.constructor.name} "${t.name||"sans nom"}"`)}),console.log("====================")}animate(){this.animationId=requestAnimationFrame(()=>this.animate()),this.renderer.render(this.scene,this.camera)}static{this.\u0275fac=function(i){return new(i||n)(ee(Tc))}}static{this.\u0275cmp=Ui({type:n,selectors:[["app-test-viewer"]],viewQuery:function(i,r){if(1&i&&bh(rQ,5),2&i){let o;Nu(o=Lu())&&(r.canvasRef=o.first)}},inputs:{modelPath:"modelPath",autoRotate:"autoRotate",autoScale:"autoScale",targetSize:"targetSize",backgroundColor:"backgroundColor",debugMode:"debugMode"},standalone:!0,features:[m0],decls:6,vars:3,consts:[[1,"test-viewer-container"],[1,"model-canvas"],["canvas",""],["class","loading-overlay",4,"ngIf"],["class","debug-panel",4,"ngIf"],["class","toggle-debug-btn",3,"click",4,"ngIf"],[1,"loading-overlay"],[1,"loading-spinner"],[1,"loading-text"],[1,"loading-subtext"],[1,"debug-panel"],[1,"debug-header"],[1,"close-btn",3,"click"],[1,"debug-section"],[1,"debug-status"],[1,"status-icon"],[1,"status-text"],["class","debug-path",4,"ngIf"],["class","debug-error",4,"ngIf"],[1,"path-input"],["type","text","placeholder","Chemin du fichier .glb",1,"path-field",3,"ngModel","ngModelChange"],[1,"test-btn",3,"click"],[1,"suggested-paths"],[4,"ngFor","ngForOf"],[1,"asset-btn",3,"click"],[1,"debug-info"],[1,"info-text"],[1,"debug-path"],[1,"debug-error"],[3,"click"],[1,"toggle-debug-btn",3,"click"]],template:function(i,r){1&i&&(M(0,"div",0),U(1,"canvas",1,2),se(3,oQ,6,0,"div",3),se(4,lQ,38,10,"div",4),se(5,uQ,2,0,"button",5),b()),2&i&&(I(3),q("ngIf",r.isLoading),I(1),q("ngIf",r.isLoaded&&r.showDebugPanel),I(1),q("ngIf",!r.showDebugPanel))},dependencies:[ZP,is,Kr,Y2,Dl,Og,Bg],styles:[".test-viewer-container[_ngcontent-%COMP%]{width:100%;height:500px;position:relative;background:#000;overflow:hidden;border-radius:8px;border:2px solid #39ff14;box-shadow:0 0 20px #39ff144d}.model-canvas[_ngcontent-%COMP%]{width:100%!important;height:100%!important;display:block}.loading-overlay[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;display:flex;align-items:center;justify-content:center;background:rgba(0,0,0,.95);z-index:10;flex-direction:column;gap:20px;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px)}.loading-spinner[_ngcontent-%COMP%]{width:60px;height:60px;border:4px solid rgba(57,255,20,.2);border-top:4px solid #39ff14;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite}.loading-text[_ngcontent-%COMP%]{color:#39ff14;font-size:18px;font-weight:700;text-transform:uppercase;letter-spacing:2px;font-family:Courier New,monospace}.loading-subtext[_ngcontent-%COMP%]{color:#888;font-size:12px;font-family:Courier New,monospace;margin-top:10px}.debug-panel[_ngcontent-%COMP%]{position:absolute;top:20px;left:20px;background:rgba(0,0,0,.9);border:2px solid #39ff14;border-radius:10px;padding:15px;width:350px;z-index:5;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);box-shadow:0 5px 20px #00000080}.debug-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:15px;padding-bottom:10px;border-bottom:1px solid rgba(57,255,20,.3)}.debug-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#39ff14;margin:0;font-size:14px}.close-btn[_ngcontent-%COMP%]{background:none;border:none;color:#39ff14;font-size:20px;cursor:pointer;padding:0;width:24px;height:24px;display:flex;align-items:center;justify-content:center;border-radius:50%}.close-btn[_ngcontent-%COMP%]:hover{background:rgba(57,255,20,.2)}.debug-section[_ngcontent-%COMP%]{margin-bottom:20px}.debug-section[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:#fff;margin:0 0 10px;font-size:13px;display:flex;align-items:center;gap:8px}.debug-status[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;padding:8px 12px;background:rgba(255,255,255,.1);border-radius:6px;margin-bottom:10px}.debug-status.success[_ngcontent-%COMP%]{background:rgba(57,255,20,.1);border-left:3px solid #39ff14}.debug-status[_ngcontent-%COMP%]:not(.success){background:rgba(255,51,102,.1);border-left:3px solid #ff3366}.status-icon[_ngcontent-%COMP%]{font-size:16px}.status-text[_ngcontent-%COMP%]{color:#fff;font-weight:700;font-size:12px}.debug-path[_ngcontent-%COMP%], .debug-error[_ngcontent-%COMP%]{padding:8px 12px;background:rgba(255,255,255,.05);border-radius:6px;margin-top:8px;font-size:11px;font-family:Courier New,monospace}.debug-path[_ngcontent-%COMP%]{color:#39ff14}.debug-error[_ngcontent-%COMP%]{color:#f36}.path-input[_ngcontent-%COMP%]{display:flex;gap:8px;margin-bottom:10px}.path-field[_ngcontent-%COMP%]{flex:1;padding:8px 12px;background:rgba(255,255,255,.1);border:1px solid rgba(57,255,20,.3);border-radius:6px;color:#fff;font-size:12px;font-family:Courier New,monospace}.path-field[_ngcontent-%COMP%]:focus{outline:none;border-color:#39ff14}.test-btn[_ngcontent-%COMP%]{padding:8px 16px;background:#39ff14;color:#000;border:none;border-radius:6px;font-weight:700;font-size:12px;cursor:pointer;transition:all .3s}.test-btn[_ngcontent-%COMP%]:hover{background:#2cd50d;transform:translateY(-1px)}.suggested-paths[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{color:#888;margin:10px 0 8px;font-size:11px;text-transform:uppercase}.suggested-paths[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;padding:0;margin:0;max-height:150px;overflow-y:auto}.suggested-paths[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:4px}.suggested-paths[_ngcontent-%COMP%]   code[_ngcontent-%COMP%]{display:block;padding:6px 10px;background:rgba(255,255,255,.05);border-radius:4px;color:#888;font-size:10px;font-family:Courier New,monospace;cursor:pointer;transition:all .2s}.suggested-paths[_ngcontent-%COMP%]   code[_ngcontent-%COMP%]:hover{background:rgba(57,255,20,.1);color:#39ff14}.asset-btn[_ngcontent-%COMP%]{width:100%;padding:10px;background:rgba(0,170,255,.2);color:#0af;border:1px solid #00aaff;border-radius:6px;cursor:pointer;font-size:12px;font-weight:700;transition:all .3s}.asset-btn[_ngcontent-%COMP%]:hover{background:rgba(0,170,255,.3)}.debug-info[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-top:15px;padding-top:10px;border-top:1px solid rgba(255,255,255,.1)}.info-text[_ngcontent-%COMP%]{color:#888;font-size:11px;font-family:Courier New,monospace}.toggle-debug-btn[_ngcontent-%COMP%]{position:absolute;top:20px;left:20px;padding:8px 16px;background:rgba(0,0,0,.8);color:#39ff14;border:1px solid #39ff14;border-radius:6px;cursor:pointer;font-size:12px;font-weight:700;z-index:5;-webkit-backdrop-filter:blur(5px);backdrop-filter:blur(5px)}.toggle-debug-btn[_ngcontent-%COMP%]:hover{background:rgba(57,255,20,.1)}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}@media (max-width: 768px){.debug-panel[_ngcontent-%COMP%]{width:300px;left:10px;top:10px}.test-viewer-container[_ngcontent-%COMP%]{height:400px}}@media (max-width: 480px){.debug-panel[_ngcontent-%COMP%]{width:calc(100% - 20px);left:10px;right:10px}.test-viewer-container[_ngcontent-%COMP%]{height:300px}}"]})}}return n})()},{path:"mod",component:Pg},{path:"**",redirectTo:""}];let fQ=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=br({type:n})}static{this.\u0275inj=er({imports:[PA.forRoot(dQ),PA]})}}return n})();function hQ(n,e){return{type:7,name:n,definitions:e,options:{}}}function eR(n,e=null){return{type:4,styles:e,timings:n}}function aM(n){return{type:6,styles:n,offset:null}}function tR(n,e,t=null){return{type:1,expr:n,animation:e,options:t}}function pQ(n,e){1&n&&(M(0,"div",17),P(1," PRESS ANY KEY TO SKIP "),b())}let gQ=(()=>{class n{constructor(){this.loadingFinished=new dn,this.progress=0,this.progressPercentage="0%",this.canSkip=!1}ngOnInit(){this.startLoading(),this.enableSkip()}skipIntro(t){this.canSkip&&(t.preventDefault(),this.completeLoading())}enableSkip(){setTimeout(()=>{this.canSkip=!0},2e3)}startLoading(){const t=setInterval(()=>{this.progress+=3*Math.random(),this.progressPercentage=`${Math.floor(this.progress)}%`,this.progress>=100&&(this.progress=100,this.progressPercentage="100%",clearInterval(t),setTimeout(()=>{this.completeLoading()},500))},100)}completeLoading(){this.loadingFinished.emit()}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=Ui({type:n,selectors:[["app-intro"]],hostBindings:function(i,r){1&i&&ge("keydown",function(s){return r.skipIntro(s)},0,Fs)("click",function(s){return r.skipIntro(s)},!1,Fs)},outputs:{loadingFinished:"loadingFinished"},decls:24,vars:3,consts:[[1,"home-intro"],[1,"intro-background"],[1,"intro-grid-overlay"],[1,"intro-glow"],[1,"intro-content"],[1,"intro-title-container"],[1,"intro-main-title"],[1,"title-line-1"],[1,"intro-subtitle"],[1,"intro-loading"],[1,"loading-spinner"],[1,"fas","fa-compact-disc","spinning-icon"],[1,"loading-text"],[1,"loading-dots"],[1,"loading-percent"],[1,"intro-team"],["class","intro-skip",4,"ngIf"],[1,"intro-skip"]],template:function(i,r){1&i&&(M(0,"div",0)(1,"div",1),U(2,"div",2)(3,"div",3),b(),M(4,"div",4)(5,"div",5)(6,"h1",6)(7,"span",7),P(8,"FREEPPING"),b()(),M(9,"div",8),P(10," LOADING STORY MODE... "),b()(),M(11,"div",9)(12,"div",10),U(13,"i",11),b(),M(14,"div",12),P(15," LOADING"),M(16,"span",13),P(17,"..."),b()(),M(18,"div",14),P(19),b()(),M(20,"div",15)(21,"span"),P(22,"TEAM FREEPPING STUDIOS"),b()(),se(23,pQ,2,0,"div",16),b()()),2&i&&(q("@fadeInOut",void 0),I(19),ot(r.progressPercentage),I(4),q("ngIf",r.canSkip))},dependencies:[Kr],styles:[".home-intro[_ngcontent-%COMP%]{background:#0a0a0a;min-height:100vh;color:#fff;display:flex;justify-content:center;align-items:center;position:fixed;top:0;left:0;width:100vw;height:100vh;z-index:10000;overflow:hidden;font-family:Oswald,sans-serif}.home-intro[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px}.home-intro[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#1a1a1a}.home-intro[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#39ff14;border-radius:4px}.home-intro[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#00ffaa}.intro-background[_ngcontent-%COMP%]{position:absolute;inset:0;z-index:0}.intro-background[_ngcontent-%COMP%]   .intro-grid-overlay[_ngcontent-%COMP%]{position:absolute;inset:0;background-image:linear-gradient(rgba(57,255,20,.05) 1px,transparent 1px),linear-gradient(90deg,rgba(57,255,20,.05) 1px,transparent 1px);background-size:50px 50px;opacity:.3}.intro-background[_ngcontent-%COMP%]   .intro-glow[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);width:800px;height:800px;background:radial-gradient(circle,rgba(57,255,20,.1) 0%,transparent 70%);filter:blur(100px);z-index:-1}.intro-content[_ngcontent-%COMP%]{position:relative;z-index:1;text-align:center;width:90%;max-width:800px}.intro-title-container[_ngcontent-%COMP%]{margin-bottom:60px}.intro-main-title[_ngcontent-%COMP%]{font-family:Pricedown,sans-serif;font-size:80px;line-height:1;margin-bottom:20px}.intro-main-title[_ngcontent-%COMP%]   .title-line-1[_ngcontent-%COMP%]{color:#39ff14;display:block;text-shadow:0 0 30px rgba(57,255,20,.5)}.intro-subtitle[_ngcontent-%COMP%]{font-size:18px;color:#b0b0b0;line-height:1.6;margin-top:20px;letter-spacing:2px;text-transform:uppercase}.intro-loading[_ngcontent-%COMP%]{background:rgba(26,26,26,.8);-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border-radius:20px;border:2px solid rgba(57,255,20,.3);padding:40px;margin-bottom:40px;box-shadow:0 20px 60px #00000080;display:flex;flex-direction:column;align-items:center;gap:30px}.loading-spinner[_ngcontent-%COMP%]   .spinning-icon[_ngcontent-%COMP%]{font-size:60px;color:#39ff14;animation:_ngcontent-%COMP%_spinDisc 2s linear infinite;filter:drop-shadow(0 0 10px rgba(57,255,20,.7))}.loading-text[_ngcontent-%COMP%]{font-size:32px;color:#fff;letter-spacing:3px;text-transform:uppercase;font-weight:600}.loading-text[_ngcontent-%COMP%]   .loading-dots[_ngcontent-%COMP%]{color:#39ff14;animation:_ngcontent-%COMP%_dotsPulse 1.5s infinite}.loading-percent[_ngcontent-%COMP%]{font-family:Pricedown,sans-serif;font-size:48px;color:#39ff14;font-weight:700;text-shadow:0 0 20px rgba(57,255,20,.5)}.intro-team[_ngcontent-%COMP%]{margin-top:40px;padding-top:20px;border-top:1px solid rgba(255,255,255,.1)}.intro-team[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:16px;color:#888;letter-spacing:3px;text-transform:uppercase}.intro-skip[_ngcontent-%COMP%]{margin-top:30px;font-size:14px;color:#666;letter-spacing:2px;text-transform:uppercase;animation:_ngcontent-%COMP%_pulse 2s infinite;cursor:pointer}.intro-skip[_ngcontent-%COMP%]:hover{color:#39ff14}@keyframes _ngcontent-%COMP%_spinDisc{0%{transform:rotate(0)}to{transform:rotate(360deg)}}@keyframes _ngcontent-%COMP%_dotsPulse{0%,to{opacity:1}50%{opacity:.3}}@keyframes _ngcontent-%COMP%_pulse{0%,to{opacity:.5}50%{opacity:1}}@media (max-width: 1200px){.intro-content[_ngcontent-%COMP%]{max-width:700px}}@media (max-width: 768px){.intro-main-title[_ngcontent-%COMP%]{font-size:60px}.intro-subtitle[_ngcontent-%COMP%]{font-size:16px}.loading-text[_ngcontent-%COMP%]{font-size:24px}.loading-percent[_ngcontent-%COMP%]{font-size:36px}.intro-loading[_ngcontent-%COMP%]{padding:30px}}@media (max-width: 480px){.intro-main-title[_ngcontent-%COMP%]{font-size:48px}.intro-subtitle[_ngcontent-%COMP%]{font-size:14px}.loading-text[_ngcontent-%COMP%]{font-size:20px}.loading-percent[_ngcontent-%COMP%]{font-size:32px}.intro-loading[_ngcontent-%COMP%]{padding:25px}.intro-team[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:14px}}"],data:{animation:[hQ("fadeInOut",[tR(":enter",[aM({opacity:0}),eR("600ms ease-in",aM({opacity:1}))]),tR(":leave",[eR("500ms ease-out",aM({opacity:0}))])])]}})}}return n})();function mQ(n,e){if(1&n){const t=jt();M(0,"app-intro",2),ge("loadingFinished",function(){return Ue(t),Be(Z().onLoadingFinished())}),b()}}function _Q(n,e){1&n&&U(0,"i",24),2&n&&mt("active",e.$implicit.active)}function vQ(n,e){if(1&n&&(M(0,"div",20)(1,"div",21),se(2,_Q,1,2,"i",22),b(),M(3,"div",23),P(4,"WANTED"),b()()),2&n){const t=Z(2);I(2),q("ngForOf",t.getWantedStars())}}function yQ(n,e){if(1&n){const t=jt();Vs(0),U(1,"div",3)(2,"div",4),M(3,"div",5)(4,"button",6),ge("click",function(){return Ue(t),Be(Z().toggleAmbience())}),U(5,"i",7),b(),M(6,"div",8),U(7,"div",9),M(8,"div",10),P(9,"N"),b()(),M(10,"div",11)(11,"div",12),U(12,"div",13),M(13,"div",14),P(14,"HEALTH"),b()(),M(15,"div",15),U(16,"div",13),M(17,"div",14),P(18,"ARMOR"),b()()(),M(19,"div",16),U(20,"i",17),M(21,"span"),P(22),Iu(23,"number"),b()(),se(24,vQ,5,1,"div",18),b(),M(25,"div",19),U(26,"router-outlet"),b(),zs()}if(2&n){const t=Z();I(1),Xr("opacity",t.isCursorActive?"1":"0"),I(1),Xr("opacity",t.isCursorActive?"1":"0"),I(3),mt("fa-volume-up",t.isAmbiencePlaying)("fa-volume-mute",!t.isAmbiencePlaying),I(7),Xr("width",t.health,"%"),I(4),Xr("width",t.armor,"%"),I(6),Ve("$",pE(23,14,t.money),""),I(2),q("ngIf",t.wantedLevel>0)}}let xQ=(()=>{class n{constructor(t,i){this.renderer=t,this.router=i,this.title="FREPPING",this.showIntro=!0,this.health=100,this.armor=75,this.money=24500,this.wantedLevel=0,this.isAiming=!1,this.mouseX=0,this.mouseY=0,this.cursorTypes={default:"gta-default",pointer:"gta-pointer",grab:"gta-grab",aiming:"gta-aiming",loading:"gta-loading"},this.currentCursor="gta-default",this.ambienceAudio=null,this.audioInitialized=!1,this.isCursorActive=!0,this.isAmbiencePlaying=!1,this.isManuallyPaused=!1,this.routerSubscription=this.router.events.subscribe(r=>{r instanceof So&&(window.scrollTo({top:0,behavior:"smooth"}),console.log("Navigation completed, attempting to play ambience..."),setTimeout(()=>{this.attemptAutoplay()},500))})}ngOnInit(){this.initializeGTAMode(),this.startUIAnimations(),this.initializeAudio()}ngOnDestroy(){this.routerSubscription&&this.routerSubscription.unsubscribe(),this.ambienceAudio&&(this.ambienceAudio.pause(),this.ambienceAudio=null)}initializeAudio(){this.ambienceAudio=new Audio,this.ambienceAudio.src="assets/sounds/gta-ambience.mp3",this.ambienceAudio.loop=!0,this.ambienceAudio.volume=.1,this.ambienceAudio.preload="auto",this.ambienceAudio.addEventListener("playing",()=>{this.isAmbiencePlaying=!0,console.log("Ambience started playing")}),this.ambienceAudio.addEventListener("pause",()=>{this.isAmbiencePlaying=!1,console.log("Ambience paused")}),this.ambienceAudio.addEventListener("canplaythrough",()=>{this.audioInitialized=!0,console.log("Audio ready to play")})}attemptAutoplay(){!this.isManuallyPaused&&this.ambienceAudio&&this.audioInitialized&&this.playGTAAmbience()}onMouseMove(t){this.mouseX=t.clientX,this.mouseY=t.clientY,this.updateCursorPosition(),this.isCursorActive=!0,clearTimeout(this.cursorHideTimeout),this.cursorHideTimeout=setTimeout(()=>{this.isCursorActive=!1},3e3),this.checkAimingState(t),!this.isManuallyPaused&&this.ambienceAudio&&this.ambienceAudio.paused&&(Math.abs(t.movementX)>5||Math.abs(t.movementY)>5)&&this.playGTAAmbience()}toggleAmbience(){this.ambienceAudio||this.initializeAudio(),this.ambienceAudio.paused?this.playGTAAmbience().then(()=>{this.isManuallyPaused=!1}).catch(t=>{console.error("Failed to unmute ambience:",t),this.isManuallyPaused=!1}):(this.ambienceAudio.pause(),this.isManuallyPaused=!0)}onClick(t){this.playClickSound(),this.showClickEffect(t),this.isManuallyPaused||this.playGTAAmbience()}playGTAAmbience(){var t=this;return $i(function*(){if(t.ambienceAudio||t.initializeAudio(),t.ambienceAudio&&t.ambienceAudio.paused)try{yield t.ambienceAudio.play(),console.log("Ambience playback started successfully")}catch(i){console.warn("Autoplay blocked by browser:",i),t.showAutoplayHint()}})()}showAutoplayHint(){const t=this.renderer.createElement("div");this.renderer.addClass(t,"gta-autoplay-hint"),this.renderer.setStyle(t,"position","fixed"),this.renderer.setStyle(t,"bottom","20px"),this.renderer.setStyle(t,"left","50%"),this.renderer.setStyle(t,"transform","translateX(-50%)"),this.renderer.setStyle(t,"background","rgba(0, 0, 0, 0.8)"),this.renderer.setStyle(t,"color","#fff"),this.renderer.setStyle(t,"padding","10px 20px"),this.renderer.setStyle(t,"border-radius","5px"),this.renderer.setStyle(t,"font-family",'"Arial", sans-serif'),this.renderer.setStyle(t,"font-size","14px"),this.renderer.setStyle(t,"z-index","9999"),this.renderer.setStyle(t,"border","1px solid #f1c40f");const i=this.renderer.createText("Click anywhere or use the music button to enable sound");this.renderer.appendChild(t,i),this.renderer.appendChild(document.body,t),setTimeout(()=>{document.body.contains(t)&&this.renderer.removeChild(document.body,t)},5e3)}onKeyDown(t){("ShiftRight"===t.code||"ControlRight"===t.code)&&(this.isAiming=!0,this.setCursor(this.cursorTypes.aiming)),"Tab"===t.code&&this.toggleWantedLevel()}onKeyUp(t){("ShiftRight"===t.code||"ControlRight"===t.code)&&(this.isAiming=!1,this.setCursor(this.cursorTypes.default))}onMouseOver(t){const i=t.target;"BUTTON"===i.tagName||i.closest("button")||"A"===i.tagName||i.closest("a")?this.setCursor(this.cursorTypes.pointer):i.classList.contains("draggable")||i.closest(".draggable")?this.setCursor(this.cursorTypes.grab):this.setCursor(this.cursorTypes.default)}initializeGTAMode(){this.renderer.setStyle(document.body,"cursor","none"),this.showLoadingEffect()}setCursor(t){this.currentCursor=t;const i=document.getElementById("gtaCursor");i&&(Object.values(this.cursorTypes).forEach(r=>{this.renderer.removeClass(i,r)}),this.renderer.addClass(i,t))}updateCursorPosition(){const t=document.getElementById("gtaCursor"),i=document.getElementById("gtaAim");t&&(this.renderer.setStyle(t,"left",`${this.mouseX}px`),this.renderer.setStyle(t,"top",`${this.mouseY}px`)),i&&this.isAiming&&(this.renderer.setStyle(i,"left",`${this.mouseX}px`),this.renderer.setStyle(i,"top",`${this.mouseY}px`))}checkAimingState(t){2===t.buttons?(this.isAiming=!0,this.setCursor(this.cursorTypes.aiming)):(this.isAiming=!1,this.currentCursor===this.cursorTypes.aiming&&this.setCursor(this.cursorTypes.default))}toggleWantedLevel(){this.wantedLevel=5===this.wantedLevel?0:this.wantedLevel+1,this.wantedLevel>0&&this.playSirenSound()}getWantedStars(){const t=[];for(let i=1;i<=5;i++)t.push({active:i<=this.wantedLevel});return t}playClickSound(){const t=new Audio;t.src="assets/sounds/gtaclick.wav",t.volume=.3,t.play().catch(()=>{console.log("\x07")})}playSirenSound(){const t=new Audio;t.src="assets/sounds/police-siren.mp3",t.volume=.2,t.play().catch(i=>console.log("Siren audio error:",i))}showLoadingEffect(){this.setCursor(this.cursorTypes.loading),setTimeout(()=>{this.setCursor(this.cursorTypes.default)},1500)}showClickEffect(t){const i=this.renderer.createElement("div");this.renderer.addClass(i,"gta-click-effect"),this.renderer.setStyle(i,"left",`${t.clientX}px`),this.renderer.setStyle(i,"top",`${t.clientY}px`),this.renderer.appendChild(document.body,i),setTimeout(()=>{this.renderer.removeChild(document.body,i)},600)}startUIAnimations(){setInterval(()=>{this.health<100&&(this.health+=.1),this.armor<100&&(this.armor+=.05)},1e3)}onLoadingFinished(){this.showIntro=!1}static{this.\u0275fac=function(i){return new(i||n)(ee(Wr),ee(Hn))}}static{this.\u0275cmp=Ui({type:n,selectors:[["app-root"]],hostBindings:function(i,r){1&i&&ge("mousemove",function(s){return r.onMouseMove(s)},0,L_)("click",function(s){return r.onClick(s)},!1,L_)("keydown",function(s){return r.onKeyDown(s)},!1,Fs)("keyup",function(s){return r.onKeyUp(s)},!1,Fs)("mouseover",function(s){return r.onMouseOver(s)})},decls:2,vars:2,consts:[[3,"loadingFinished",4,"ngIf"],[4,"ngIf"],[3,"loadingFinished"],["id","gtaCursor",1,"gta-cursor"],["id","gtaAim",1,"gta-aim-crosshair"],[1,"gta-ui-overlay"],[1,"gta-music-toggle",3,"click"],[1,"fas"],[1,"gta-radar"],[1,"radar-center"],[1,"radar-north"],[1,"gta-stats"],[1,"stat","health"],[1,"stat-bar"],[1,"stat-label"],[1,"stat","armor"],[1,"gta-money"],[1,"fas","fa-money-bill-wave"],["class","gta-wanted",4,"ngIf"],[1,"app-container"],[1,"gta-wanted"],[1,"wanted-stars"],["class","fas fa-star wanted-star",3,"active",4,"ngFor","ngForOf"],[1,"wanted-label"],[1,"fas","fa-star","wanted-star"]],template:function(i,r){1&i&&(se(0,mQ,1,0,"app-intro",0),se(1,yQ,27,16,"ng-container",1)),2&i&&(q("ngIf",r.showIntro),I(1),q("ngIf",!r.showIntro))},dependencies:[is,Kr,Fv,gQ,YP],styles:['@font-face{font-family:Pricedown;src:url(/assets/fonts/Pricedown.otf) format("opentype");font-weight:400;font-style:normal;font-display:swap}.gta-title[_ngcontent-%COMP%]{font-family:Pricedown,sans-serif;font-size:5rem;color:#000;text-shadow:2px 2px 4px #000000;text-align:center;margin-top:2rem}body[_ngcontent-%COMP%]{font-family:Poppins,sans-serif;background-color:#0b0f0c;color:#f5f5f5;overflow-x:hidden}.btn[_ngcontent-%COMP%]{padding:14px 28px;font-weight:700;letter-spacing:1px;cursor:pointer;border:none;border-radius:4px;transition:all .3s;font-size:16px;text-transform:uppercase}.btn-primary[_ngcontent-%COMP%]{background:#39ff14;color:#000}.btn-primary[_ngcontent-%COMP%]:hover{background:#2ee000;transform:translateY(-2px);box-shadow:0 5px 15px #39ff144d}.btn-outline[_ngcontent-%COMP%]{background:transparent;border:2px solid #39ff14;color:#39ff14}.btn-outline[_ngcontent-%COMP%]:hover{background:rgba(57,255,20,.1)}.btn-orange[_ngcontent-%COMP%]{background:#ff9900;color:#000}.btn-orange[_ngcontent-%COMP%]:hover{background:#e68900}@keyframes _ngcontent-%COMP%_pulse{0%,to{opacity:1}50%{opacity:.5}}.pulse[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_pulse 2s infinite}[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px}[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#111}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#39ff14;border-radius:4px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#2ee000}[_nghost-%COMP%]{cursor:none!important}.gta-cursor[_ngcontent-%COMP%]{position:fixed;width:24px;height:24px;pointer-events:none;z-index:999999;transition:transform .1s ease,opacity .3s ease;transform:translate(-50%,-50%)}.gta-cursor[_ngcontent-%COMP%]:before{content:"";position:absolute;width:100%;height:100%;border:2px solid #39ff14;border-radius:50%;box-shadow:0 0 10px #39ff14;animation:_ngcontent-%COMP%_cursor-pulse 2s infinite}.gta-cursor[_ngcontent-%COMP%]:after{content:"";position:absolute;top:50%;left:50%;width:6px;height:6px;background:#39ff14;border-radius:50%;transform:translate(-50%,-50%);box-shadow:0 0 8px #39ff14}.gta-cursor.gta-pointer[_ngcontent-%COMP%]:before{border-color:#f90;box-shadow:0 0 10px #f90}.gta-cursor.gta-pointer[_ngcontent-%COMP%]:after{background:#ff9900;box-shadow:0 0 8px #f90;transform:translate(-50%,-50%) scale(1.3)}.gta-cursor.gta-grab[_ngcontent-%COMP%]:before{border-color:#00a8ff;box-shadow:0 0 10px #00a8ff;transform:rotate(45deg)}.gta-cursor.gta-grab[_ngcontent-%COMP%]:after{background:#00a8ff;box-shadow:0 0 8px #00a8ff}.gta-cursor.gta-aiming[_ngcontent-%COMP%]{opacity:0}.gta-cursor.gta-loading[_ngcontent-%COMP%]:before{animation:_ngcontent-%COMP%_cursor-loading 1s linear infinite;border-top-color:#f90;border-right-color:#39ff14;border-bottom-color:#f33;border-left-color:#00a8ff}.gta-aim-crosshair[_ngcontent-%COMP%]{position:fixed;width:32px;height:32px;pointer-events:none;z-index:999998;opacity:0;transform:translate(-50%,-50%);transition:opacity .2s ease}.gta-aim-crosshair.active[_ngcontent-%COMP%]{opacity:1}.gta-aim-crosshair[_ngcontent-%COMP%]:before, .gta-aim-crosshair[_ngcontent-%COMP%]:after{content:"";position:absolute;background:#ff3333;box-shadow:0 0 5px #f33}.gta-aim-crosshair[_ngcontent-%COMP%]:before{width:100%;height:2px;top:50%;transform:translateY(-50%)}.gta-aim-crosshair[_ngcontent-%COMP%]:after{width:2px;height:100%;left:50%;transform:translate(-50%)}.gta-ui-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;pointer-events:none;z-index:9999;font-family:Street,Pricedown,sans-serif}.gta-ui-overlay[_ngcontent-%COMP%]   .gta-music-toggle[_ngcontent-%COMP%]{position:absolute;bottom:40px;right:40px;width:60px;height:60px;background:rgba(0,0,0,.8);border:3px solid #ff9900;border-radius:50%;color:#f90;font-size:24px;display:flex;justify-content:center;align-items:center;cursor:pointer;pointer-events:auto;box-shadow:0 0 10px #00000080;transition:all .2s ease;z-index:10000}.gta-ui-overlay[_ngcontent-%COMP%]   .gta-music-toggle[_ngcontent-%COMP%]:hover{background:rgba(255,153,0,.2);box-shadow:0 0 20px #f90;transform:scale(1.1)}.gta-ui-overlay[_ngcontent-%COMP%]   .gta-radar[_ngcontent-%COMP%]{position:absolute;top:20px;right:20px;width:120px;height:120px;background:rgba(0,0,0,.7);border:3px solid #39ff14;border-radius:50%;overflow:hidden}.gta-ui-overlay[_ngcontent-%COMP%]   .gta-radar[_ngcontent-%COMP%]:before{content:"";position:absolute;inset:0;background:conic-gradient(from 0deg,rgba(57,255,20,.3),transparent 30%,transparent 70%,rgba(57,255,20,.3) 100%);animation:_ngcontent-%COMP%_radar-scan 4s linear infinite}.gta-ui-overlay[_ngcontent-%COMP%]   .gta-radar[_ngcontent-%COMP%]   .radar-center[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;width:6px;height:6px;background:#39ff14;border-radius:50%;transform:translate(-50%,-50%);box-shadow:0 0 10px #39ff14}.gta-ui-overlay[_ngcontent-%COMP%]   .gta-radar[_ngcontent-%COMP%]   .radar-north[_ngcontent-%COMP%]{position:absolute;top:10px;left:50%;transform:translate(-50%);color:#39ff14;font-size:14px;font-weight:700;text-shadow:0 0 5px #39ff14}.gta-ui-overlay[_ngcontent-%COMP%]   .gta-stats[_ngcontent-%COMP%]{position:absolute;bottom:100px;left:20px;width:200px}.gta-ui-overlay[_ngcontent-%COMP%]   .gta-stats[_ngcontent-%COMP%]   .stat[_ngcontent-%COMP%]{margin-bottom:15px;position:relative}.gta-ui-overlay[_ngcontent-%COMP%]   .gta-stats[_ngcontent-%COMP%]   .stat[_ngcontent-%COMP%]   .stat-bar[_ngcontent-%COMP%]{height:20px;background:linear-gradient(90deg,#ff3333,#ff9900);border:2px solid #000;box-shadow:3px 3px #00000080;position:relative;overflow:hidden}.gta-ui-overlay[_ngcontent-%COMP%]   .gta-stats[_ngcontent-%COMP%]   .stat[_ngcontent-%COMP%]   .stat-bar[_ngcontent-%COMP%]:after{content:"";position:absolute;inset:0;background:linear-gradient(90deg,transparent,rgba(255,255,255,.3),transparent);animation:_ngcontent-%COMP%_stat-pulse 2s infinite}.gta-ui-overlay[_ngcontent-%COMP%]   .gta-stats[_ngcontent-%COMP%]   .stat[_ngcontent-%COMP%]   .stat-label[_ngcontent-%COMP%]{position:absolute;top:-20px;left:0;color:#39ff14;font-size:12px;text-transform:uppercase;letter-spacing:2px;text-shadow:1px 1px 0 #000}.gta-ui-overlay[_ngcontent-%COMP%]   .gta-stats[_ngcontent-%COMP%]   .stat.armor[_ngcontent-%COMP%]   .stat-bar[_ngcontent-%COMP%]{background:linear-gradient(90deg,#00a8ff,#0097e6)}.gta-ui-overlay[_ngcontent-%COMP%]   .gta-money[_ngcontent-%COMP%]{position:absolute;top:20px;left:20px;background:rgba(0,0,0,.8);border:2px solid #ff9900;padding:10px 15px;color:#f90;font-size:20px;font-weight:700;text-shadow:2px 2px 0 #000;box-shadow:5px 5px #00000080;display:flex;align-items:center;gap:10px;transform:skew(-5deg)}.gta-ui-overlay[_ngcontent-%COMP%]   .gta-money[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:24px;animation:_ngcontent-%COMP%_money-glow 3s infinite}.gta-ui-overlay[_ngcontent-%COMP%]   .gta-wanted[_ngcontent-%COMP%]{position:absolute;top:80px;left:20px;background:rgba(0,0,0,.8);border:2px solid #ff3333;padding:10px;transform:skew(-5deg)}.gta-ui-overlay[_ngcontent-%COMP%]   .gta-wanted[_ngcontent-%COMP%]   .wanted-stars[_ngcontent-%COMP%]{display:flex;gap:8px;margin-bottom:5px}.gta-ui-overlay[_ngcontent-%COMP%]   .gta-wanted[_ngcontent-%COMP%]   .wanted-stars[_ngcontent-%COMP%]   .wanted-star[_ngcontent-%COMP%]{color:#777;font-size:18px;transition:all .3s ease}.gta-ui-overlay[_ngcontent-%COMP%]   .gta-wanted[_ngcontent-%COMP%]   .wanted-stars[_ngcontent-%COMP%]   .wanted-star.active[_ngcontent-%COMP%]{color:#f33;text-shadow:0 0 10px #ff3333;animation:_ngcontent-%COMP%_star-blink 1s infinite}.gta-ui-overlay[_ngcontent-%COMP%]   .gta-wanted[_ngcontent-%COMP%]   .wanted-label[_ngcontent-%COMP%]{color:#fff;font-size:12px;text-transform:uppercase;letter-spacing:2px;text-align:center;font-family:Oswald,sans-serif}.gta-click-effect[_ngcontent-%COMP%]{position:fixed;width:40px;height:40px;border:2px solid #39ff14;border-radius:50%;pointer-events:none;z-index:9999999;transform:translate(-50%,-50%) scale(0);animation:_ngcontent-%COMP%_click-ripple .6s ease-out}.gta-click-effect[_ngcontent-%COMP%]:before{content:"";position:absolute;top:50%;left:50%;width:10px;height:10px;background:#39ff14;border-radius:50%;transform:translate(-50%,-50%);box-shadow:0 0 10px #39ff14}@keyframes _ngcontent-%COMP%_cursor-pulse{0%,to{transform:scale(1);opacity:1}50%{transform:scale(1.1);opacity:.8}}@keyframes _ngcontent-%COMP%_cursor-loading{0%{transform:rotate(0)}to{transform:rotate(360deg)}}@keyframes _ngcontent-%COMP%_radar-scan{0%{transform:rotate(0)}to{transform:rotate(360deg)}}@keyframes _ngcontent-%COMP%_stat-pulse{0%{transform:translate(-100%)}to{transform:translate(100%)}}@keyframes _ngcontent-%COMP%_money-glow{0%,to{filter:drop-shadow(0 0 5px #ff9900)}50%{filter:drop-shadow(0 0 10px #ff9900)}}@keyframes _ngcontent-%COMP%_star-blink{0%,to{opacity:1}50%{opacity:.5}}@keyframes _ngcontent-%COMP%_click-ripple{0%{transform:translate(-50%,-50%) scale(0);opacity:1}to{transform:translate(-50%,-50%) scale(2);opacity:0}}body[_ngcontent-%COMP%]{cursor:none!important}body[_ngcontent-%COMP%]   button[_ngcontent-%COMP%], body[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], body[_ngcontent-%COMP%]   [role=button][_ngcontent-%COMP%], body[_ngcontent-%COMP%]   .clickable[_ngcontent-%COMP%]{position:relative}body[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover:after, body[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover:after, body[_ngcontent-%COMP%]   [role=button][_ngcontent-%COMP%]:hover:after, body[_ngcontent-%COMP%]   .clickable[_ngcontent-%COMP%]:hover:after{content:"";position:absolute;inset:-5px;border:2px solid #39ff14;border-radius:4px;pointer-events:none;animation:_ngcontent-%COMP%_button-glow 1.5s infinite}@keyframes _ngcontent-%COMP%_button-glow{0%,to{box-shadow:0 0 10px #39ff1480}50%{box-shadow:0 0 20px #39ff14cc}}@media (max-width: 768px){.gta-ui-overlay[_ngcontent-%COMP%]   .gta-radar[_ngcontent-%COMP%]{width:80px;height:80px;top:10px;right:10px}.gta-ui-overlay[_ngcontent-%COMP%]   .gta-stats[_ngcontent-%COMP%]{bottom:80px;left:10px;width:150px}.gta-ui-overlay[_ngcontent-%COMP%]   .gta-money[_ngcontent-%COMP%]{top:10px;left:10px;padding:8px 12px;font-size:16px}.gta-ui-overlay[_ngcontent-%COMP%]   .gta-wanted[_ngcontent-%COMP%]{top:60px;left:10px}.gta-cursor[_ngcontent-%COMP%]{width:20px;height:20px}}body[_nghost-%COMP%], body   [_nghost-%COMP%]{-webkit-user-select:none;user-select:none}']})}}return n})(),MQ=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=br({type:n,bootstrap:[xQ]})}static{this.\u0275inj=er({imports:[xG,fQ,Y2,RK]})}}return n})();vG().bootstrapModule(MQ).catch(n=>console.error(n))}},Wt=>{Wt(Wt.s=756)}]);